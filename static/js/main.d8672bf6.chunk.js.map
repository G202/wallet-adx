{"version":3,"sources":["lib/fetch.js","components/common/Button/Button.js","components/common/Chart/Chart.js","components/common/Checkbox/Checkbox.js","helpers/onClickOutside.js","components/common/DropDown/DropDown.js","components/common/Loading/Loading.js","components/common/Segments/Segments.js","components/common/Select/Select.js","components/ToastProvider/ToastProvider.js","hooks/toasts.js","components/common/TextInput/TextInput.js","components/common/NumberInput/NumberInput.js","components/LoginOrSignupForm/LoginOrSignupForm.js","components/EmailLogin/EmailLogin.js","consts/accountPresets.js","components/AddAccount/AddAccount.js","components/Wallet/Dashboard/Protocols/ProtocolsPlaceholder/ProtocolsPlaceholder.js","components/Wallet/Dashboard/Protocols/Protocols.js","components/Wallet/Dashboard/Collectables/CollectablesPlaceholder/CollectablesPlaceholder.js","components/Wallet/Dashboard/Collectables/Collectables.js","consts/networks.js","components/Wallet/Dashboard/Dashboard.js","components/Wallet/TopBar/TopBar.js","components/Wallet/SideBar/SideBar.js","resources/ramp.svg","resources/paytrie.svg","resources/transak.svg","config/index.js","services/providers.js","helpers/popupHelper.js","components/Wallet/Deposit/Providers/Providers.js","resources/ethereum-logo.png","resources/polygon-logo.svg","components/Wallet/Deposit/Deposit.js","components/Wallet/Swap/SushiIframe.js","components/Wallet/Swap/Swap.js","components/Wallet/Transfer/SendPlaceholder/SendPlaceholder.js","components/Wallet/Transfer/Transfer.js","consts/AAVELendingPoolAbi.js","resources/aave.svg","components/Wallet/Earn/Cards/Card/Card.js","components/Wallet/Earn/Cards/AAVECard.js","components/Wallet/Earn/Earn.js","consts/privilegesOptions.js","consts/supportedProtocols.js","hooks/portfolio.js","hooks/walletconnect.js","hooks/relayerData.js","components/Wallet/Security/Security.js","lib/humanReadableTransactions.js","components/common/TxnPreview/TxnPreview.js","components/Wallet/Transactions/Transactions.js","components/Plugins/GnosisSafeApps/GnosisSafeApps.js","consts/ERC721Abi.js","components/Wallet/Collectable/Collectable.js","components/Wallet/Wallet.js","lib/getWallet.js","components/SendTransaction/helpers.js","components/SendTransaction/FeeSelector.js","components/SendTransaction/Actions.js","components/SendTransaction/noRelayer.js","components/SendTransaction/SendTransaction.js","lib/GnosisConnector.js","hooks/notifications.js","App.js","hooks/accounts.js","hooks/network.js","hooks/useGnosisSafe.js","reportWebVitals.js","index.js"],"names":["fetch","require","fetchPost","url","body","a","headers","method","JSON","stringify","r","json","fetchGet","response","status","Error","fetchCaught","params","resp","console","error","errMsg","message","Button","children","small","icon","disabled","onClick","red","title","className","Chart","data","size","useState","hoveredItem","setHoveredItem","colors","height","width","onMouseEnter","item","label","sort","b","value","sortData","startAngle","strokeColor","innerRadius","selectedOffset","legend","toggled","log","style","map","i","backgroundColor","index","length","Math","trunc","Checkbox","props","inputElem","type","checked","required","onChange","useOnClickOutside","ref","handler","useEffect","listener","event","current","contains","target","document","addEventListener","removeEventListener","DropDown","badge","closeOnClick","useRef","transitionRef","isDropDownOpen","setDropDownOpen","CSSTransition","unmountOnExit","in","timeout","classNames","nodeRef","Loading","Segments","defaultValue","segments","setValue","setSegment","useCallback","segment","Select","native","monospace","searchable","items","hiddenTextInput","isOpen","setOpen","search","setSearch","selectedItem","setSelectedItem","filteredItems","filter","toLowerCase","includes","selectItem","find","focus","ev","onInput","src","alt","ToastContext","React","createContext","id","ToastProvider","toasts","setToasts","addToast","content","options","toast","createRef","setTimeout","removeToast","t","Provider","TransitionGroup","href","rel","useToasts","useContext","TextInput","placeholder","info","copy","navigator","clipboard","writeText","NumberInput","min","max","button","onButtonClick","LoginOrSignupForm","action","onAccRequest","inProgress","passConfirmInput","email","passphrase","passphraseConfirm","state","setState","onUpdate","updates","newState","invalid","setCustomValidity","isSignup","additionalOnSignup","backupOptout","additionalInputs","minLength","e","onSubmit","preventDefault","accType","EmailLogin","relayerURL","onAddAccount","requiresEmailConfFor","setRequiresConfFor","err","setErr","setInProgress","onTryDecrypt","identityInfo","meta","primaryKeyBackup","Wallet","fromEncryptedJson","parse","wallet","_id","salt","identityFactoryAddr","baseIdentityAddr","bytecode","quickAccSigner","address","one","signer","select","attemptLogin","ignoreEmailConfirmationRequired","encodeURIComponent","authorization","localStorage","loginSessionKey","errType","requestAuthResp","sessionKey","onLoginUserAction","timer","clearTimeout","importJSONHref","class","inner","color","accountPresets","quickAccManager","feeCollector","quickAccTimelock","TrezorConnect","manifest","appUrl","generateAddress2","getProxyDeployBytecode","AddAccount","signersToChoose","setChooseSigners","addAccErr","setAddAccErr","wrapProgress","fn","wrapErr","createQuickAcc","req","Promise","resolve","firstKeyWallet","createRandom","secondKeySecret","extraEntropy","Date","now","mnemonic","phrase","split","slice","join","secondKeyResp","quickAccountTuple","timelock","two","abiCoder","AbiCoder","accHash","keccak256","encode","privileges","privSlot","identityAddr","getAddress","toString","encrypt","scrypt","N","createResp","success","createFromEOA","addr","hexZeroPad","connectWeb3AndGetAccounts","window","ethereum","request","web3Accs","onEOASelected","addresses","getOwnedByEOAs","eoas","allUniqueOwned","all","signerAddr","Object","entries","forEach","getAccountByAddr","idAddr","then","connectTrezorAndGetAccounts","provider","TrezorSubprovider","trezorConnectClientApi","getAccountsAsync","signerExtra","_initialDerivedKeyInfo","connectLedgerAndGetAccounts","LedgerSubprovider","networkId","ledgerEthereumClientFactoryAsync","ledgerEthereumBrowserClientFactoryAsync","_initialDerivedKeyInfoAsync","addAccount","acc","opts","owned","addFromSignerButtons","backgroundImage","to","ProtocolsPlaceholder","symbol","balance","balanceUSD","Protocols","protocols","assets","tokens","collectionName","img","collectionImg","toFixed","CollectablesPlaceholder","name","image","price","Collectables","collectables","network","tokenId","assetName","assetImg","networks","chainId","rpc","nativeAssetSymbol","explorerUrl","Dashboard","portfolio","setNetwork","chartTokensData","setChartTokensData","chartProtocolsData","setChartProtocolsData","chartType","setChartType","tableType","setTableType","chartSegments","tableSegments","networkDetails","useLayoutEffect","tokensData","Number","total","full","totalProtocols","reduce","curr","protocolsData","requestOtherProtocolsRefresh","isBalanceLoading","truncated","decimals","otherBalances","areProtocolsLoading","TopBar","match","connections","connect","disconnect","onSelectAcc","selectedAcc","accounts","allNetworks","isClipboardGranted","setClipboardGranted","checkPermissions","userAgent","indexOf","permissions","query","allowWithoutGesture","readClipboard","readText","startsWith","uri","prompt","accountsItems","blockies","seed","toDataURL","networksItems","session","peerMeta","icons","x","endsWith","peerId","SideBar","sidebarRef","balanceFontSize","setBalanceFontSize","resizeBalance","balanceFontSizes","charLength","closest","keys","prev","abs","fontSize","activeClassName","ZAPPER_API_KEY","process","SUSHI_SWAP_FRAME","openPayTrie","walletAddress","rightSideLabel","selectedNetwork","URL","w","h","dualScreenLeft","undefined","screenLeft","screenX","dualScreenTop","screenTop","screenY","innerWidth","documentElement","clientWidth","screen","innerHeight","clientHeight","systemZoom","availWidth","left","top","newWindow","open","popupCenter","format","Providers","providers","logo","RAMP_LOGO","fees","limits","currencies","RampInstantSDK","hostAppName","hostLogoUrl","variant","swapAsset","polygon","avalanche","userAddress","hostApiKey","show","openRampNetwork","PAYTRIE_LOGO","TRANSAK_LOGO","transak","transakSDK","apiKey","environment","defaultCryptoCurrency","disableWalletAddressForm","themeColor","redirectURL","hostURL","location","origin","widgetHeight","widgetWidth","init","on","ALL_EVENTS","EVENTS","TRANSAK_ORDER_SUCCESSFUL","orderData","close","openTransak","shouldBeDisabled","Deposit","POLYGON_LOGO","ambireSushi","desc","SushiSwap","gnosisConnect","gnosisDisconnect","iframeRef","app","Swap","SendPlaceholder","ERC20","Interface","crossChainAssets","withRouter","history","addRequest","tokenAddress","useParams","asset","setAsset","amount","setAmount","bigNumberHexAmount","setBigNumberHexAmount","setAddress","setDisabled","assetsItems","addressesItems","selectedAsset","setMaxAmount","balanceRaw","ethers","utils","formatUnits","onAmountChange","bigNumberAmount","parseUnits","toHexString","push","pathname","isAddressValid","test","txn","encodeFunctionData","account","AAVELendingPoolAbi","Card","details","onTokenSelect","onValidate","token","setToken","currentToken","ERC20Interface","ERC20Abi","AAVELendingPool","lendingPoolProvider","RAY","lendingPoolAddress","AAVECard","tokenItems","setTokenItems","setDetails","initPool","getDefaultProvider","lendingPoolProviderContract","Contract","getLendingPool","lendingPoolContract","getReservesList","reserves","availableTokens","reserve","getReserveData","liquidityRate","apr","tokensWithApr","approveToken","ZERO","BigNumber","from","tokenContract","allowance","lt","gt","extraGas","AAVE_ICON","Earn","privilegesOptions","true","false","hidden","visibilityChange","suportedProtocols","getBalances","protocol","msHidden","webkitHidden","lastOtherProcolsRefresh","noop","noopSessionStorage","setSession","getSession","removeSession","SUPPORTED_METHODS","connectors","useWalletConnect","onCallRequest","stateRef","useReducer","requests","ids","dispatch","connectorOpts","connector","WalletConnectCore","cryptoLib","sessionStorage","sessionStart","sessionTimeout","onError","payload","approveSession","wcUri","rejectRequest","killSession","updateConnections","updateSession","wcConnect","URLSearchParams","get","clipboardError","isFirefox","tryReadClipboard","result","runInitEffects","resolveMany","resolution","approveRequest","useRelayerData","isLoading","setLoading","setData","updateData","unloaded","catch","IDENTITY_INTERFACE","Security","onRemoveBtnClicked","key","privLevel","addTransactionToAddRequest","selectedAccount","privList","isQuickAcc","privText","isSelected","ERC20ABI","TRANSFER_SIGHASH","getSighash","getFunction","getTransactionSummary","accountAddr","callSummary","sendSummary","contractKey","contractInfo","verifiedContracts","tokenInfo","nativeAsset","parseInt","decodeFunctionData","pow","parsed","abi","parseTransaction","tokenAddr","args","path","output","amountOutMin","contractNote","recipientNote","getNetworkSymbol","TxnPreview","onDismiss","isFirstFailing","isExpanded","setExpanded","contractName","getContractName","MinedBundle","bundle","Array","isArray","txns","lastTxnSummary","hasFeeMatch","RegExp","identity","submittedAt","txId","Transactions","eligibleRequests","showSendTxns","firstPending","executed","mined","dapps","GnosisSafeApps","selectedApp","setSelectedApp","dapp","ERC721Abi","ERC721","handleUri","replace","Collectable","collectionAddr","owner","description","collection","metadata","setMetadata","recipientAddress","setRecipientAddress","isTransferDisabled","setTransferDisabled","fetchMetadata","contract","ownerOf","tokenURI","jsonUrl","routes","component","wallets","getWallet","getWalletNew","providerTrezor","hdKey","HDNode","fromExtendedKey","xpub","derivationPath","baseDerivationPath","getInitialDerivedKeyInfo","signMessage","hash","signPersonalMessageAsync","hexlify","signTransaction","signTransactionAsync","Web3Provider","getSigner","isTokenEligible","speed","estimation","isStable","feeInUSD","feeInNative","getFeePaymentConsequences","multiplier","addedGas","gasLimit","mapTxnErrMsg","msg","getErrHint","SPEEDS","FeeSelector","setEstimation","feeSpeed","setFeeSpeed","insufficientFee","selectedFeeToken","remainingFeeTokenBalances","FailingTxn","tooltip","feeCurrencySelect","marginTop","feeAmountSelectors","Actions","approveTxn","rejectTxn","signingStatus","code","quickAccCredentials","setQuickAccCredentials","form","rejectButton","signButtonLabel","quickAcc","confCodeRequired","pattern","autoComplete","maxLength","checkValidity","IdentityInterface","FactoryInterface","sendNoRelayer","finalBundle","getCode","getNonce","sign","signature","estimateGas","toNumber","floor","getTransactionCount","gas","gasPrice","nonce","sendTransaction","signed","getNetwork","SendTransaction","replacementBundle","useMemo","Bundle","requestIds","makeBundle","SendTransactionWithBundle","setSigningStatus","unmounted","reestimate","estimate","estimateNoRelayer","eligibleToken","intvl","setInterval","clearInterval","getFinalBundle","feeToken","toHexAmount","amnt","round","feeTxn","approveTxnImpl","submit","approveTxnImplQuickAcc","pwd","alert","signatureTwo","firstFailing","blockExplorerUrl","bundleResult","GnosisConnector","_iframeRef","_app","this","handlers","isValidMessage","source","parent","sentFromIframe","knownMethod","values","Methods","canHandleMessage","Boolean","send","requestId","sdkVersion","getSDKVersion","MessageFormatter","makeErrorResponse","makeResponse","contentWindow","postMessage","handleIncomingMessage","validMessage","hasHandler","clear","currentNotifs","hasOwnProperty","AppInner","useHistory","accs","setAccounts","initialSelectedAcc","setSelectedAcc","selected","existingIdx","findIndex","useAccounts","defaultNetwork","n","setNetworkId","networkNameOrKey","useNetwork","wcRequests","wcResolveMany","verbose","uniqueId","getTime","setRequests","getSafeInfo","safeAddress","owners","threshold","rpcCall","call","callTx","getBalance","getBlockNumber","getBlockWithTransactions","getBlock","getTransaction","getTransactionReceipt","sendTransactions","txs","forwardId","prevRequests","getTxBySafeTxHash","safeTxHash","res","replyData","useGnosisSafe","gnosisRequests","gnosisResolveMany","currentNetwork","setBalanceLoading","setProtocolsLoading","tokensByNetworks","setTokensByNetworks","otherProtocolsByNetworks","setOtherProtocolsByNetworks","setBalance","setOtherBalances","setTokens","setProtocols","setCollectables","fetchTokens","supportedProtocols","failedRequests","requestsCount","products","updatedTokens","updatedNetworks","fetchOtherProtocols","flat","updatedProtocols","protocolsByNetworks","refreshTokensIfVisible","loadBalance","loadProtocols","balanceByNetworks","toLocaleString","otherProtocols","refreshInterval","usePortfolio","internalRequests","setInternalRequests","Notification","permission","requestPermission","notification","requireInteraction","onclick","useNotifications","sendTxnsShowing","setSendTxnsShowing","reqs","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d8672bf6.chunk.js","sourcesContent":["export const fetch = require('node-fetch')\n\nexport async function fetchPost (url, body) {\n\tconst r = await fetch(url, {\n\t\theaders: { 'content-type': 'application/json' },\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(body)\n\t})\n\treturn r.json()\n}\n\nexport const fetchGet = async url => {\n  const response = await fetch(url, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (response.status !== 200) throw new Error('Failed to fetch')\n  return response.json()\n}\n\nexport async function fetchCaught (url, params) {\n    let resp\n    try {\n      resp = await fetch(url, params)\n    } catch (e) {\n      console.error(e)\n      return { errMsg: `Unexpected error: ${e && e.message}` }\n    }\n    let body\n    try {\n      body = await resp.json()\n    } catch(e) {\n      console.error(e)\n      return { errMsg: `Unexpected error: ${resp.status}, ${e && e.message}`, resp }\n    }\n    return { body, resp, errMsg: '' }\n}","import './Button.scss'\n\nconst Button = ({ children, small, icon, disabled, onClick, red, title }) => {\n    return (\n        <button onClick={onClick} className={`buttonComponent ${small ? 'small' : ''} ${red ? 'red' : ''}`} disabled={disabled} title={title}>\n            { icon ? <div className=\"icon-button\">{ icon }</div> : null }\n            { children }\n        </button>\n    )\n}\n\nexport default Button\n","import './Chart.scss';\n\nimport DonutChart from \"react-donut-chart\";\nimport { useState } from 'react';\n\nconst Chart = ({ data, size }) => {\n    const [hoveredItem, setHoveredItem] = useState({});\n\n    const colors = [\n        \"#AA6AFF\",\n        \"#80FFDB\",\n        \"#8088FF\",\n        \"#E680FF\",\n        \"#A5FF80\",\n        \"#E6FF80\",\n        \"#FFC480\",\n        \"#FF8080\",\n    ];\n    \n    const strokeColor = \"transparent\";\n    const innerRadius = 0.5;\n    const selectedOffset = 0.05;\n\n    const onMouseEnter = (item) => {\n        setHoveredItem(item.label);\n    };\n\n    const onClick = (item, toggled) => {\n        if (toggled) {\n            console.log(item);\n        }\n    };\n\n    const sortData = data => {\n        return data.sort((a, b) => b.value - a.value);\n    };\n\n    const getItemColor = index => {\n        const colorCount = colors.length - 1;\n        return index > colorCount ? colors[index - (colors.length * Math.trunc(index / colors.length))] : colors[index];\n    };\n\n    return (\n        <div className=\"chart\">\n            <DonutChart\n                className=\"donut\"\n                height={size}\n                width={size}\n                onMouseEnter={(item) => onMouseEnter(item)}\n                data={sortData(data)}\n                colors={colors}\n                startAngle={-90}\n                strokeColor={strokeColor}\n                innerRadius={innerRadius}\n                selectedOffset={selectedOffset}\n                legend={false}\n                onClick={(item, toggled) => onClick(item, toggled)}\n            />\n            <div className=\"legend\" style={{height: size}}>\n                {\n                    data.map((item, i) => (\n                        <div className={`item ${hoveredItem === item.label ? 'active' : ''}`} key={item.label}>\n                            <div className=\"color\" style={{backgroundColor: getItemColor(i)}}/>\n                            <label>{ item.label }</label>\n                            <div className=\"separator\"></div>\n                            <div className=\"percent\">\n                                { item.value }%\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default Chart;","import React from 'react';\nimport './Checkbox.scss'\n\nfunction Checkbox(props) {\n    const inputElem =  (\n        <input type=\"checkbox\" checked={props.checked} required={props.required} onChange={props.onChange}/>\n    )\n\n    return props.label ? (<label className=\"checkbox-container\">\n        {inputElem}\n        <div className=\"checkbox-mark\"></div>\n        <div className=\"checkbox-label\">{props.label}</div>\n    </label>) : (<>\n        {inputElem}\n        <div className=\"checkbox-mark\"></div>\n    </>)\n}\n\nexport { Checkbox as default }","import { useEffect } from 'react';\n\nexport default function useOnClickOutside(ref, handler) {\n    useEffect(\n        () => {\n            const listener = (event) => {\n                if (!ref.current || ref.current.contains(event.target)) {\n                    return;\n                }\n                handler(event);\n            };\n            document.addEventListener(\"mousedown\", listener);\n            document.addEventListener(\"touchstart\", listener);\n                return () => {\n                    document.removeEventListener(\"mousedown\", listener);\n                    document.removeEventListener(\"touchstart\", listener);\n                };\n        },\n        [ref, handler]\n    );\n}","import './DropDown.scss'\n\nimport { useRef, useState } from 'react';\nimport { BsChevronDown } from 'react-icons/bs'\nimport { CSSTransition } from 'react-transition-group';\nimport useOnClickOutside from '../../../helpers/onClickOutside';\n\nexport default function DropDown({ children, title, badge, closeOnClick }) {\n    const ref = useRef();\n    const transitionRef = useRef();\n    const [isDropDownOpen, setDropDownOpen] = useState(false);\n\n    useOnClickOutside(ref, () => setDropDownOpen(false));\n\n    return (\n        <div className=\"dropdown\" ref={ref}>\n            <div className=\"content\" onClick={() => setDropDownOpen(!isDropDownOpen)}>\n                <div className=\"title\">{ title }</div>\n                {\n                    badge ? \n                        <div className=\"badge\">\n                            { badge > 9 ? '9+' : badge }\n                        </div>\n                        :\n                        null\n                }\n                <div className={`handle ${isDropDownOpen ? 'open' : ''}`}>\n                    <BsChevronDown size={20}></BsChevronDown>\n                </div>\n            </div>\n            <CSSTransition unmountOnExit in={isDropDownOpen} timeout={200} classNames=\"fade\" nodeRef={transitionRef}>\n                <div className=\"list\" ref={transitionRef} onClick={closeOnClick ? () => setDropDownOpen(false) : null}>\n                    { children }\n                </div>\n            </CSSTransition>\n        </div>\n    )\n}","import './Loading.scss';\n\nimport { AiOutlineLoading } from 'react-icons/ai';\n\nconst Loading = () => {\n    return (\n        <div className=\"loading\">\n            <div className=\"icon\">\n                <AiOutlineLoading size={35}/>\n            </div>\n        </div>\n    );\n};\n\nexport default Loading;","import { useCallback, useEffect, useState } from 'react'\nimport './Segments.scss'\n\nconst Segments = ({ small, defaultValue, segments, onChange }) => {\n    const [value, setValue] = useState(defaultValue);\n\n    const setSegment = useCallback(value => {\n        setValue(value)\n        onChange(value)\n    }, [onChange])\n\n    useEffect(() => {\n        setSegment(defaultValue)\n    }, [defaultValue, setSegment])\n\n    return (\n        <div className={`segments ${small ? 'small': ''}`}>\n            {\n                segments.map(segment => (\n                    <div className={`segment ${segment.value === value ? 'active' : ''}`} key={segment.value} onClick={() => setSegment(segment.value)}>\n                        {\n                            segment.icon ?\n                                <div className=\"icon\">{ segment.icon }</div>\n                                :\n                                null\n                        }\n                        { segment.value }\n                    </div>\n                ))\n            }\n        </div>\n    )\n}\n\nexport default Segments","import './Select.scss';\n\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { BsChevronDown } from 'react-icons/bs'\nimport { CSSTransition } from 'react-transition-group';\nimport useOnClickOutside from '../../../helpers/onClickOutside';\n\nconst Select = ({ children, native, monospace, searchable, disabled, label, defaultValue, items, onChange }) => {\n    const ref = useRef();\n    const hiddenTextInput = useRef();\n    const transitionRef = useRef();\n    const [isOpen, setOpen] = useState();\n    const [search, setSearch] = useState('');\n    const [selectedItem, setSelectedItem] = useState({\n        label: null,\n        value: null,\n        icon: null,\n    });\n\n    const filteredItems = search.length ? items.filter(({ label }) => label.toLowerCase().includes(search.toLowerCase())) : items\n\n    const selectItem = useCallback(item => {\n        setSelectedItem(item);\n        onChange(item.value);\n    }, [onChange])\n\n    useEffect(() => {\n        if (items.length) selectItem(items.find(item => item.value === defaultValue) || items[0])\n    }, [defaultValue, items, selectItem]);\n\n    useEffect(() => {\n        if (isOpen && searchable) {\n            hiddenTextInput.current.focus()\n            setSearch('')\n        }\n    }, [isOpen, searchable])\n\n    useOnClickOutside(ref, () => setOpen(false));\n\n    return (\n        !native ? \n            <div className={`select ${monospace ? 'monospace': ''} ${disabled ? 'disabled' : ''}`} onClick={() => setOpen(!isOpen)} ref={ref}>\n                {\n                    searchable ? \n                        <input type=\"text\" className=\"search-input\" disabled={disabled} value={search} ref={hiddenTextInput} onInput={({ target }) => setSearch(target.value)}/>\n                        :\n                        null\n                }\n                {\n                    label ? \n                        <label>{ label }</label>\n                        :\n                        null\n                }\n                {\n                    selectedItem ? \n                        <div className=\"input\">\n                            <div className=\"icon\">\n                                {\n                                    selectedItem.icon ? \n                                        <img src={selectedItem.icon} alt=\"Icon\" />\n                                        :\n                                        null\n                                }\n                            </div>\n                            { selectedItem.label || selectedItem.value }\n                            <div className=\"separator\"></div>\n                            <div className={`handle ${isOpen ? 'open' : ''}`}>\n                                <BsChevronDown size={20}></BsChevronDown>\n                            </div>\n                            {\n                                <CSSTransition unmountOnExit in={isOpen} timeout={200} classNames=\"fade\" nodeRef={transitionRef}>\n                                    <div className=\"list\" ref={transitionRef}>\n                                        {\n                                            filteredItems.map(item => (\n                                                <div className={`option ${item.value === selectedItem.value ? 'active' : ''}`} key={item.value} onClick={() => selectItem(item)}>\n                                                    <div className=\"icon\">\n                                                        {\n                                                            item.icon ? \n                                                                <img src={item.icon} alt=\"Icon\" />\n                                                                :\n                                                                null\n                                                        }\n                                                    </div>\n                                                    { item.label || item.value }\n                                                </div>\n                                            ))\n                                        }\n                                        { children }\n                                    </div>\n                                </CSSTransition>\n                            }\n                        </div>\n                        :\n                        null\n                }\n            </div>\n            :\n            <select className=\"select\" disabled={disabled} onChange={ev => onChange(ev.target.value)} defaultValue={defaultValue}>\n                {\n                    items.map(item => (\n                        <option key={item.value} value={item.value}>\n                            { item.label || item.value }\n                        </option>\n                    ))\n                }\n            </select>\n    );\n};\n\nexport default Select;","import './ToastProvider.scss';\n\nimport React, { createRef, useState } from \"react\";\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport { useCallback } from 'react';\n\nconst ToastContext = React.createContext(null);\n\nlet id = 0\n\nconst ToastProvider = ({ children }) => {\n    const [toasts, setToasts] = useState([]);\n\n    const addToast = useCallback((content, options) => {\n        const { timeout, error, url } = {\n            timeout: 8000,\n            error: false,\n            url: null,\n            ...options\n        }\n\n        const toast = {\n            id: id++,\n            content,\n            error,\n            url,\n            ref: createRef()\n        }\n        \n        setToasts(toasts => [\n            ...toasts,\n            toast\n        ]);\n        setTimeout(() => removeToast(toast.id), timeout);\n    }, [setToasts]);\n\n    const removeToast = id => {\n        setToasts(toasts => toasts.filter(t => t.id !== id));\n    };\n    \n    return (\n        <ToastContext.Provider\n            value={{\n                addToast,\n                removeToast\n            }}\n        >\n            \n                <div id=\"toast-container\">\n                    <TransitionGroup className=\"transition-group\">\n                    {\n                        toasts.map(toast => (\n                            <CSSTransition timeout={200} classNames=\"slide-fade\" key={toast.id} nodeRef={toast.ref}>\n                                <a href={toast.url} target=\"_blank\" rel=\"noreferrer\">\n                                    <div className={`toast ${toast.error ? 'error' : ''}`} ref={toast.ref} onClick={() => removeToast(toast.id)}>\n                                        { toast.content }\n                                    </div>\n                                </a>\n                            </CSSTransition>\n                        ))\n                    }\n                    </TransitionGroup>\n                </div>\n            \n            { children }\n        </ToastContext.Provider>\n    );\n};\n\nexport { ToastContext };\nexport default ToastProvider;","import { useContext } from 'react';\nimport { ToastContext } from '../components/ToastProvider/ToastProvider';\n\nconst useToasts = () => {\n    return useContext(ToastContext);\n};\n\nexport { useToasts };","import './TextInput.scss'\n\nimport { MdContentCopy } from 'react-icons/md';\nimport { useToasts } from '../../../hooks/toasts';\n\nexport default function TextInput({ value, placeholder, info, label, disabled, copy, onInput }) {\n    const { addToast } = useToasts();\n\n    const onClick = async () => {\n        await navigator.clipboard.writeText(value);\n        addToast(\"Copied to clipboard!\");\n    };\n\n    return (\n        <div className={`text-input ${copy ? 'copy' : ''}`}>\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"text-input-container\" onClick={copy ? onClick : null}>\n                <input value={value} type=\"text\" placeholder={placeholder} disabled={copy || disabled} onInput={ev => onInput(ev.target.value)}/>\n                {\n                    copy ?\n                        <div className=\"icon\">\n                            <MdContentCopy size={20}/>\n                        </div>\n                        :\n                        null\n                }\n            </div>\n            {\n                info ?\n                    <div className=\"info\">\n                        { info }\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n}","import './NumberInput.scss'\n\nconst NumberInput = ({ disabled, min, max, label, value, button, onButtonClick, onInput }) => {\n    return (\n        <div className={`number-input ${disabled ? 'disabled' : ''}`}>\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"input\">\n                <input type=\"number\" disabled={disabled} value={value} min={min} max={max} onInput={({ target }) => onInput(target.value)}/>\n                {\n                    button ?\n                        <div className=\"button\" onClick={onButtonClick}>\n                            { button }\n                        </div>\n                        :\n                        null\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default NumberInput","import { useState, useRef } from 'react'\nimport { Checkbox } from \"../common\"\n\nexport default function LoginOrSignupForm({ action = 'LOGIN', onAccRequest, inProgress }) {\n    const passConfirmInput = useRef(null)\n    const [state, setState] = useState({\n      email: '', passphrase: '', passphraseConfirm: '', action\n    })\n    const onSubmit = e => {\n      e.preventDefault()\n      onAccRequest({\n        action: state.action,\n        accType: 'QUICK',\n        email: state.email,\n        passphrase: state.passphrase,\n        backupOptout: state.backupOptout,\n      })\n    }\n    const onUpdate = updates => {\n      const newState = { ...state, ...updates }\n      setState(newState)\n      const shouldValidate = newState.action === 'SIGNUP'\n      const invalid = shouldValidate && (\n        newState.passphrase !== newState.passphraseConfirm\n      )\n      // @TODO translation string\n      if (passConfirmInput.current) {\n          passConfirmInput.current.setCustomValidity(invalid ? 'Passphrase must match' : '')\n      }\n    }\n    const minPwdLen = 8\n    const isSignup = state.action === 'SIGNUP'\n    const additionalOnSignup = state.backupOptout ? (\n      <Checkbox label=\"I understand that losing this backup means I will have to trigger account recovery.\" required={true}></Checkbox>\n    ) : (<></>)\n    const additionalInputs = isSignup ?\n      (<>\n        <input\n          ref={passConfirmInput}\n          required\n          minLength={minPwdLen}\n          type=\"password\"\n          placeholder=\"Confirm passphrase\"\n          value={state.passphraseConfirm}\n          onChange={e => onUpdate({ passphraseConfirm: e.target.value })}></input>\n        <Checkbox label=\"I agree to to the Terms of Use and Privacy policy.\" required={true}></Checkbox>\n        <Checkbox label=\"Backup on Ambire Cloud.\" checked={!state.backupOptout} onChange={e => onUpdate({ backupOptout: !e.target.checked })}></Checkbox>\n        {additionalOnSignup}\n      </>) : (<></>)\n\n    return (\n      <form onSubmit={onSubmit}>\n        <input type=\"email\" required placeholder=\"Email\" value={state.email} onChange={e => onUpdate({ email: e.target.value })}></input>\n        <input type=\"password\" required minLength={minPwdLen} placeholder=\"Passphrase\" value={state.passphrase} onChange={e => onUpdate({ passphrase: e.target.value })}></input>\n        {additionalInputs}\n        <input type=\"submit\" disabled={inProgress} value={isSignup ?\n          (inProgress ? \"Signing up...\" : \"Sign up\")\n          : (inProgress ? \"Logging in...\" : \"Log in\")}></input>\n      </form>\n    )\n}\n","import './EmailLogin.scss'\n\nimport { useState, useEffect } from 'react'\nimport { MdEmail } from 'react-icons/md'\nimport { Wallet } from 'ethers'\n\nimport { fetch, fetchCaught } from '../../lib/fetch'\n\nimport LoginOrSignup from '../LoginOrSignupForm/LoginOrSignupForm'\n\n// NOTE: the same polling that we do here with the setEffect should be used for txns\n// that require email confirmation\nexport default function EmailLogin({ relayerURL, onAddAccount }) {\n    const [requiresEmailConfFor, setRequiresConfFor] = useState(null)\n    const [err, setErr] = useState('')\n    const [inProgress, setInProgress] = useState(false)\n  \n    const EMAIL_VERIFICATION_RECHECK = 3000\n  \n    const onTryDecrypt = async (identityInfo, passphrase) => {\n      if (!identityInfo.meta.primaryKeyBackup) {\n        setErr('No account key backup: you either disabled email login or you have to import it from JSON')\n        return\n      }\n      // NOTE: fromEncryptedJson can give us the exact progress,\n      // but for now we're handling this simply by showing progress in a different way (button shows 'Logging in...')\n      try {\n        const wallet = await Wallet.fromEncryptedJson(JSON.parse(identityInfo.meta.primaryKeyBackup), passphrase)\n        const { _id, salt, identityFactoryAddr, baseIdentityAddr, bytecode } = identityInfo\n        const { quickAccSigner } = identityInfo.meta\n        if (wallet.address !== quickAccSigner.one) {\n            setErr('Decrypted wallet address does not match quick account')\n            return\n        }\n        onAddAccount({\n          id: _id,\n          email: identityInfo.meta.email,\n          primaryKeyBackup: identityInfo.meta.primaryKeyBackup,\n          salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n          signer: quickAccSigner\n        }, { select: true })\n      } catch (e) {\n        if (e.message.includes('invalid password')) setErr('Invalid passphrase')\n        else {\n          setErr(`Unexpected login error: ${e.message}`)\n          console.error(e)\n        }\n      }\n    }\n  \n    const attemptLogin = async ({ email, passphrase }, ignoreEmailConfirmationRequired) => {\n      // try by-email first: if this returns data we can just move on to decrypting\n      // does not matter which network we request\n      const { resp, body, errMsg } = await fetchCaught(`${relayerURL}/identity/by-email/${encodeURIComponent(email)}`, { headers: {\n          authorization: localStorage.loginSessionKey ? `Bearer ${localStorage.loginSessionKey}` : null\n      } })\n      if (errMsg) {\n        setErr(errMsg)\n        return\n      }\n    \n      if (resp.status === 401 && body.errType === 'UNAUTHORIZED') {\n        if (ignoreEmailConfirmationRequired) {\n          // we still have to call this to make sure the state is consistent and to force a re-render (to trigger the effect again)\n          setRequiresConfFor({ email, passphrase })\n          return\n        }\n        const requestAuthResp = await fetch(`${relayerURL}/identity/by-email/${encodeURIComponent(email)}/request-confirm-login`, { method: 'POST' })\n        if (requestAuthResp.status !== 200) {\n          setErr(`Email confirmation needed but unable to request: ${requestAuthResp.status}`)\n          return\n        }\n        localStorage.loginSessionKey = (await requestAuthResp.json()).sessionKey\n        setRequiresConfFor({ email, passphrase })\n        return\n      }\n      // If we make it beyond this point, it means no email confirmation will be required\n      // however, we're putting `setRequiresConfFor(null)` after onTryDecrypt in order to wait for the decryption period\n      if (resp.status === 404 && body.errType === 'DOES_NOT_EXIST') {\n        setRequiresConfFor(null)\n        setErr('Account does not exist')\n        return\n      }\n  \n      if (resp.status === 200) {\n        await onTryDecrypt(body, passphrase)\n      } else {\n        setErr(body.message ? `Relayer error: ${body.message}` : `Unknown no-message error: ${resp.status}`)\n      }\n      setRequiresConfFor(null)\n    }\n  \n    const onLoginUserAction = async ({ email, passphrase }) => {\n      setErr('')\n      setRequiresConfFor(null)\n      setInProgress(true)\n      try {\n        await attemptLogin({ email, passphrase })\n      } catch (e) {\n          setErr(`Unexpected error: ${e.message || e}`)\n      }\n      setInProgress(false)\n    }\n  \n    // try logging in once after EMAIL_VERIFICATION_RECHECK\n    useEffect(() => {\n      if (requiresEmailConfFor) {\n        const timer = setTimeout(async () => {\n            setInProgress(true)\n            await attemptLogin(requiresEmailConfFor, true)\n            setInProgress(false)\n        }, EMAIL_VERIFICATION_RECHECK)\n        return () => clearTimeout(timer)\n      }\n    })\n\n    // @TODO import from JSON; maybe without a URL, as we'll just pop a file selector and then import the JSON\n    const importJSONHref = `/#/json-import`\n\n    if (!relayerURL) {\n        return (<section className=\"loginSignupWrapper\" id=\"emailLoginSection\">\n            <div id=\"logo\"/>\n            <h3 class=\"error\">Email login not supported without the relayer.</h3>\n            <a href={importJSONHref}><button>Import JSON</button></a>\n        </section>)\n    }\n\n    const inner = requiresEmailConfFor ?\n      (<div id=\"loginEmail\" className=\"emailConf\">\n        <h3><MdEmail size={25} color=\"white\"/>Email confirmation required</h3>\n        <p>This is the first log-in from this browser, email confirmation is required.<br/><br/>\n        We sent an email to {requiresEmailConfFor.email}, please check your inbox and click \"Confirm\".\n        </p>\n        {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n      </div>)\n      : (<div id=\"loginEmail\">\n        <LoginOrSignup onAccRequest={onLoginUserAction} inProgress={inProgress}></LoginOrSignup>\n  \n        {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n  \n        <a href=\"/#/\">I forgot my passphrase</a>\n        <a href={importJSONHref}>Import JSON</a>\n      </div>)\n      \n    return (\n      <section className=\"loginSignupWrapper\" id=\"emailLoginSection\">\n      <div id=\"logo\"/>\n      {inner}\n    </section>\n    )\n  }","// @TODO update those pre-launch\n// NOTE: those should only apply to new accounts, never for existing accounts, since some existing accounts may be on older versions of those\nconst accountPresets = {\n    salt: '0x0000000000000000000000000000000000000000000000000000000000000001',\n    identityFactoryAddr: '0xBf07a0Df119Ca234634588fbDb5625594E2a5BCA',\n    baseIdentityAddr: '0x2A2b85EB1054d6f0c6c2E37dA05eD3E5feA684EF',\n    quickAccManager: '0xfF3f6D14DF43c112aB98834Ee1F82083E07c26BF',\n    feeCollector: '0x942f9CE5D9a33a82F88D233AEb3292E680230348',\n    quickAccTimelock: 259200 // 3 days\n}\nexport default accountPresets","import './AddAccount.scss'\n\nimport { useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport LoginOrSignup from '../LoginOrSignupForm/LoginOrSignupForm'\nimport TrezorConnect from 'trezor-connect'\nimport { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { hexZeroPad, AbiCoder, keccak256, id, getAddress } from 'ethers/lib/utils'\nimport { fetch, fetchPost } from '../../lib/fetch'\nimport accountPresets from '../../consts/accountPresets'\n\nTrezorConnect.manifest({\n  email: 'contactus@ambire.com',\n  appUrl: 'https://www.ambire.com'\n})\n\n\n// @TODO REFACTOR: use import for these\nconst { generateAddress2 } = require('ethereumjs-util')\nconst { getProxyDeployBytecode } = require('adex-protocol-eth/js/IdentityProxyDeploy')\nconst { Wallet } = require('ethers')\n\n// NOTE: This is a compromise, but we can afford it cause QuickAccs require a secondary key\n// Consider more\nconst SCRYPT_ITERATIONS = 131072/8\n\nexport default function AddAccount ({ relayerURL, onAddAccount }) {\n    const [signersToChoose, setChooseSigners] = useState(null)\n    const [err, setErr] = useState('')\n    const [addAccErr, setAddAccErr] = useState('')\n    const [inProgress, setInProgress] = useState(false)\n\n    const wrapProgress = async fn => {\n        setInProgress(true)\n        try {\n            await fn()\n        } catch(e) {\n            console.error(e)\n            setAddAccErr(`Unexpected error: ${e.message || e}`)\n        }\n        setInProgress(false)\n    }\n\n    const wrapErr = async fn => {\n        setAddAccErr('')\n        try {\n            await fn()\n        } catch(e) {\n            console.error(e)\n            setAddAccErr(`Unexpected error: ${e.message || e}`)\n        }\n    }\n\n    const createQuickAcc = async (req) => {\n        setErr('')\n\n        // async hack to let React run a tick so it can re-render before the blocking Wallet.createRandom()\n        await new Promise(resolve => setTimeout(resolve, 0))\n\n        const firstKeyWallet = Wallet.createRandom()\n        // @TODO fix this hack, use another source of randomness\n        // 6 words is 2048**6\n        const secondKeySecret = Wallet.createRandom({\n            extraEntropy: id(req.email+':'+Date.now())\n        }).mnemonic.phrase.split(' ').slice(0, 6).join(' ') + ' ' + req.email\n\n        const secondKeyResp = await fetchPost(`${relayerURL}/second-key`, { secondKeySecret })\n        if (!secondKeyResp.address) throw new Error(`second-key returned no address, error: ${secondKeyResp.message || secondKeyResp}`)\n\n        const { salt, baseIdentityAddr, identityFactoryAddr, quickAccManager, quickAccTimelock } = accountPresets\n        const quickAccountTuple = [quickAccTimelock, firstKeyWallet.address, secondKeyResp.address]\n        const signer = { quickAccManager, timelock: quickAccountTuple[0], one: quickAccountTuple[1], two: quickAccountTuple[2] }\n        const abiCoder = new AbiCoder()\n        const accHash = keccak256(abiCoder.encode(['tuple(uint, address, address)'], [quickAccountTuple]))\n        const privileges = [[quickAccManager, accHash]]\n        const bytecode = getProxyDeployBytecode(baseIdentityAddr, privileges, { privSlot: 0 })\n        const identityAddr = getAddress('0x' + generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex'))\n        const primaryKeyBackup = JSON.stringify(\n            await firstKeyWallet.encrypt(req.passphrase, { scrypt: { N: SCRYPT_ITERATIONS } })\n        )\n\n        const createResp = await fetchPost(`${relayerURL}/identity/${identityAddr}`, {\n            email: req.email,\n            primaryKeyBackup: req.backupOptout ? null : primaryKeyBackup,\n            secondKeySecret,\n            salt, identityFactoryAddr, baseIdentityAddr,\n            privileges,\n            quickAccSigner: signer\n        })\n        if (createResp.message === 'EMAIL_ALREADY_USED') {\n            setErr('An account with this email already exists')\n            return\n        }\n        if (!createResp.success) {\n            console.log(createResp)\n            setErr(`Unexpected sign up error: ${createResp.message || 'unknown'}`)\n            return\n        }\n\n        await onAddAccount({\n            id: identityAddr,\n            email: req.email,\n            primaryKeyBackup,\n            salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n            signer\n        }, { select: true })\n    }\n\n    // EOA implementations\n    // Add or create accounts from Trezor/Ledger/Metamask/etc.\n\n    // @TODO refactor into create with privileges perhaps?\n    // only if we can have the whitelisted* stuff in advance; we can hardcode them\n    async function createFromEOA (addr) {\n        const privileges = [[getAddress(addr), hexZeroPad('0x01', 32)]]\n        const { salt, baseIdentityAddr, identityFactoryAddr } = accountPresets\n        const bytecode = getProxyDeployBytecode(baseIdentityAddr, privileges, { privSlot: 0 })\n        const identityAddr = getAddress('0x' + generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex'))\n\n        if (relayerURL) {\n            const createResp = await fetchPost(`${relayerURL}/identity/${identityAddr}`, {\n                salt, identityFactoryAddr, baseIdentityAddr,\n                privileges\n            })\n            if (!createResp.success && !(createResp.message && createResp.message.includes('already exists'))) throw createResp\n        }\n\n        return {\n            id: identityAddr,\n            salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n            signer: { address: getAddress(addr) }\n        }\n    }\n\n    async function connectWeb3AndGetAccounts () {\n        // @TODO: pending state; should bein the LoginORSignup (AddAccount) component\n        if (typeof window.ethereum === 'undefined') {\n            // @TODO catch this\n            throw new Error('MetaMask not available')\n        }\n        const ethereum = window.ethereum\n        const web3Accs = await ethereum.request({ method: 'eth_requestAccounts' })\n        if (!web3Accs.length) throw new Error('No accounts connected')\n        if (web3Accs.length === 1) return onEOASelected(web3Accs[0])\n        setChooseSigners({ addresses: web3Accs })\n    }\n\n    async function getOwnedByEOAs(eoas) {\n        let allUniqueOwned = {}\n\n        await Promise.all(eoas.map(\n            async signerAddr => {\n                const resp = await fetch(`${relayerURL}/identity/any/by-owner/${signerAddr}?includeFormerlyOwned=true`)\n                const privEntries = Object.entries(await resp.json())\n                // discard the privileges value, we do not need it as we wanna add all accounts EVER owned by this eoa\n                privEntries.forEach(([id, _]) => allUniqueOwned[id] = getAddress(signerAddr))\n            }\n        ))\n\n        return await Promise.all(\n            Object.entries(allUniqueOwned).map(([id, signer]) => getAccountByAddr(id, signer))\n        )\n    }\n\n    async function getAccountByAddr (idAddr, signerAddr) {\n        // In principle, we need these values to be able to operate in relayerless mode,\n        // so we just store them in all cases\n        // Plus, in the future this call may be used to retrieve other things\n        const { salt, identityFactoryAddr, baseIdentityAddr, bytecode } = await fetch(`${relayerURL}/identity/${idAddr}`)\n            .then(r => r.json())\n        if (!(salt && identityFactoryAddr && baseIdentityAddr && bytecode)) throw new Error(`Incomplete data from relayer for ${idAddr}`)\n        return {\n            id: idAddr,\n            salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n            signer: { address: signerAddr }\n        }\n    }\n\n    async function connectTrezorAndGetAccounts () {\n        /*\n        const engine = new Web3ProviderEngine({ pollingInterval: this.pollingInterval })\n        engine.addProvider(new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect, ...this.config }))\n        engine.addProvider(new CacheSubprovider())\n        engine.addProvider(new RPCSubprovider(this.url, this.requestTimeoutMs))\n        */\n        const provider = new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect })\n        const addresses = await provider.getAccountsAsync(50)\n        setChooseSigners({ addresses, signerExtra: {\n            type: 'trezor',\n            info: JSON.parse(JSON.stringify(provider._initialDerivedKeyInfo))\n        } })\n    }\n\n    async function connectLedgerAndGetAccounts () {\n        const provider = new LedgerSubprovider({\n            networkId: 0, // @TODO: is this needed?\n            ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n            //baseDerivationPath: this.baseDerivationPath\n        })\n        // NOTE: do not attempt to do both of these together (await Promise.all)\n        // there is a bug in the ledger subprovider (race condition), so it will think we're trying to make two connections simultaniously\n        // cause one call won't be aware of the other's attempt to connect\n        const addresses = await provider.getAccountsAsync(50)\n        const signerExtra = await provider._initialDerivedKeyInfoAsync().then(info => ({ type: 'ledger', info: JSON.parse(JSON.stringify(info)) }))\n        setChooseSigners({ addresses, signerExtra })\n    }\n\n    async function onEOASelected (addr, signerExtra) {\n        const addAccount = (acc, opts) => onAddAccount({ ...acc, signerExtra }, opts)\n        // when there is no relayer, we can only add the 'default' account created from that EOA\n        // @TODO in the future, it would be nice to do getLogs from the provider here to find out which other addrs we control\n        //   ... maybe we can isolate the code for that in lib/relayerless or something like that to not clutter this code\n        if (!relayerURL) return addAccount(await createFromEOA(addr), { select: true })\n        // otherwise check which accs we already own and add them\n        const owned = await getOwnedByEOAs([addr])\n        if (!owned.length) return addAccount(await createFromEOA(addr), { select: true })\n        else owned.forEach((acc, i) => addAccount(acc , { select: i === 0 }))\n    }\n\n    // The UI for choosing a signer to create/add an account with, for example\n    // when connecting a hardware wallet, it has many addrs you can choose from\n    if (signersToChoose) {\n        return (<div className=\"loginSignupWrapper chooseSigners\">\n            <h3>Choose a signer</h3>\n            <ul id=\"signersToChoose\">\n                {signersToChoose.addresses.map(addr =>\n                    (<li key={addr} onClick={() => wrapErr(() => onEOASelected(addr, signersToChoose.signerExtra))}>{addr}</li>)\n                )}\n            </ul>\n        </div>)\n    }\n\n    // Adding accounts from existing signers\n    // @TODO: progress indicators for those\n    const addFromSignerButtons = (<>\n        <button onClick={() => wrapErr(connectTrezorAndGetAccounts)}><div className=\"icon\" style={{ backgroundImage: 'url(./resources/trezor.png)' }}/>Trezor</button>\n        <button onClick={() => wrapErr(connectLedgerAndGetAccounts)}><div className=\"icon\" style={{ backgroundImage: 'url(./resources/ledger.png)' }}/>Ledger</button>\n        <button onClick={() => wrapErr(connectWeb3AndGetAccounts)}><div className=\"icon\" style={{ backgroundImage: 'url(./resources/metamask.png)' }}/>Metamask / Browser</button>\n    </>)\n\n    if (!relayerURL) {\n        return (<div className=\"loginSignupWrapper\">\n            <div id=\"logo\"/>\n            <section id=\"addAccount\">\n            <div id=\"loginOthers\">\n                <h3>Add an account</h3>\n                {addFromSignerButtons}\n                <h3>NOTE: You can enable email/passphrase login by connecting to a relayer.</h3>\n            </div>\n            </section>\n        </div>)\n    }\n\n    return (<div className=\"loginSignupWrapper\">\n        <div id=\"logo\"/>\n        <section id=\"addAccount\">\n          <div id=\"loginEmail\">\n            <h3>Create a new account</h3>\n            <LoginOrSignup\n                inProgress={inProgress}\n                onAccRequest={req => wrapProgress(() => createQuickAcc(req))}\n                action=\"SIGNUP\"\n            ></LoginOrSignup>\n            {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n          </div>\n    \n          <div id=\"loginSeparator\">\n            <div className=\"verticalLine\"></div>\n            <span>or</span>\n            <div className=\"verticalLine\"></div>\n          </div>\n    \n          <div id=\"loginOthers\">\n            <h3>Add an account</h3>\n            <Link to=\"/email-login\">\n              <button><div className=\"icon\" style={{ backgroundImage: 'url(./resources/envelope.png)' }}/>Email</button>\n            </Link>\n            {addFromSignerButtons}\n            {addAccErr ? (<p className=\"error\">{addAccErr}</p>) : (<></>)}\n          </div>\n        </section>\n      </div>\n    )\n}","import './ProtocolsPlaceholder.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { Button } from '../../../../common'\n\nconst ProtocolsPlaceholder = () => {\n    const tokens = [\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0xade00c28244d5ce17d72e40330b1c318cd12b7c3.png',\n            symbol: 'ADX',\n            balance: 170027.26,\n            balanceUSD: 138880.64\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x0000000000000000000000000000000000000000.png',\n            symbol: 'ETH',\n            balance: 61.77,\n            balanceUSD: 283170.08\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599.png',\n            symbol: 'WBTC',\n            balance: 0.03,\n            balanceUSD: 2227.24\n        },\n    ]\n\n    return (\n        <div id=\"protocols-placeholder\" >\n            <div className=\"placeholder-overlay\">\n                <label>\n                    Welcome! You don't have any funds on this account.\n                </label>\n                <NavLink to=\"/wallet/deposit\">\n                    <Button small icon={<GiReceiveMoney/>}>Deposit</Button>\n                </NavLink>\n            </div>\n            <div className=\"category\">\n                <div className=\"title\">Tokens</div>\n                <div className=\"list\">\n                    {\n                        tokens.map(({ icon, symbol, balance, balanceUSD }) => (\n                            <div className=\"token\" key={symbol}>\n                                <div className=\"icon\">\n                                    <img src={icon} alt=\"Token Icon\"/>\n                                </div>\n                                <div className=\"name\">\n                                    { symbol }\n                                </div>\n                                <div className=\"separator\"></div>\n                                <div className=\"balance\">\n                                    <div className=\"currency\">\n                                        { balance } <span className=\"symbol\">{ symbol }</span>\n                                    </div>\n                                    <div className=\"dollar\">\n                                        <span className=\"symbol\">$</span> { balanceUSD }\n                                    </div>\n                                </div>\n                            </div>\n                        ))\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ProtocolsPlaceholder","import './Protocols.scss'\n\nimport { GiToken } from 'react-icons/gi'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { NavLink } from 'react-router-dom'\nimport { Button } from '../../../common'\nimport ProtocolsPlaceholder from './ProtocolsPlaceholder/ProtocolsPlaceholder'\n\nconst Protocols = ({ protocols }) => {\n    return (\n        <div id=\"protocols-table\">\n            {\n                !protocols.length ?\n                    <ProtocolsPlaceholder/>\n                    :\n                    protocols.map(({ label, assets }, i) => (\n                            <div className=\"category\" key={`category-${i}`}>\n                                <div className=\"title\">{ label }</div>\n                                <div className=\"list\">\n                                    {\n                                        assets.map(({ tokens }) => \n                                            tokens.map(({ label, collectionName, symbol, img, collectionImg, balance, balanceUSD, address }, i) => (\n                                                <div className=\"token\" key={`token-${i}`}>\n                                                    <div className=\"icon\">\n                                                        {\n                                                            img || collectionImg ? \n                                                                <img src={img || collectionImg} alt=\"Token Icon\"/>\n                                                                :\n                                                                <GiToken size={20}/>\n                                                        }\n                                                    </div>\n                                                    <div className=\"name\">\n                                                        { label || collectionName || symbol }\n                                                    </div>\n                                                    <div className=\"separator\"></div>\n                                                    <div className=\"balance\">\n                                                        <div className=\"currency\">\n                                                            { balance } <span className=\"symbol\">{ symbol }</span>\n                                                        </div>\n                                                        <div className=\"dollar\">\n                                                            <span className=\"symbol\">$</span> { balanceUSD.toFixed(2) }\n                                                        </div>\n                                                    </div>\n                                                    <div className=\"actions\">\n                                                        <NavLink to={`/wallet/transfer/${address}`}>\n                                                            <Button small icon={<AiOutlineSend/>}>Send</Button>\n                                                        </NavLink>\n                                                    </div>\n                                                </div>\n                                            ))\n                                        )\n                                    }\n                                </div>\n                            </div>\n                        ))\n            }\n        </div>\n    )\n}\n\nexport default Protocols","import './CollectablesPlaceholder.scss'\n\nconst CollectablesPlaceholder = () => {\n    const collectables = [\n        {\n            collectionName: 'Party Bone',\n            collectionImg: 'https://lh3.googleusercontent.com/ZNc-hDBHOxgioSltBcDvh5hBfWEj623dETJj2nrEC0cLbjuULbo4Ign7OnLDX9qf2XaALrkXsZCRylRqPPHqQgzJOabJg4TRq3MDhA=s2500',\n            name: 'Party Bone #7865',\n            image: 'https://lh3.googleusercontent.com/uznp2aNVNPEhVk4MhLG2Zn-JC2sVaF6PsUcpF_CpyQkgekmv4hh4zbyebsoLFLvkY8PSV6D-TR5OaMp15RhG9zQsYd_AvDCo9SEVF4Q',\n            price: 32.16\n        },\n        {\n            collectionName: 'Pudgy Penguins',\n            collectionImg: 'https://lh3.googleusercontent.com/L9PJp0pOXCscKsTpD1_6zoALxdjG5gIKHLykS_Wk5J_yk590drEqRhM1ElTEZCaWeTjFj2isfxFw2tcFKcbCPlu6-Eu5bUuxsL-x=s2500',\n            name: 'Pudgy Penguin #8675',\n            image: 'https://lh3.googleusercontent.com/J6gQQRnzsMLAOhYiN9qIhogxr2MKn17zfGf6nQFKr3WCZ34thm6H0w9izvnJysxJclsyr8c3yo0hshOaLU73aS-IgTm-CooJb1cw1S0',\n            price: 5675.00\n        },\n        {\n            collectionName: 'Art Blocks Factory',\n            collectionImg: 'https://lh3.googleusercontent.com/sr7Y19-bJwsQsxX6n8Pj5tIaNKdUEotNlfhBsYw8McKpIsYARglTORaNlGhDZ2PrH-tO1vU6tFbpamiWwIImbidhVSh4aoIh4d310Og=s2500',\n            name: 'Transitions #4267',\n            image: 'https://lh3.googleusercontent.com/9MzvH_PSYMvlJE8Cfm5d308ltY5fZx-dooEcQizKgtKZ8g05RvJvd_5LAbqVHIzaoZbM-HOBgNSV8RKvEe_1thkLcQtE4NMMx8Kp5g',\n            price: 263.46\n        },\n        {\n            collectionName: 'Sad Frogs District',\n            collectionImg: 'https://lh3.googleusercontent.com/3U8N73XLrQOQPhJBAMNi7IPR1y3GGJ2zxmyUlit4IHCJURmKFPWClgatjbYfyz9drMk6-XSQTjSFqn7tKL0ZNoRbgvUu8OdLVREA=s2500',\n            name: '1882',\n            image: 'https://lh3.googleusercontent.com/3uwrfkdhHSfWm171BOjJHp3768tbLP9TeyTh2BnvgF6S1nIRI489SFq6EGjI9AISRUeyXXufEjB34Wj0bif_vl-y5h6GesEoJaaZcJg',\n            price: 1563.59\n        },\n        {\n            collectionName: 'GLUEWAVE',\n            collectionImg: 'https://lh3.googleusercontent.com/LheZMF6AyTLPpfwABwAGZqoC0gTWrDlYloDdT2VX2u_GZRZnP-ZpDC90huElm3RXE-eU1d1YluQi8G1uVdeDdysUNLZWJte4jXk3zeY=s2500',\n            name: '000105040307070704',\n            image: 'https://lh3.googleusercontent.com/eP_F_6aa_BXuKfYq1w2aiS6UW3bp4-gByFoeKLMXYuWAkU6Xiyi7mkm31aoewCZ_eG9RAuhas8jxFwXTxAWuxq1E3ZxYg97cLUUE',\n            price: 7107.27\n        }\n    ]\n\n    return (\n        <div id=\"collectables-placeholder\">\n            <div className=\"placeholder-overlay\">\n                You don't have any collectables (NFTs) yet\n            </div>\n            <div id=\"collectables\">\n                {\n                    collectables.map(({ collectionName, collectionImg, name, image, price}) => (\n                        <div className=\"collectable\" key={name}>\n                            <div className=\"artwork\" style={{backgroundImage: `url(${image})`}}/>\n                            <div className=\"info\">\n                                <div className=\"collection\">\n                                    <div className=\"collection-icon\" style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                    { collectionName }\n                                </div>\n                                <div className=\"details\">\n                                    <div className=\"name\">{ name }</div>\n                                    <div className=\"value\"><span className=\"purple-highlight\">$</span> { price }</div>\n                                </div>\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default CollectablesPlaceholder","import './Collectables.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport CollectablesPlaceholder from './CollectablesPlaceholder/CollectablesPlaceholder'\n\nconst Collectables = ({ collectables }) => {\n    return (\n        !collectables.length ?\n            <CollectablesPlaceholder/>\n            :\n            <div id=\"collectables\">\n                {\n                    collectables.map(({ tokens }) => tokens.map(({ network, address, collectionName, collectionImg, assets }) => assets.map(({ tokenId, assetName, assetImg, balanceUSD }) => (\n                        <div className=\"collectable\" key={tokenId}>\n                            <NavLink to={`/wallet/nft/${network}/${address}/${tokenId}`}>\n                                <div className=\"artwork\" style={{backgroundImage: `url(${assetImg})`}}/>\n                                <div className=\"info\">\n                                    <div className=\"collection\">\n                                        <div className=\"collection-icon\" style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                        <span className=\"collection-name\">{ collectionName }</span>\n                                    </div>\n                                    <div className=\"details\">\n                                        <div className=\"name\">{ assetName }</div>\n                                        <div className=\"value\"><span className=\"purple-highlight\">$</span> { balanceUSD.toFixed(2) }</div>\n                                    </div>\n                                </div>\n                            </NavLink>\n                        </div>\n                    ))))\n                }\n            </div>\n    )\n}\n\nexport default Collectables","const networks = [{\n\t\tid: 'ethereum',\n\t\tchainId: 1,\n\t\trpc: 'https://mainnet.infura.io/v3/3d22938fd7dd41b7af4197752f83e8a1',\n\t\tnativeAssetSymbol: 'ETH',\n\t\tname: 'Ethereum',\n\t\ticon: '/resources/networks/ethereum.png',\n\t\texplorerUrl: 'https://etherscan.io'\n\t},  {\n\t\tid: 'polygon',\n\t\tchainId: 137,\n\t\trpc: 'https://polygon-rpc.com/rpc',\n\t\tnativeAssetSymbol: 'MATIC',\n\t\tname: 'Polygon',\n\t\ticon: '/resources/networks/polygon.png',\n\t\texplorerUrl: 'https://polygonscan.com'\n\t}, {\n\t\tid: 'avalanche',\n\t\tchainId: 43114,\n\t\trpc: 'https://api.avax.network/ext/bc/C/rpc',\n\t\tnativeAssetSymbol: 'AVAX',\n\t\tname: 'Avalanche',\n\t\ticon: '/resources/networks/avalanche.png',\n\t\texplorerUrl: 'https://cchain.explorer.avax.network'\n\t}, {\n\t\tid: 'arbitrum',\n\t\tchainId: 42161,\n\t\trpc: 'https://arb1.arbitrum.io/rpc',\n\t\tnativeAssetSymbol: 'AETH',\n\t\tname: 'Arbitrum',\n\t\ticon: '/resources/networks/arbitrum.svg',\n\t\texplorerUrl: 'https://arbiscan.io'\n}]\n\nexport default networks\n","import './Dashboard.scss'\n\nimport { useEffect, useLayoutEffect, useState } from 'react'\n\nimport { Chart, Loading, Segments } from '../../common'\nimport Protocols from './Protocols/Protocols'\nimport Collectables from './Collectables/Collectables'\nimport networks from '../../../consts/networks'\n\nexport default function Dashboard({ portfolio, setNetwork }) {\n    const [chartTokensData, setChartTokensData] = useState([]);\n    const [chartProtocolsData, setChartProtocolsData] = useState([]);\n    const [chartType, setChartType] = useState([]);\n    const [tableType, setTableType] = useState([]);\n\n    const chartSegments = [\n        {\n            value: 'Tokens'\n        },\n        {\n            value: 'Protocols'\n        }\n    ]\n\n    const tableSegments = [\n        {\n            value: 'Tokens'\n        },\n        {\n            value: 'Collectables'\n        }\n    ]\n\n    const networkDetails = (network) => networks.find(({ id }) => id === network)\n\n    useLayoutEffect(() => {\n        const tokensData = portfolio.tokens\n            .map(({ label, balanceUSD }) => ({\n                label,\n                value: Number(((balanceUSD / portfolio.balance.total.full) * 100).toFixed(2))\n            }))\n            .filter(({ value }) => value > 0);\n\n        const totalProtocols = portfolio.protocols.map(({ assets }) => \n            assets\n                .map(({ balanceUSD }) => balanceUSD)\n                .reduce((acc, curr) => acc + curr, 0))\n            .reduce((acc, curr) => acc + curr, 0)\n\n        const protocolsData = portfolio.protocols\n            .map(({ label, assets }) => ({\n                label,\n                value: Number(((assets.map(({ balanceUSD }) => balanceUSD).reduce((acc, curr) => acc + curr, 0) / totalProtocols) * 100).toFixed(2))\n            }))\n            .filter(({ value }) => value > 0)\n\n        setChartTokensData(tokensData);\n        setChartProtocolsData(protocolsData)\n    }, [portfolio.balance, portfolio.tokens, portfolio.protocols]);\n\n    useEffect(() => portfolio.requestOtherProtocolsRefresh(), [portfolio])\n\n    return (\n        <section id=\"dashboard\">\n            <div id=\"overview\">\n                <div id=\"balance\" className=\"panel\">\n                    <div className=\"title\">Balance</div>\n                    <div className=\"content\">\n                        {\n                            portfolio.isBalanceLoading ? \n                                <Loading/>\n                                :\n                                <div id=\"total\">\n                                    <span className=\"green-highlight\">$</span> { portfolio.balance.total.truncated }\n                                    <span className=\"green-highlight\">.{ portfolio.balance.total.decimals }</span>\n                                    <div id=\"other-balances\">\n                                        {\n                                            portfolio.otherBalances.map(({ network, total }) => (\n                                                total.full > 0 ?\n                                                    <div className=\"other-balance\" key={network} onClick={() => setNetwork(network)}>\n                                                        You also have <span className=\"purple-highlight\">$</span> { total.truncated }\n                                                        <span className=\"purple-highlight\">.{total.decimals}</span> on { networkDetails(network).name }\n                                                    </div>\n                                                    :\n                                                    null\n                                            ))\n                                        }\n                                    </div>\n                                </div>\n                        }\n                    </div>\n                </div>\n                <div id=\"chart\" className=\"panel\">\n                    <div className=\"title\">\n                        Balance by\n                        <Segments small defaultValue={chartSegments[0].value} segments={chartSegments} onChange={setChartType}/>\n                    </div>\n                    <div className=\"content\">\n                        {\n                            chartType === chartSegments[0].value ?\n                                portfolio.isBalanceLoading ?\n                                    <Loading/>\n                                    :\n                                    <Chart data={chartTokensData} size={200}/>\n                                :\n                                portfolio.areProtocolsLoading ?\n                                    <Loading/>\n                                    :\n                                    <Chart data={chartProtocolsData} size={200}/>\n                        }\n                    </div>\n                </div>\n            </div>\n            <div id=\"table\" className=\"panel\">\n                <div className=\"title\">\n                    Assets\n                    <Segments small defaultValue={tableSegments[0].value} segments={tableSegments} onChange={setTableType}></Segments>\n                </div>\n                <div className=\"content\">\n                    {\n                        portfolio.areProtocolsLoading ?\n                            <Loading/>\n                            :\n                            tableType === tableSegments[0].value ?\n                                <Protocols protocols={portfolio.protocols}/>\n                                :\n                                <Collectables collectables={portfolio.collectables}/>\n                    }\n                </div>\n                {\n                    portfolio.areProtocolsLoading || !portfolio.protocols.length ?\n                        null\n                        :\n                        <div className=\"powered\">\n                            Powered by Zapper\n                        </div>\n                }\n            </div>\n        </section>\n    )\n}","import \"./TopBar.scss\";\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { FiHelpCircle } from \"react-icons/fi\";\nimport { AiOutlinePlus } from \"react-icons/ai\";\nimport * as blockies from 'blockies-ts';\nimport { DropDown, Select, Button } from \"../../common\";\n\nconst TopBar = ({\n  match,\n  connections,\n  connect,\n  disconnect,\n  onSelectAcc,\n  selectedAcc,\n  accounts,\n  network,\n  setNetwork,\n  allNetworks,\n}) => {\n  const [isClipboardGranted, setClipboardGranted] = useState(false);\n\n  const checkPermissions = async () => {\n    let status = false;\n    var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1\n    if (isFirefox) {\n      return\n    }\n    try {\n      const response = await navigator.permissions.query({\n        name: \"clipboard-read\",\n        allowWithoutGesture: false,\n      });\n      status = response.state === 'granted'\n    } catch (e) {\n      console.log('non-fatal clipboard error', e);\n    }\n    setClipboardGranted(status);\n    return status;\n  };\n\n  const readClipboard = useCallback(async () => {\n    if (await checkPermissions()) {\n      const content = await navigator.clipboard.readText();\n      if (content.startsWith('wc:')) connect({ uri: content });\n    } else {\n      const uri = prompt(\"Enter WalletConnect URI\");\n      if (uri) connect({ uri });\n    }\n  }, [connect]);\n\n  const accountsItems = accounts.map(({ id }) => ({\n    value: id,\n    icon: blockies.create({ seed: id }).toDataURL()\n  }))\n  const networksItems = allNetworks.map(({ id, name, icon }) => ({\n    label: name,\n    value: id,\n    icon\n  }))\n\n  useEffect(() => checkPermissions(), []);\n\n  return (\n    <div id=\"topbar\">\n      <div className=\"container\">\n        <DropDown title=\"dApps\" badge={connections.length}>\n          <div id=\"connect-dapp\">\n            <div className=\"heading\">\n              <button disabled={isClipboardGranted} onClick={readClipboard}>\n                Connect dApp\n              </button>\n              <FiHelpCircle size={30} />\n            </div>\n            {isClipboardGranted ? (\n              <label>\n                Automatic connection enabled, just copy a WalletConnect URL and\n                come back to this tab.\n              </label>\n            ) : null}\n          </div>\n          {connections.map(({ session, uri }) => (\n            <div className=\"item dapps-item\" key={session.peerId}>\n              <div className=\"icon\">\n                <img\n                  src={session.peerMeta.icons.filter(x => !x.endsWith('favicon.ico'))[0]}\n                  alt={session.peerMeta.name}\n                ></img>\n              </div>\n              <a href={session.peerMeta.url} target=\"_blank\" rel=\"noreferrer\">\n                <div className=\"name\">{session.peerMeta.name}</div>\n              </a>\n              <div className=\"separator\"></div>\n              <button onClick={() => disconnect(uri)}>Disconnect</button>\n            </div>\n          ))}\n        </DropDown>\n\n        <Select monospace defaultValue={selectedAcc} items={accountsItems} onChange={value => onSelectAcc(value)}>\n          <div id=\"add-account\">\n            <NavLink to=\"/add-account\">\n              <Button icon={<AiOutlinePlus/>} small>Add Account</Button>\n            </NavLink>\n          </div>\n        </Select>\n        <Select defaultValue={network.id} items={networksItems} onChange={value => setNetwork(value)}/>\n      </div>\n    </div>\n  );\n};\n\nexport default TopBar;\n","import \"./SideBar.scss\"\n\nimport { NavLink } from 'react-router-dom'\nimport { MdDashboard, MdLock, MdCompareArrows, } from 'react-icons/md'\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { BsCurrencyExchange } from 'react-icons/bs'\nimport { BsPiggyBank } from 'react-icons/bs'\nimport { BiTransfer } from 'react-icons/bi'\nimport { Loading } from \"../../common\"\nimport { useCallback, useEffect, useRef, useState } from \"react\"\n\nconst SideBar = ({match, portfolio}) => {\n    const sidebarRef = useRef()\n    const [balanceFontSize, setBalanceFontSize] = useState(0)\n\n    const resizeBalance = useCallback(() => {\n        const balanceFontSizes = {\n            3: '2em',\n            5: '1.5em',\n            7: '1.3em',\n            9: '1.2em',\n            11: '1em',\n        }\n\n        if (portfolio.balance.total.truncated) {\n            const charLength = portfolio.balance.total.truncated.length\n            const closest = Object.keys(balanceFontSizes).reduce((prev, current) => Math.abs(current - charLength) < Math.abs(prev - charLength) ? current : prev)\n            setBalanceFontSize(balanceFontSizes[closest])\n        }\n    }, [portfolio.balance.total])\n\n    useEffect(() => resizeBalance(), [resizeBalance])\n\n    return (\n        <div id=\"sidebar\" ref={sidebarRef}>\n                <NavLink to={match.url + \"/dashboard\"}>\n                    <div id=\"logo\" />\n                    <div id=\"icon\" />\n                </NavLink>\n\n                <div className=\"balance\">\n                    <label>Balance</label>\n                    {\n                        portfolio.isBalanceLoading ?\n                            <Loading/>\n                            :\n                            <div className=\"balanceDollarAmount\" style={{fontSize: balanceFontSize}}>\n                                <span className=\"dollarSign highlight\">$</span>{ portfolio.balance.total.truncated }<span className=\"highlight\">.{ portfolio.balance.total.decimals }</span>\n                            </div>\n                    }\n                </div>\n\n                {/* TODO proper navi, programmatic selected class */}\n                <NavLink to={match.url + \"/dashboard\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <MdDashboard size={30}/>Dashboard\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/deposit\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <GiReceiveMoney size={30}/>Deposit\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/transfer\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <BiTransfer size={30}/>Transfer\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/swap\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <BsCurrencyExchange size={30}/>Swap\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/earn\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <BsPiggyBank size={30}/>Earn\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/transactions\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <MdCompareArrows size={30}/>Transactions\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/security\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <MdLock size={30}/>Security\n                    </div>\n                </NavLink>\n            </div>\n    )\n}\n\nexport default SideBar","export default __webpack_public_path__ + \"static/media/ramp.781246d0.svg\";","export default __webpack_public_path__ + \"static/media/paytrie.089717f3.svg\";","export default __webpack_public_path__ + \"static/media/transak.e01c0265.svg\";","export const RAMP_HOST_API_KEY = process.env.REACT_APP_RAMP_HOST_API_KEY;\nexport const PAYTRIE_PARTNER_URL = process.env.REACT_APP_PAYTRIE_PARTNER_URL;\nexport const TRANSAK_API_KEY = process.env.REACT_APP_TRANSAK_API_KEY;\nexport const TRANSAK_ENV = process.env.REACT_APP_TRANSAK_ENV;\nexport const ZAPPER_API_KEY = process.env.REACT_APP_ZAPPER_API_KEY;\nexport const ZAPPER_API_ENDPOINT = process.env.REACT_APP_ZAPPER_API_ENDPOINT;\nexport const SUSHI_SWAP_FRAME = process.env.REACT_APP_SUSHI_SWAP_FRAME_URL;","import { RampInstantSDK } from '@ramp-network/ramp-instant-sdk'\nimport transakSDK from '@transak/transak-sdk'\nimport { popupCenter } from '../helpers/popupHelper'\nimport url from 'url'\n\nimport { RAMP_HOST_API_KEY, PAYTRIE_PARTNER_URL, TRANSAK_API_KEY, TRANSAK_ENV } from '../config'\n\nexport const openRampNetwork = ({ walletAddress, selectedNetwork }) => {\n    const assetsList = {\n        ethereum: 'ERC20_*,ETH_*',\n        polygon: 'MATIC_ERC20_*,MATIC_*',\n        avalanche: 'AVAX_*',\n    }\n\n    const widget = new RampInstantSDK({\n        hostAppName: 'Ambire',\n        hostLogoUrl: 'https://www.ambire.com/ambire-logo.png',\n        variant: 'auto',\n        swapAsset: assetsList[selectedNetwork],\n        userAddress: walletAddress,\n        hostApiKey: RAMP_HOST_API_KEY,\n    })\n    widget.show()\n};\n\nexport const openPayTrie = ({ walletAddress, selectedNetwork }) => {\n    const rightSideLabel = selectedNetwork === 'polygon' ? 'USDC-P' : 'USDC'\n\n    const URL = url.parse(PAYTRIE_PARTNER_URL, true)\n    URL.search = null\n    URL.query = {\n        ...URL.query,\n        addr: walletAddress,\n        rightSideLabel\n    }\n\n    popupCenter({\n        url: url.format(URL),\n        title: 'Paytrie Deposit',\n        w: 450,\n        h: 700,\n    })\n};\n\nexport const openTransak = ({ walletAddress, selectedNetwork }) => {\n    let networks = selectedNetwork === 'avalanche' ? 'avaxcchain' : selectedNetwork\n    let defaultCurency = {\n        'ethereum': 'USDC',\n        'polygon': 'USDC',\n        'arbitrum': 'ETH',\n        'avaxcchain': 'AVAX'\n    }\n\n    const transak = new transakSDK({\n        apiKey: TRANSAK_API_KEY,\n        environment: TRANSAK_ENV,\n        networks,\n        defaultCryptoCurrency: defaultCurency[networks],\n        disableWalletAddressForm: true,\n        walletAddress,\n        themeColor: '282b33',\n        email: '',\n        redirectURL: '',\n        hostURL: window.location.origin,\n        widgetHeight: 'calc(100% - 60px)',\n        widgetWidth: '100%',\n    })\n\n    transak.init()\n\n    transak.on(transak.ALL_EVENTS, data => {\n        console.log(data)\n    })\n\n    transak.on(transak.EVENTS.TRANSAK_ORDER_SUCCESSFUL, orderData => {\n        console.log(orderData)\n        transak.close()\n    })\n}","export const popupCenter = ({ url, title, w, h }) => {\n\t// Fixes dual-screen position                             Most browsers      Firefox\n\tconst dualScreenLeft =\n\t\twindow.screenLeft !== undefined ? window.screenLeft : window.screenX\n\tconst dualScreenTop =\n\t\twindow.screenTop !== undefined ? window.screenTop : window.screenY\n\n\tconst width = window.innerWidth\n\t\t? window.innerWidth\n\t\t: document.documentElement.clientWidth\n\t\t? document.documentElement.clientWidth\n\t\t: window.screen.width\n\tconst height = window.innerHeight\n\t\t? window.innerHeight\n\t\t: document.documentElement.clientHeight\n\t\t? document.documentElement.clientHeight\n\t\t: window.screen.height\n\n\tconst systemZoom = width / window.screen.availWidth\n\tconst left = (width - w) / 2 / systemZoom + dualScreenLeft\n\tconst top = (height - h) / 2 / systemZoom + dualScreenTop\n\tconst newWindow = window.open(\n\t\turl,\n\t\ttitle,\n\t\t`\n\t\ttoolbar=no,scrollbars=no,resizable=no\n\t\twidth=${w / systemZoom}, \n\t\theight=${h / systemZoom}, \n\t\ttop=${top}, \n\t\tleft=${left},\n\t\t`\n\t)\n\n\tif (window.focus) newWindow.focus()\n}","import './Providers.scss'\n\nimport RAMP_LOGO from '../../../../resources/ramp.svg';\nimport PAYTRIE_LOGO from '../../../../resources/paytrie.svg';\nimport TRANSAK_LOGO from '../../../../resources/transak.svg';\n\nimport { openRampNetwork, openPayTrie, openTransak } from '../../../../services/providers'\n\nexport default function Providers({ walletAddress, networkDetails }) {\n    const providers = [\n        {\n            logo: RAMP_LOGO,\n            name: 'Ramp',\n            type: 'Bank Transfer, Credit/Debit Card, Apple Pay',\n            fees: '0.49%-2.9%',\n            limits: '10,000EUR/m',\n            currencies: 'USD, EUR, GBP',\n            networks: ['ethereum', 'polygon', 'avalanche'],\n            onClick: () => openRampNetwork({walletAddress, selectedNetwork: networkDetails.id})\n        },\n        {\n            logo: PAYTRIE_LOGO,\n            name: 'PayTrie',\n            type: 'Bank Transfer',\n            fees: '1% (min. $2 CAD)',\n            limits: '$2,000CAD/day',\n            currencies: 'CAD',\n            networks: ['ethereum', 'polygon'],\n            onClick: () => openPayTrie({walletAddress, selectedNetwork: networkDetails.id})\n        },\n        {\n            logo: TRANSAK_LOGO,\n            name: 'Transak',\n            type: 'Credit/Debit card and Bank Transfer (methods availability depends on location)',\n            fees: 'from 0.5%',\n            limits: 'up to 15,000 EUR/day',\n            currencies: 'GBP, EUR, USD and many more',\n            networks: ['ethereum', 'polygon', 'avalanche', 'arbitrum'],\n            onClick: () => openTransak({walletAddress, selectedNetwork: networkDetails.id})\n        }\n    ];\n\n    const shouldBeDisabled = (networks) => {\n        return networks.includes(networkDetails.id) ? null : 'disabled'; \n    };\n\n    return (\n        <div id=\"providers\">\n            {\n                providers.map(({ logo, name, type, fees, limits, currencies, networks, onClick }) =>\n                    <div className={`provider ${shouldBeDisabled(networks)}`} key={name} onClick={onClick}>\n                        <div className=\"logo\">\n                            <img src={logo} alt={name}></img>\n                        </div>\n                        <div className=\"details\">\n                            <div className=\"type\">\n                                { type }\n                            </div>\n                            <div className=\"fees\">\n                                Fees: { fees }\n                            </div>\n                            <div className=\"limits\">\n                                Limits: { limits }\n                            </div>\n                            <div className=\"currencies\">\n                                Currencies: { currencies }\n                            </div>\n                        </div>\n                    </div>\n                )\n            }\n            {\n                networkDetails.id !== 'ethereum' ? \n                    <div id=\"network-warning\">\n                        <b>NOTE:</b> Some deposit methods are unavailable on <b>{networkDetails.name}</b>. Switch to Ethereum for the widest support.\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n}\n","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/polygon-logo.d08b26bd.svg\";","import './Deposit.scss'\n\nimport { MdAccountBalance, MdAccountBalanceWallet } from 'react-icons/md'\nimport TextInput from '../../common/TextInput/TextInput'\nimport Providers from './Providers/Providers'\n\nimport ETHEREUM_LOGO from '../../../resources/ethereum-logo.png'\nimport POLYGON_LOGO from '../../../resources/polygon-logo.svg'\nimport networks from '../../../consts/networks'\n\nexport default function Deposit({ selectedAcc, selectedNetwork }) {\n    const networkDetails = networks.find(({ id }) => id === selectedNetwork)\n\n    return (\n        <section id=\"deposit\">\n            <div className=\"panel\">\n                <div className=\"heading\">\n                     <div className=\"title\">\n                        <MdAccountBalanceWallet size={35}/>\n                        Deposit Tokens\n                    </div>\n                    <div className=\"subtitle\">\n                        Direct Deposit\n                    </div>\n                </div>\n                <div className=\"description\">\n                    <TextInput className=\"depositAddress\" label=\"Send tokens or collectables (NFTs) to this address:\" value={selectedAcc} copy/>\n                </div>\n                <div id=\"networks\">\n                    Following networks supported:\n                    <div className=\"logos\">\n                        <img src={ETHEREUM_LOGO} alt=\"Ethereum\"/>\n                        <img src={POLYGON_LOGO} alt=\"Polygon\"/>\n                    </div>\n                </div>\n            </div>\n            <div className=\"panel\">\n                <div className=\"heading\">\n                    <div className=\"title\">\n                        <MdAccountBalance size={35}/>\n                        Fiat Currency\n                    </div>\n                    <div className=\"subtitle\">\n                        Credit Card & Bank Transfer\n                    </div>\n                </div>\n                <div className=\"description\">\n                    Deposit with credit card to your account directly using one of our partners\n                </div>\n                <Providers walletAddress={selectedAcc} networkDetails={networkDetails}/>\n            </div>\n        </section>\n    )\n}","import './SushiFrame.scss';\n\nimport React, { useEffect, useRef } from 'react'\n\nimport { SUSHI_SWAP_FRAME } from '../../../config'\n\nconst ambireSushi = {\n    name: \"Ambire swap\",\n    url: SUSHI_SWAP_FRAME,\n    logo: 'https://www.ambire.com/ambire-logo.png',\n    desc: 'Ambire swap'\n}\n\nexport default function SushiSwap({ network, selectedAcc, gnosisConnect, gnosisDisconnect }) {\n    const iframeRef = useRef(null);\n\n    const genHash = () => {\n        return ambireSushi.url + network.chainId + selectedAcc\n    }\n\n    useEffect(() => {\n        gnosisConnect({\n            selectedAcc,\n            iframeRef,\n            app: ambireSushi\n        });\n\n        return () => {\n            gnosisDisconnect()\n        }\n\n    }, [network, selectedAcc, iframeRef, gnosisConnect, gnosisDisconnect])\n\n    return (\n        <div className='iframe-container'>\n            <iframe id='swap-frame' ref={iframeRef} key={genHash()} title='sushi-swap' src={SUSHI_SWAP_FRAME} />\n        </div>\n    )\n}","import './Swap.scss';\n\nimport React from 'react';\nimport SwapComponent from './SushiIframe'\n\nexport default function Swap(props) {\n    return (\n        <section id=\"swap\">     \n            <SwapComponent {...props} />  \n        </section>\n    )\n}","import './SendPlaceholder.scss'\n\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { NavLink } from 'react-router-dom'\nimport { Button } from '../../../common'\n\nconst SendPlaceholder = () => {\n    return (\n        <div id=\"send-placeholder\">\n            <label>You don't have any funds on this account.</label>\n            <NavLink to=\"/wallet/deposit\">\n                <Button small icon={<GiReceiveMoney/>}>Deposit</Button>\n            </NavLink>\n        </div>\n    )\n}\n\nexport default SendPlaceholder","import './Transfer.scss'\n\nimport { BsArrowDown } from 'react-icons/bs'\nimport { FaAddressCard } from 'react-icons/fa'\nimport { useParams, withRouter } from 'react-router'\nimport { useEffect, useState } from 'react'\nimport { ethers } from 'ethers'\nimport SendPlaceholder from './SendPlaceholder/SendPlaceholder'\nimport { Interface } from 'ethers/lib/utils'\nimport { useToasts } from '../../../hooks/toasts'\nimport { TextInput, NumberInput, Button, Select, Loading, DropDown } from '../../common'\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\nconst crossChainAssets = [\n    {\n        label: 'USD Coin (Polygon)',\n        value: 'USDC-polygon',\n        icon: 'https://raw.githubusercontent.com/sushiswap/assets/master/blockchains/polygon/assets/0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174/logo.png'\n    },\n    {\n        label: 'Tether USD (Polygon)',\n        value: 'USDT-polygon',\n        icon: 'https://raw.githubusercontent.com/sushiswap/assets/master/blockchains/polygon/assets/0xc2132D05D31c914a87C6611C10748AEb04B58e8F/logo.png'\n    }\n]\n\nconst Transfer = ({ history, portfolio, selectedAcc, selectedNetwork, accounts, addRequest }) => {\n    const { addToast } = useToasts()\n    const { tokenAddress } = useParams()\n    const [asset, setAsset] = useState(tokenAddress)\n    const [amount, setAmount] = useState(0)\n    const [bigNumberHexAmount, setBigNumberHexAmount] = useState('')\n    const [address, setAddress] = useState('')\n    const [disabled, setDisabled] = useState(true)\n\n    const assetsItems = portfolio.tokens.map(({ label, address, img }) => ({\n        label,\n        value: address,\n        icon: img\n    }))\n\n    const addressesItems = accounts\n        .filter(({ id }) => id !== selectedAcc)\n        .map(({ id }) => id)\n\n    const selectedAsset = portfolio.tokens.find(({ address }) => address === asset)\n\n    const setMaxAmount = () => {\n        const { balanceRaw, decimals } = selectedAsset\n        const amount = ethers.utils.formatUnits(balanceRaw, decimals)\n        onAmountChange(amount)\n    }\n\n    const onAmountChange = (value) => {\n        const amount = value || '0'\n        const { decimals } = selectedAsset\n        const bigNumberAmount = ethers.utils.parseUnits(amount, decimals).toHexString()\n        setAmount(amount)\n        setBigNumberHexAmount(bigNumberAmount)\n    }\n\n    const sendTx = () => {\n        try {\n            const txn = {\n                to: tokenAddress,\n                value: '0',\n                data: ERC20.encodeFunctionData('transfer', [address, bigNumberHexAmount])\n            }\n\n            if (Number(tokenAddress) === 0) {\n                txn.to = address\n                txn.value = bigNumberHexAmount\n                txn.data = '0x'\n            }\n\n            addRequest({\n                id: `transfer_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn\n            })\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        setAmount(0)\n        setBigNumberHexAmount('')\n        history.push({ pathname: `/wallet/transfer/${asset}` })\n    }, [asset, history])\n\n    useEffect(() => {\n        const isAddressValid = /^0x[a-fA-F0-9]{40}$/.test(address)\n        setDisabled(!isAddressValid || !(amount > 0) || address === selectedAcc)\n    }, [address, amount, selectedAcc])\n\n    return (\n        <div id=\"transfer\">\n           <div className=\"panel\">\n               <div className=\"title\">\n                   Send\n               </div>\n               {\n                    portfolio.isBalanceLoading ?\n                        <Loading/>\n                        :\n                        assetsItems.length ? \n                            <div className=\"form\">\n                                <Select searchable defaultValue={asset} items={assetsItems} onChange={(value) => setAsset(value)}/>\n                                <NumberInput value={amount} min=\"0\" onInput={onAmountChange} button=\"MAX\" onButtonClick={() => setMaxAmount()}/>\n                                <div id=\"recipient-field\">\n                                    <TextInput\n                                        placeholder=\"Recipient\"\n                                        info=\"Please double-check the recipient address, blockchain transactions are not reversible.\"\n                                        value={address}\n                                        onInput={setAddress}\n                                    />\n                                    {\n                                        addressesItems.length ? \n                                            <DropDown title={<FaAddressCard/>} closeOnClick={true}>\n                                                <label>Select from your accounts:</label>\n                                                {\n                                                    addressesItems.map(id => (\n                                                        <div className={`item ${id === address ? 'active' : ''}`} key={id} onClick={() => setAddress(id)}>\n                                                            { id }\n                                                        </div>\n                                                    ))\n                                                }\n                                            </DropDown>\n                                            :\n                                            null\n                                    }\n                                </div>\n                                <div className=\"separator\"/>\n                                <Button disabled={disabled} onClick={sendTx}>Send</Button>\n                            </div>\n                            :\n                            <SendPlaceholder/>\n               }\n           </div>\n           <div className=\"panel\">\n               <div className=\"placeholder-overlay\">\n                    Coming Soon...\n               </div>\n               <div className=\"title blurred\">\n                   Cross-chain\n               </div>\n               <div className=\"form blurred\">\n                    <label>From</label>\n                    <Select searchable defaultValue={asset} items={assetsItems} onChange={value => setAsset(value)}/>\n                    <NumberInput value={amount} min=\"0\" onInput={value => setAmount(value)} button=\"MAX\" onButtonClick={() => setMaxAmount()}/>\n                    <div className=\"separator\">\n                        <BsArrowDown/>\n                    </div>\n                    <label>To</label>\n                    <Select searchable defaultValue={asset} items={crossChainAssets} onChange={() => {}}/>\n                    <NumberInput value={0} min=\"0\" onInput={() => {}} button=\"MAX\" onButtonClick={() => {}}/>\n                    <Button>Transfer</Button>\n                </div>\n           </div>\n        </div>\n    )\n}\n\nexport default withRouter(Transfer)\n","const AAVELendingPoolAbi = [\n    \"function getLendingPool() view returns (address address)\",\n    \"function getReservesList() view returns (address[] memory)\",\n    \"function getReserveData(address asset) view returns (tuple(uint256 availableLiquidity, uint256 totalStableDebt, uint256 totalVariableDebt, uint256 liquidityRate, uint256 variableBorrowRate, uint256 stableBorrowRate, uint256 averageStableBorrowRate, uint256 liquidityIndex, uint256 variableBorrowIndex, uint40 lastUpdateTimestamp) memory)\",\n    \"function deposit(address asset, uint256 amount, address onBehalfOf, uint16 referralCode)\",\n]\n\nexport default AAVELendingPoolAbi","export default __webpack_public_path__ + \"static/media/aave.58aec338.svg\";","import './Card.scss'\n\nimport { Select, Segments, NumberInput, Button } from '../../../../common'\nimport { useEffect, useState } from 'react'\n\nconst Card = ({ tokens, icon, details, onTokenSelect, onValidate }) => {\n    const segments = [{ value: 'Deposit' }, { value: 'Withdraw' }]\n    const [segment, setSegment] = useState(segments[0].value)\n    const [token, setToken] = useState()\n    const [amount, setAmount] = useState(0)\n    const [disabled, setDisabled] = useState(true)\n\n    const currentToken = tokens.find(({ value }) => value === token)\n\n    const setMaxValue = () => {\n        setAmount(currentToken?.balance)\n    }\n\n    useEffect(() => {\n        onTokenSelect(token)\n        setDisabled(!token || amount <= 0 || !tokens.length)\n    }, [token, onTokenSelect, amount, tokens.length])\n\n    return (\n        <div className=\"card\">\n            <div className=\"title\">\n                <img src={icon} alt=\"Icon\" />\n            </div>\n            <div className=\"content\">\n                <Select searchable disabled={disabled} label=\"Choose Token\" defaultValue={token} items={tokens} onChange={(value) => setToken(value)}/>\n                <ul className=\"details\">\n                    {\n                        details.map(([type, value]) => (\n                            <li key={type}><b>{type}</b> {value}</li>\n                        ))\n                    }\n                </ul>\n                <Segments small defaultValue={segment} segments={segments} onChange={(value) => setSegment(value)}></Segments>\n                <NumberInput disabled={disabled} min=\"0\" max={currentToken?.balance} value={amount} label={`Available Amount: ${!disabled ? `${currentToken?.balance} ${currentToken?.symbol}` : ''}`} onInput={(value) => setAmount(value)} button=\"MAX\" onButtonClick={setMaxValue}></NumberInput>\n                <Button disabled={disabled} onClick={() => onValidate(segment, token, amount)}>{ segment }</Button>\n            </div>\n        </div>\n    )\n}\n\nexport default Card","import { ethers, getDefaultProvider } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useCallback, useEffect, useState } from 'react'\nimport { useToasts } from '../../../../hooks/toasts'\nimport ERC20Abi from 'adex-protocol-eth/abi/ERC20.json'\nimport AAVELendingPoolAbi from '../../../../consts/AAVELendingPoolAbi'\n\nimport AAVE_ICON from '../../../../resources/aave.svg'\nimport Card from './Card/Card'\n\nconst ERC20Interface = new Interface(ERC20Abi)\nconst AAVELendingPool = new Interface(AAVELendingPoolAbi)\nconst lendingPoolProvider = {\n    ethereum: '0xb53c1a33016b2dc2ff3653530bff1848a515c8c5',\n    polygon: '0xd05e3E715d945B59290df0ae8eF85c1BdB684744',\n    avalanche: '0xb6A86025F0FE1862B372cb0ca18CE3EDe02A318f'\n}\nconst RAY = 10**27\nlet lendingPoolAddress = null\n\nconst AAVECard = ({ network, tokens, account, addRequest }) => {\n    const { addToast } = useToasts()\n\n    const [tokenItems, setTokenItems] = useState([])\n    const [details, setDetails] = useState([])\n\n    const initPool = useCallback(async () => {\n        try {\n            const { rpc } = network\n            const provider = getDefaultProvider(rpc)\n            const lendingPoolProviderContract = new ethers.Contract(lendingPoolProvider[network.id], AAVELendingPool, provider)\n            lendingPoolAddress = await lendingPoolProviderContract.getLendingPool()\n        \n            const lendingPoolContract = new ethers.Contract(lendingPoolAddress, AAVELendingPool, provider)\n            const reserves = await lendingPoolContract.getReservesList()\n            const availableTokens = tokens.filter(({ address }) => reserves.map(reserve => reserve.toLowerCase()).includes(address))\n    \n            const tokensWithApr = await Promise.all(availableTokens.map(async token => {\n                const data = await lendingPoolContract.getReserveData(token.address)\n                const { liquidityRate } = data\n                return {\n                    ...token,\n                    apr: ((liquidityRate / RAY) * 100).toFixed(2)\n                }\n            }))\n\n            const tokenItems = tokensWithApr.map(({ img, symbol, address, balance, decimals, apr }) => ({\n                icon: img,\n                label: `${symbol} (${apr}% APR)`,\n                value: address,\n                address,\n                balance,\n                symbol,\n                decimals,\n                apr\n            }))\n\n            setTokenItems(tokenItems)\n        } catch(e) {\n            console.error(e);\n            addToast(e.message | e, { error: true })\n        }\n    }, [addToast, tokens, network])\n\n    const onTokenSelect = useCallback(async (value) => {\n        const token = tokenItems.find(({ address }) => address === value)\n        if (token) {\n            setDetails([\n                ['Annual Percentage Rate (APR)', `${token.apr}%`],\n                ['Lock', 'No Lock'],\n                ['Type', 'Variable Rate'],\n            ])\n        }\n    }, [tokenItems])\n\n    const approveToken = async (tokenAddress, bigNumberHexAmount) => {\n        const ZERO = ethers.BigNumber.from(0)\n        const { rpc } = network\n        const provider = getDefaultProvider(rpc)\n        const tokenContract = new ethers.Contract(tokenAddress, ERC20Interface, provider)\n        const allowance = await tokenContract.allowance(account, tokenAddress)\n\n        if (allowance.lt(bigNumberHexAmount)) {\n            if (allowance.gt(ZERO)) addRequest({\n                id: `aave_pool_deposit_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: network.chainId,\n                account,\n                txn: {\n                    to: lendingPoolAddress,\n                    value: bigNumberHexAmount,\n                    data: '0x'\n                }\n            })\n            addRequest({\n                id: `aave_pool_deposit_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: network.chainId,\n                account,\n                txn: {\n                    to: tokenAddress,\n                    value: '0x0',\n                    data: ERC20Interface.encodeFunctionData('approve', [lendingPoolAddress, bigNumberHexAmount])\n                }\n            })\n\t    }\n    }\n\n    const onValidate = async (type, tokenAddress, amount) => {\n        const token = tokenItems.find(({ address }) => address === tokenAddress)\n        const bigNumberHexAmount = ethers.utils.parseUnits(amount.toString(), token.decimals).toHexString()\n        await approveToken(tokenAddress, bigNumberHexAmount)\n\n        if (type === 'Deposit') {\n            try {\n                addRequest({\n                    id: `aave_pool_deposit_${Date.now()}`,\n                    type: 'eth_sendTransaction',\n                    chainId: network.chainId,\n                    account,\n                    txn: {\n                        to: lendingPoolAddress,\n                        value: '0x0',\n                        data: AAVELendingPool.encodeFunctionData('deposit', [tokenAddress, bigNumberHexAmount, account, 0])\n                    },\n                    extraGas: 60000\n                })\n            } catch(e) {\n                console.error(e)\n                addToast(`Error: ${e.message || e}`, { error: true })\n            }\n        }\n    }\n\n    useEffect(() => initPool(), [tokens, initPool])\n\n    return (\n        <Card icon={AAVE_ICON} details={details} tokens={tokenItems} onTokenSelect={onTokenSelect} onValidate={onValidate}/>\n    )\n}\n\nexport default AAVECard","import './Earn.scss'\nimport AAVECard from './Cards/AAVECard'\nimport { Loading } from '../../common'\n\nconst Earn = ({ portfolio, selectedNetwork, selectedAcc, addRequest }) => {\n    return (\n        <div id=\"earn\">\n            {\n                portfolio.isBalanceLoading ?\n                    <Loading/>\n                    :\n                    <AAVECard network={{...selectedNetwork}} tokens={portfolio.tokens} account={selectedAcc} addRequest={addRequest}/>\n            }\n        </div>\n    )\n}\n\nexport default Earn","const privilegesOptions = {\n  true: '0x0000000000000000000000000000000000000000000000000000000000000001',\n  false: '0x0000000000000000000000000000000000000000000000000000000000000000',\n}\nexport default privilegesOptions\n","// List of all supported protocols by networks: https://api.zapper.fi/v1/protocols/balances/supported?api_key=5d1237c2-3840-4733-8e92-c5a58fe81b88\n\nconst suportedProtocols = [\n    {\n        network: 'ethereum',\n        protocols: ['1inch', 'aave-v2', 'alchemix', 'badger', 'balancer-v2', 'compound', 'cream', 'curve', 'sushiswap', 'uniswap-v2', 'uniswap-v3', 'nft']\n    },\n    {\n        network: 'polygon',\n        protocols: ['aave-v2', 'quickswap', 'sushiswap']\n    }\n]\n\nexport default suportedProtocols","import { useCallback, useEffect, useState } from 'react';\n\nimport { ZAPPER_API_KEY } from '../config';\nimport { fetchGet } from '../lib/fetch';\nimport { ZAPPER_API_ENDPOINT } from '../config'\nimport supportedProtocols from '../consts/supportedProtocols';\nimport { useToasts } from '../hooks/toasts'\n\nconst getBalances = (apiKey, network, protocol, address) => fetchGet(`${ZAPPER_API_ENDPOINT}/protocols/${protocol}/balances?addresses[]=${address}&network=${network}&api_key=${apiKey}&newBalances=true`)\n\nlet hidden, visibilityChange;\nif (typeof document.hidden !== 'undefined') {\n    hidden = 'hidden';\n    visibilityChange = 'visibilitychange';\n} else if (typeof document.msHidden !== 'undefined') {\n    hidden = 'msHidden';\n    visibilityChange = 'msvisibilitychange';\n} else if (typeof document.webkitHidden !== 'undefined') {\n    hidden = 'webkitHidden';\n    visibilityChange = 'webkitvisibilitychange';\n}\nlet lastOtherProcolsRefresh = null\n\nexport default function usePortfolio({ currentNetwork, account }) {\n    const { addToast } = useToasts()\n    const [isBalanceLoading, setBalanceLoading] = useState(true);\n    const [areProtocolsLoading, setProtocolsLoading] = useState(true);\n\n    const [tokensByNetworks, setTokensByNetworks] = useState([])\n    const [otherProtocolsByNetworks, setOtherProtocolsByNetworks] = useState([])\n\n    const [balance, setBalance] = useState({\n        total: {\n            full: 0,\n            truncated: 0,\n            decimals: '00'\n        },\n        tokens: []\n    });\n    const [otherBalances, setOtherBalances] = useState([]);\n    const [tokens, setTokens] = useState([]);\n    const [protocols, setProtocols] = useState([]);\n    const [collectables, setCollectables] = useState([]);\n\n    const fetchTokens = useCallback(async (account, currentNetwork = false) => {\n        try {\n            const networks = currentNetwork ? [currentNetwork] : supportedProtocols.map(({ network }) => network)\n\n            let failedRequests = 0\n            const requestsCount = networks.length\n\n            const updatedTokens = (await Promise.all(networks.map(async network => {\n                try {\n                    const balance = await getBalances(ZAPPER_API_KEY, network, 'tokens', account)\n                    if (!balance) return null\n\n                    const { meta, products } = Object.values(balance)[0]\n                    return {\n                        network,\n                        meta,\n                        products\n                    }\n                } catch(_) {\n                    failedRequests++\n                }\n            }))).filter(data => data)\n            const updatedNetworks = updatedTokens.map(({ network }) => network)\n\n            setTokensByNetworks(tokensByNetworks => ([\n                ...tokensByNetworks.filter(({ network }) => !updatedNetworks.includes(network)),\n                ...updatedTokens\n            ]))\n\n            if (failedRequests >= requestsCount) throw new Error('Failed to fetch Tokens from Zapper API')\n            return true\n        } catch (error) {\n            console.error(error)\n            addToast(error.message, { error: true })\n            return false\n        }\n    }, [addToast])\n\n    const fetchOtherProtocols = useCallback(async (account, currentNetwork = false) => {\n        try {\n            const protocols = currentNetwork ? [supportedProtocols.find(({ network }) => network === currentNetwork)] : supportedProtocols\n\n            let failedRequests = 0\n            const requestsCount = protocols.reduce((acc, curr) => curr.protocols.length + acc, 0)\n\n            const updatedProtocols = (await Promise.all(protocols.map(async ({ network, protocols }) => {\n                const all = (await Promise.all(protocols.map(async protocol => {\n                    try {\n                        const balance = await getBalances(ZAPPER_API_KEY, network, protocol, account)\n                        return balance ? Object.values(balance)[0] : null\n                    } catch(_) {\n                        failedRequests++\n                    }\n                }))).filter(data => data).flat()\n\n                return all.length ? {\n                    network,\n                    protocols: all.map(({ products }) => products).flat(2)\n                } : null\n            }))).filter(data => data)\n            const updatedNetworks = updatedProtocols.map(({ network }) => network)\n\n            setOtherProtocolsByNetworks(protocolsByNetworks => ([\n                ...protocolsByNetworks.filter(({ network }) => !updatedNetworks.includes(network)),\n                ...updatedProtocols\n            ]))\n            \n            lastOtherProcolsRefresh = Date.now()\n\n            if (failedRequests >= requestsCount) throw new Error('Failed to fetch other Protocols from Zapper API')\n            return true\n        } catch (error) {\n            console.error(error)\n            addToast(error.message, { error: true })\n            return false\n        }\n    }, [addToast])\n\n    const refreshTokensIfVisible = useCallback(() => {\n        if (!account) return\n        if (!document[hidden] && !isBalanceLoading) fetchTokens(account, currentNetwork)\n    }, [isBalanceLoading, account, fetchTokens, currentNetwork])\n\n    const requestOtherProtocolsRefresh = async () => {\n        if (!account) return\n        if ((Date.now() - lastOtherProcolsRefresh) > 30000 && !areProtocolsLoading) await fetchOtherProtocols(account, currentNetwork)\n    }\n\n    // Fetch balances and protocols on account change\n    useEffect(() => {\n        async function loadBalance() {\n            if (!account) return\n            setBalanceLoading(true)\n            if (await fetchTokens(account)) setBalanceLoading(false)\n        }\n\n        async function loadProtocols() {\n            if (!account) return\n            setProtocolsLoading(true)\n            if (await fetchOtherProtocols(account)) setProtocolsLoading(false)\n        }\n\n        loadBalance()\n        loadProtocols()\n    }, [account, fetchTokens, fetchOtherProtocols])\n\n    // Update states on network, tokens and ohterProtocols change\n    useEffect(() => {\n        const balanceByNetworks = tokensByNetworks.map(({ network, meta }) => {\n            const balanceUSD = meta.find(({ label }) => label === 'Total').value + meta.find(({ label }) => label === 'Debt').value\n            const [truncated, decimals] = Number(balanceUSD.toString()).toFixed(2).split('.')\n            return {\n                network,\n                total: {\n                    full: balanceUSD,\n                    truncated: Number(truncated).toLocaleString('en-US'),\n                    decimals\n                }\n            }\n        })\n\n        const balance = balanceByNetworks.find(({ network }) => network === currentNetwork)\n        if (balance) {\n            setBalance(balance)\n            setOtherBalances(balanceByNetworks.filter(({ network }) => network !== currentNetwork))\n        }\n\n        const tokens = tokensByNetworks.find(({ network }) => network === currentNetwork)\n        if (tokens) setTokens(tokens.products.map(({ assets }) => assets.map(({ tokens }) => tokens)).flat(2))\n\n        const otherProtocols = otherProtocolsByNetworks.find(({ network }) => network === currentNetwork)\n        if (tokens && otherProtocols) {\n            setProtocols([\n                ...tokens.products,\n                ...otherProtocols.protocols.filter(({ label }) => label !== 'NFTs')\n            ])\n            setCollectables(otherProtocols.protocols.find(({ label }) => label === 'NFTs')?.assets || [])\n        }\n    }, [currentNetwork, tokensByNetworks, otherProtocolsByNetworks])\n\n    // Refresh tokens on network change\n    useEffect(() => {\n        refreshTokensIfVisible()\n    }, [currentNetwork, refreshTokensIfVisible])\n\n    // Refresh balance periodically\n    useEffect(() => {\n        const refreshInterval = setInterval(refreshTokensIfVisible, 20000)\n        return () => clearInterval(refreshInterval)\n    }, [refreshTokensIfVisible])\n\n    // Refresh balance when window is focused\n    useEffect(() => {\n        document.addEventListener(visibilityChange, refreshTokensIfVisible, false);\n        return () => document.removeEventListener(visibilityChange, refreshTokensIfVisible, false);\n    }, [refreshTokensIfVisible])\n\n    return {\n        isBalanceLoading,\n        areProtocolsLoading,\n        balance,\n        otherBalances,\n        tokens,\n        protocols,\n        collectables,\n        requestOtherProtocolsRefresh\n        //updatePortfolio//TODO find a non dirty way to be able to reply to getSafeBalances from the dapps, after the first refresh\n    }\n}\n","import { useCallback, useEffect, useReducer, useRef } from 'react'\nimport { useToasts } from '../hooks/toasts'\n\nimport WalletConnectCore from '@walletconnect/core'\nimport * as cryptoLib from '@walletconnect/iso-crypto'\n\nconst noop = () => null\nconst noopSessionStorage = { setSession: noop, getSession: noop, removeSession: noop }\n\nconst STORAGE_KEY = 'wc1_state'\nconst SUPPORTED_METHODS = ['eth_sendTransaction', 'gs_multi_send', 'personal_sign', 'eth_sign']\nconst SESSION_TIMEOUT = 6000\n\nconst getDefaultState = () => ({ connections: [], requests: [] })\n\nlet connectors = {}\n\nexport default function useWalletConnect ({ account, chainId, onCallRequest }) {\n    const { addToast } = useToasts()\n\n    // This is needed cause of the WalletConnect event handlers\n    const stateRef = useRef()\n    stateRef.current = { account, chainId }\n\n    const [state, dispatch] = useReducer((state, action) => {\n        if (action.type === 'updateConnections') return { ...state, connections: action.connections }\n        if (action.type === 'connectedNewSession') {\n            return {\n                ...state,\n                connections: [...state.connections, { uri: action.uri, session: action.session }]\n            }\n        }\n        if (action.type === 'disconnected') {\n            return {\n                ...state,\n                connections: state.connections.filter(x => x.uri !== action.uri)\n            }\n        }\n        if (action.type === 'requestAdded') {\n            if (state.requests.find(({ id }) => id === action.request.id)) return { ...state }\n            return { ...state, requests: [...state.requests, action.request] }\n        }\n        if (action.type === 'requestsResolved') {\n            return {\n                ...state,\n                requests: state.requests.filter(x => !action.ids.includes(x.id))\n            }\n        }\n        return { ...state }\n    }, null, () => {\n        const json = localStorage[STORAGE_KEY]\n        if (!json) return getDefaultState()\n        try {\n            return {\n                ...getDefaultState(),\n                ...JSON.parse(json)\n            }\n        } catch(e) {\n            console.error(e)\n            return getDefaultState()\n        }\n    })\n\n    const connect = useCallback(connectorOpts => {\n        if (connectors[connectorOpts.uri]) {\n            addToast('dApp already connected')\n            return connectors[connectorOpts.uri]\n        }\n        let connector\n        try {\n            connector = connectors[connectorOpts.uri] = new WalletConnectCore({\n                connectorOpts,\n                cryptoLib,\n                sessionStorage: noopSessionStorage\n            })\n        } catch(e) {\n            addToast(`Unable to connect to ${connectorOpts.uri}: ${e.message}`, { error: true })\n            return null\n        }\n\n        const onError = err => {\n            addToast(`WalletConnect error: ${(connector.session && connector.session.peerMeta && connector.session.peerMeta.name)} ${err.message || err}`, { error: true })\n            console.error('WalletConnect error', err)\n        }\n\n        let sessionStart\n        let sessionTimeout\n        if (!connector.session.peerMeta) sessionTimeout = setTimeout(() => {\n            if (!connector.session.peerMeta) addToast('Unable to get session from dApp - perhaps the link has expired?', { error: true })\n        }, SESSION_TIMEOUT)\n\n        connector.on('session_request', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n\n            sessionStart = Date.now()\n            clearTimeout(sessionTimeout)\n\n            connector.approveSession({\n                accounts: [stateRef.current.account],\n                chainId: stateRef.current.chainId,\n            })\n            // It's safe to read .session right after approveSession because 1) approveSession itself normally stores the session itself\n            // 2) connector.session is a getter that re-reads private properties of the connector; those properties are updated immediately at approveSession\n            dispatch({ type: 'connectedNewSession', uri: connectorOpts.uri, session: connector.session })\n\n            addToast('Successfully connected to '+connector.session.peerMeta.name)\n        })\n\n        connector.on('call_request', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n            if (!SUPPORTED_METHODS.includes(payload.method)) {\n                connector.rejectRequest({ id: payload.id, error: { message: 'METHOD_NOT_SUPPORTED' }})\n                return\n            }\n            if (\n                payload.method === 'eth_sendTransaction' && payload.params[0] && payload.params[0].from\n                && payload.params[0].from.toLowerCase() !== connector.session.accounts[0].toLowerCase()\n            ) {\n                addToast(`dApp sent a request for the wrong account: ${payload.params[0].from}`, { error: true })\n                return\n            }\n            dispatch({ type: 'requestAdded', request: {\n                id: payload.id,\n                type: payload.method,\n                wcUri: connectorOpts.uri,\n                txn: payload.params[0],\n                chainId: connector.session.chainId,\n                account: connector.session.accounts[0]\n            } })\n        })\n\n        connector.on('disconnect', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n\n            clearTimeout(sessionTimeout)\n            // NOTE the dispatch() will cause double rerender when we trigger a disconnect,\n            // cause we will call it once on disconnect() and once when the event arrives\n            // we can prevent this by checking if (!connectors[...]) but we'd rather stay safe and ensure\n            // the connection is removed\n            dispatch({ type: 'disconnected', uri: connectorOpts.uri })\n            connectors[connectorOpts.uri] = null\n\n            // NOTE: this event might be invoked 2 times when the dApp itself disconnects\n            // currently we don't dedupe that\n            if (sessionStart && (Date.now() - sessionStart) < SESSION_TIMEOUT) {\n                addToast('dApp disconnected immediately - perhaps it does not support the current network?', { error: true })\n            } else {\n                addToast(`${connector.session.peerMeta.name} disconnected: ${payload.params[0].message}`)\n            }\n        })\n\n        connector.on('error', onError)\n\n        return connector\n    }, [addToast])\n\n    const disconnect = useCallback(uri => {\n        // connector might not be there, either cause we disconnected before,\n        // or cause we failed to connect in the first place\n        if (connectors[uri]) {\n            connectors[uri].killSession()\n            connectors[uri] = null\n        }\n        dispatch({ type: 'disconnected', uri })\n    }, [])\n\n    const resolveMany = (ids, resolution) => {\n        state.requests.forEach(({ id, wcUri }) => {\n            if (ids.includes(id)) {\n                const connector = connectors[wcUri]\n                if (!connector) return\n                if (resolution.success) connector.approveRequest({ id, result: resolution.result })\n                else connector.rejectRequest({ id, error: { message: resolution.message } })\n            }\n        })\n        dispatch({ type: 'requestsResolved', ids })\n    }\n\n    // Side effects on init\n    useEffect(() => {\n        state.connections.forEach(({ uri, session }) => {\n            if (!connectors[uri]) connect({ uri, session })\n        })\n    // we specifically want to run this only once despite depending on state\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [connect])\n\n    // Side effects that will run on every state change/rerender\n    useEffect(() => {\n        // restore connectors and update the ones that are stale\n        let updateConnections = false\n        state.connections.forEach(({ uri, session }) => {\n            if (connectors[uri]) {\n                const connector = connectors[uri]\n                const session = connector.session\n                if (session.accounts[0] !== account || session.chainId !== chainId) {\n                    connector.updateSession({ accounts: [account], chainId })\n                    updateConnections = true\n                }\n            }\n        })\n        \n        localStorage[STORAGE_KEY] = JSON.stringify(state)\n\n        if (updateConnections) dispatch({\n            type: 'updateConnections',\n            connections: state.connections\n                .filter(({ uri }) => connectors[uri])\n                .map(({ uri }) => ({ uri, session: connectors[uri].session }))\n        })\n    }, [state, account, chainId, connect])\n\n    // Initialization effects\n    useEffect(() => runInitEffects(connect), [connect])\n\n    return {\n        connections: state.connections,\n        requests: state.requests,\n        resolveMany,\n        connect, disconnect\n    }\n}\n\n// Initialization side effects\n// Connect to the URL, read from clipboard, etc.\nfunction runInitEffects(wcConnect) {\n    const query = new URLSearchParams(window.location.href.split('?').slice(1).join('?'))\n    const wcUri = query.get('uri')\n    if (wcUri) wcConnect({ uri: wcUri })\n\n    // hax\n    window.wcConnect = uri => wcConnect({ uri })\n\n    // @TODO on focus and on user action\n    const clipboardError = e => console.log('non-fatal clipboard err', e)\n    const isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1\n    const tryReadClipboard = async () => {\n        if (isFirefox) return\n\ttry {\n                const result = await navigator.permissions.query({ name: 'clipboard-read' })\n                if (result.state === 'granted' || result.state === 'prompt') {\n                     const clipboard = await navigator.clipboard.readText()\n\t\t     if (clipboard.startsWith('wc:') && !connectors[clipboard]) wcConnect({ uri: clipboard })\n                }\n        } catch(e) { clipboardError(e)  }\n    }\n    tryReadClipboard()\n    window.addEventListener('focus', tryReadClipboard)\n    return () => window.removeEventListener('focus', tryReadClipboard)\n}\n","import { useEffect, useCallback, useState } from 'react'\nimport { fetchCaught } from '../lib/fetch'\n\nexport default function useRelayerData(url) {\n  const [isLoading, setLoading] = useState(true)\n  const [data, setData] = useState(null)\n  const [err, setErr] = useState(null)\n\n  const updateData = useCallback(async () => {\n    const { resp, body, errMsg } = await fetchCaught(url)\n\n    if (resp && resp.status === 200) {\n      return body\n    } else {\n      console.log('relayerData error', { resp, body, errMsg })\n      throw new Error(errMsg || `status code ${resp && resp.status}`)\n    }\n  }, [url])\n\n  useEffect(() => {\n    if (!url) return\n    let unloaded = false\n    setLoading(true)\n    setErr(null)\n    updateData()\n      .then(data => !unloaded && setData(data))\n      .catch(e => !unloaded && setErr(e.message || e))\n      .then(() => !unloaded && setLoading(false))\n    return () => unloaded = true\n  }, [url, updateData])\n\n  return { data, isLoading, errMsg: err }\n}\n","import './Security.scss'\n\nimport { Loading, TextInput, Button } from '../../common'\nimport { Interface } from 'ethers/lib/utils'\nimport accountPresets from '../../../consts/accountPresets'\nimport privilegesOptions from '../../../consts/privilegesOptions'\nimport { useRelayerData } from '../../../hooks'\n\nconst IDENTITY_INTERFACE = new Interface(\n  require('adex-protocol-eth/abi/Identity5.2')\n)\n\nconst Security = ({ relayerURL, selectedAcc, selectedNetwork, accounts, addRequest }) => {\n  const { data, errMsg, isLoading } = useRelayerData(relayerURL ? `${relayerURL}/identity/${selectedAcc}/${selectedNetwork.id}/privileges` : null)\n  const privileges = data ? data.privileges : {}\n\n  const craftTransaction = (address, privLevel) => {\n    return {\n      to: selectedAcc,\n      data: IDENTITY_INTERFACE.encodeFunctionData('setAddrPrivilege', [\n        address,\n        privLevel,\n      ]),\n      value: '0x',\n    }\n  }\n\n  const addTransactionToAddRequest = txn => {\n    addRequest({\n      id: `setPriv_${txn.data}`,\n      txn: txn,\n      chainId: selectedNetwork.chainId,\n      account: selectedAcc,\n    })\n  }\n\n  const onMakeDefaultBtnClicked = key => {\n    // @TODO\n  }\n\n  const onRemoveBtnClicked = key => {\n    const txn = craftTransaction(key, privilegesOptions.false)\n    addTransactionToAddRequest(txn)\n  }\n\n  const selectedAccount = accounts.find(x => x.id === selectedAcc)\n\n  const privList = Object.entries(privileges).map(([addr, privValue]) => {\n    if (!privValue) return null\n    const isQuickAcc = addr === accountPresets.quickAccManager\n    const privText = isQuickAcc\n      ? `Email/passphrase signer (${selectedAccount.email})`\n      : addr\n    const signerAddress = isQuickAcc\n      ? selectedAccount.signer.quickAccManager\n      : selectedAccount.signer.address\n    const isSelected = signerAddress === addr\n\n    return (\n      <li key={addr}>\n        <TextInput className='depositAddress' value={privText} disabled />\n        <div className='btns-wrapper'>\n          <Button disabled={isSelected} onClick={() => onMakeDefaultBtnClicked(addr)} small>\n            {isSelected ? 'Current signer' : 'Make default'}\n          </Button>\n          <Button\n            onClick={() => onRemoveBtnClicked(addr)}\n            small\n            red\n            title={isSelected ? 'Cannot remove the currently used signer' : ''}\n            disabled={isSelected}\n          >\n            Remove\n          </Button>\n        </div>\n      </li>\n    )\n  }).filter(x => x)\n\n  // @TODO relayerless mode: it's not that hard to implement in a primitive form, we need everything as-is\n  // but rendering the initial privileges instead; or maybe using the relayerless transactions hook/service\n  // and aggregate from that\n  if (!relayerURL) return (<section id='security'>\n    <h3 className='error'>Unsupported: not currently connected to a relayer.</h3>\n  </section>)\n  return (\n    <section id='security'>\n      <div className='panel'>\n        <div className='title'>Authorized signers</div>\n        {errMsg && (<h3 className='error'>Error getting authorized signers: {errMsg}</h3>)}\n        {isLoading && <Loading />}\n        <ul className='content'>{!isLoading && privList}</ul>\n      </div>\n    </section>\n  )\n}\n\nexport default Security\n","import { Interface, getAddress, formatUnits } from 'ethers/lib/utils'\n\nimport { verifiedContracts, tokens } from '../consts/verifiedContracts'\nimport networks from '../consts/networks'\nimport ERC20ABI from 'adex-protocol-eth/abi/ERC20'\n\nconst ERC20 = new Interface(ERC20ABI)\nconst TRANSFER_SIGHASH = ERC20.getSighash(ERC20.getFunction('transfer').format())\n\n// @TODO custom parsing for univ2 contracts, exact output, etc.\nexport function getTransactionSummary(txn, networkId, accountAddr) {\n    const [, value, data] = txn\n    const to = getAddress(txn[0])\n    let callSummary, sendSummary\n    const network = networks.find(x => x.id === networkId || x.chainId === networkId)\n    if (!network) return 'Unknown newtork (unable to parse'\n\n    const contractKey = network.id + ':' + getAddress(to)\n    const contractInfo = verifiedContracts[contractKey]\n    const tokenInfo = tokens[to]\n\n    const nativeAsset = network ? network.nativeAssetSymbol : 'unknown native token'\n    if (parseInt(value) > 0) sendSummary = `send ${(parseInt(value)/1e18).toFixed(4)} ${nativeAsset} to ${contractInfo ? contractInfo.name : to}`\n    if (data !== '0x') {\n        if (data.startsWith(TRANSFER_SIGHASH)) {\n            const [to, amount] = ERC20.decodeFunctionData('transfer', data)\n            if (tokenInfo) {\n                callSummary = `send ${(amount/Math.pow(10, tokenInfo[1])).toFixed(4)} ${tokenInfo[0]} to ${to}`\n            } else {\n                // @TODO: maybe we can call the contract and get detailed data\n                callSummary = `send ${amount/1e18} unknown token to ${to}`\n            }\n        } else if (contractInfo) {\n            const iface = new Interface(contractInfo.abi)\n            const parsed = iface.parseTransaction({ data, value })\n            // @TODO: some elegant way to try-catch potential issues here\n            if (parsed.name === 'swapExactETHForTokens') {\n                const tokenAddr = parsed.args.path[parsed.args.path.length - 1]\n                const output = tokenInfo ? `${formatUnits(parsed.args.amountOutMin, tokenInfo[1])} ${tokenInfo[0]}` : `${parsed.args.amountOutMin} of token ${tokenAddr}`\n                const contractNote = ` on ${contractInfo.name}`\n                const recipientNote = parsed.args.to.toLowerCase() === accountAddr.toLowerCase() ? `` : ` and send it to ${parsed.args.to}`\n                return `Swap ${formatUnits(value, 18)} ${nativeAsset} for at least ${output}${contractNote}${recipientNote}`\n            } else {\n                callSummary = `Interaction with ${contractInfo.name}: ${parsed.name}`\n            }\n        } else callSummary = `unknown call to ${contractInfo ? contractInfo.name : (tokenInfo ? tokenInfo[0] : to)}`\n    }\n    return [callSummary, sendSummary].filter(x => x).join(', ')\n}\n\nexport function getContractName(txn, networkId) {\n    const [to] = txn\n    const network = networks.find(x => x.id === networkId || x.chainId === networkId)\n    const contractKey = network.id + ':' + getAddress(to)\n    const contractInfo = verifiedContracts[contractKey]\n    return contractInfo ? contractInfo.name : null\n}\n","import './TxnPreview.css'\n\nimport { useState } from 'react'\nimport { FaTimes, FaChevronDown, FaChevronUp } from 'react-icons/fa'\n\nimport { getContractName, getTransactionSummary } from '../../../lib/humanReadableTransactions'\nimport networks from '../../../consts/networks'\nimport { formatUnits } from 'ethers/lib/utils'\n\nfunction getNetworkSymbol(networkId) {\n  const network = networks.find(x => x.id === networkId)\n  return network ? network.nativeAssetSymbol : 'UNKNW'\n}\nexport default function TxnPreview ({ txn, onDismiss, network, account, isFirstFailing }) {\n  const [isExpanded, setExpanded] = useState(false)\n  const contractName = getContractName(txn, network)\n  return (\n    <div className={isFirstFailing ? 'txnPreview firstFailing' : 'txnPreview'}>\n        <div>{getTransactionSummary(txn, network, account)}</div>\n        {isFirstFailing ? (<div className='firstFailingLabel'>This is the first failing transaction.</div>) : (<></>)}\n\n        {\n          isExpanded ? (<div className='advanced'>\n            <div><b>Interacting with (<i>to</i>):</b> {txn[0]}{contractName ? ` (${contractName})` : ''}</div>\n            <div><b>{getNetworkSymbol(network)} to be sent (<i>value</i>):</b> {formatUnits(txn[1] || '0x0', 18)}</div>\n            <div><b>Data:</b> {txn[2]}</div>\n          </div>) : (<></>)\n        }\n\n        <div className='actionIcons'>\n          <span className='expandTxn' onClick={() => setExpanded(e => !e)}>\n            {isExpanded ? (<FaChevronUp/>) : (<FaChevronDown/>)}\n          </span>\n          {onDismiss ? (<span className='dismissTxn' onClick={onDismiss}><FaTimes/></span>) : (<></>)}\n        </div>\n    </div>\n  )\n}\n","import './Transactions.scss'\nimport { FaSignature } from 'react-icons/fa'\nimport { useRelayerData } from '../../../hooks'\nimport TxnPreview from '../../common/TxnPreview/TxnPreview'\nimport { Loading } from '../../common'\nimport accountPresets from '../../../consts/accountPresets'\nimport networks from '../../../consts/networks'\nimport { getTransactionSummary } from '../../../lib/humanReadableTransactions'\n\nfunction Transactions ({ relayerURL, selectedAcc, selectedNetwork, eligibleRequests, showSendTxns }) {\n  // @TODO refresh this after we submit a bundle; perhaps with the service\n  // we can just append a cache break to the URL - that way we force the hook to refresh, and we have a cachebreak just in case\n  const url = relayerURL\n    ? `${relayerURL}/identity/${selectedAcc}/${selectedNetwork.id}/transactions`\n    : null\n  const { data, errMsg, isLoading } = useRelayerData(url)\n\n  // @TODO implement a service that stores sent transactions locally that will be used in relayerless mode\n  if (!relayerURL) return (<section id='transactions'>\n    <h3 className='error'>Unsupported: not currently connected to a relayer.</h3>\n  </section>)\n\n  // @TODO: visualize others\n  const firstPending = data && data.txns.find(x => !x.executed)\n\n  return (\n    <section id='transactions'>\n      {!!eligibleRequests.length && (<div onClick={showSendTxns} className='panel'>\n        <div className='title'><FaSignature size={25}/>&nbsp;&nbsp;&nbsp;Waiting to be signed</div>\n        {eligibleRequests.map(req => (\n          <TxnPreview\n              key={req.id}\n              network={selectedNetwork.id}\n              account={selectedAcc}\n              txn={[req.txn.to, req.txn.value || '0x0', req.txn.data || '0x' ]}/>\n        ))}\n      </div>)}\n      { !!firstPending && (<div className='panel'>\n        <div className='title'>Pending transaction bundle</div>\n        {firstPending && (<MinedBundle bundle={firstPending}></MinedBundle>)}\n      </div>) }\n\n      <h2>{(data && data.txns.length === 0) ? 'No transactions yet.' : 'Confirmed transactions'}</h2>\n      {!relayerURL && (<h3 className='error'>Unsupported: not currently connected to a relayer.</h3>)}\n      {errMsg && (<h3 className='error'>Error getting list of transactions: {errMsg}</h3>)}\n      {isLoading && <Loading />}\n      {\n          // @TODO respect the limit and implement pagination\n          !isLoading && data && data.txns.filter(x => x.executed && x.executed.mined).map(MinedBundle)\n      }\n    </section>\n  )\n}\n\nfunction MinedBundle(bundle) {\n  const network = networks.find(x => x.id === bundle.network)\n  if (!Array.isArray(bundle.txns)) return (<h3 className='error'>Bundle has no transactions (should never happen)</h3>)\n  const lastTxn = bundle.txns[bundle.txns.length - 1]\n  // terribly hacky; @TODO fix\n  // all of the values are prob checksummed so we may not need toLowerCase\n  const lastTxnSummary = getTransactionSummary(lastTxn, bundle.network, bundle.account)\n  const hasFeeMatch = lastTxnSummary.match(new RegExp(`to ${accountPresets.feeCollector}`, 'i'))\n  const txns = hasFeeMatch ? bundle.txns.slice(0, -1) : bundle.txns\n\n  return (<div className='minedBundle' key={bundle._id}>\n    {txns.map((txn, i) => (<TxnPreview\n      key={i} // safe to do this, individual TxnPreviews won't change within a specific bundle\n      txn={txn} network={bundle.network} account={bundle.identity}/>\n    ))}\n    {hasFeeMatch && (<div className='fee'><b>Fee:</b> {lastTxnSummary.slice(5, -hasFeeMatch[0].length)}</div>)}\n    <div><b>Submitted at:</b> {bundle.submittedAt && (new Date(bundle.submittedAt)).toString()}</div>\n    { bundle.txId && (<div\n      ><b>Block explorer:</b> <a href={network.explorerUrl+'/tx/'+bundle.txId} target='_blank' rel='noreferrer'>{network.explorerUrl.split('/')[2]}</a>\n    </div>) }\n\n  </div>)\n}\n\nexport default Transactions\n","import './GnosisSafeApps.scss'\n\nimport {useEffect, useRef, useState} from 'react'\n\nconst dapps = [{\n  name: 'LocalTest',\n  url: 'http://localhost:3003',\n  logo: 'http://localhost:3003/logo-test.png',\n  desc: 'Local dapp test with some lorem ipsum stuff'\n},\n  {\n    name: 'ParaSwap',\n    url: 'https://paraswap.io',\n    logo: 'https://paraswap.io/paraswap.svg',\n    desc: 'ParaSwap allows dApps and traders to get the best DEX liquidity by aggregating multiple markets and offering the best rates'\n  },\n  {\n    name: '0xPlasma Finance',\n    url: 'https://apy.plasma.finance',\n    logo: 'https://apy.plasma.finance/logo.svg',\n    desc: 'Cross-chain DeFi & DEX aggregator, farming, asset management, fiat on-ramp'\n  }\n]\n\nexport default function GnosisSafeApps({network, selectedAcc, gnosisConnect, gnosisDisconnect}) {\n\n  const iframeRef = useRef(null)\n  const [selectedApp, setSelectedApp] = useState(null)\n\n  //to refresh iframe\n  const genHash = () => {\n    return selectedApp?.url + network.chainId + selectedAcc\n  }\n\n  useEffect(() => {\n    if (selectedApp) {\n      gnosisConnect({\n        selectedAcc: selectedAcc,\n        iframeRef: iframeRef,\n        app: selectedApp\n      })\n    }\n\n    return () => {\n      gnosisDisconnect()\n    }\n  }, [selectedApp, network, selectedAcc, iframeRef, gnosisConnect, gnosisDisconnect])\n\n  return (\n    <div id=\"plugin-gnosis-conainer\">\n      {selectedApp ? (\n        <iframe title='Ambire Plugin' key={genHash()} ref={iframeRef} src={selectedApp.url}/>\n      ) : (\n        <ul id=\"dapps-container\">\n          {dapps.map((dapp, index) => (\n            <li key={index} onClick={() => setSelectedApp(dapp)}>\n              <div className=\"logo-container\" style={{backgroundImage: `url(${dapp.logo})`}}></div>\n              <div className=\"dapp-name\">{dapp.name}</div>\n              <div className=\"dapp-desc\">{dapp.desc}</div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>)\n}\n","const ERC721Abi = [\n    \"function name() view returns (string memory)\",\n    \"function tokenURI(uint256 _tokenId) view returns (string memory)\",\n    \"function ownerOf(uint256 tokenId) view returns (address)\",\n    \"function transferFrom(address from, address to, uint256 tokenId)\"\n]\n\nexport default ERC721Abi","import './Collectable.scss'\n\nimport { useParams } from 'react-router-dom'\nimport { ethers, getDefaultProvider } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useCallback, useEffect, useState } from 'react'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { BsFillImageFill } from 'react-icons/bs'\nimport * as blockies from 'blockies-ts';\nimport { useToasts } from '../../../hooks/toasts'\nimport { TextInput, Button, Loading } from '../../common'\nimport ERC721Abi from '../../../consts/ERC721Abi'\nimport networks from '../../../consts/networks'\n\nconst ERC721 = new Interface(ERC721Abi)\n\nconst handleUri = uri => {\n    uri = uri.startsWith('data:application/json') ? uri.replace('data:application/json;utf8,', '') : uri\n    return uri.startsWith('ipfs://') ? uri.replace(/ipfs:\\/\\/ipfs\\/|ipfs:\\/\\//g, 'https://ipfs.io/ipfs/') : uri\n}\n\nconst Collectable = ({ selectedAcc, selectedNetwork, addRequest }) => {\n    const { addToast } = useToasts()\n    const { network, collectionAddr, tokenId } = useParams()\n    const [isLoading, setLoading] = useState(true)\n    const [metadata, setMetadata] = useState({\n        owner: {\n            address: '',\n            icon: ''\n        },\n        name: '',\n        description: '',\n        image: '',\n        collection: '',\n        explorerUrl: ''\n    })\n    const [recipientAddress, setRecipientAddress] = useState('')\n    const [isTransferDisabled, setTransferDisabled] = useState(true)\n\n    const sendTransferTx = () => {\n        try {\n            addRequest({\n                id: `transfer_nft_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn: {\n                    to: collectionAddr,\n                    value: '0',\n                    data: ERC721.encodeFunctionData('transferFrom', [metadata.owner.address, recipientAddress, tokenId])\n                }\n            })\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        const isAddressValid = /^0x[a-fA-F0-9]{40}$/.test(recipientAddress)\n        setTransferDisabled(!isAddressValid || selectedAcc === recipientAddress || metadata.owner.address !== selectedAcc || selectedNetwork.id !== network)\n    }, [recipientAddress, metadata, selectedNetwork, selectedAcc, network])\n\n    const fetchMetadata = useCallback(async () => {\n        setLoading(true)\n        setMetadata({})\n    \n        try {\n            const networkDetails = networks.find(({ id }) => id === network)\n            if (!networkDetails) throw new Error('This network is not supported')\n\n            const { rpc, explorerUrl } = networkDetails\n            const provider = getDefaultProvider(rpc)\n            const contract = new ethers.Contract(collectionAddr, ERC721Abi, provider)\n\n            const [collection, address, uri] = await Promise.all([\n                contract.name(),\n                contract.ownerOf(tokenId),\n                contract.tokenURI(tokenId)\n            ])\n\n            try {\n                let json = {}\n\n                if (uri.startsWith('data:application/json')) {\n                    json = JSON.parse(uri.replace('data:application/json;utf8,', ''))\n                } else {\n                    const jsonUrl = handleUri(uri)\n                    const response = await fetch(jsonUrl)\n                    json = await response.json()\n                }\n\n                setMetadata(metadata => ({\n                    ...metadata,\n                    ...json,\n                    image: json ? handleUri(json.image) : null\n                }))\n            } catch(e) {\n                throw e\n            }\n\n            setMetadata(metadata => ({\n                ...metadata,\n                collection,\n                owner: {\n                    address,\n                    icon: blockies.create({ seed: address }).toDataURL()\n                },\n                explorerUrl\n            }))\n\n            setLoading(false)\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }, [addToast, tokenId, collectionAddr, network])\n\n    useEffect(() => fetchMetadata(), [fetchMetadata])\n\n    return (\n        <div id=\"collectable\">\n            <div className=\"panel\">\n                <div className=\"title\">\n                    { metadata.collection } #{ tokenId }\n                    <div className=\"contract\">\n                        Contract address: <a className=\"address\" href={`${metadata.explorerUrl}/address/${collectionAddr}`} target=\"_blank\" rel=\"noreferrer\">{ collectionAddr }</a>\n                    </div>\n                </div>\n                {\n                    isLoading ?\n                        <Loading/>\n                        :\n                        <div className=\"metadata\">\n                            <div className=\"image\" style={{backgroundImage: `url(${metadata.image})`}}>\n                                { !metadata.image ? <BsFillImageFill/> : null }\n                            </div>\n                            <div className=\"info\">\n                                <div className=\"name\">\n                                    { metadata.name }\n                                </div>\n                                <div className=\"description\">\n                                    { metadata.description }\n                                </div>\n                            </div>\n                            <div className=\"owner\">\n                                Owner:\n                                <a className=\"address\" href={`${metadata.explorerUrl}/address/${metadata.owner.address}`} target=\"_blank\" rel=\"noreferrer\">\n                                    <div className=\"icon\" style={{backgroundImage: `url(${metadata.owner.icon})`}}></div>\n                                    { \n                                        metadata.owner.address === selectedAcc ? \n                                            <span>You ({ metadata.owner.address })</span>\n                                            :\n                                            metadata.owner.address\n                                    }\n                                    \n                                </a>\n                            </div>\n                        </div>\n                }\n            </div>\n            <div className=\"panel\">\n                <div className=\"title\">Transfer</div>\n                <div className=\"content\">\n                    <TextInput placeholder=\"Recipient Address\" onInput={(value) => setRecipientAddress(value)}/>\n                    <div className=\"separator\"></div>\n                    <Button icon={<AiOutlineSend/>} disabled={isTransferDisabled} onClick={sendTransferTx}>Send</Button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Collectable","import \"./Wallet.scss\"\n\nimport { Switch, Route, Redirect } from \"react-router-dom\"\nimport Dashboard from \"./Dashboard/Dashboard\"\nimport TopBar from \"./TopBar/TopBar\"\nimport SideBar from \"./SideBar/SideBar\"\nimport Deposit from \"./Deposit/Deposit\"\nimport Swap from \"./Swap/Swap\"\nimport Transfer from \"./Transfer/Transfer\"\nimport Earn from \"./Earn/Earn\"\nimport Security from \"./Security/Security\"\nimport Transactions from './Transactions/Transactions'\nimport PluginGnosisSafeApps from \"../Plugins/GnosisSafeApps/GnosisSafeApps\"\nimport Collectable from \"./Collectable/Collectable\"\n\nexport default function Wallet(props) {\n  const routes = [\n    {\n      path: '/dashboard',\n      component: <Dashboard portfolio={props.portfolio} setNetwork={props.setNetwork} />\n    },\n    {\n      path: '/deposit',\n      component: <Deposit selectedAcc={props.selectedAcc} selectedNetwork={props.network.id} />\n    },\n    {\n      path: '/transfer/:tokenAddress?',\n      component: <Transfer portfolio={props.portfolio} selectedAcc={props.selectedAcc} selectedNetwork={{...props.network}} accounts={props.accounts} addRequest={props.addRequest}/>\n    },\n    {\n      path: '/earn',\n      component: <Earn portfolio={props.portfolio} selectedNetwork={{...props.network}} selectedAcc={props.selectedAcc} addRequest={props.addRequest}/>\n    },\n    {\n      path: '/security',\n      component: <Security relayerURL={props.relayerURL} selectedAcc={props.selectedAcc} selectedNetwork={props.network} accounts={props.accounts} addRequest={props.addRequest}/>\n    },\n    {\n      path: '/transactions',\n      component: <Transactions relayerURL={props.relayerURL} selectedAcc={props.selectedAcc} selectedNetwork={props.network} addRequest={props.addRequest} eligibleRequests={props.eligibleRequests} showSendTxns={props.showSendTxns}/>\n    },\n    {\n      path: '/swap',\n      component: <Swap\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    },\n    {\n      path: '/nft/:network/:collectionAddr/:tokenId',\n      component: <Collectable selectedAcc={props.selectedAcc} selectedNetwork={{...props.network}} addRequest={props.addRequest}/>\n    },\n    {\n      path: '/gnosis/plugins',\n      component: <PluginGnosisSafeApps\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    }\n  ]\n\n  return (\n    <div id=\"wallet\">\n      <TopBar {...props} />\n      <SideBar match={props.match} portfolio={props.portfolio}/>\n      <div id=\"wallet-container\">\n        <Switch>\n          {\n            routes.map(({ path, component }) => (\n              <Route path={props.match.url + path} key={path}>\n                { component ? component : null }\n              </Route>\n            ))\n          }\n          <Route path={props.match.url + \"/\"}>\n            <Redirect to={props.match.url + \"/dashboard\"} />\n          </Route>\n        </Switch>\n      </div>\n    </div>\n  );\n}\n","import { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport TrezorConnect from 'trezor-connect'\nimport { ethers } from 'ethers'\nimport HDNode from 'hdkey'\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\n\nlet wallets = {}\n\n// opts\n// passphrase: string\n// noCache: boolean\nexport function getWallet ({ signer, signerExtra, chainId }, opts = {}) {\n    const id = `${signer.address || signer.one}${chainId}`\n    if (wallets[id]) return wallets[id]\n    return wallets[id] = getWalletNew({ signer, signerExtra, chainId }, opts)\n}\n\nfunction getWalletNew ({ chainId, signer, signerExtra }, opts) {\n    if (signerExtra && signerExtra.type === 'trezor') {\n        const providerTrezor = new TrezorSubprovider({\n            trezorConnectClientApi: TrezorConnect,\n            networkId: chainId\n        })\n        providerTrezor._initialDerivedKeyInfo = getInitialDerivedKeyInfo(signerExtra)\n        // for Trezor/ledger, alternatively we can shim using https://www.npmjs.com/package/web3-provider-engine and then wrap in Web3Provider\n        return {\n            signMessage: hash => providerTrezor.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n            signTransaction: params => providerTrezor.signTransactionAsync({ ...params, from: signer.address })\n        }\n    } else if (signerExtra && signerExtra.type === 'ledger') {\n        const provider = new LedgerSubprovider({\n            networkId: chainId,\n            ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n            baseDerivationPath: signerExtra.info.baseDerivationPath\n        })\n        return {\n            signMessage: hash => provider.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n            signTransaction: params => provider.signTransactionAsync({ ...params, from: signer.address })\n        }\n    } else if (signer.address) {\n        if (!window.ethereum) throw new Error('No web3 support detected in your browser: if you created this account through MetaMask, please install it.')\n        // NOTE: for metamask, use `const provider = new ethers.providers.Web3Provider(window.ethereum)`\n        // 'any' is explained here: https://github.com/ethers-io/ethers.js/issues/1107\n        const provider = new ethers.providers.Web3Provider(window.ethereum, 'any')\n        return provider.getSigner(signer.address)\n    } else if (signer.one) {\n        // @TODO quickAccounts\n    } else {\n        throw new Error('unknown signer type')\n    }\n}\n\nfunction getInitialDerivedKeyInfo (signerExtra) {\n    return {\n        hdKey: HDNode.fromExtendedKey(signerExtra.info.hdKey.xpub),\n        derivationPath: signerExtra.info.derivationPath,\n        baseDerivationPath: signerExtra.info.baseDerivationPath\n    }\n}","const ADDED_GAS_TOKEN = 24000\nconst ADDED_GAS_NATIVE = 13000\n\nexport function isTokenEligible (token, speed, estimation) {\n  const min = token.isStable ? estimation.feeInUSD[speed] : estimation.feeInNative[speed]\n  return parseInt(token.balance) / Math.pow(10, token.decimals) > min\n}\n\n// can't think of a less funny name for that\nexport function getFeePaymentConsequences (token, estimation) {\n  // Relayerless mode\n  if (!estimation.feeInUSD) return { multiplier: 1, addedGas: 0 }\n  // Relayer mode\n  const addedGas = !token.address || token.address === '0x0000000000000000000000000000000000000000'\n    ? ADDED_GAS_NATIVE\n    : ADDED_GAS_TOKEN\n  return {\n    multiplier: (estimation.gasLimit + addedGas) / estimation.gasLimit,\n    addedGas\n  }\n}\n\nexport function mapTxnErrMsg(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Swap expired'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Swap will suffer slippage higher than your requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'Your signer address is no longer authorized.'\n  return msg\n}\n\nexport function getErrHint(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Try performing the swap again'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Try performing the swap again or increase your slippage requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'If you set a new signer for this account, try re-adding the account.'\n  return 'Sending this transaction batch will result in an error.'\n}","import { AiOutlineWarning } from 'react-icons/ai'\nimport { FiHelpCircle } from 'react-icons/fi'\nimport { Loading } from '../common'\nimport { isTokenEligible, getFeePaymentConsequences, mapTxnErrMsg, getErrHint } from './helpers'\n\nconst SPEEDS = ['slow', 'medium', 'fast', 'ape']\n\nexport function FeeSelector ({ disabled, signer, estimation, network, setEstimation, feeSpeed, setFeeSpeed }) {\n    if (!estimation) return (<Loading/>)\n  \n    const insufficientFee = estimation && estimation.feeInUSD\n      && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation)\n    const willFail = (estimation && !estimation.success) || insufficientFee\n    if (willFail) return insufficientFee ?\n        (<h3 className='error'>Insufficient balance for the fee. Accepted tokens: {(estimation.remainingFeeTokenBalances || []).map(x => x.symbol).join(', ')}</h3>)\n        : (<FailingTxn\n            message={<>The current transaction batch cannot be sent because it will fail: {mapTxnErrMsg(estimation.message)}</>}\n            tooltip={getErrHint(estimation.message)}\n        />)\n  \n    if (!estimation.feeInNative) return (<></>)\n    if (estimation && !estimation.feeInUSD && estimation.gasLimit < 40000) {\n      return (<div>\n        <b>WARNING:</b> Fee estimation unavailable when you're doing your first account transaction and you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>, make sure you have {network.nativeAssetSymbol} there.\n      </div>)\n    }\n  \n    const { nativeAssetSymbol } = network\n    const tokens = estimation.remainingFeeTokenBalances || ({ symbol: nativeAssetSymbol, decimals: 18 })\n    const onFeeCurrencyChange = e => {\n      const token = tokens.find(({ symbol }) => symbol === e.target.value)\n      setEstimation({ ...estimation, selectedFeeToken: token })\n    }\n    const feeCurrencySelect = estimation.feeInUSD ? (<>\n      <span style={{ marginTop: '1em' }}>Fee currency</span>\n      <select disabled={disabled} defaultValue={estimation.selectedFeeToken.symbol} onChange={onFeeCurrencyChange}>\n        {tokens.map(token => \n          (<option\n            disabled={!isTokenEligible(token, feeSpeed, estimation)}\n            key={token.symbol}>\n              {token.symbol}\n            </option>\n          )\n        )}\n      </select>\n    </>) : (<></>)\n  \n    const { isStable } = estimation.selectedFeeToken\n    const { multiplier } = getFeePaymentConsequences(estimation.selectedFeeToken, estimation)\n    const feeAmountSelectors = SPEEDS.map(speed => (\n      <div \n        key={speed}\n        className={`feeSquare${feeSpeed === speed ? ' selected' : ''}${disabled ? ' disabled' : ''}`}\n        onClick={() => !disabled && setFeeSpeed(speed)}\n      >\n        <div className='speed'>{speed}</div>\n        <div className='feeEstimation'>\n          {isStable\n            ? '$'+(estimation.feeInUSD[speed] * multiplier)\n            : (\n              nativeAssetSymbol === 'ETH' ?\n                'Ξ '+(estimation.feeInNative[speed] * multiplier)\n                : (estimation.feeInNative[speed] * multiplier)+' '+nativeAssetSymbol\n            )\n          }\n        </div>\n      </div>\n    ))\n  \n    return (<>\n      {feeCurrencySelect}\n      <div className='feeAmountSelectors'>\n        {feeAmountSelectors}\n      </div>\n      {!estimation.feeInUSD ?\n        (<span><b>WARNING:</b> Paying fees in tokens other than {nativeAssetSymbol} is unavailable because you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>.</span>)\n        : (<></>)}\n    </>)\n}\n\nexport function FailingTxn ({ message, tooltip = '' }) {\n    return (<div className='failingTxn'>\n        <AiOutlineWarning></AiOutlineWarning>\n        <h3 className='error'>{message}</h3>\n        <FiHelpCircle title={tooltip}></FiHelpCircle>\n    </div>)\n}","import { useState, useRef } from 'react'\nimport { Loading } from '../common'\nimport { isTokenEligible } from './helpers'\n\nexport default function Actions({ estimation, feeSpeed, approveTxn, rejectTxn, signingStatus }) {\n  const [quickAccCredentials, setQuickAccCredentials] = useState({ code: '', passphrase: '' })\n  const form = useRef(null)\n\n  const rejectButton = (\n    <button type='button' className='rejectTxn' onClick={rejectTxn}>Reject</button>\n  )\n  const insufficientFee = estimation && estimation.feeInUSD\n    && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation)\n  const willFail = (estimation && !estimation.success) || insufficientFee\n  if (willFail) {\n    return (<div className='buttons'>\n      {rejectButton}\n    </div>)\n  }\n\n  const signButtonLabel = signingStatus && signingStatus.inProgress ?\n    (<><Loading/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Signing...</>)\n    : (<>Sign and send</>)\n\n  if (signingStatus && signingStatus.quickAcc) {\n    return (<>\n      <div>\n        {signingStatus.confCodeRequired === 'otp' ? (<b>Please enter your OTP code and your passphrase.</b>) : (<></>)}\n        {signingStatus.confCodeRequired === 'email' ? (<b>A confirmation code was sent to your email, please enter it along with your passphrase.</b>) : (<></>)}\n      </div>\n      <input type='password' required minLength={8} placeholder='Passphrase' value={quickAccCredentials.passphrase} onChange={e => setQuickAccCredentials({ ...quickAccCredentials, passphrase: e.target.value })}></input>\n      <form ref={form} className='quickAccSigningForm' onSubmit={e => { e.preventDefault() }}>\n        {/* Changing the autoComplete prop to a random string seems to disable it more often */}\n        <input\n          type='text' pattern='[0-9]+'\n          title='Confirmation code should be 6 digits'\n          autoComplete='nope'\n          required minLength={6} maxLength={6}\n          placeholder='Confirmation code'\n          value={quickAccCredentials.code}\n          onChange={e => setQuickAccCredentials({ ...quickAccCredentials, code: e.target.value })}\n        ></input>\n        {rejectButton}\n        <button className='approveTxn'\n          onClick={() => {\n            if (!form.current.checkValidity()) return\n            approveTxn({ quickAccCredentials })\n          }}\n        >\n          {signButtonLabel}\n        </button>\n      </form>\n    </>)\n  }\n\n  return (<div className='buttons'>\n      {rejectButton}\n      <button className='approveTxn' disabled={!estimation || signingStatus} onClick={approveTxn}>\n        {signButtonLabel}\n      </button>\n  </div>)\n}\n","import { Interface, hexlify } from 'ethers/lib/utils'\nconst IdentityInterface = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\nconst FactoryInterface = new Interface(require('adex-protocol-eth/abi/IdentityFactory5.2'))\n\nexport async function sendNoRelayer ({ finalBundle, account, network, wallet, estimation, feeSpeed, provider, nativeAssetSymbol }) {\n    const { signer } = finalBundle\n    // @TODO: in case we need deploying, run using deployAndCall pipeline with signed msgs\n    // @TODO: quickAccManager\n    if (signer.quickAccManager) throw new Error('quickAccManager not supported in relayerless mode yet')\n    // currently disabled quickAccManager cause 1) we don't have a means of getting the second sig 2) we still have to sign txes so it's inconvenient\n    // if (signer.quickAccManager) await finalBundle.sign(wallet)\n    //const [to, data] = signer.quickAccManager ? [signer.quickAccManager, QuickAccManagerInterface.encodeFunctionData('send', [finalBundle.identity, [signer.timelock, signer.one, signer.two], [false, finalBundle.signature, '0x']])] :\n  \n    // NOTE: just adding values to gasLimit is bad because 1) they're hardcoded estimates\n    // and 2) the fee displayed in the UI does not reflect that\n    const isDeployed = await provider.getCode(finalBundle.identity).then(code => code !== '0x')\n\n    let gasLimit\n    let to, data\n    if (isDeployed) {\n      gasLimit = estimation.gasLimit + 20000\n      to = finalBundle.identity\n      data = IdentityInterface.encodeFunctionData('executeBySender', [finalBundle.txns])\n    } else {\n      await finalBundle.getNonce(provider)\n      // just some hardcoded value to make the signing pass\n      finalBundle.gasLimit = 400000\n      await finalBundle.sign(wallet)\n      to = account.identityFactoryAddr\n      data = FactoryInterface.encodeFunctionData('deployAndExecute', [account.bytecode, account.salt, finalBundle.txns, finalBundle.signature])\n      gasLimit = (await provider.estimateGas({ to, data, from: signer.address })).toNumber() + 20000\n    }\n  \n    const txn = {\n      from: signer.address,\n      to, data,\n      gas: hexlify(gasLimit),\n      gasPrice: hexlify(Math.floor(estimation.feeInNative[feeSpeed] / estimation.gasLimit * 1e18)),\n      nonce: hexlify(await provider.getTransactionCount(signer.address))\n    }\n    try {\n      let txId\n      if (!wallet.sendTransaction) {\n        // HW wallets which only sign\n        const signed = await wallet.signTransaction(txn)\n        txId = (await provider.sendTransaction(signed)).hash\n      } else {\n        // web3 injectors which can't sign, but can sign+send\n        // they also don't like the gas arg they fully control the chain ID\n        const { chainId } = await wallet.provider.getNetwork()\n        if (network.chainId !== chainId) throw new Error(`Connected to the wrong network: please switch to ${network.name}`)\n        txId = (await wallet.sendTransaction({ from: txn.from, to: txn.to, data: txn.data, gasPrice: txn.gasPrice, nonce: txn.nonce })).hash\n      }\n      return { success: true, txId }\n    } catch(e) {\n      if (e.code === 'INSUFFICIENT_FUNDS') throw new Error(`Insufficient gas fees: you need to have ${nativeAssetSymbol} on ${signer.address}`)\n      throw e\n    }\n  }","//import { GrInspect } from 'react-icons/gr'\n// GiObservatory is also interesting\nimport { GiTakeMyMoney, GiSpectacles } from 'react-icons/gi'\nimport { FaSignature, FaChevronLeft } from 'react-icons/fa'\nimport { MdOutlineAccountCircle } from 'react-icons/md'\nimport './SendTransaction.css'\nimport { useEffect, useState, useMemo } from 'react'\nimport fetch from 'node-fetch'\nimport { Bundle } from 'adex-protocol-eth/js'\nimport { getDefaultProvider, Wallet } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport * as blockies from 'blockies-ts';\nimport { useToasts } from '../../hooks/toasts'\nimport { getWallet } from '../../lib/getWallet'\nimport accountPresets from '../../consts/accountPresets'\nimport { FeeSelector, FailingTxn } from './FeeSelector'\nimport Actions from './Actions'\nimport TxnPreview from '../common/TxnPreview/TxnPreview'\nimport { sendNoRelayer } from './noRelayer'\nimport { isTokenEligible, getFeePaymentConsequences } from './helpers'\nimport { fetchPost } from '../../lib/fetch'\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\n\nconst DEFAULT_SPEED = 'fast'\nconst REESTIMATE_INTERVAL = 15000\n\nfunction toBundleTxn({ to, value, data }) {\n  return [to, value || '0x0', data || '0x']\n}\n\nfunction makeBundle(account, networkId, requests) {\n  const bundle = new Bundle({\n    network: networkId,\n    identity: account.id,\n    txns: requests.map(({ txn }) => toBundleTxn(txn)),\n    signer: account.signer\n  })\n  bundle.extraGas = requests.map(x => x.extraGas || 0).reduce((a, b) => a + b, 0)\n  bundle.requestIds = requests.map(x => x.id)\n  return bundle\n}\n\nexport default function SendTransaction({ relayerURL, accounts, network, selectedAcc, requests, resolveMany, replacementBundle, onDismiss }) {\n  const account = accounts.find(x => x.id === selectedAcc)\n\n  // Also filtered in App.js, but better safe than sorry here\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account, txn }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n      && txn && (!txn.from || txn.from.toLowerCase() === selectedAcc.toLowerCase())\n    // we only need to update on change of IDs\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    ), [requests.map(x => x.id).join(','), network.chainId, selectedAcc])\n  const bundle = useMemo(\n    () => replacementBundle || makeBundle(account, network.id, eligibleRequests),\n    [replacementBundle, network.id, account, eligibleRequests]\n  )\n\n  if (!account || !eligibleRequests.length) return (<div id='sendTransaction'>\n      <h3 className='error'>No account or no requests: should never happen.</h3>\n  </div>)\n  return (<SendTransactionWithBundle\n      relayerURL={relayerURL}\n      bundle={bundle}\n      network={network}\n      account={account}\n      resolveMany={resolveMany}\n      onDismiss={onDismiss}\n  />)\n}\n\nfunction SendTransactionWithBundle ({ bundle, network, account, resolveMany, relayerURL, replacementBundle, onDismiss }) {\n  const [estimation, setEstimation] = useState(null)\n  const [signingStatus, setSigningStatus] = useState(false)\n  const [feeSpeed, setFeeSpeed] = useState(DEFAULT_SPEED)\n  const { addToast } = useToasts()\n  useEffect(() => {\n    if (!bundle.txns.length) return\n    setEstimation(null)\n  }, [bundle, setEstimation])\n  useEffect(() => {    // eslint-disable-next-line react-hooks/exhaustive-deps\n    if (!bundle.txns.length) return\n\n    let unmounted = false\n\n    // get latest estimation\n    const reestimate = () => (relayerURL\n      ? bundle.estimate({ relayerURL, fetch })\n      : bundle.estimateNoRelayer({ provider: getDefaultProvider(network.rpc) })\n    )\n      .then(estimation => {\n        if (unmounted) return\n        estimation.selectedFeeToken = { symbol: network.nativeAssetSymbol }\n        if (estimation.remainingFeeTokenBalances) {\n          const eligibleToken = estimation.remainingFeeTokenBalances\n            .find(token => isTokenEligible(token, feeSpeed, estimation))\n          // If there's no eligibleToken, set it to the first one cause it looks more user friendly (it's the preferred one, usually a stablecoin)\n          estimation.selectedFeeToken = eligibleToken || estimation.remainingFeeTokenBalances[0]\n        }\n        setEstimation(estimation)\n      })\n      .catch(e => {\n        if (unmounted) return\n        console.log('estimation error', e)\n        addToast(`Estimation error: ${e.message || e}`, { error: true })\n      })\n\n    reestimate()\n    const intvl = setInterval(reestimate, REESTIMATE_INTERVAL)\n\n    return () => {\n      unmounted = true\n      clearInterval(intvl)\n    }\n  }, [bundle, setEstimation, feeSpeed, addToast, network, relayerURL])\n\n\n  const { nativeAssetSymbol } = network\n\n  const getFinalBundle = () => {\n    if (!relayerURL) return new Bundle({\n      ...bundle,\n      gasLimit: estimation.gasLimit\n      // set nonce here when we implement \"replace current pending transaction\"\n    })\n\n    const feeToken = estimation.selectedFeeToken\n    const { addedGas, multiplier } = getFeePaymentConsequences(feeToken, estimation)\n    const toHexAmount = amnt => '0x'+Math.round(amnt).toString(16)\n    const feeTxn = feeToken.symbol === nativeAssetSymbol \n      ? [accountPresets.feeCollector, toHexAmount(estimation.feeInNative[feeSpeed]*multiplier*1e18), '0x']\n      : [feeToken.address, '0x0', ERC20.encodeFunctionData('transfer', [\n        accountPresets.feeCollector,\n        toHexAmount(\n          (feeToken.isStable ? estimation.feeInUSD[feeSpeed] : estimation.feeInNative[feeSpeed])\n          * multiplier\n          * Math.pow(10, feeToken.decimals)\n        )\n    ])]\n    return new Bundle({\n      ...bundle,\n      txns: [...bundle.txns, feeTxn],\n      gasLimit: estimation.gasLimit + addedGas + (bundle.extraGas || 0)\n    })\n  }\n\n  const approveTxnImpl = async () => {\n    if (!estimation) throw new Error('no estimation: should never happen')\n\n    const finalBundle = getFinalBundle()\n    const provider = getDefaultProvider(network.rpc)\n    const signer = finalBundle.signer\n\n    const wallet = getWallet({\n      signer,\n      signerExtra: account.signerExtra,\n      chainId: network.chainId\n    })\n    if (relayerURL) {\n      if (typeof finalBundle.nonce !== 'number') await finalBundle.getNonce(provider)\n      await finalBundle.sign(wallet)\n      return await finalBundle.submit({ relayerURL, fetch })\n    } else {\n      return await sendNoRelayer({\n        finalBundle, account, network, wallet, estimation, feeSpeed, provider, nativeAssetSymbol\n      })\n    }\n  }\n\n  const approveTxnImplQuickAcc = async ({ quickAccCredentials }) => {\n    if (!estimation) throw new Error('no estimation: should never happen')\n    if (!relayerURL) throw new Error('Email/passphrase account signing without the relayer is not supported yet')\n\n    const finalBundle = (signingStatus && signingStatus.finalBundle) || getFinalBundle()\n    const signer = finalBundle.signer\n\n    if (typeof finalBundle.nonce !== 'number') {\n      await finalBundle.getNonce(getDefaultProvider(network.rpc))\n    }\n\n    const { signature, success, message, confCodeRequired } = await fetchPost(\n      `${relayerURL}/second-key/${bundle.identity}/${network.id}/sign`, {\n        signer, txns: finalBundle.txns, nonce: finalBundle.nonce, gasLimit: finalBundle.gasLimit,\n        code: quickAccCredentials && quickAccCredentials.code\n      }\n    )\n    if (!success) {\n      if (!message) throw new Error(`Secondary key: no success but no error message`)\n      if (message.includes('invalid confirmation code')) {\n        addToast('Unable to sign: wrong confirmation code', { error: true })\n        return\n      }\n      throw new Error(`Secondary key error: ${message}`)\n    }\n    if (confCodeRequired) {\n      setSigningStatus({ quickAcc: true, finalBundle, confCodeRequired })\n    } else {\n      if (!signature) throw new Error(`QuickAcc internal error: there should be a signature`)\n      if (!account.primaryKeyBackup) throw new Error(`No key backup found: perhaps you need to import the account via JSON?`)\n      setSigningStatus({ quickAcc: true, inProgress: true })\n      const pwd = quickAccCredentials.passphrase || alert('Enter passphrase')\n      const wallet = await Wallet.fromEncryptedJson(JSON.parse(account.primaryKeyBackup), pwd)\n      await finalBundle.sign(wallet)\n      finalBundle.signatureTwo = signature\n      return await finalBundle.submit({ relayerURL, fetch })\n    }\n  }\n\n  const approveTxn = ({ quickAccCredentials }) => {\n    if (signingStatus && signingStatus.inProgress) return\n    setSigningStatus(signingStatus || { inProgress: true })\n\n    const requestIds = bundle.requestIds\n    const blockExplorerUrl = network.explorerUrl\n    const approveTxnPromise = bundle.signer.quickAccManager ?\n      approveTxnImplQuickAcc({ quickAccCredentials })\n      : approveTxnImpl()\n    approveTxnPromise.then(bundleResult => {\n      // special case for approveTxnImplQuickAcc\n      if (!bundleResult) return\n\n      // be careful not to call this after onDimiss, cause it might cause state to be changed post-unmount\n      setSigningStatus(null)\n\n      // Inform everything that's waiting for the results (eg WalletConnect)\n      const skipResolve = !bundleResult.success && bundleResult.message && bundleResult.message.match(/underpriced/i)\n      if (!skipResolve && requestIds) resolveMany(requestIds, { success: bundleResult.success, result: bundleResult.txId, message: bundleResult.message })\n\n      if (bundleResult.success) {\n        addToast((\n          <span>Transaction signed and sent successfully!\n            &nbsp;Click to view on block explorer.\n          </span>), { url: blockExplorerUrl+'/tx/'+bundleResult.txId })\n        onDismiss()\n      } else addToast(`Transaction error: ${bundleResult.message || 'unspecified error'}`, { error: true })\n    })\n    .catch(e => {\n      setSigningStatus(null)\n      console.error(e)\n      if (e && e.message.includes('must provide an Ethereum address')) {\n        addToast(`Signing error: not connected with the correct address. Make sure you're connected with ${bundle.signer.address}.`, { error: true })\n      } else if (e && e.message.includes('0x6b0c')) {\n        // not sure if that's actually the case with this hellish error, but after unlocking the device it no longer appeared\n        // however, it stopped appearing after that even if the device is locked, so I'm not sure it's related...\n        addToast(`Ledger: unknown error (0x6b0c): is your Ledger unlocked and in the Ethereum application?`, { error: true })\n      } else {\n        console.log(e.message)\n        addToast(`Signing error: ${e.message || e}`, { error: true })\n      }\n    })\n  }\n\n  // Not applicable when .requestIds is not defined (replacement bundle)\n  const rejectTxn = bundle.requestIds && (() => {\n    resolveMany(bundle.requestIds, { message: 'user rejected' })\n  })\n\n  return (<div id='sendTransaction'>\n      <div className='dismiss' onClick={onDismiss}>\n        <FaChevronLeft size={35}/><span>back</span>\n      </div>\n      <h2>Pending transactions: {bundle.txns.length}</h2>\n      <div className='container'>\n        <div id='topPanel' className='panel'>\n          <div className='title'>\n            <MdOutlineAccountCircle/>\n            Signing with account:\n          </div>\n          <div className=\"content\">\n            <div className='account'>\n              <img className='icon' src={blockies.create({ seed: account.id }).toDataURL()} alt='Account Icon'/>\n              { account.id }\n            </div>\n            on\n            <div className='network'>\n              <img className='icon' src={network.icon} alt='Network Icon'/>\n              { network.name }\n            </div>\n          </div>\n        </div>\n        <div id='panelHolder'>\n          <div className='panel'>\n              <div className='heading'>\n                      <div className='title'>\n                          <GiSpectacles size={35}/>\n                          Transaction summary\n                      </div>\n                      <div className='listOfTransactions'>\n                          {bundle.txns.map((txn, i) => {\n                            const isFirstFailing = estimation && !estimation.success && estimation.firstFailing === i\n                            return (<TxnPreview\n                              key={txn.join(':')}\n                              onDismiss={bundle.requestIds && (() => resolveMany([bundle.requestIds[i]], { message: 'rejected' }))}\n                              txn={txn} network={bundle.network} account={bundle.identity}\n                              isFirstFailing={isFirstFailing}/>\n                            )\n                          })}\n                      </div>\n                      <div className='batchingNote'>\n                          <b>DEGEN TIP:</b> You can sign multiple transactions at once. Add more transactions to this batch by interacting with a connected dApp right now.\n                      </div>\n              </div>\n          </div>\n          <div className='secondaryPanel'>\n              <div className='panel feePanel'>\n                  <div className='heading'>\n                          <div className='title'>\n                              <GiTakeMyMoney size={35}/>\n                              Fee\n                          </div>\n                          <FeeSelector\n                            disabled={signingStatus && signingStatus.finalBundle && !(estimation && !estimation.success)}\n                            signer={bundle.signer}\n                            estimation={estimation}\n                            setEstimation={setEstimation}\n                            network={network}\n                            feeSpeed={feeSpeed}\n                            setFeeSpeed={setFeeSpeed}\n                          ></FeeSelector>\n                  </div>\n              </div>\n              <div className='panel actions'>\n                  <div className='heading'>\n                      <div className='title'>\n                          <FaSignature size={35}/>\n                          Sign\n                      </div>\n                  </div>\n                  {(bundle.signer.quickAccManager && !relayerURL) ? (\n                    <FailingTxn message='Signing transactions with an email/passphrase account without being connected to the relayer is unsupported.'></FailingTxn>\n                  ) : (\n                      <Actions\n                        estimation={estimation}\n                        approveTxn={approveTxn}\n                        rejectTxn={rejectTxn}\n                        signingStatus={signingStatus}\n                        feeSpeed={feeSpeed}\n                      />\n                  )}\n              </div>\n          </div>\n        </div>\n      </div>\n  </div>)\n}","import {\n  getSDKVersion,\n  MessageFormatter,\n  Methods\n} from '@gnosis.pm/safe-apps-sdk'\n\nfunction GnosisConnector(_iframeRef, _app) {\n  this.iframeRef = _iframeRef\n  this.app = _app\n  this.handlers = {}\n\n  this.on = (method, handler) => {\n    this.handlers[method] = handler\n  }\n\n  this.isValidMessage = (msg) => {\n    // @ts-expect-error .parent doesn't exist on some possible types\n    if (!msg?.source?.parent) {\n      return false\n    }\n    const sentFromIframe = msg.source.parent === window.parent\n    const knownMethod = Object.values(Methods).includes(msg.data.method)\n\n    return sentFromIframe && knownMethod\n  }\n\n  this.canHandleMessage = (msg) => {\n    return Boolean(this.handlers[msg.data.method])\n  }\n\n  this.send = (data, requestId, error) => {\n    const sdkVersion = getSDKVersion()\n    const msg = error\n      ? MessageFormatter.makeErrorResponse(requestId, error, sdkVersion)\n      : MessageFormatter.makeResponse(requestId, data, sdkVersion)\n\n    if (this.iframeRef) {\n      //console.log(\"Posting to child\")\n      //console.log(msg)\n      this.iframeRef.current?.contentWindow?.postMessage(msg, '*')\n    } else {\n      console.log('Iframe not referenced ')\n    }\n  }\n\n  this.handleIncomingMessage = async (msg) => {\n\n    const validMessage = this.isValidMessage(msg)\n    const hasHandler = this.canHandleMessage(msg)\n\n    if (validMessage && hasHandler) {\n      const handler = this.handlers[msg.data.method]\n      try {\n        // @ts-expect-error Handler existence is checked in this.canHandleMessage\n        const response = await handler(msg)\n\n        // If response is not returned, it means the response will be send somewhere else\n        if (typeof response !== 'undefined') {\n          this.send(response, msg.data.id)\n        }\n      } catch (err) {\n        console.error(\"GS : \" + err);\n        this.send(err.message, msg.data.id, true)\n        /*trackError(Errors._901, err.message, {\n          contexts: {\n            safeApp: this.app,\n            request: msg.data,\n          },\n        })*/\n      }\n    }\n  }\n\n  this.clear = () => {\n    //console.log('removeListener...')\n    window.removeEventListener('message', this.handleIncomingMessage)\n  }\n\n  console.log('new appCommunicator')\n  window.addEventListener('message', this.handleIncomingMessage)\n}\n\nexport {GnosisConnector}\n","import { useEffect } from 'react'\nimport { getTransactionSummary } from '../lib/humanReadableTransactions'\n\nconst REQUEST_TITLE = 'Ambire Wallet: new transaction request'\nlet currentNotifs = []\n\nexport default function useNotifications (requests) {\n    useEffect(() => {\n        if (window.Notification && Notification.permission !== 'denied') {\n            Notification.requestPermission(() => {\n                // @TODO: perhaps warn the user in some way\n            })\n        }\n    }, [])\n\n    requests.forEach(request => {\n        if (currentNotifs.find(n => n.id === request.id)) return\n        // @TODO: other request types, eg signature\n        if (!request.txn) return\n        // @TODO network name\n        const notification = new Notification(REQUEST_TITLE, {\n            requireInteraction: true,\n            body: getTransactionSummary([request.txn.to, request.txn.value, request.txn.data], request.chainId, request.account),\n            icon: 'public/logo192.png',\n        })\n        //notification.onclose = \n        notification.onclick = () => {\n            window.focus()\n            notification.close()\n        }\n        currentNotifs.push({ id: request.id, notification })\n    })\n\n    currentNotifs = currentNotifs.filter(({ id, notification }) => {\n        if (!requests.find(r => r.id === id)) {\n            notification.close()\n            return false\n        }\n        return true\n    })\n  }\n  ","import './App.scss'\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from 'react-router-dom'\nimport { useState, useEffect, useMemo } from 'react'\nimport EmailLogin from './components/EmailLogin/EmailLogin'\nimport AddAccount from './components/AddAccount/AddAccount'\nimport Wallet from './components/Wallet/Wallet'\nimport ToastProvider from './components/ToastProvider/ToastProvider'\nimport SendTransaction from './components/SendTransaction/SendTransaction'\nimport useAccounts from './hooks/accounts'\nimport useNetwork from './hooks/network'\nimport useWalletConnect from './hooks/walletconnect'\nimport useGnosisSafe from './hooks/useGnosisSafe'\nimport useNotifications from './hooks/notifications'\nimport { usePortfolio } from './hooks'\n\nconst relayerURL = process.env.hasOwnProperty('REACT_APP_RELAYER_URL') ? process.env.REACT_APP_RELAYER_URL : 'http://localhost:1934'\n\nfunction AppInner () {\n  const { accounts, selectedAcc, onSelectAcc, onAddAccount } = useAccounts()\n  const { network, setNetwork, allNetworks } = useNetwork()\n  const { connections, connect, disconnect, requests: wcRequests, resolveMany: wcResolveMany } = useWalletConnect({\n    account: selectedAcc,\n    chainId: network.chainId\n  })\n  const { requests: gnosisRequests, resolveMany: gnosisResolveMany, connect: gnosisConnect, disconnect: gnosisDisconnect } = useGnosisSafe({\n\t  selectedAccount: selectedAcc,\n\t  network: network,\n    verbose: 1\n\t}, [selectedAcc, network])\n\n  const portfolio = usePortfolio({\n    currentNetwork: network.id,\n    account: selectedAcc\n  })\n\n  // Internal requests: eg from the Transfer page, Security page, etc. - requests originating in the wallet UI itself\n  // unlike WalletConnect or SafeSDK requests, those do not need to be persisted\n  const [internalRequests, setInternalRequests] = useState([])\n  const addRequest = req => setInternalRequests(reqs => [...reqs, req])\n\n  // Merge all requests\n  const requests = useMemo(() => [...internalRequests, ...wcRequests, ...gnosisRequests], [wcRequests, internalRequests, gnosisRequests])\n  const resolveMany = (ids, resolution) => {\n    wcResolveMany(ids, resolution)\n    gnosisResolveMany(ids, resolution)\n    setInternalRequests(reqs => reqs.filter(x => !ids.includes(x.id)))\n  }\n\n  // Show notifications for all requests\n  useNotifications(requests)\n\n  // Navigate to the send transaction dialog if we have a new txn\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n    ), [requests, network.chainId, selectedAcc])\n  const [sendTxnsShowing, setSendTxnsShowing] = useState(() => !!eligibleRequests.length)\n  useEffect(\n    () => setSendTxnsShowing(!!eligibleRequests.length),\n    [eligibleRequests.length]\n  )\n  const dismissSendTxns = () => setSendTxnsShowing(false)\n\n  return (<>\n    {sendTxnsShowing ? (\n      <SendTransaction accounts={accounts} selectedAcc={selectedAcc} network={network} requests={eligibleRequests} resolveMany={resolveMany} relayerURL={relayerURL} onDismiss={dismissSendTxns}>\n      </SendTransaction>\n      ) : (<></>)\n    }\n    <Switch>\n      <Route path=\"/add-account\">\n        <AddAccount relayerURL={relayerURL} onAddAccount={onAddAccount}></AddAccount>\n      </Route>\n\n      <Route path=\"/email-login\">\n        <EmailLogin relayerURL={relayerURL} onAddAccount={onAddAccount}></EmailLogin>\n      </Route>\n\n      <Route path=\"/wallet\">\n        <Wallet\n          match={{ url: \"/wallet\" }}\n          accounts={accounts}\n          selectedAcc={selectedAcc}\n          portfolio={portfolio}\n          onSelectAcc={onSelectAcc}\n          allNetworks={allNetworks}\n          network={network}\n          setNetwork={setNetwork}\n          addRequest={addRequest}\n          connections={connections}\n          // needed by the top bar to disconnect/connect dapps\n          connect={connect}\n          disconnect={disconnect}\n          // needed by the gnosis plugins\n          gnosisConnect={gnosisConnect}\n          gnosisDisconnect={gnosisDisconnect}\n          // required for the security and transactions pages\n          relayerURL={relayerURL}\n          // required by the transactions page\n          eligibleRequests={eligibleRequests}\n          showSendTxns={() => setSendTxnsShowing(true)}\n        >\n        </Wallet>\n      </Route>\n\n      <Route path=\"/\">\n        <Redirect to={selectedAcc ? \"/wallet/dashboard\" : \"/add-account\" }/>\n      </Route>\n\n    </Switch>\n  </>)\n}\n\n// handles all the providers so that we can use provider hooks inside of AppInner\nexport default function App() {\n  return (\n    <ToastProvider>\n      <Router>\n        <AppInner/>\n      </Router>\n    </ToastProvider>\n  )\n}\n","import { useState, useCallback } from 'react'\nimport { useToasts } from '../hooks/toasts'\nimport { useHistory } from 'react-router-dom'\n\nexport default function useAccounts () {\n    const { addToast } = useToasts()\n    const history = useHistory()\n\n    const [accounts, setAccounts] = useState(() => {\n      try {\n        const accs = JSON.parse(localStorage.accounts || '[]')\n        if (!Array.isArray(accs)) throw new Error('accounts: incorrect format')\n        return accs\n      } catch (e) {\n        console.error('accounts parsing failure', e)\n        return []\n      }\n    })\n    const [selectedAcc, setSelectedAcc] = useState(() => {\n      const initialSelectedAcc = localStorage.selectedAcc\n      if (!initialSelectedAcc || !accounts.find(x => x.id === initialSelectedAcc)) {\n        return accounts[0] ? accounts[0].id : ''\n      }\n      return initialSelectedAcc\n    })\n  \n    const onSelectAcc = selected => {\n      localStorage.selectedAcc = selected\n      setSelectedAcc(selected)\n    }\n    const onAddAccount = useCallback((acc, opts = {}) => {\n      if (!(acc.id && acc.signer)) throw new Error('account: internal err: missing ID or signer')\n\n      const existingIdx = accounts\n        .findIndex(x => x.id.toLowerCase() === acc.id.toLowerCase())\n  \n      if (existingIdx !== -1) addToast('Account already added')\n\n      if (existingIdx === -1) accounts.push(acc)\n      else accounts[existingIdx] = acc\n  \n      // need to make a copy, otherwise no rerender\n      setAccounts([ ...accounts ])\n  \n      localStorage.accounts = JSON.stringify(accounts)\n  \n      if (opts.select) onSelectAcc(acc.id)\n      if (Object.keys(accounts).length) {\n        history.push('/wallet/dashboard')\n      }\n    }, [accounts, addToast, history])\n    return { accounts, selectedAcc, onSelectAcc, onAddAccount }\n  }","import { useState, useCallback } from 'react'\nimport networks from '../consts/networks'\n\nexport default function useNetwork ({ defaultNetwork = 'ethereum' } = {}) {\n    const [networkId, setNetworkId] = useState(() =>\n        networks.find(n => n.id === localStorage.network) ? localStorage.network : defaultNetwork\n    )\n    const setNetwork = useCallback(networkNameOrKey => {\n        const network = networks.find(n => n.id === networkNameOrKey || n.name === networkNameOrKey)\n        if (!network) throw new Error(`no network found: ${networkNameOrKey}`)\n        localStorage.network = network.id\n        setNetworkId(network.id)\n    }, [setNetworkId])\n\n    return {\n        setNetwork,\n        network: networks.find(n => n.id === networkId),\n        allNetworks: networks\n    }\n}","import {useCallback, useEffect, useState, useRef, useMemo} from 'react'\nimport {useToasts} from '../hooks/toasts'\n\nimport {Methods} from '@gnosis.pm/safe-apps-sdk'\nimport {GnosisConnector} from '../lib/GnosisConnector'\nimport {getDefaultProvider} from 'ethers'\n\nconst STORAGE_KEY = 'gnosis_safe_state'\n\nexport default function useGnosisSafe({ selectedAccount, network, verbose = 1 }) {\n  // One connector at a time\n  const connector = useRef(null)\n\n  const uniqueId = useMemo(() => new Date().getTime() + ' ' + network.chainId + ' ' + selectedAccount, [selectedAccount, network])\n\n  const { addToast } = useToasts()\n\n  // This is needed cause of the Gnosis Safe event handlers (listeners)\n  const stateRef = useRef()\n  stateRef.current = {\n    selectedAccount,\n    network\n  }\n\n  const [requests, setRequests] = useState(() => {\n    const json = localStorage[STORAGE_KEY]\n    if (!json) return []\n    try {\n      const parsed = JSON.parse(json)\n      return Array.isArray(parsed) ? parsed : []\n    } catch (e) {\n      console.error(e)\n      return []\n    }\n  })\n\n  const connect = useCallback(connectorOpts => {\n    verbose>1 && console.log(\"GS: creating connector\")\n\n    try {\n      connector.current = new GnosisConnector(\n        connectorOpts.iframeRef,\n        connectorOpts.app,\n        uniqueId\n      )\n    } catch (e) {\n      addToast(`Unable to connect to ${connectorOpts.app.url}: ${e.message}`)\n      return null\n    }\n\n    // reply back to iframe with safe data\n    connector.current.on(Methods.getSafeInfo, () => {\n      return {\n        safeAddress: stateRef.current.selectedAccount,\n        network: stateRef.current.network.id,\n        chainId: stateRef.current.network.chainId,\n        owners: [stateRef.current.selectedAccount],\n        threshold: 1, //Number of confirmations (not used in ambire)\n      }\n    })\n\n    //reply back to iframe with safe data\n\n    // connector.current.on(Methods.getSafeBalances, async (msg) => {\n    //   verbose>0 && console.log(\"DApp requested getSafeBalances\") && console.log(msg)\n\n    //TODO later\n      //await portfolio.updatePortfolio(\"polygon\", selectedAccount, true)//not this because it does NOT return the updated state anyway\n      //console.log(portfolio)\n\n      //struct template\n    /*connector.current.on(Methods.getSafeBalances, () => {\n      return {\n        \"fiatTotal\": \"0.18072\",\n          \"items\": [\n          {\n            \"tokenInfo\": {\n              \"type\": \"NATIVE_TOKEN\",\n              \"address\": \"0x0000000000000000000000000000000000000000\",\n              \"decimals\": 18,\n              \"symbol\": \"MATIC\",\n              \"name\": \"Matic\",\n              \"logoUri\": \"https://safe-transaction-assets.staging.gnosisdev.com/chains/137/currency_logo.png\"\n            },\n            \"balance\": \"100000000000000000\",\n            \"fiatBalance\": \"0.18072\",\n            \"fiatConversion\": \"1.8072\"\n          }\n        ]\n      }\n     })*/\n\n    connector.current.on(Methods.rpcCall, async (msg) => {\n      verbose > 0 && console.log(\"DApp requested rpcCall\", msg)\n\n      if (!msg?.data?.params){\n        throw new Error(\"invalid call object\")\n      }\n      const method = msg.data.params.call//0 == tx, 1 == blockNum\n      const callTx = msg.data.params.params//0 == tx, 1 == blockNum\n\n      const provider = getDefaultProvider(stateRef.current.network.rpc)\n      let result\n      if (method === \"eth_call\") {\n        result = await provider.call(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if(method === \"eth_getBalance\") {\n        result = await provider.getBalance(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if(method === \"eth_blockNumber\") {\n        result = await provider.getBlockNumber().catch(err => {\n          throw err\n        })\n      } else if(method === \"eth_getBlockByNumber\" || method === \"eth_getBlockByHash\") {\n        if(callTx[1]) {\n          result = await provider.getBlockWithTransactions(callTx[0]).catch(err => {\n            throw err\n          })\n        } else {\n          result = await provider.getBlock(callTx[0]).catch(err => {\n            throw err\n          })\n        }\n      } else if(method === \"eth_getTransactionByHash\") {\n        result = await provider.getTransaction(callTx[0]).catch(err => {\n          throw err\n        })\n      } else if(method === \"eth_getCode\") {\n        result = await provider.getCode(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if(method === \"eth_getBlockByNumber\") {\n        result = await provider.getBlock(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if(method === \"eth_getTransactionReceipt\") {\n        result = await provider.getTransactionReceipt(callTx[0]).catch(err => {\n          throw err\n        })\n      } else {\n        throw new Error(\"method not supported \" + method)\n      }\n      return result\n    })\n\n    connector.current.on(Methods.sendTransactions, (msg) => {\n      verbose>0 && console.log(\"DApp requested sendTx\") && console.log(msg)\n\n      const data = msg?.data\n      if (!data) {\n        console.error('GS: no data')\n        return\n      }\n\n      const id = 'gs_' + data.id\n      const txs = data?.params?.txs\n      if (txs?.length) {\n        for (let i in txs) {\n          if (!txs[i].from) txs[i].from = stateRef.current.selectedAccount\n        }\n      } else {\n        console.error('GS: no txs in received payload')\n        return\n      }\n\n      const request = {\n        id,\n        forwardId: msg.data.id,\n        type: 'eth_sendTransaction',\n        txn: txs[0], //if anyone finds a dapp that sends a bundle, please reach me out\n        chainId: stateRef.current.network.chainId,\n        account: stateRef.current.selectedAccount\n      }\n\n      setRequests(prevRequests => prevRequests.find(x => x.id === request.id) ? prevRequests : [...prevRequests, request])\n    })\n\n    connector.current.on(Methods.getTxBySafeTxHash, async (msg) => {\n      const { safeTxHash } = msg.data.params\n      const provider = getDefaultProvider(stateRef.current.network.rpc)\n      try{\n        const res = await provider.getTransaction(safeTxHash)\n        return {\n          gasPrice: res.gasPrice.toString(),\n          gasLimit: res.gasLimit.toString(),\n          value: res.value.toString(),\n          ...res\n        }\n      }catch(e){\n        console.error(\"GS: Err getting transaction \" + safeTxHash);\n        console.log(e);\n        return {};\n      }\n    })\n\n  }, [uniqueId, addToast, verbose])\n\n\n  const disconnect = useCallback(() => {\n    verbose>1 && console.log(\"GS: disconnecting connector\")\n    connector.current?.clear()\n  }, [verbose])\n\n  const resolveMany = (ids, resolution) => {\n    for (let req of requests.filter(x => ids.includes(x.id))) {\n      const replyData = {\n        id: req.forwardId,\n        success: null,\n        txId: null,\n        error: null\n      }\n      if (!resolution) {\n        replyData.error = 'Nothing to resolve'\n        replyData.success = false\n      } else if(!resolution.success) {\n        replyData.error = resolution.message\n        replyData.success = false\n      } else { //onSuccess\n        replyData.success = true\n        replyData.txId = resolution.result\n        replyData.safeTxHash = resolution.result\n      }\n      if (!connector.current) {\n        //soft error handling: sendTransaction has issues\n        //throw new Error(\"gnosis safe connector not set\")\n        console.error(\"gnosis safe connector not set\");\n      }else{\n\t\t  console.log('replyData', replyData)\n        connector.current.send(replyData, req.forwardId, replyData.error)\n      }\n    }\n\n    setRequests(prevRequests => prevRequests.filter(x => !ids.includes(x.id)))\n  }\n\n  // Side effects that will run on every state change/rerender\n  useEffect(() => {\n    localStorage[STORAGE_KEY] = JSON.stringify(requests)\n  }, [requests, selectedAccount, network])\n\n  return {\n    requests,\n    resolveMany,\n    connect,\n    disconnect\n  }\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}