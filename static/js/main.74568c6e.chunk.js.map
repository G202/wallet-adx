{"version":3,"sources":["lib/fetch.js","components/common/Button/Button.js","components/common/Chart/Chart.js","components/common/Checkbox/Checkbox.js","helpers/onClickOutside.js","components/common/DropDown/DropDown.js","components/common/Loading/Loading.js","components/ToastProvider/ToastProvider.js","hooks/toasts.js","consts/networks.js","config/index.js","hooks/portfolio.js","consts/supportedProtocols.js","hooks/walletconnect.js","hooks/relayerData.js","components/ModalProvider/ModalProvider.js","hooks/modals.js","hooks/permissions.js","components/common/Modal/Modal.js","components/common/Segments/Segments.js","components/common/Select/Select.js","components/common/TextInput/TextInput.js","components/common/NumberInput/NumberInput.js","components/common/Toggle/Toggle.js","components/LoginOrSignupForm/LoginOrSignupForm.js","components/EmailLogin/EmailLogin.js","consts/accountPresets.js","components/AddAccount/AddAccount.js","components/Wallet/Dashboard/Protocols/ProtocolsPlaceholder/ProtocolsPlaceholder.js","components/Wallet/Dashboard/Protocols/Protocols.js","components/Wallet/Dashboard/Collectibles/CollectiblesPlaceholder/CollectiblesPlaceholder.js","components/Wallet/Dashboard/Collectibles/Collectibles.js","components/Wallet/Dashboard/Dashboard.js","components/Wallet/TopBar/Accounts/Accounts.js","helpers/permissions.js","components/Wallet/TopBar/TopBar.js","components/Wallet/SideBar/SideBar.js","resources/ramp.svg","resources/paytrie.svg","resources/transak.svg","services/providers.js","helpers/popupHelper.js","components/Wallet/Deposit/Providers/Providers.js","resources/ethereum-logo.png","resources/polygon-logo.svg","components/Wallet/Deposit/Deposit.js","components/Wallet/Swap/SushiIframe.js","components/Wallet/Swap/Swap.js","components/Wallet/Transfer/SendPlaceholder/SendPlaceholder.js","components/Wallet/Transfer/Transfer.js","consts/AAVELendingPoolAbi.js","consts/AAVELendingPoolProviders.js","resources/aave.svg","components/Wallet/Earn/Cards/Card/Card.js","components/Wallet/Earn/Cards/AAVECard/defaultTokens.js","components/Wallet/Earn/Cards/AAVECard/AAVECard.js","components/Wallet/Earn/Earn.js","consts/privilegesOptions.js","components/Wallet/Security/Security.js","lib/humanizers/UniRouters.js","lib/humanizers/ERC20.js","lib/humanizers/AaveLendingPoolV2.js","lib/humanizers/ERC721.js","lib/humanizers/WETH.js","lib/humanizers/AmbireIdentity.js","lib/humanizers/index.js","lib/humanReadableTransactions.js","components/common/TxnPreview/TxnPreview.js","components/Wallet/Transactions/Transactions.js","components/Plugins/GnosisSafeApps/GnosisSafeApps.js","consts/ERC721Abi.js","components/Wallet/Collectible/Collectible.js","components/Modals/PermissionsModal/PermissionsModal.js","components/Wallet/Wallet.js","lib/getWallet.js","components/SendTransaction/helpers.js","components/SendTransaction/FeeSelector.js","components/SendTransaction/Actions.js","components/SendTransaction/noRelayer.js","components/SendTransaction/SendTransaction.js","components/SignMessage/SignMessage.js","lib/GnosisConnector.js","hooks/notifications.js","App.js","hooks/accounts.js","hooks/network.js","hooks/useGnosisSafe.js","reportWebVitals.js","index.js"],"names":["fetch","require","fetchPost","url","body","a","headers","method","JSON","stringify","r","json","fetchGet","response","status","Error","fetchCaught","params","resp","console","error","errMsg","message","Button","children","small","icon","disabled","onClick","red","clear","title","className","Chart","data","size","useState","hoveredItem","setHoveredItem","colors","height","width","onMouseEnter","item","label","sort","b","value","sortData","startAngle","strokeColor","innerRadius","selectedOffset","legend","toggled","log","style","map","i","backgroundColor","index","length","Math","trunc","Checkbox","props","inputElem","type","checked","required","onChange","useOnClickOutside","ref","handler","useEffect","listener","event","current","contains","target","document","addEventListener","removeEventListener","DropDown","id","badge","closed","onOpen","closeOnClick","useRef","transitionRef","isDropDownOpen","setDropDownOpen","backgroundImage","CSSTransition","unmountOnExit","in","timeout","classNames","nodeRef","Loading","ToastContext","React","createContext","ToastProvider","toasts","setToasts","addToast","useCallback","content","options","toast","createRef","setTimeout","removeToast","filter","t","Provider","TransitionGroup","href","rel","useToasts","useContext","networks","chainId","rpc","nativeAssetSymbol","name","explorerUrl","hidden","visibilityChange","ZAPPER_API_KEY","process","SUSHI_SWAP_FRAME","suportedProtocols","network","protocols","getBalances","apiKey","protocol","address","msHidden","webkitHidden","lastOtherProcolsRefresh","noop","noopSessionStorage","setSession","getSession","removeSession","SUPPORTED_METHODS","connectors","useWalletConnect","account","onCallRequest","stateRef","useReducer","state","action","connections","uri","session","x","requests","find","request","ids","includes","localStorage","parse","e","dispatch","connect","connectorOpts","connector","WalletConnectCore","cryptoLib","sessionStorage","sessionStart","sessionTimeout","onError","err","peerMeta","on","payload","Date","now","clearTimeout","approveSession","accounts","from","toLowerCase","wcUri","txn","rejectRequest","disconnect","killSession","forEach","updateConnections","updateSession","wcConnect","URLSearchParams","window","location","split","slice","join","get","clipboardError","isFirefox","navigator","userAgent","indexOf","tryReadClipboard","clipboard","readText","startsWith","runInitEffects","resolveMany","resolution","success","approveRequest","result","useRelayerData","isLoading","setLoading","setData","setErr","updateData","unloaded","then","catch","ModalContext","ModalProvider","modal","setModal","showModal","element","hideModal","useModals","onPermissionChange","permissions","query","onchange","usePermissions","arePermissionsLoaded","setPermissionsLoaded","isClipboardGranted","setClipboardGranted","isNoticationsGranted","setNotificationsGranted","permissionsModalHidden","modalHidden","setModalHidden","checkForPermissions","clipboardState","notificationsState","Modal","Segments","defaultValue","segments","setValue","setSegment","segment","Select","native","monospace","searchable","items","hiddenTextInput","isOpen","setOpen","search","setSearch","selectedItem","setSelectedItem","filteredItems","selectItem","focus","ev","onInput","src","alt","TextInput","placeholder","info","copy","writeText","NumberInput","min","max","button","onButtonClick","Toggle","defaultChecked","LoginOrSignupForm","onAccRequest","inProgress","passConfirmInput","email","passphrase","passphraseConfirm","setState","onUpdate","updates","newState","invalid","setCustomValidity","isSignup","additionalOnSignup","backupOptout","additionalInputs","minLength","onSubmit","preventDefault","accType","EmailLogin","relayerURL","onAddAccount","requiresEmailConfFor","setRequiresConfFor","setInProgress","onTryDecrypt","identityInfo","meta","primaryKeyBackup","Wallet","fromEncryptedJson","wallet","_id","salt","identityFactoryAddr","baseIdentityAddr","bytecode","quickAccSigner","one","signer","select","attemptLogin","ignoreEmailConfirmationRequired","encodeURIComponent","authorization","loginSessionKey","errType","requestAuthResp","sessionKey","onLoginUserAction","timer","importJSONHref","class","inner","color","accountPresets","quickAccManager","feeCollector","quickAccTimelock","TrezorConnect","manifest","appUrl","AddAccount","signersToChoose","setChooseSigners","addAccErr","setAddAccErr","wrapProgress","fn","wrapErr","createQuickAcc","req","Promise","resolve","extraEntropy","random","performance","firstKeyWallet","createRandom","secondKeySecret","mnemonic","phrase","secondKeyResp","quickAccountTuple","timelock","two","abiCoder","AbiCoder","accHash","keccak256","encode","privileges","getProxyDeployBytecode","privSlot","identityAddr","getAddress","generateAddress2","toString","encrypt","scrypt","N","createResp","createFromEOA","addr","hexZeroPad","connectWeb3AndGetAccounts","ethereum","web3Accs","onEOASelected","addresses","getOwnedByEOAs","eoas","allUniqueOwned","all","signerAddr","Object","entries","getAccountByAddr","idAddr","connectTrezorAndGetAccounts","provider","TrezorSubprovider","trezorConnectClientApi","getAccountsAsync","signerExtra","_initialDerivedKeyInfo","connectLedgerAndGetAccounts","LedgerSubprovider","networkId","ledgerEthereumClientFactoryAsync","ledgerEthereumBrowserClientFactoryAsync","_initialDerivedKeyInfoAsync","addAccount","acc","opts","owned","addFromSignerButtons","to","ProtocolsPlaceholder","symbol","balance","balanceUSD","Protocols","assets","tokens","collectionName","img","collectionImg","toFixed","CollectiblesPlaceholder","image","price","Collectibles","collectibles","tokenId","assetName","assetImg","Dashboard","portfolio","setNetwork","chartTokensData","setChartTokensData","chartProtocolsData","setChartProtocolsData","chartType","setChartType","tableType","setTableType","chartSegments","tableSegments","networkDetails","useLayoutEffect","tokensData","Number","total","full","totalProtocols","reduce","curr","protocolsData","requestOtherProtocolsRefresh","isBalanceLoading","truncated","decimals","otherBalances","areProtocolsLoading","Accounts","selectedAddress","onSelectAcc","onRemoveAccount","accountWarning","setAccountWarning","setClosed","shortenedAddress","isActive","toIcon","seed","blockies","toDataURL","walletType","copyAddress","onSelectAccount","checkPermissions","onPrompt","allowWithoutGesture","checkClipboardPermission","prompt","askForPermission","Notification","requestPermission","TopBar","selectedAcc","allNetworks","checkPermission","readClipboard","networksItems","icons","endsWith","peerId","SideBar","match","sidebarRef","balanceFontSize","setBalanceFontSize","resizeBalance","balanceFontSizes","charLength","closest","keys","prev","abs","fontSize","activeClassName","openPayTrie","walletAddress","rightSideLabel","selectedNetwork","URL","w","h","dualScreenLeft","undefined","screenLeft","screenX","dualScreenTop","screenTop","screenY","innerWidth","documentElement","clientWidth","screen","innerHeight","clientHeight","systemZoom","availWidth","left","top","newWindow","open","popupCenter","format","Providers","providers","logo","RAMP_LOGO","fees","limits","currencies","RampInstantSDK","hostAppName","hostLogoUrl","variant","swapAsset","polygon","avalanche","userAddress","hostApiKey","show","openRampNetwork","PAYTRIE_LOGO","TRANSAK_LOGO","transak","transakSDK","environment","defaultCryptoCurrency","disableWalletAddressForm","themeColor","redirectURL","hostURL","origin","widgetHeight","widgetWidth","init","ALL_EVENTS","EVENTS","TRANSAK_ORDER_SUCCESSFUL","orderData","close","openTransak","shouldBeDisabled","Deposit","POLYGON_LOGO","ambireSushi","desc","SushiSwap","gnosisConnect","gnosisDisconnect","iframeRef","app","Swap","SendPlaceholder","ERC20","Interface","crossChainAssets","withRouter","history","addRequest","tokenAddress","useParams","asset","setAsset","amount","setAmount","bigNumberHexAmount","setBigNumberHexAmount","setAddress","setDisabled","warning","setWarning","assetsItems","addressesItems","selectedAsset","getMaxAmount","balanceRaw","ethers","utils","formatUnits","setMaxAmount","onAmountChange","bigNumberAmount","parseUnits","toHexString","replace","pathname","addressToLowerCase","tokensAddresses","contractsAddresses","names","isKnowTokenOrContract","isAddressValid","test","encodeFunctionData","AAVELendingPoolAbi","AAVELendingPoolProviders","Card","loading","unavailable","tokensItems","details","onTokenSelect","onValidate","setTokens","token","setToken","currentToken","ERC20Interface","ERC20Abi","AAVELendingPool","RAY","lendingPoolAddress","AAVECard","setUnavailable","setTokensItems","setDetails","apr","defaultTokens","useMemo","getDefaultTokensItems","getToken","addRequestTxn","extraGas","approveToken","ZERO","BigNumber","getDefaultProvider","tokenContract","Contract","allowance","lt","gt","loadPool","providerAddress","lendingPoolProviderContract","getLendingPool","lendingPoolContract","getReservesList","reserves","reservesAddresses","reserve","withdrawTokens","flat","depositTokens","allTokens","uniqueTokenAddresses","Set","getReserveData","liquidityRate","tokensAPR","fromEntries","AAVE_ICON","Earn","privilegesOptions","true","false","IDENTITY_INTERFACE","Security","onRemoveBtnClicked","key","privLevel","addTransactionToAddRequest","selectedAccount","privList","isQuickAcc","privText","isSelected","iface","abis","UniV2Router","recipientText","recipient","txnFrom","deadlineText","deadlineSecs","minute","diff","floor","uniV2Mapping","getSighash","parseTransaction","args","amountIn","amountOutMin","path","deadline","outputAsset","amountOut","amountInMax","nativeToken","tokenA","tokenB","amountADesired","amountBDesired","amountTokenDesired","amountAMin","amountBMin","amountTokenMin","amountETHMin","ifaceV3","UniV3Router","parsePath","pathBytes","push","substr","uniV3Mapping","humanizer","tokenIn","tokenOut","amountOutMinimum","amountInMaximum","amountMin","mapping","ERC20Mapping","approvedAddress","getContractName","tokenName","eq","constants","MaxUint256","AaveLendingPoolV2","onBehalfText","onBehalf","AaveMapping","ERC721","fromText","ERC721Mapping","WETH","WETHMapping","IdentityMapping","isQuickAccManager","UniRouters","AmbireIdentity","getTransactionSummary","accountAddr","callSummary","sendSummary","tokenInfo","parseInt","sigHash","humanizers","assetInfo","getNetworkSymbol","TxnPreview","onDismiss","isFirstFailing","isExpanded","setExpanded","contractName","MinedBundle","bundle","Array","isArray","txns","date","lastTxnSummary","identity","hasFeeMatch","RegExp","submittedAt","toLocaleDateString","toLocaleTimeString","replacesTxId","txId","Transactions","showSendTxns","cacheBreak","setCacheBreak","intvl","firstPending","executed","replaced","mapToBundle","relayerBundle","extra","Bundle","nonce","num","gasLimit","cancelByReplacing","cancel","mined","dapps","GnosisSafeApps","selectedApp","setSelectedApp","dapp","ERC721Abi","handleUri","Collectible","collectionAddr","owner","description","collection","metadata","setMetadata","recipientAddress","setRecipientAddress","isTransferDisabled","setTransferDisabled","fetchMetadata","contract","ownerOf","tokenURI","jsonUrl","PermissionsModal","requestNotificationsPermission","requestClipboardPermission","buttonDisabled","routes","component","eligibleRequests","handlePermissionsModal","wallets","getWallet","getWalletNew","providerTrezor","hdKey","HDNode","fromExtendedKey","xpub","derivationPath","baseDerivationPath","getInitialDerivedKeyInfo","signMessage","hash","signPersonalMessageAsync","hexlify","signTransaction","signTransactionAsync","Web3Provider","getSigner","isTokenEligible","speed","estimation","isStable","feeInUSD","feeInNative","pow","getFeePaymentConsequences","multiplier","addedGas","parseFloat","mapTxnErrMsg","msg","getErrHint","SPEEDS","FeeSelector","setEstimation","feeSpeed","setFeeSpeed","insufficientFee","selectedFeeToken","remainingFeeTokenBalances","FailingTxn","tooltip","feeCurrencySelect","marginTop","feeAmountSelectors","nativeAssetPriceInUSD","Actions","approveTxn","rejectTxn","signingStatus","code","quickAccCredentials","setQuickAccCredentials","form","rejectButton","signButtonLabel","quickAcc","confCodeRequired","pattern","autoComplete","maxLength","checkValidity","IdentityInterface","FactoryInterface","sendNoRelayer","finalBundle","getCode","getNonce","sign","signature","estimateGas","toNumber","getTransactionCount","gas","gasPrice","sendTransaction","signed","getNetwork","SendTransaction","replacementBundle","requestIds","makeBundle","SendTransactionWithBundle","setSigningStatus","unmounted","reestimate","estimate","estimateNoRelayer","prevEstimation","setInterval","clearInterval","getFinalBundle","feeToken","toHexAmount","amnt","round","feeTxn","approveTxnImpl","submit","approveTxnImplQuickAcc","pwd","alert","signatureTwo","firstFailing","blockExplorerUrl","bundleResult","SignMessage","toSign","totalRequests","codeRequired","signingState","setSigningState","isHexString","handleSigningErr","approveQuickAcc","confirmationCode","arrayify","confCode","signMsgHash","sig","approve","getMessageAsText","readOnly","toUtf8String","_","GnosisConnector","_iframeRef","_app","this","handlers","isValidMessage","source","parent","sentFromIframe","knownMethod","values","Methods","canHandleMessage","Boolean","send","requestId","sdkVersion","getSDKVersion","MessageFormatter","makeErrorResponse","makeResponse","contentWindow","postMessage","handleIncomingMessage","validMessage","hasHandler","SUPPORTED_TYPES","currentNotifs","isLastTotalBalanceInit","lastTokensBalanceRaw","getAmountReceived","lastToken","newBalanceRaw","amountRecieved","hasOwnProperty","AppInner","useHistory","accs","setAccounts","initialSelectedAcc","setSelectedAcc","selected","existingIdx","findIndex","clearedAccounts","useAccounts","defaultNetwork","n","setNetworkId","networkIdentifier","useNetwork","wcRequests","wcResolveMany","verbose","uniqueId","getTime","parsed","setRequests","getSafeInfo","safeAddress","owners","threshold","rpcCall","call","callTx","getBalance","getBlockNumber","getBlockWithTransactions","getBlock","getTransaction","getTransactionReceipt","handlePersonalSign","sendTransactions","txs","forwardId","prevRequests","getTxBySafeTxHash","safeTxHash","res","replyData","useGnosisSafe","gnosisRequests","gnosisResolveMany","internalRequests","setInternalRequests","reqs","currentNetwork","setBalanceLoading","setProtocolsLoading","tokensByNetworks","setTokensByNetworks","otherProtocolsByNetworks","setOtherProtocolsByNetworks","setBalance","setOtherBalances","setProtocols","setCollectibles","fetchTokens","supportedProtocols","failedRequests","requestsCount","products","updatedTokens","updatedNetworks","fetchOtherProtocols","updatedProtocols","protocolsByNetworks","refreshTokensIfVisible","loadBalance","loadProtocols","balanceByNetworks","toLocaleString","otherProtocols","refreshInterval","refreshIfHidden","usePortfolio","showing","sendTxnState","setSendTxnState","everythingToSign","onShow","onShowRef","permission","onClickNotif","showNotification","requireInteraction","notification","onclick","isSign","useNotifications","outcome","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.74568c6e.chunk.js","sourcesContent":["export const fetch = require('node-fetch')\n\nexport async function fetchPost (url, body) {\n\tconst r = await fetch(url, {\n\t\theaders: { 'content-type': 'application/json' },\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(body)\n\t})\n\treturn r.json()\n}\n\nexport const fetchGet = async url => {\n  const response = await fetch(url, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (response.status !== 200) throw new Error('Failed to fetch')\n  return response.json()\n}\n\nexport async function fetchCaught (url, params) {\n    let resp\n    try {\n      resp = await fetch(url, params)\n    } catch (e) {\n      console.error(e)\n      return { errMsg: `Unexpected error: ${e && e.message}` }\n    }\n    let body\n    try {\n      body = await resp.json()\n    } catch(e) {\n      console.error(e)\n      return { errMsg: `Unexpected error: ${resp.status}, ${e && e.message}`, resp }\n    }\n    return { body, resp, errMsg: '' }\n}","import './Button.scss'\n\nconst Button = ({ children, small, icon, disabled, onClick, red, clear, title }) => {\n    return (\n        <button onClick={onClick} className={`buttonComponent ${small ? 'small' : ''} ${red ? 'red' : ''} ${clear ? 'clear' : ''}`} disabled={disabled} title={title}>\n            { icon ? <div className=\"icon-button\">{ icon }</div> : null }\n            { children }\n        </button>\n    )\n}\n\nexport default Button\n","import './Chart.scss';\n\nimport DonutChart from \"react-donut-chart\";\nimport { useState } from 'react';\n\nconst Chart = ({ data, size }) => {\n    const [hoveredItem, setHoveredItem] = useState({});\n\n    const colors = [\n        \"#AA6AFF\",\n        \"#80FFDB\",\n        \"#8088FF\",\n        \"#E680FF\",\n        \"#A5FF80\",\n        \"#E6FF80\",\n        \"#FFC480\",\n        \"#FF8080\",\n    ];\n    \n    const strokeColor = \"transparent\";\n    const innerRadius = 0.5;\n    const selectedOffset = 0.05;\n\n    const onMouseEnter = (item) => {\n        setHoveredItem(item.label);\n    };\n\n    const onClick = (item, toggled) => {\n        if (toggled) {\n            console.log(item);\n        }\n    };\n\n    const sortData = data => {\n        return data.sort((a, b) => b.value - a.value);\n    };\n\n    const getItemColor = index => {\n        const colorCount = colors.length - 1;\n        return index > colorCount ? colors[index - (colors.length * Math.trunc(index / colors.length))] : colors[index];\n    };\n\n    return (\n        <div className=\"chart\">\n            <DonutChart\n                className=\"donut\"\n                height={size}\n                width={size}\n                onMouseEnter={(item) => onMouseEnter(item)}\n                data={sortData(data)}\n                colors={colors}\n                startAngle={-90}\n                strokeColor={strokeColor}\n                innerRadius={innerRadius}\n                selectedOffset={selectedOffset}\n                legend={false}\n                onClick={(item, toggled) => onClick(item, toggled)}\n            />\n            <div className=\"legend\" style={{height: size}}>\n                {\n                    data.map((item, i) => (\n                        <div className={`item ${hoveredItem === item.label ? 'active' : ''}`} key={item.label}>\n                            <div className=\"color\" style={{backgroundColor: getItemColor(i)}}/>\n                            <label>{ item.label }</label>\n                            <div className=\"separator\"></div>\n                            <div className=\"percent\">\n                                { item.value }%\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default Chart;","import React from 'react';\nimport './Checkbox.scss'\n\nfunction Checkbox(props) {\n    const inputElem =  (\n        <input type=\"checkbox\" checked={props.checked} required={props.required} onChange={props.onChange}/>\n    )\n\n    return props.label ? (<label className=\"checkbox-container\">\n        {inputElem}\n        <div className=\"checkbox-mark\"></div>\n        <div className=\"checkbox-label\">{props.label}</div>\n    </label>) : (<>\n        {inputElem}\n        <div className=\"checkbox-mark\"></div>\n    </>)\n}\n\nexport { Checkbox as default }","import { useEffect } from 'react';\n\nexport default function useOnClickOutside(ref, handler) {\n    useEffect(\n        () => {\n            const listener = (event) => {\n                if (!ref.current || ref.current.contains(event.target)) {\n                    return;\n                }\n                handler(event);\n            };\n            document.addEventListener(\"mousedown\", listener);\n            document.addEventListener(\"touchstart\", listener);\n                return () => {\n                    document.removeEventListener(\"mousedown\", listener);\n                    document.removeEventListener(\"touchstart\", listener);\n                };\n        },\n        [ref, handler]\n    );\n}","import './DropDown.scss'\n\nimport { useEffect, useRef, useState } from 'react';\nimport { BsChevronDown } from 'react-icons/bs'\nimport { CSSTransition } from 'react-transition-group';\nimport useOnClickOutside from '../../../helpers/onClickOutside';\n\nexport default function DropDown({ children, id, icon, title, badge, closed, onOpen, closeOnClick }) {\n    const ref = useRef();\n    const transitionRef = useRef();\n    const [isDropDownOpen, setDropDownOpen] = useState(false);\n\n    useEffect(() => closed ? setDropDownOpen(false) : null, [closed])\n    useEffect(() => onOpen && isDropDownOpen ? onOpen(true) : null, [isDropDownOpen, onOpen])\n    useOnClickOutside(ref, () => setDropDownOpen(false));\n\n    return (\n        <div id={id} className=\"dropdown\" ref={ref}>\n            <div className=\"content\" onClick={() => setDropDownOpen(!isDropDownOpen)}>\n                {\n                    icon ?\n                        <div className=\"icon\" style={{backgroundImage: `url(${icon})`}} />\n                        :\n                        null\n                }\n                <div className=\"title\">{ title }</div>\n                {\n                    badge ? \n                        <div className=\"badge\">\n                            { badge > 9 ? '9+' : badge }\n                        </div>\n                        :\n                        null\n                }\n                <div className={`handle ${isDropDownOpen ? 'open' : ''}`}>\n                    <BsChevronDown size={20}></BsChevronDown>\n                </div>\n            </div>\n            <CSSTransition unmountOnExit in={isDropDownOpen} timeout={200} classNames=\"fade\" nodeRef={transitionRef}>\n                <div className=\"menu\" ref={transitionRef} onClick={closeOnClick ? () => setDropDownOpen(false) : null}>\n                    { children }\n                </div>\n            </CSSTransition>\n        </div>\n    )\n}","import './Loading.scss';\n\nimport { AiOutlineLoading } from 'react-icons/ai';\n\nconst Loading = () => {\n    return (\n        <div className=\"loading\">\n            <div className=\"icon\">\n                <AiOutlineLoading size={35}/>\n            </div>\n        </div>\n    );\n};\n\nexport default Loading;","import './ToastProvider.scss';\n\nimport React, { createRef, useState } from \"react\";\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport { useCallback } from 'react';\n\nconst ToastContext = React.createContext(null);\n\nlet id = 0\n\nconst ToastProvider = ({ children }) => {\n    const [toasts, setToasts] = useState([]);\n\n    const addToast = useCallback((content, options) => {\n        const { timeout, error, url } = {\n            timeout: 8000,\n            error: false,\n            url: null,\n            ...options\n        }\n\n        const toast = {\n            id: id++,\n            content,\n            error,\n            url,\n            ref: createRef()\n        }\n        \n        setToasts(toasts => [\n            ...toasts,\n            toast\n        ]);\n        setTimeout(() => removeToast(toast.id), timeout);\n    }, [setToasts]);\n\n    const removeToast = id => {\n        setToasts(toasts => toasts.filter(t => t.id !== id));\n    };\n    \n    return (\n        <ToastContext.Provider\n            value={{\n                addToast,\n                removeToast\n            }}\n        >\n            \n                <div id=\"toast-container\">\n                    <TransitionGroup className=\"transition-group\">\n                    {\n                        toasts.map(toast => (\n                            <CSSTransition timeout={200} classNames=\"slide-fade\" key={toast.id} nodeRef={toast.ref}>\n                                <a href={toast.url} target=\"_blank\" rel=\"noreferrer\">\n                                    <div className={`toast ${toast.error ? 'error' : ''}`} ref={toast.ref} onClick={() => removeToast(toast.id)}>\n                                        { toast.content }\n                                    </div>\n                                </a>\n                            </CSSTransition>\n                        ))\n                    }\n                    </TransitionGroup>\n                </div>\n            \n            { children }\n        </ToastContext.Provider>\n    );\n};\n\nexport { ToastContext };\nexport default ToastProvider;","import { useContext } from 'react';\nimport { ToastContext } from '../components/ToastProvider/ToastProvider';\n\nconst useToasts = () => {\n    return useContext(ToastContext);\n};\n\nexport { useToasts };","const networks = [{\n\t\tid: 'ethereum',\n\t\tchainId: 1,\n\t\trpc: 'https://mainnet.infura.io/v3/3d22938fd7dd41b7af4197752f83e8a1',\n\t\tnativeAssetSymbol: 'ETH',\n\t\tname: 'Ethereum',\n\t\ticon: '/resources/networks/ethereum.png',\n\t\texplorerUrl: 'https://etherscan.io'\n\t},  {\n\t\tid: 'polygon',\n\t\tchainId: 137,\n\t\trpc: 'https://polygon-rpc.com/rpc',\n\t\tnativeAssetSymbol: 'MATIC',\n\t\tname: 'Polygon',\n\t\ticon: '/resources/networks/polygon.png',\n\t\texplorerUrl: 'https://polygonscan.com'\n\t}, {\n\t\tid: 'avalanche',\n\t\tchainId: 43114,\n\t\trpc: 'https://api.avax.network/ext/bc/C/rpc',\n\t\tnativeAssetSymbol: 'AVAX',\n\t\tname: 'Avalanche',\n\t\ticon: '/resources/networks/avalanche.png',\n\t\texplorerUrl: 'https://snowtrace.io'\n\t}/*, {\n\t\tid: 'arbitrum',\n\t\tchainId: 42161,\n\t\trpc: 'https://arb1.arbitrum.io/rpc',\n\t\tnativeAssetSymbol: 'AETH',\n\t\tname: 'Arbitrum',\n\t\ticon: '/resources/networks/arbitrum.svg',\n\t\texplorerUrl: 'https://arbiscan.io'\n}*/]\n\nexport default networks\n","export const RAMP_HOST_API_KEY = process.env.REACT_APP_RAMP_HOST_API_KEY;\nexport const PAYTRIE_PARTNER_URL = process.env.REACT_APP_PAYTRIE_PARTNER_URL;\nexport const TRANSAK_API_KEY = process.env.REACT_APP_TRANSAK_API_KEY;\nexport const TRANSAK_ENV = process.env.REACT_APP_TRANSAK_ENV;\nexport const ZAPPER_API_KEY = process.env.REACT_APP_ZAPPER_API_KEY;\nexport const ZAPPER_API_ENDPOINT = process.env.REACT_APP_ZAPPER_API_ENDPOINT;\nexport const SUSHI_SWAP_FRAME = process.env.REACT_APP_SUSHI_SWAP_FRAME_URL;","import { useCallback, useEffect, useState } from 'react';\n\nimport { ZAPPER_API_KEY } from '../config';\nimport { fetchGet } from '../lib/fetch';\nimport { ZAPPER_API_ENDPOINT } from '../config'\nimport supportedProtocols from '../consts/supportedProtocols';\nimport { useToasts } from '../hooks/toasts'\n\nconst getBalances = (apiKey, network, protocol, address) => fetchGet(`${ZAPPER_API_ENDPOINT}/protocols/${protocol}/balances?addresses[]=${address}&network=${network}&api_key=${apiKey}&newBalances=true`)\n\nlet hidden, visibilityChange;\nif (typeof document.hidden !== 'undefined') {\n    hidden = 'hidden';\n    visibilityChange = 'visibilitychange';\n} else if (typeof document.msHidden !== 'undefined') {\n    hidden = 'msHidden';\n    visibilityChange = 'msvisibilitychange';\n} else if (typeof document.webkitHidden !== 'undefined') {\n    hidden = 'webkitHidden';\n    visibilityChange = 'webkitvisibilitychange';\n}\nlet lastOtherProcolsRefresh = null\n\nexport default function usePortfolio({ currentNetwork, account }) {\n    const { addToast } = useToasts()\n    const [isBalanceLoading, setBalanceLoading] = useState(true);\n    const [areProtocolsLoading, setProtocolsLoading] = useState(true);\n\n    const [tokensByNetworks, setTokensByNetworks] = useState([])\n    const [otherProtocolsByNetworks, setOtherProtocolsByNetworks] = useState([])\n\n    const [balance, setBalance] = useState({\n        total: {\n            full: 0,\n            truncated: 0,\n            decimals: '00'\n        },\n        tokens: []\n    });\n    const [otherBalances, setOtherBalances] = useState([]);\n    const [tokens, setTokens] = useState([]);\n    const [protocols, setProtocols] = useState([]);\n    const [collectibles, setCollectibles] = useState([]);\n\n    const fetchTokens = useCallback(async (account, currentNetwork = false) => {\n        try {\n            const networks = currentNetwork ? [currentNetwork] : supportedProtocols.map(({ network }) => network)\n\n            let failedRequests = 0\n            const requestsCount = networks.length\n\n            const updatedTokens = (await Promise.all(networks.map(async network => {\n                try {\n                    const balance = await getBalances(ZAPPER_API_KEY, network, 'tokens', account)\n                    if (!balance) return null\n\n                    const { meta, products } = Object.values(balance)[0]\n                    return {\n                        network,\n                        meta,\n                        products\n                    }\n                } catch(_) {\n                    failedRequests++\n                }\n            }))).filter(data => data)\n            const updatedNetworks = updatedTokens.map(({ network }) => network)\n\n            setTokensByNetworks(tokensByNetworks => ([\n                ...tokensByNetworks.filter(({ network }) => !updatedNetworks.includes(network)),\n                ...updatedTokens\n            ]))\n\n            if (failedRequests >= requestsCount) throw new Error('Failed to fetch Tokens from Zapper API')\n            return true\n        } catch (error) {\n            console.error(error)\n            addToast(error.message, { error: true })\n            return false\n        }\n    }, [addToast])\n\n    const fetchOtherProtocols = useCallback(async (account, currentNetwork = false) => {\n        try {\n            const protocols = currentNetwork ? [supportedProtocols.find(({ network }) => network === currentNetwork)] : supportedProtocols\n\n            let failedRequests = 0\n            const requestsCount = protocols.reduce((acc, curr) => curr.protocols.length + acc, 0)\n\n            const updatedProtocols = (await Promise.all(protocols.map(async ({ network, protocols }) => {\n                const all = (await Promise.all(protocols.map(async protocol => {\n                    try {\n                        const balance = await getBalances(ZAPPER_API_KEY, network, protocol, account)\n                        return balance ? Object.values(balance)[0] : null\n                    } catch(_) {\n                        failedRequests++\n                    }\n                }))).filter(data => data).flat()\n\n                return all.length ? {\n                    network,\n                    protocols: all.map(({ products }) => products).flat(2)\n                } : null\n            }))).filter(data => data)\n            const updatedNetworks = updatedProtocols.map(({ network }) => network)\n\n            setOtherProtocolsByNetworks(protocolsByNetworks => ([\n                ...protocolsByNetworks.filter(({ network }) => !updatedNetworks.includes(network)),\n                ...updatedProtocols\n            ]))\n            \n            lastOtherProcolsRefresh = Date.now()\n\n            if (failedRequests >= requestsCount) throw new Error('Failed to fetch other Protocols from Zapper API')\n            return true\n        } catch (error) {\n            console.error(error)\n            addToast(error.message, { error: true })\n            return false\n        }\n    }, [addToast])\n\n    const refreshTokensIfVisible = useCallback(() => {\n        if (!account) return\n        if (!document[hidden] && !isBalanceLoading) fetchTokens(account, currentNetwork)\n    }, [isBalanceLoading, account, fetchTokens, currentNetwork])\n\n    const requestOtherProtocolsRefresh = async () => {\n        if (!account) return\n        if ((Date.now() - lastOtherProcolsRefresh) > 30000 && !areProtocolsLoading) await fetchOtherProtocols(account, currentNetwork)\n    }\n\n    // Fetch balances and protocols on account change\n    useEffect(() => {\n        async function loadBalance() {\n            if (!account) return\n            setBalanceLoading(true)\n            if (await fetchTokens(account)) setBalanceLoading(false)\n        }\n\n        async function loadProtocols() {\n            if (!account) return\n            setProtocolsLoading(true)\n            if (await fetchOtherProtocols(account)) setProtocolsLoading(false)\n        }\n\n        loadBalance()\n        loadProtocols()\n    }, [account, fetchTokens, fetchOtherProtocols])\n\n    // Update states on network, tokens and ohterProtocols change\n    useEffect(() => {\n        try {\n            const balanceByNetworks = tokensByNetworks.map(({ network, meta }) => {\n                const balanceUSD = meta.find(({ label }) => label === 'Total')?.value + meta.find(({ label }) => label === 'Debt')?.value\n                if (!balanceUSD) return {\n                    network,\n                    total: {\n                        full: 0,\n                        truncated: 0,\n                        decimals: '00'\n                    }\n                }\n\n                const [truncated, decimals] = Number(balanceUSD.toString()).toFixed(2).split('.')\n                return {\n                    network,\n                    total: {\n                        full: balanceUSD,\n                        truncated: Number(truncated).toLocaleString('en-US'),\n                        decimals\n                    }\n                }\n            })\n\n            const balance = balanceByNetworks.find(({ network }) => network === currentNetwork)\n            if (balance) {\n                setBalance(balance)\n                setOtherBalances(balanceByNetworks.filter(({ network }) => network !== currentNetwork))\n            }\n\n            const tokens = tokensByNetworks.find(({ network }) => network === currentNetwork)\n            if (tokens) setTokens(tokens.products.map(({ assets }) => assets.map(({ tokens }) => tokens)).flat(2))\n\n            const otherProtocols = otherProtocolsByNetworks.find(({ network }) => network === currentNetwork)\n            if (tokens && otherProtocols) {\n                setProtocols([\n                    ...tokens.products,\n                    ...otherProtocols.protocols.filter(({ label }) => label !== 'NFTs')\n                ])\n                setCollectibles(otherProtocols.protocols.find(({ label }) => label === 'NFTs')?.assets || [])\n            }\n        } catch(e) {\n            console.error(e);\n            addToast(e.message | e, { error: true })\n        }\n    }, [currentNetwork, tokensByNetworks, otherProtocolsByNetworks, addToast])\n\n    // Refresh tokens on network change\n    useEffect(() => {\n        refreshTokensIfVisible()\n    }, [currentNetwork, refreshTokensIfVisible])\n\n    // Refresh balance every 20s if visible\n    useEffect(() => {\n        const refreshInterval = setInterval(refreshTokensIfVisible, 20000)\n        return () => clearInterval(refreshInterval)\n    }, [refreshTokensIfVisible])\n\n    // Refresh balance every 60s if hidden\n    useEffect(() => {\n        const refreshIfHidden = document[hidden] && !isBalanceLoading ? fetchTokens(account, currentNetwork) : null\n        const refreshInterval = setInterval(refreshIfHidden, 60000)\n        return () => clearInterval(refreshInterval)\n    }, [account, currentNetwork, isBalanceLoading, fetchTokens])\n\n    // Refresh balance when window is focused\n    useEffect(() => {\n        document.addEventListener(visibilityChange, refreshTokensIfVisible, false);\n        return () => document.removeEventListener(visibilityChange, refreshTokensIfVisible, false);\n    }, [refreshTokensIfVisible])\n\n    return {\n        isBalanceLoading,\n        areProtocolsLoading,\n        balance,\n        otherBalances,\n        tokens,\n        protocols,\n        collectibles,\n        requestOtherProtocolsRefresh\n        //updatePortfolio//TODO find a non dirty way to be able to reply to getSafeBalances from the dapps, after the first refresh\n    }\n}\n","// List of all supported protocols by networks: https://api.zapper.fi/v1/protocols/balances/supported?api_key=5d1237c2-3840-4733-8e92-c5a58fe81b88\n\nconst suportedProtocols = [\n    {\n        network: 'ethereum',\n        protocols: ['1inch', 'aave-v2', 'alchemix', 'badger', 'balancer-v2', 'compound', 'cream', 'curve', 'sushiswap', 'uniswap-v2', 'uniswap-v3', 'nft']\n    },\n    {\n        network: 'polygon',\n        protocols: ['aave-v2', 'quickswap', 'sushiswap']\n    },\n    {\n        network: 'avalanche',\n        protocols: ['aave-v2']\n    }\n]\n\nexport default suportedProtocols","import { useCallback, useEffect, useReducer, useRef } from 'react'\nimport { useToasts } from '../hooks/toasts'\n\nimport WalletConnectCore from '@walletconnect/core'\nimport * as cryptoLib from '@walletconnect/iso-crypto'\n\nconst noop = () => null\nconst noopSessionStorage = { setSession: noop, getSession: noop, removeSession: noop }\n\nconst STORAGE_KEY = 'wc1_state'\nconst SUPPORTED_METHODS = ['eth_sendTransaction', 'gs_multi_send', 'personal_sign', 'eth_sign']\nconst SESSION_TIMEOUT = 6000\n\nconst getDefaultState = () => ({ connections: [], requests: [] })\n\nlet connectors = {}\n\nexport default function useWalletConnect ({ account, chainId, onCallRequest }) {\n    const { addToast } = useToasts()\n\n    // This is needed cause of the WalletConnect event handlers\n    const stateRef = useRef()\n    stateRef.current = { account, chainId }\n\n    const [state, dispatch] = useReducer((state, action) => {\n        if (action.type === 'updateConnections') return { ...state, connections: action.connections }\n        if (action.type === 'connectedNewSession') {\n            return {\n                ...state,\n                connections: [...state.connections, { uri: action.uri, session: action.session }]\n            }\n        }\n        if (action.type === 'disconnected') {\n            return {\n                ...state,\n                connections: state.connections.filter(x => x.uri !== action.uri)\n            }\n        }\n        if (action.type === 'requestAdded') {\n            if (state.requests.find(({ id }) => id === action.request.id)) return { ...state }\n            return { ...state, requests: [...state.requests, action.request] }\n        }\n        if (action.type === 'requestsResolved') {\n            return {\n                ...state,\n                requests: state.requests.filter(x => !action.ids.includes(x.id))\n            }\n        }\n        return { ...state }\n    }, null, () => {\n        const json = localStorage[STORAGE_KEY]\n        if (!json) return getDefaultState()\n        try {\n            return {\n                ...getDefaultState(),\n                ...JSON.parse(json)\n            }\n        } catch(e) {\n            console.error(e)\n            return getDefaultState()\n        }\n    })\n\n    const connect = useCallback(connectorOpts => {\n        if (connectors[connectorOpts.uri]) {\n            addToast('dApp already connected')\n            return connectors[connectorOpts.uri]\n        }\n        let connector\n        try {\n            connector = connectors[connectorOpts.uri] = new WalletConnectCore({\n                connectorOpts,\n                cryptoLib,\n                sessionStorage: noopSessionStorage\n            })\n        } catch(e) {\n            addToast(`Unable to connect to ${connectorOpts.uri}: ${e.message}`, { error: true })\n            return null\n        }\n\n        const onError = err => {\n            addToast(`WalletConnect error: ${(connector.session && connector.session.peerMeta && connector.session.peerMeta.name)} ${err.message || err}`, { error: true })\n            console.error('WalletConnect error', err)\n        }\n\n        let sessionStart\n        let sessionTimeout\n        if (!connector.session.peerMeta) sessionTimeout = setTimeout(() => {\n            if (!connector.session.peerMeta) addToast('Unable to get session from dApp - perhaps the link has expired?', { error: true })\n        }, SESSION_TIMEOUT)\n\n        connector.on('session_request', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n\n            sessionStart = Date.now()\n            clearTimeout(sessionTimeout)\n\n            connector.approveSession({\n                accounts: [stateRef.current.account],\n                chainId: stateRef.current.chainId,\n            })\n            // It's safe to read .session right after approveSession because 1) approveSession itself normally stores the session itself\n            // 2) connector.session is a getter that re-reads private properties of the connector; those properties are updated immediately at approveSession\n            dispatch({ type: 'connectedNewSession', uri: connectorOpts.uri, session: connector.session })\n\n            addToast('Successfully connected to '+connector.session.peerMeta.name)\n        })\n\n        connector.on('call_request', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n            if (!SUPPORTED_METHODS.includes(payload.method)) {\n                // @TODO: if the dapp is in a \"allow list\" of dApps that have fallbacks, ignore certain messages\n                // eg uni has a fallback for eth_signTypedData_v4\n                addToast(`dApp requested unsupported method: ${payload.method}`, { error: true })\n                connector.rejectRequest({ id: payload.id, error: { message: 'METHOD_NOT_SUPPORTED' }})\n                return\n            }\n            if (\n                payload.method === 'eth_sendTransaction' && payload.params[0] && payload.params[0].from\n                && payload.params[0].from.toLowerCase() !== connector.session.accounts[0].toLowerCase()\n            ) {\n                addToast(`dApp sent a request for the wrong account: ${payload.params[0].from}`, { error: true })\n                return\n            }\n            dispatch({ type: 'requestAdded', request: {\n                id: payload.id,\n                type: payload.method,\n                wcUri: connectorOpts.uri,\n                txn: payload.params[0],\n                chainId: connector.session.chainId,\n                account: connector.session.accounts[0]\n            } })\n        })\n\n        connector.on('disconnect', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n\n            clearTimeout(sessionTimeout)\n            // NOTE the dispatch() will cause double rerender when we trigger a disconnect,\n            // cause we will call it once on disconnect() and once when the event arrives\n            // we can prevent this by checking if (!connectors[...]) but we'd rather stay safe and ensure\n            // the connection is removed\n            dispatch({ type: 'disconnected', uri: connectorOpts.uri })\n            connectors[connectorOpts.uri] = null\n\n            // NOTE: this event might be invoked 2 times when the dApp itself disconnects\n            // currently we don't dedupe that\n            if (sessionStart && (Date.now() - sessionStart) < SESSION_TIMEOUT) {\n                addToast('dApp disconnected immediately - perhaps it does not support the current network?', { error: true })\n            } else {\n                addToast(`${connector.session.peerMeta.name} disconnected: ${payload.params[0].message}`)\n            }\n        })\n\n        connector.on('error', onError)\n\n        return connector\n    }, [addToast])\n\n    const disconnect = useCallback(uri => {\n        // connector might not be there, either cause we disconnected before,\n        // or cause we failed to connect in the first place\n        if (connectors[uri]) {\n            connectors[uri].killSession()\n            connectors[uri] = null\n        }\n        dispatch({ type: 'disconnected', uri })\n    }, [])\n\n    const resolveMany = (ids, resolution) => {\n        state.requests.forEach(({ id, wcUri }) => {\n            if (ids.includes(id)) {\n                const connector = connectors[wcUri]\n                if (!connector) return\n                if (resolution.success) connector.approveRequest({ id, result: resolution.result })\n                else connector.rejectRequest({ id, error: { message: resolution.message } })\n            }\n        })\n        dispatch({ type: 'requestsResolved', ids })\n    }\n\n    // Side effects on init\n    useEffect(() => {\n        state.connections.forEach(({ uri, session }) => {\n            if (!connectors[uri]) connect({ uri, session })\n        })\n    // we specifically want to run this only once despite depending on state\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [connect])\n\n    // Side effects that will run on every state change/rerender\n    useEffect(() => {\n        // restore connectors and update the ones that are stale\n        let updateConnections = false\n        state.connections.forEach(({ uri, session }) => {\n            if (connectors[uri]) {\n                const connector = connectors[uri]\n                const session = connector.session\n                if (session.accounts[0] !== account || session.chainId !== chainId) {\n                    connector.updateSession({ accounts: [account], chainId })\n                    updateConnections = true\n                }\n            }\n        })\n        \n        localStorage[STORAGE_KEY] = JSON.stringify(state)\n\n        if (updateConnections) dispatch({\n            type: 'updateConnections',\n            connections: state.connections\n                .filter(({ uri }) => connectors[uri])\n                .map(({ uri }) => ({ uri, session: connectors[uri].session }))\n        })\n    }, [state, account, chainId, connect])\n\n    // Initialization effects\n    useEffect(() => runInitEffects(connect, account), [connect, account])\n\n    return {\n        connections: state.connections,\n        requests: state.requests,\n        resolveMany,\n        connect, disconnect\n    }\n}\n\n// Initialization side effects\n// Connect to the URL, read from clipboard, etc.\nfunction runInitEffects(wcConnect, account) {\n    const query = new URLSearchParams(window.location.href.split('?').slice(1).join('?'))\n    const wcUri = query.get('uri')\n    if (wcUri) wcConnect({ uri: wcUri })\n\n    // hax\n    window.wcConnect = uri => wcConnect({ uri })\n\n    // @TODO on focus and on user action\n    const clipboardError = e => console.log('non-fatal clipboard/walletconnect err:', e.message)\n    const isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1\n    const tryReadClipboard = async () => {\n        if (!account) return\n        if (isFirefox) return\n        try {\n            const clipboard = await navigator.clipboard.readText()\n            if (clipboard.startsWith('wc:') && !connectors[clipboard]) wcConnect({ uri: clipboard })\n        } catch(e) { clipboardError(e) }\n    }\n\n    tryReadClipboard()\n    window.addEventListener('focus', tryReadClipboard)\n    return () => window.removeEventListener('focus', tryReadClipboard)\n}\n","import { useEffect, useCallback, useState } from 'react'\nimport { fetchCaught } from '../lib/fetch'\n\nexport default function useRelayerData(url) {\n  const [isLoading, setLoading] = useState(true)\n  const [data, setData] = useState(null)\n  const [err, setErr] = useState(null)\n\n  const updateData = useCallback(async () => {\n    const { resp, body, errMsg } = await fetchCaught(url)\n\n    if (resp && resp.status === 200) {\n      return body\n    } else {\n      console.log('relayerData error', { resp, body, errMsg })\n      throw new Error(errMsg || `status code ${resp && resp.status}`)\n    }\n  }, [url])\n\n  useEffect(() => {\n    if (!url) return\n    let unloaded = false\n    setLoading(true)\n    setErr(null)\n    updateData()\n      .then(data => !unloaded && setData(data))\n      .catch(e => !unloaded && setErr(e.message || e))\n      .then(() => !unloaded && setLoading(false))\n    return () => unloaded = true\n  }, [url, updateData])\n\n  return { data, isLoading, errMsg: err }\n}\n","import { createContext, useCallback, useState } from 'react'\nimport './ModalProvider.scss'\n\nconst ModalContext = createContext(null)\n\nconst ModalProvider = ({ children }) => {\n    const [modal, setModal] = useState(null)\n\n    const showModal = useCallback(element => setModal(element), [])\n    const hideModal = useCallback(() => setModal(null), [])\n\n    return (\n        <ModalContext.Provider value={{ showModal, hideModal }}>\n            { \n                modal ? \n                    <div id=\"modal-container\">\n                        <div className=\"backdrop\" onClick={hideModal}></div>\n                        { modal }\n                    </div>\n                    :\n                    null\n            }\n            { children }\n        </ModalContext.Provider>\n    )\n}\n\nexport { ModalContext }\nexport default ModalProvider","import { useContext } from 'react'\nimport { ModalContext } from '../components/ModalProvider/ModalProvider'\n\nconst useModals = () => useContext(ModalContext)\nexport default useModals","import { useEffect, useState } from \"react\";\n\nconst onPermissionChange = async (name, listener) => {\n    try {\n        const status = await navigator.permissions.query({ name })\n        status.onchange = () => listener(status.state === 'granted')\n        return status.state === 'granted'\n    } catch(e) {\n        console.error(e);\n        return false\n    }\n}\n\nconst usePermissions = () => {\n    const [arePermissionsLoaded, setPermissionsLoaded] = useState(false)\n    const [isClipboardGranted, setClipboardGranted] = useState(false)\n    const [isNoticationsGranted, setNotificationsGranted] = useState(false)\n    const [modalHidden, setModalHidden] = useState(() => localStorage.permissionsModalHidden === 'true')\n\n    const checkForPermissions = async () => {\n        const clipboardState = await onPermissionChange('clipboard-read', state => setClipboardGranted(state))\n        setClipboardGranted(clipboardState);\n\n        const notificationsState = await onPermissionChange('notifications', state => setNotificationsGranted(state))\n        setNotificationsGranted(notificationsState)\n\n        setPermissionsLoaded(true)\n    }\n\n    useEffect(() => localStorage.permissionsModalHidden = modalHidden, [modalHidden])\n    useEffect(() => checkForPermissions(), [])\n\n    return {\n        isClipboardGranted,\n        isNoticationsGranted,\n        arePermissionsLoaded,\n        modalHidden,\n        setModalHidden\n    }\n}\n\nexport default usePermissions\n","import './Modal.scss'\n\nimport { MdClose } from 'react-icons/md'\nimport { useModals } from '../../../hooks'\n\nconst Modal = ({ children, id, title }) => {\n    const { hideModal } = useModals()\n\n    return (\n        <div id={id} className=\"modal\">\n            <div className=\"heading\">\n                <div className=\"title\">{ title }</div>\n                <div className=\"close\" onClick={hideModal}>\n                    <MdClose/>\n                </div>\n            </div>\n            <div className=\"content\">{ children }</div>\n        </div>\n    )\n}\n\nexport default Modal","import { useCallback, useEffect, useState } from 'react'\nimport './Segments.scss'\n\nconst Segments = ({ small, defaultValue, segments, onChange }) => {\n    const [value, setValue] = useState(defaultValue);\n\n    const setSegment = useCallback(value => {\n        setValue(value)\n        onChange(value)\n    }, [onChange])\n\n    useEffect(() => {\n        setSegment(defaultValue)\n    }, [defaultValue, setSegment])\n\n    return (\n        <div className={`segments ${small ? 'small': ''}`}>\n            {\n                segments.map(segment => (\n                    <div className={`segment ${segment.value === value ? 'active' : ''}`} key={segment.value} onClick={() => setSegment(segment.value)}>\n                        {\n                            segment.icon ?\n                                <div className=\"icon\">{ segment.icon }</div>\n                                :\n                                null\n                        }\n                        { segment.value }\n                    </div>\n                ))\n            }\n        </div>\n    )\n}\n\nexport default Segments","import './Select.scss';\n\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { BsChevronDown } from 'react-icons/bs'\nimport { CSSTransition } from 'react-transition-group';\nimport useOnClickOutside from '../../../helpers/onClickOutside';\n\nconst Select = ({ children, native, monospace, searchable, disabled, label, defaultValue, items, onChange }) => {\n    const ref = useRef();\n    const hiddenTextInput = useRef();\n    const transitionRef = useRef();\n    const [isOpen, setOpen] = useState();\n    const [search, setSearch] = useState('');\n    const [selectedItem, setSelectedItem] = useState({\n        label: null,\n        value: null,\n        icon: null,\n    });\n\n    const filteredItems = search.length ? items.filter(({ label }) => label.toLowerCase().includes(search.toLowerCase())) : items\n\n    const selectItem = useCallback(item => {\n        setSelectedItem(item);\n        onChange(item.value);\n    }, [onChange])\n\n    useEffect(() => {\n        if (items.length) selectItem(items.find(item => item.value === defaultValue) || items[0])\n        else setSelectedItem({})\n    }, [defaultValue, items, selectItem]);\n\n    useEffect(() => {\n        if (isOpen && searchable) {\n            hiddenTextInput.current.focus()\n            setSearch('')\n        }\n    }, [isOpen, searchable])\n\n    useOnClickOutside(ref, () => setOpen(false));\n\n    return (\n        !native ? \n            <div className={`select ${monospace ? 'monospace': ''} ${disabled ? 'disabled' : ''}`} ref={ref}>\n                {\n                    searchable ? \n                        <input type=\"text\" className=\"search-input\" disabled={disabled} value={search} ref={hiddenTextInput} onInput={({ target }) => setSearch(target.value)}/>\n                        :\n                        null\n                }\n                {\n                    label ? \n                        <label>{ label }</label>\n                        :\n                        null\n                }\n                {\n                    selectedItem ? \n                        <div className=\"input\" onClick={() => setOpen(!isOpen)}>\n                            {\n                                selectedItem.icon ? \n                                    <div className=\"icon\">\n                                        <img src={selectedItem.icon} alt=\"Icon\" />\n                                    </div>\n                                    :\n                                    null\n                            }\n                            { selectedItem.label || selectedItem.value }\n                            <div className=\"separator\"></div>\n                            <div className={`handle ${isOpen ? 'open' : ''}`}>\n                                <BsChevronDown size={20}></BsChevronDown>\n                            </div>\n                            {\n                                <CSSTransition unmountOnExit in={isOpen} timeout={200} classNames=\"fade\" nodeRef={transitionRef}>\n                                    <div className=\"list\" ref={transitionRef}>\n                                        {\n                                            filteredItems.map(item => (\n                                                <div className={`option ${item.value === selectedItem.value ? 'active' : ''}`} key={item.value} onClick={() => selectItem(item)}>\n                                                    <div className=\"icon\">\n                                                        {\n                                                            item.icon ? \n                                                                <img src={item.icon} alt=\"Icon\" />\n                                                                :\n                                                                null\n                                                        }\n                                                    </div>\n                                                    { item.label || item.value }\n                                                </div>\n                                            ))\n                                        }\n                                        { children }\n                                    </div>\n                                </CSSTransition>\n                            }\n                        </div>\n                        :\n                        null\n                }\n            </div>\n            :\n            <select className=\"select\" disabled={disabled} onChange={ev => onChange(ev.target.value)} defaultValue={defaultValue}>\n                {\n                    items.map(item => (\n                        <option key={item.value} value={item.value}>\n                            { item.label || item.value }\n                        </option>\n                    ))\n                }\n            </select>\n    );\n};\n\nexport default Select;","import './TextInput.scss'\n\nimport { MdContentCopy } from 'react-icons/md';\nimport { useToasts } from '../../../hooks/toasts';\n\nexport default function TextInput({ value, placeholder, info, label, disabled, copy, onInput }) {\n    const { addToast } = useToasts();\n\n    const onClick = async () => {\n        await navigator.clipboard.writeText(value);\n        addToast(\"Copied to clipboard!\");\n    };\n\n    return (\n        <div className={`text-input ${copy ? 'copy' : ''}`}>\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"text-input-container\" onClick={copy ? onClick : null}>\n                <input value={value} type=\"text\" placeholder={placeholder} disabled={copy || disabled} onInput={ev => onInput(ev.target.value)}/>\n                {\n                    copy ?\n                        <div className=\"icon\">\n                            <MdContentCopy size={20}/>\n                        </div>\n                        :\n                        null\n                }\n            </div>\n            {\n                info ?\n                    <div className=\"info\">\n                        { info }\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n}","import './NumberInput.scss'\n\nconst NumberInput = ({ disabled, min, max, label, value, button, onButtonClick, onInput }) => {\n    return (\n        <div className={`number-input ${disabled ? 'disabled' : ''}`}>\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"input\">\n                <input type=\"number\" disabled={disabled} value={value} min={min} max={max} onInput={({ target }) => onInput(target.value)}/>\n                {\n                    button ?\n                        <div className=\"button\" onClick={onButtonClick}>\n                            { button }\n                        </div>\n                        :\n                        null\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default NumberInput","import './Toggle.scss'\n\nconst Toggle = ({ defaultChecked, checked, onChange }) => {\n    return (\n        <label className=\"toggle\">\n            <input type=\"checkbox\" defaultChecked={defaultChecked} checked={checked} onChange={onChange}/>\n            <span className=\"slider\"></span>\n        </label>\n    )\n}\n\nexport default Toggle","import { useState, useRef } from 'react'\nimport { Checkbox } from \"../common\"\n\nexport default function LoginOrSignupForm({ action = 'LOGIN', onAccRequest, inProgress }) {\n    const passConfirmInput = useRef(null)\n    const [state, setState] = useState({\n      email: '', passphrase: '', passphraseConfirm: '', action\n    })\n    const onSubmit = e => {\n      e.preventDefault()\n      onAccRequest({\n        action: state.action,\n        accType: 'QUICK',\n        email: state.email,\n        passphrase: state.passphrase,\n        backupOptout: state.backupOptout,\n      })\n    }\n    const onUpdate = updates => {\n      const newState = { ...state, ...updates }\n      setState(newState)\n      const shouldValidate = newState.action === 'SIGNUP'\n      const invalid = shouldValidate && (\n        newState.passphrase !== newState.passphraseConfirm\n      )\n      // @TODO translation string\n      if (passConfirmInput.current) {\n          passConfirmInput.current.setCustomValidity(invalid ? 'Passwords must match' : '')\n      }\n    }\n    const minPwdLen = 8\n    const isSignup = state.action === 'SIGNUP'\n    const additionalOnSignup = state.backupOptout ? (\n      <Checkbox label=\"I understand that losing this backup means I will have to trigger account recovery.\" required={true}></Checkbox>\n    ) : (<></>)\n    const additionalInputs = isSignup ?\n      (<>\n        <input\n          ref={passConfirmInput}\n          required\n          minLength={minPwdLen}\n          type=\"password\"\n          placeholder=\"Confirm password\"\n          value={state.passphraseConfirm}\n          onChange={e => onUpdate({ passphraseConfirm: e.target.value })}></input>\n        <Checkbox label=\"I agree to to the Terms of Use and Privacy policy.\" required={true}></Checkbox>\n        <Checkbox label=\"Backup on Ambire Cloud.\" checked={!state.backupOptout} onChange={e => onUpdate({ backupOptout: !e.target.checked })}></Checkbox>\n        {additionalOnSignup}\n      </>) : (<></>)\n\n    return (\n      <form onSubmit={onSubmit}>\n        <input type=\"email\" required placeholder=\"Email\" value={state.email} onChange={e => onUpdate({ email: e.target.value })}></input>\n        <input type=\"password\" required minLength={minPwdLen} placeholder=\"Password\" value={state.passphrase} onChange={e => onUpdate({ passphrase: e.target.value })}></input>\n        {additionalInputs}\n        <input type=\"submit\" disabled={inProgress} value={isSignup ?\n          (inProgress ? \"Signing up...\" : \"Sign up\")\n          : (inProgress ? \"Logging in...\" : \"Log in\")}></input>\n      </form>\n    )\n}\n","import './EmailLogin.scss'\n\nimport { useState, useEffect } from 'react'\nimport { MdEmail } from 'react-icons/md'\nimport { Wallet } from 'ethers'\n\nimport { fetch, fetchCaught } from '../../lib/fetch'\n\nimport LoginOrSignup from '../LoginOrSignupForm/LoginOrSignupForm'\n\n// NOTE: the same polling that we do here with the setEffect should be used for txns\n// that require email confirmation\nexport default function EmailLogin({ relayerURL, onAddAccount }) {\n    const [requiresEmailConfFor, setRequiresConfFor] = useState(null)\n    const [err, setErr] = useState('')\n    const [inProgress, setInProgress] = useState(false)\n  \n    const EMAIL_VERIFICATION_RECHECK = 3000\n  \n    const onTryDecrypt = async (identityInfo, passphrase) => {\n      if (!identityInfo.meta.primaryKeyBackup) {\n        setErr('No account key backup: you either disabled email login or you have to import it from JSON')\n        return\n      }\n      // NOTE: fromEncryptedJson can give us the exact progress,\n      // but for now we're handling this simply by showing progress in a different way (button shows 'Logging in...')\n      try {\n        const wallet = await Wallet.fromEncryptedJson(JSON.parse(identityInfo.meta.primaryKeyBackup), passphrase)\n        const { _id, salt, identityFactoryAddr, baseIdentityAddr, bytecode } = identityInfo\n        const { quickAccSigner } = identityInfo.meta\n        if (wallet.address !== quickAccSigner.one) {\n            setErr('Decrypted wallet address does not match quick account')\n            return\n        }\n        onAddAccount({\n          id: _id,\n          email: identityInfo.meta.email,\n          primaryKeyBackup: identityInfo.meta.primaryKeyBackup,\n          salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n          signer: quickAccSigner\n        }, { select: true })\n      } catch (e) {\n        if (e.message.includes('invalid password')) setErr('Invalid password')\n        else {\n          setErr(`Unexpected login error: ${e.message}`)\n          console.error(e)\n        }\n      }\n    }\n  \n    const attemptLogin = async ({ email, passphrase }, ignoreEmailConfirmationRequired) => {\n      // try by-email first: if this returns data we can just move on to decrypting\n      // does not matter which network we request\n      const { resp, body, errMsg } = await fetchCaught(`${relayerURL}/identity/by-email/${encodeURIComponent(email)}`, { headers: {\n          authorization: localStorage.loginSessionKey ? `Bearer ${localStorage.loginSessionKey}` : null\n      } })\n      if (errMsg) {\n        setErr(errMsg)\n        return\n      }\n    \n      if (resp.status === 401 && body.errType === 'UNAUTHORIZED') {\n        if (ignoreEmailConfirmationRequired) {\n          // we still have to call this to make sure the state is consistent and to force a re-render (to trigger the effect again)\n          setRequiresConfFor({ email, passphrase })\n          return\n        }\n        const requestAuthResp = await fetch(`${relayerURL}/identity/by-email/${encodeURIComponent(email)}/request-confirm-login`, { method: 'POST' })\n        if (requestAuthResp.status !== 200) {\n          setErr(`Email confirmation needed but unable to request: ${requestAuthResp.status}`)\n          return\n        }\n        localStorage.loginSessionKey = (await requestAuthResp.json()).sessionKey\n        setRequiresConfFor({ email, passphrase })\n        return\n      }\n      // If we make it beyond this point, it means no email confirmation will be required\n      // however, we're putting `setRequiresConfFor(null)` after onTryDecrypt in order to wait for the decryption period\n      if (resp.status === 404 && body.errType === 'DOES_NOT_EXIST') {\n        setRequiresConfFor(null)\n        setErr('Account does not exist')\n        return\n      }\n  \n      if (resp.status === 200) {\n        await onTryDecrypt(body, passphrase)\n      } else {\n        setErr(body.message ? `Relayer error: ${body.message}` : `Unknown no-message error: ${resp.status}`)\n      }\n      setRequiresConfFor(null)\n    }\n  \n    const onLoginUserAction = async ({ email, passphrase }) => {\n      setErr('')\n      setRequiresConfFor(null)\n      setInProgress(true)\n      try {\n        await attemptLogin({ email, passphrase })\n      } catch (e) {\n          setErr(`Unexpected error: ${e.message || e}`)\n      }\n      setInProgress(false)\n    }\n  \n    // try logging in once after EMAIL_VERIFICATION_RECHECK\n    useEffect(() => {\n      if (requiresEmailConfFor) {\n        const timer = setTimeout(async () => {\n            setInProgress(true)\n            await attemptLogin(requiresEmailConfFor, true)\n            setInProgress(false)\n        }, EMAIL_VERIFICATION_RECHECK)\n        return () => clearTimeout(timer)\n      }\n    })\n\n    // @TODO import from JSON; maybe without a URL, as we'll just pop a file selector and then import the JSON\n    const importJSONHref = `/#/json-import`\n\n    if (!relayerURL) {\n        return (<section className=\"loginSignupWrapper\" id=\"emailLoginSection\">\n            <div id=\"logo\"/>\n            <h3 class=\"error\">Email login not supported without the relayer.</h3>\n            <a href={importJSONHref}><button>Import JSON</button></a>\n        </section>)\n    }\n\n    const inner = requiresEmailConfFor ?\n      (<div id=\"loginEmail\" className=\"emailConf\">\n        <h3><MdEmail size={25} color=\"white\"/>Email confirmation required</h3>\n        <p>This is the first log-in from this browser, email confirmation is required.<br/><br/>\n        We sent an email to {requiresEmailConfFor.email}, please check your inbox and click \"Confirm\".\n        </p>\n        {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n      </div>)\n      : (<div id=\"loginEmail\">\n        <LoginOrSignup onAccRequest={onLoginUserAction} inProgress={inProgress}></LoginOrSignup>\n  \n        {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n  \n        <a href=\"/#/\">I forgot my password</a>\n        <a href={importJSONHref}>Import JSON</a>\n      </div>)\n      \n    return (\n      <section className=\"loginSignupWrapper\" id=\"emailLoginSection\">\n      <div id=\"logo\"/>\n      {inner}\n    </section>\n    )\n  }","// @TODO update those pre-launch\n// NOTE: those should only apply to new accounts, never for existing accounts, since some existing accounts may be on older versions of those\nconst accountPresets = {\n    salt: '0x0000000000000000000000000000000000000000000000000000000000000001',\n    identityFactoryAddr: '0xBf07a0Df119Ca234634588fbDb5625594E2a5BCA',\n    baseIdentityAddr: '0x2A2b85EB1054d6f0c6c2E37dA05eD3E5feA684EF',\n    quickAccManager: '0xfF3f6D14DF43c112aB98834Ee1F82083E07c26BF',\n    feeCollector: '0x942f9CE5D9a33a82F88D233AEb3292E680230348',\n    quickAccTimelock: 259200 // 3 days\n}\nexport default accountPresets","import './AddAccount.scss'\n\nimport { useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport LoginOrSignup from '../LoginOrSignupForm/LoginOrSignupForm'\nimport TrezorConnect from 'trezor-connect'\nimport { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { hexZeroPad, AbiCoder, keccak256, id, getAddress } from 'ethers/lib/utils'\nimport { Wallet } from 'ethers'\nimport { generateAddress2 } from 'ethereumjs-util'\nimport { getProxyDeployBytecode } from 'adex-protocol-eth/js/IdentityProxyDeploy'\nimport { fetch, fetchPost } from '../../lib/fetch'\nimport accountPresets from '../../consts/accountPresets'\nimport { useToasts } from '../../hooks/toasts'\n\nTrezorConnect.manifest({\n  email: 'contactus@ambire.com',\n  appUrl: 'https://www.ambire.com'\n})\n\n// NOTE: This is a compromise, but we can afford it cause QuickAccs require a secondary key\n// Consider more\nconst SCRYPT_ITERATIONS = 131072/8\n\nexport default function AddAccount ({ relayerURL, onAddAccount }) {\n    const [signersToChoose, setChooseSigners] = useState(null)\n    const [err, setErr] = useState('')\n    const [addAccErr, setAddAccErr] = useState('')\n    const [inProgress, setInProgress] = useState(false)\n    const { addToast } = useToasts()\n\n    const wrapProgress = async fn => {\n        setInProgress(true)\n        try {\n            await fn()\n        } catch(e) {\n            console.error(e)\n            setAddAccErr(`Unexpected error: ${e.message || e}`)\n        }\n        setInProgress(false)\n    }\n\n    const wrapErr = async fn => {\n        setAddAccErr('')\n        try {\n            await fn()\n        } catch(e) {\n            console.error(e)\n            setAddAccErr(`Unexpected error: ${e.message || e}`)\n        }\n    }\n\n    const createQuickAcc = async (req) => {\n        setErr('')\n\n        // async hack to let React run a tick so it can re-render before the blocking Wallet.createRandom()\n        await new Promise(resolve => setTimeout(resolve, 0))\n\n        const extraEntropy = id(req.email+':'+Date.now()+':'+Math.random()+':'+(typeof performance === 'object' && performance.now()))\n        const firstKeyWallet = Wallet.createRandom({ extraEntropy })\n        // 6 words is 2048**6\n        const secondKeySecret = Wallet.createRandom({ extraEntropy }).mnemonic.phrase.split(' ').slice(0, 6).join(' ') + ' ' + req.email\n\n        const secondKeyResp = await fetchPost(`${relayerURL}/second-key`, { secondKeySecret })\n        if (!secondKeyResp.address) throw new Error(`second-key returned no address, error: ${secondKeyResp.message || secondKeyResp}`)\n\n        const { salt, baseIdentityAddr, identityFactoryAddr, quickAccManager, quickAccTimelock } = accountPresets\n        const quickAccountTuple = [quickAccTimelock, firstKeyWallet.address, secondKeyResp.address]\n        const signer = { quickAccManager, timelock: quickAccountTuple[0], one: quickAccountTuple[1], two: quickAccountTuple[2] }\n        const abiCoder = new AbiCoder()\n        const accHash = keccak256(abiCoder.encode(['tuple(uint, address, address)'], [quickAccountTuple]))\n        const privileges = [[quickAccManager, accHash]]\n        const bytecode = getProxyDeployBytecode(baseIdentityAddr, privileges, { privSlot: 0 })\n        const identityAddr = getAddress('0x' + generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex'))\n        const primaryKeyBackup = JSON.stringify(\n            await firstKeyWallet.encrypt(req.passphrase, { scrypt: { N: SCRYPT_ITERATIONS } })\n        )\n\n        const createResp = await fetchPost(`${relayerURL}/identity/${identityAddr}`, {\n            email: req.email,\n            primaryKeyBackup: req.backupOptout ? null : primaryKeyBackup,\n            secondKeySecret,\n            salt, identityFactoryAddr, baseIdentityAddr,\n            privileges,\n            quickAccSigner: signer\n        })\n        if (createResp.message === 'EMAIL_ALREADY_USED') {\n            setErr('An account with this email already exists')\n            return\n        }\n        if (!createResp.success) {\n            console.log(createResp)\n            setErr(`Unexpected sign up error: ${createResp.message || 'unknown'}`)\n            return\n        }\n\n        await onAddAccount({\n            id: identityAddr,\n            email: req.email,\n            primaryKeyBackup,\n            salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n            signer\n        }, { select: true })\n    }\n\n    // EOA implementations\n    // Add or create accounts from Trezor/Ledger/Metamask/etc.\n    async function createFromEOA (addr) {\n        const privileges = [[getAddress(addr), hexZeroPad('0x01', 32)]]\n        const { salt, baseIdentityAddr, identityFactoryAddr } = accountPresets\n        const bytecode = getProxyDeployBytecode(baseIdentityAddr, privileges, { privSlot: 0 })\n        const identityAddr = getAddress('0x' + generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex'))\n\n        if (relayerURL) {\n            const createResp = await fetchPost(`${relayerURL}/identity/${identityAddr}`, {\n                salt, identityFactoryAddr, baseIdentityAddr,\n                privileges\n            })\n            if (!createResp.success && !(createResp.message && createResp.message.includes('already exists'))) throw createResp\n        }\n\n        return {\n            id: identityAddr,\n            salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n            signer: { address: getAddress(addr) }\n        }\n    }\n\n    async function connectWeb3AndGetAccounts () {\n        if (typeof window.ethereum === 'undefined') {\n            throw new Error('MetaMask not available')\n        }\n        const ethereum = window.ethereum\n        const web3Accs = await ethereum.request({ method: 'eth_requestAccounts' })\n        if (!web3Accs.length) throw new Error('No accounts connected')\n        if (web3Accs.length === 1) return onEOASelected(web3Accs[0])\n        setChooseSigners({ addresses: web3Accs })\n    }\n\n    async function getOwnedByEOAs(eoas) {\n        let allUniqueOwned = {}\n\n        await Promise.all(eoas.map(\n            async signerAddr => {\n                const resp = await fetch(`${relayerURL}/identity/any/by-owner/${signerAddr}?includeFormerlyOwned=true`)\n                const privEntries = Object.entries(await resp.json())\n                // discard the privileges value, we do not need it as we wanna add all accounts EVER owned by this eoa\n                privEntries.forEach(([id, _]) => allUniqueOwned[id] = getAddress(signerAddr))\n            }\n        ))\n\n        return await Promise.all(\n            Object.entries(allUniqueOwned).map(([id, signer]) => getAccountByAddr(id, signer))\n        )\n    }\n\n    async function getAccountByAddr (idAddr, signerAddr) {\n        // In principle, we need these values to be able to operate in relayerless mode,\n        // so we just store them in all cases\n        // Plus, in the future this call may be used to retrieve other things\n        const { salt, identityFactoryAddr, baseIdentityAddr, bytecode } = await fetch(`${relayerURL}/identity/${idAddr}`)\n            .then(r => r.json())\n        if (!(salt && identityFactoryAddr && baseIdentityAddr && bytecode)) throw new Error(`Incomplete data from relayer for ${idAddr}`)\n        return {\n            id: idAddr,\n            salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n            signer: { address: signerAddr }\n        }\n    }\n\n    async function connectTrezorAndGetAccounts () {\n        /*\n        const engine = new Web3ProviderEngine({ pollingInterval: this.pollingInterval })\n        engine.addProvider(new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect, ...this.config }))\n        engine.addProvider(new CacheSubprovider())\n        engine.addProvider(new RPCSubprovider(this.url, this.requestTimeoutMs))\n        */\n        const provider = new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect })\n        const addresses = await provider.getAccountsAsync(50)\n        setChooseSigners({ addresses, signerExtra: {\n            type: 'trezor',\n            info: JSON.parse(JSON.stringify(provider._initialDerivedKeyInfo))\n        } })\n    }\n\n    async function connectLedgerAndGetAccounts () {\n        const provider = new LedgerSubprovider({\n            networkId: 0, // @TODO: probably not needed\n            ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n            //baseDerivationPath: this.baseDerivationPath\n        })\n        // NOTE: do not attempt to do both of these together (await Promise.all)\n        // there is a bug in the ledger subprovider (race condition), so it will think we're trying to make two connections simultaniously\n        // cause one call won't be aware of the other's attempt to connect\n        const addresses = await provider.getAccountsAsync(50)\n        const signerExtra = await provider._initialDerivedKeyInfoAsync().then(info => ({ type: 'ledger', info: JSON.parse(JSON.stringify(info)) }))\n        setChooseSigners({ addresses, signerExtra })\n    }\n\n    async function onEOASelected (addr, signerExtra) {\n        const addAccount = (acc, opts) => onAddAccount({ ...acc, signerExtra }, opts)\n        // when there is no relayer, we can only add the 'default' account created from that EOA\n        // @TODO in the future, it would be nice to do getLogs from the provider here to find out which other addrs we control\n        //   ... maybe we can isolate the code for that in lib/relayerless or something like that to not clutter this code\n        if (!relayerURL) return addAccount(await createFromEOA(addr), { select: true })\n        // otherwise check which accs we already own and add them\n        const owned = await getOwnedByEOAs([addr])\n        if (!owned.length) return addAccount(await createFromEOA(addr), { select: true })\n        else {\n            addToast(`Found ${owned.length} existing accounts with signer ${addr}`, { timeout: 15000 })\n            owned.forEach((acc, i) => addAccount(acc , { select: i === 0 }))\n        }\n    }\n\n    // The UI for choosing a signer to create/add an account with, for example\n    // when connecting a hardware wallet, it has many addrs you can choose from\n    if (signersToChoose) {\n        return (<div className=\"loginSignupWrapper chooseSigners\">\n            <h3>Choose a signer</h3>\n            <ul id=\"signersToChoose\">\n                {signersToChoose.addresses.map(addr =>\n                    (<li key={addr} onClick={() => wrapErr(() => onEOASelected(addr, signersToChoose.signerExtra))}>{addr}</li>)\n                )}\n            </ul>\n        </div>)\n    }\n\n    // Adding accounts from existing signers\n    // @TODO: progress indicators for those\n    const addFromSignerButtons = (<>\n        <button onClick={() => wrapErr(connectTrezorAndGetAccounts)}><div className=\"icon\" style={{ backgroundImage: 'url(./resources/trezor.png)' }}/>Trezor</button>\n        <button onClick={() => wrapErr(connectLedgerAndGetAccounts)}><div className=\"icon\" style={{ backgroundImage: 'url(./resources/ledger.png)' }}/>Ledger</button>\n        <button onClick={() => wrapErr(connectWeb3AndGetAccounts)}><div className=\"icon\" style={{ backgroundImage: 'url(./resources/metamask.png)' }}/>Metamask / Browser</button>\n    </>)\n\n    if (!relayerURL) {\n        return (<div className=\"loginSignupWrapper\">\n            <div id=\"logo\"/>\n            <section id=\"addAccount\">\n            <div id=\"loginOthers\">\n                <h3>Add an account</h3>\n                {addFromSignerButtons}\n                <h3>NOTE: You can enable email/password login by connecting to a relayer.</h3>\n            </div>\n            </section>\n        </div>)\n    }\n\n    return (<div className=\"loginSignupWrapper\">\n        <div id=\"logo\"/>\n        <section id=\"addAccount\">\n          <div id=\"loginEmail\">\n            <h3>Create a new account</h3>\n            <LoginOrSignup\n                inProgress={inProgress}\n                onAccRequest={req => wrapProgress(() => createQuickAcc(req))}\n                action=\"SIGNUP\"\n            ></LoginOrSignup>\n            {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n          </div>\n    \n          <div id=\"loginSeparator\">\n            <div className=\"verticalLine\"></div>\n            <span>or</span>\n            <div className=\"verticalLine\"></div>\n          </div>\n    \n          <div id=\"loginOthers\">\n            <h3>Add an account</h3>\n            <Link to=\"/email-login\">\n              <button><div className=\"icon\" style={{ backgroundImage: 'url(./resources/envelope.png)' }}/>Email</button>\n            </Link>\n            {addFromSignerButtons}\n            {addAccErr ? (<p className=\"error\">{addAccErr}</p>) : (<></>)}\n          </div>\n        </section>\n      </div>\n    )\n}","import './ProtocolsPlaceholder.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { Button } from '../../../../common'\n\nconst ProtocolsPlaceholder = () => {\n    const tokens = [\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0xade00c28244d5ce17d72e40330b1c318cd12b7c3.png',\n            symbol: 'ADX',\n            balance: 170027.26,\n            balanceUSD: 138880.64\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x0000000000000000000000000000000000000000.png',\n            symbol: 'ETH',\n            balance: 61.77,\n            balanceUSD: 283170.08\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599.png',\n            symbol: 'WBTC',\n            balance: 0.03,\n            balanceUSD: 2227.24\n        },\n    ]\n\n    return (\n        <div id=\"protocols-placeholder\" >\n            <div className=\"placeholder-overlay\">\n                <label>\n                    Welcome! You don't have any funds on this account.\n                </label>\n                <NavLink to=\"/wallet/deposit\">\n                    <Button small icon={<GiReceiveMoney/>}>Deposit</Button>\n                </NavLink>\n            </div>\n            <div className=\"category\">\n                <div className=\"title\">Tokens</div>\n                <div className=\"list\">\n                    {\n                        tokens.map(({ icon, symbol, balance, balanceUSD }) => (\n                            <div className=\"token\" key={symbol}>\n                                <div className=\"icon\">\n                                    <img src={icon} alt=\"Token Icon\"/>\n                                </div>\n                                <div className=\"name\">\n                                    { symbol }\n                                </div>\n                                <div className=\"separator\"></div>\n                                <div className=\"balance\">\n                                    <div className=\"currency\">\n                                        { balance } <span className=\"symbol\">{ symbol }</span>\n                                    </div>\n                                    <div className=\"dollar\">\n                                        <span className=\"symbol\">$</span> { balanceUSD }\n                                    </div>\n                                </div>\n                            </div>\n                        ))\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ProtocolsPlaceholder","import './Protocols.scss'\n\nimport { GiToken } from 'react-icons/gi'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { NavLink } from 'react-router-dom'\nimport { Button } from '../../../common'\nimport ProtocolsPlaceholder from './ProtocolsPlaceholder/ProtocolsPlaceholder'\n\nconst Protocols = ({ protocols }) => {\n    return (\n        <div id=\"protocols-table\">\n            {\n                !protocols.length ?\n                    <ProtocolsPlaceholder/>\n                    :\n                    protocols.map(({ label, assets }, i) => (\n                            <div className=\"category\" key={`category-${i}`}>\n                                <div className=\"title\">{ label }</div>\n                                <div className=\"list\">\n                                    {\n                                        assets.map(({ type, tokens }) => \n                                            tokens.map(({ label, collectionName, symbol, img, collectionImg, balance, balanceUSD, address }, i) => (\n                                                <div className=\"token\" key={`token-${i}`}>\n                                                    <div className=\"icon\">\n                                                        {\n                                                            img || collectionImg ? \n                                                                <img src={img || collectionImg} alt=\"Token Icon\"/>\n                                                                :\n                                                                <GiToken size={20}/>\n                                                        }\n                                                    </div>\n                                                    <div className=\"name\">\n                                                        { label || collectionName || symbol }\n                                                    </div>\n                                                    <div className=\"separator\"></div>\n                                                    <div className=\"balance\">\n                                                        <div className=\"currency\">\n                                                            { balance } <span className=\"symbol\">{ symbol }</span>\n                                                        </div>\n                                                        <div className=\"dollar\">\n                                                            <span className=\"symbol\">$</span> { balanceUSD.toFixed(2) }\n                                                        </div>\n                                                    </div>\n                                                    {\n                                                        type === 'wallet' ?\n                                                            <div className=\"actions\">\n                                                                <NavLink to={`/wallet/transfer/${address}`}>\n                                                                    <Button small icon={<AiOutlineSend/>}>Send</Button>\n                                                                </NavLink>\n                                                            </div>\n                                                            :\n                                                            null\n                                                     }\n                                                </div>\n                                            ))\n                                        )\n                                    }\n                                </div>\n                            </div>\n                        ))\n            }\n        </div>\n    )\n}\n\nexport default Protocols","import './CollectiblesPlaceholder.scss'\n\nconst CollectiblesPlaceholder = () => {\n    const collectibles = [\n        {\n            collectionName: 'Party Bone',\n            collectionImg: 'https://lh3.googleusercontent.com/ZNc-hDBHOxgioSltBcDvh5hBfWEj623dETJj2nrEC0cLbjuULbo4Ign7OnLDX9qf2XaALrkXsZCRylRqPPHqQgzJOabJg4TRq3MDhA=s2500',\n            name: 'Party Bone #7865',\n            image: 'https://lh3.googleusercontent.com/uznp2aNVNPEhVk4MhLG2Zn-JC2sVaF6PsUcpF_CpyQkgekmv4hh4zbyebsoLFLvkY8PSV6D-TR5OaMp15RhG9zQsYd_AvDCo9SEVF4Q',\n            price: 32.16\n        },\n        {\n            collectionName: 'Pudgy Penguins',\n            collectionImg: 'https://lh3.googleusercontent.com/L9PJp0pOXCscKsTpD1_6zoALxdjG5gIKHLykS_Wk5J_yk590drEqRhM1ElTEZCaWeTjFj2isfxFw2tcFKcbCPlu6-Eu5bUuxsL-x=s2500',\n            name: 'Pudgy Penguin #8675',\n            image: 'https://lh3.googleusercontent.com/J6gQQRnzsMLAOhYiN9qIhogxr2MKn17zfGf6nQFKr3WCZ34thm6H0w9izvnJysxJclsyr8c3yo0hshOaLU73aS-IgTm-CooJb1cw1S0',\n            price: 5675.00\n        },\n        {\n            collectionName: 'Art Blocks Factory',\n            collectionImg: 'https://lh3.googleusercontent.com/sr7Y19-bJwsQsxX6n8Pj5tIaNKdUEotNlfhBsYw8McKpIsYARglTORaNlGhDZ2PrH-tO1vU6tFbpamiWwIImbidhVSh4aoIh4d310Og=s2500',\n            name: 'Transitions #4267',\n            image: 'https://lh3.googleusercontent.com/9MzvH_PSYMvlJE8Cfm5d308ltY5fZx-dooEcQizKgtKZ8g05RvJvd_5LAbqVHIzaoZbM-HOBgNSV8RKvEe_1thkLcQtE4NMMx8Kp5g',\n            price: 263.46\n        },\n        {\n            collectionName: 'Sad Frogs District',\n            collectionImg: 'https://lh3.googleusercontent.com/3U8N73XLrQOQPhJBAMNi7IPR1y3GGJ2zxmyUlit4IHCJURmKFPWClgatjbYfyz9drMk6-XSQTjSFqn7tKL0ZNoRbgvUu8OdLVREA=s2500',\n            name: '1882',\n            image: 'https://lh3.googleusercontent.com/3uwrfkdhHSfWm171BOjJHp3768tbLP9TeyTh2BnvgF6S1nIRI489SFq6EGjI9AISRUeyXXufEjB34Wj0bif_vl-y5h6GesEoJaaZcJg',\n            price: 1563.59\n        },\n        {\n            collectionName: 'GLUEWAVE',\n            collectionImg: 'https://lh3.googleusercontent.com/LheZMF6AyTLPpfwABwAGZqoC0gTWrDlYloDdT2VX2u_GZRZnP-ZpDC90huElm3RXE-eU1d1YluQi8G1uVdeDdysUNLZWJte4jXk3zeY=s2500',\n            name: '000105040307070704',\n            image: 'https://lh3.googleusercontent.com/eP_F_6aa_BXuKfYq1w2aiS6UW3bp4-gByFoeKLMXYuWAkU6Xiyi7mkm31aoewCZ_eG9RAuhas8jxFwXTxAWuxq1E3ZxYg97cLUUE',\n            price: 7107.27\n        }\n    ]\n\n    return (\n        <div id=\"collectibles-placeholder\">\n            <div className=\"placeholder-overlay\">\n                You don't have any collectibles (NFTs) yet\n            </div>\n            <div id=\"collectibles\">\n                {\n                    collectibles.map(({ collectionName, collectionImg, name, image, price}) => (\n                        <div className=\"collectible\" key={name}>\n                            <div className=\"artwork\" style={{backgroundImage: `url(${image})`}}/>\n                            <div className=\"info\">\n                                <div className=\"collection\">\n                                    <div className=\"collection-icon\" style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                    { collectionName }\n                                </div>\n                                <div className=\"details\">\n                                    <div className=\"name\">{ name }</div>\n                                    <div className=\"value\"><span className=\"purple-highlight\">$</span> { price }</div>\n                                </div>\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default CollectiblesPlaceholder","import './Collectibles.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport CollectiblesPlaceholder from './CollectiblesPlaceholder/CollectiblesPlaceholder'\n\nconst Collectibles = ({ collectibles }) => {\n    return (\n        !collectibles.length ?\n            <CollectiblesPlaceholder/>\n            :\n            <div id=\"collectibles\">\n                {\n                    collectibles.map(({ tokens }) => tokens.map(({ network, address, collectionName, collectionImg, assets }) => assets.map(({ tokenId, assetName, assetImg, balanceUSD }) => (\n                        <div className=\"collectible\" key={tokenId}>\n                            <NavLink to={`/wallet/nft/${network}/${address}/${tokenId}`}>\n                                <div className=\"artwork\" style={{backgroundImage: `url(${assetImg})`}}/>\n                                <div className=\"info\">\n                                    <div className=\"collection\">\n                                        <div className=\"collection-icon\" style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                        <span className=\"collection-name\">{ collectionName }</span>\n                                    </div>\n                                    <div className=\"details\">\n                                        <div className=\"name\">{ assetName }</div>\n                                        <div className=\"value\"><span className=\"purple-highlight\">$</span> { balanceUSD.toFixed(2) }</div>\n                                    </div>\n                                </div>\n                            </NavLink>\n                        </div>\n                    ))))\n                }\n            </div>\n    )\n}\n\nexport default Collectibles","import './Dashboard.scss'\n\nimport { useEffect, useLayoutEffect, useState } from 'react'\n\nimport { Chart, Loading, Segments } from '../../common'\nimport Protocols from './Protocols/Protocols'\nimport Collectibles from './Collectibles/Collectibles'\nimport networks from '../../../consts/networks'\n\nexport default function Dashboard({ portfolio, setNetwork }) {\n    const [chartTokensData, setChartTokensData] = useState([]);\n    const [chartProtocolsData, setChartProtocolsData] = useState([]);\n    const [chartType, setChartType] = useState([]);\n    const [tableType, setTableType] = useState([]);\n\n    const chartSegments = [\n        {\n            value: 'Tokens'\n        },\n        {\n            value: 'Protocols'\n        }\n    ]\n\n    const tableSegments = [\n        {\n            value: 'Tokens'\n        },\n        {\n            value: 'Collectibles'\n        }\n    ]\n\n    const networkDetails = (network) => networks.find(({ id }) => id === network)\n\n    useLayoutEffect(() => {\n        const tokensData = portfolio.tokens\n            .map(({ label, balanceUSD }) => ({\n                label,\n                value: Number(((balanceUSD / portfolio.balance.total.full) * 100).toFixed(2))\n            }))\n            .filter(({ value }) => value > 0);\n\n        const totalProtocols = portfolio.protocols.map(({ assets }) => \n            assets\n                .map(({ balanceUSD }) => balanceUSD)\n                .reduce((acc, curr) => acc + curr, 0))\n            .reduce((acc, curr) => acc + curr, 0)\n\n        const protocolsData = portfolio.protocols\n            .map(({ label, assets }) => ({\n                label,\n                value: Number(((assets.map(({ balanceUSD }) => balanceUSD).reduce((acc, curr) => acc + curr, 0) / totalProtocols) * 100).toFixed(2))\n            }))\n            .filter(({ value }) => value > 0)\n\n        setChartTokensData(tokensData);\n        setChartProtocolsData(protocolsData)\n    }, [portfolio.balance, portfolio.tokens, portfolio.protocols]);\n\n    useEffect(() => portfolio.requestOtherProtocolsRefresh(), [portfolio])\n\n    return (\n        <section id=\"dashboard\">\n            <div id=\"overview\">\n                <div id=\"balance\" className=\"panel\">\n                    <div className=\"title\">Balance</div>\n                    <div className=\"content\">\n                        {\n                            portfolio.isBalanceLoading ? \n                                <Loading/>\n                                :\n                                <div id=\"total\">\n                                    <span className=\"green-highlight\">$</span> { portfolio.balance.total.truncated }\n                                    <span className=\"green-highlight\">.{ portfolio.balance.total.decimals }</span>\n                                    <div id=\"other-balances\">\n                                        {\n                                            portfolio.otherBalances.map(({ network, total }) => (\n                                                total.full > 0 ?\n                                                    <div className=\"other-balance\" key={network} onClick={() => setNetwork(network)}>\n                                                        You also have <span className=\"purple-highlight\">$</span> { total.truncated }\n                                                        <span className=\"purple-highlight\">.{total.decimals}</span> on { networkDetails(network).name }\n                                                    </div>\n                                                    :\n                                                    null\n                                            ))\n                                        }\n                                    </div>\n                                </div>\n                        }\n                    </div>\n                </div>\n                <div id=\"chart\" className=\"panel\">\n                    <div className=\"title\">\n                        Balance by\n                        <Segments small defaultValue={chartSegments[0].value} segments={chartSegments} onChange={setChartType}/>\n                    </div>\n                    <div className=\"content\">\n                        {\n                            chartType === chartSegments[0].value ?\n                                portfolio.isBalanceLoading ?\n                                    <Loading/>\n                                    :\n                                    <Chart data={chartTokensData} size={200}/>\n                                :\n                                portfolio.areProtocolsLoading ?\n                                    <Loading/>\n                                    :\n                                    <Chart data={chartProtocolsData} size={200}/>\n                        }\n                    </div>\n                </div>\n            </div>\n            <div id=\"table\" className=\"panel\">\n                <div className=\"title\">\n                    Assets\n                    <Segments small defaultValue={tableSegments[0].value} segments={tableSegments} onChange={setTableType}></Segments>\n                </div>\n                <div className=\"content\">\n                    {\n                        portfolio.areProtocolsLoading ?\n                            <Loading/>\n                            :\n                            tableType === tableSegments[0].value ?\n                                <Protocols protocols={portfolio.protocols}/>\n                                :\n                                <Collectibles collectibles={portfolio.collectibles}/>\n                    }\n                </div>\n                {\n                    portfolio.areProtocolsLoading || !portfolio.protocols.length ?\n                        null\n                        :\n                        <div className=\"powered\">\n                            Powered by Zapper\n                        </div>\n                }\n            </div>\n        </section>\n    )\n}","import './Accounts.scss'\n\nimport { useState } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { AiOutlinePlus } from 'react-icons/ai'\nimport { MdOutlineContentCopy, MdOutlineDelete, MdOutlineClose, MdOutlineCheck } from 'react-icons/md'\nimport * as blockies from 'blockies-ts';\nimport { DropDown, Button } from '../../../common';\nimport { useToasts } from '../../../../hooks/toasts';\n\nconst Accounts = ({ accounts, selectedAddress, onSelectAcc, onRemoveAccount }) => {\n    const { addToast } = useToasts()\n    const [accountWarning, setAccountWarning] = useState(false)\n    const [closed, setClosed] = useState(false)\n\n    const shortenedAddress = address => address.slice(0, 5) + '...' + address.slice(-3)\n    const isActive = id => id === selectedAddress ? 'active' : ''\n    const toIcon = seed => blockies.create({ seed }).toDataURL()\n    const toIconBackgroundImage = seed => ({ backgroundImage: `url(${toIcon(seed)})`})\n    const walletType = signerExtra => {\n        if (signerExtra && signerExtra.type === 'ledger') return 'Ledger'\n        else if (signerExtra && signerExtra.type === 'trezor') return 'Trezor'\n        else return 'Web3'\n    }\n    const copyAddress = async address => {\n        await navigator.clipboard.writeText(address)\n        addToast('Copied to clipboard!')\n    }\n\n    const onSelectAccount = (id) => {\n        onSelectAcc(id)\n        setClosed(true)\n    }\n\n    return (\n        <DropDown id=\"accounts\" icon={toIcon(selectedAddress)} title={shortenedAddress(selectedAddress)} closed={closed} onOpen={() => setClosed(false)}>\n          <div className=\"list\">\n            {\n              accounts.map(({ id, email, signer, signerExtra }) => \n                accountWarning !== id ?\n                    <div className={`account ${isActive(id)}`} key={id}>\n                        <div className=\"inner\" onClick={() => onSelectAccount(id)}>\n                            <div className=\"icon\" style={toIconBackgroundImage(id)}></div>\n                            <div className=\"details\">\n                                <div className=\"address\">{ id }</div>\n                                <label>{ email ? `Email/Password account (${email})` : `${walletType(signerExtra)} (${shortenedAddress(signer.address)})` }</label>\n                            </div>\n                        </div>\n                        <div className=\"button\" onClick={() => copyAddress(id)}>\n                            <MdOutlineContentCopy/>\n                        </div>\n                        <div className=\"button\" onClick={() => setAccountWarning(id)}>\n                            <MdOutlineDelete/>\n                        </div>\n                    </div>\n                    :\n                    <div id=\"confirm-delete-account\" className={`account ${isActive(id)}`} key={id}>\n                        <div className=\"message\">\n                            Are you sure you want to remove this account ?\n                        </div>\n                        <div className=\"button danger\" onClick={() => onRemoveAccount(id)}>\n                            <MdOutlineCheck/>\n                        </div>\n                        <div className=\"button\" onClick={() => setAccountWarning(false)}>\n                            <MdOutlineClose/>\n                        </div>\n                    </div>\n              )\n            }\n          </div>\n          <div id=\"add-account\">\n            <NavLink to=\"/add-account\">\n              <Button icon={<AiOutlinePlus/>} small>Add Account</Button>\n            </NavLink>\n          </div>\n        </DropDown>\n    )\n}\n\nexport default Accounts","const isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1\n\nconst checkPermissions = async (name, onPrompt) => {\n    let status = false;\n\n    try {\n        const { state } = await navigator.permissions.query({\n            name,\n            allowWithoutGesture: false,\n        })\n        if (state === 'granted') return true\n        if (state === 'prompt') {\n            if (onPrompt) {\n                await onPrompt\n                return checkPermissions(name)\n            } else return false\n        }\n    } catch (e) {\n        console.error('Error while trying to query permissions', e)\n    }\n\n    return status;\n}\n\nconst checkClipboardPermission = (prompt = false) => isFirefox ? false : prompt ? checkPermissions('clipboard-read', navigator.clipboard.readText()) : checkPermissions('clipboard-read')\nconst checkNotificationPermission = (prompt = false) => prompt ? checkPermissions('notifications', Notification.requestPermission()) : checkPermissions('notifications')\n\nconst askForPermission = async name => {\n    try {\n        if (name === 'clipboard-read') {\n            await navigator.clipboard.readText()\n            return true\n        }\n\n        if (name === 'notifications') {\n            const status = await Notification.requestPermission()\n            return status === 'granted' || status === 'default'\n        }\n\n        return false\n    } catch(e) {\n        console.error(`Permission ${name} blocked`);\n        return false\n    }\n}\n\nexport {\n    askForPermission,\n    checkClipboardPermission,\n    checkNotificationPermission,\n    isFirefox\n}","import \"./TopBar.scss\";\n\nimport React, { useState, useCallback } from \"react\";\nimport { FiHelpCircle } from \"react-icons/fi\";\nimport { DropDown, Select } from \"../../common\";\nimport Accounts from \"./Accounts/Accounts\";\nimport { checkClipboardPermission } from \"../../../helpers/permissions\";\n\nconst TopBar = ({\n  connections,\n  connect,\n  disconnect,\n  onSelectAcc,\n  onRemoveAccount,\n  selectedAcc,\n  accounts,\n  network,\n  setNetwork,\n  allNetworks,\n}) => {\n  const [isClipboardGranted, setClipboardGranted] = useState(false);\n\n  const checkPermission = async () => {\n    const status = await checkClipboardPermission()\n    setClipboardGranted(status)\n    return status\n  }\n\n  const readClipboard = useCallback(async () => {\n    if (isClipboardGranted) {\n      const content = await navigator.clipboard.readText();\n      if (content.startsWith('wc:')) connect({ uri: content });\n    } else {\n      const uri = prompt(\"Enter WalletConnect URI\");\n      if (uri) connect({ uri });\n    }\n  }, [connect, isClipboardGranted]);\n\n  const networksItems = allNetworks.map(({ id, name, icon }) => ({\n    label: name,\n    value: id,\n    icon\n  }))\n\n  return (\n    <div id=\"topbar\">\n      <div className=\"container\">\n        <DropDown title=\"dApps\" badge={connections.length} onOpen={() => checkPermission()}>\n          <div id=\"connect-dapp\">\n            <div className=\"heading\">\n              <button disabled={isClipboardGranted} onClick={readClipboard}>\n                Connect dApp\n              </button>\n              <FiHelpCircle size={30} />\n            </div>\n            {isClipboardGranted ? (\n              <label>\n                Automatic connection enabled, just copy a WalletConnect URL and\n                come back to this tab.\n              </label>\n            ) : null}\n          </div>\n          {connections.map(({ session, uri }) => (\n            <div className=\"item dapps-item\" key={session.peerId}>\n              <div className=\"icon\">\n                <img\n                  src={session.peerMeta.icons.filter(x => !x.endsWith('favicon.ico'))[0]}\n                  alt={session.peerMeta.name}\n                ></img>\n              </div>\n              <a href={session.peerMeta.url} target=\"_blank\" rel=\"noreferrer\">\n                <div className=\"name\">{session.peerMeta.name}</div>\n              </a>\n              <div className=\"separator\"></div>\n              <button onClick={() => disconnect(uri)}>Disconnect</button>\n            </div>\n          ))}\n        </DropDown>\n\n        <Accounts accounts={accounts} selectedAddress={selectedAcc} onSelectAcc={onSelectAcc} onRemoveAccount={onRemoveAccount}/>\n\n        <Select defaultValue={network.id} items={networksItems} onChange={value => setNetwork(value)}/>\n      </div>\n    </div>\n  );\n};\n\nexport default TopBar;\n","import \"./SideBar.scss\"\n\nimport { NavLink } from 'react-router-dom'\nimport { MdDashboard, MdLock, MdCompareArrows, } from 'react-icons/md'\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { BsCurrencyExchange } from 'react-icons/bs'\nimport { BsPiggyBank } from 'react-icons/bs'\nimport { BiTransfer } from 'react-icons/bi'\nimport { Loading } from \"../../common\"\nimport { useCallback, useEffect, useRef, useState } from \"react\"\n\nconst SideBar = ({match, portfolio}) => {\n    const sidebarRef = useRef()\n    const [balanceFontSize, setBalanceFontSize] = useState(0)\n\n    const resizeBalance = useCallback(() => {\n        const balanceFontSizes = {\n            3: '2em',\n            5: '1.5em',\n            7: '1.3em',\n            9: '1.2em',\n            11: '1em',\n        }\n\n        if (portfolio.balance.total.truncated) {\n            const charLength = portfolio.balance.total.truncated.length\n            const closest = Object.keys(balanceFontSizes).reduce((prev, current) => Math.abs(current - charLength) < Math.abs(prev - charLength) ? current : prev)\n            setBalanceFontSize(balanceFontSizes[closest])\n        }\n    }, [portfolio.balance.total])\n\n    useEffect(() => resizeBalance(), [resizeBalance])\n\n    return (\n        <div id=\"sidebar\" ref={sidebarRef}>\n                <NavLink to={match.url + \"/dashboard\"}>\n                    <div id=\"logo\" />\n                    <div id=\"icon\" />\n                </NavLink>\n\n                <div className=\"balance\">\n                    <label>Balance</label>\n                    {\n                        portfolio.isBalanceLoading ?\n                            <Loading/>\n                            :\n                            <div className=\"balanceDollarAmount\" style={{fontSize: balanceFontSize}}>\n                                <span className=\"dollarSign highlight\">$</span>{ portfolio.balance.total.truncated }<span className=\"highlight\">.{ portfolio.balance.total.decimals }</span>\n                            </div>\n                    }\n                </div>\n\n                <NavLink to={match.url + \"/dashboard\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <MdDashboard size={30}/>Dashboard\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/deposit\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <GiReceiveMoney size={30}/>Deposit\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/transfer\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <BiTransfer size={30}/>Transfer\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/swap\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <BsCurrencyExchange size={30}/>Swap\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/earn\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <BsPiggyBank size={30}/>Earn\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/transactions\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <MdCompareArrows size={30}/>Transactions\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/security\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <MdLock size={30}/>Security\n                    </div>\n                </NavLink>\n            </div>\n    )\n}\n\nexport default SideBar\n","export default __webpack_public_path__ + \"static/media/ramp.781246d0.svg\";","export default __webpack_public_path__ + \"static/media/paytrie.089717f3.svg\";","export default __webpack_public_path__ + \"static/media/transak.e01c0265.svg\";","import { RampInstantSDK } from '@ramp-network/ramp-instant-sdk'\nimport transakSDK from '@transak/transak-sdk'\nimport { popupCenter } from '../helpers/popupHelper'\nimport url from 'url'\n\nimport { RAMP_HOST_API_KEY, PAYTRIE_PARTNER_URL, TRANSAK_API_KEY, TRANSAK_ENV } from '../config'\n\nexport const openRampNetwork = ({ walletAddress, selectedNetwork }) => {\n    const assetsList = {\n        ethereum: 'ERC20_*,ETH_*',\n        polygon: 'MATIC_ERC20_*,MATIC_*',\n        avalanche: 'AVAX_*',\n    }\n\n    const widget = new RampInstantSDK({\n        hostAppName: 'Ambire',\n        hostLogoUrl: 'https://www.ambire.com/ambire-logo.png',\n        variant: 'auto',\n        swapAsset: assetsList[selectedNetwork],\n        userAddress: walletAddress,\n        hostApiKey: RAMP_HOST_API_KEY,\n    })\n    widget.show()\n};\n\nexport const openPayTrie = ({ walletAddress, selectedNetwork }) => {\n    const rightSideLabel = selectedNetwork === 'polygon' ? 'USDC-P' : 'USDC'\n\n    const URL = url.parse(PAYTRIE_PARTNER_URL, true)\n    URL.search = null\n    URL.query = {\n        ...URL.query,\n        addr: walletAddress,\n        rightSideLabel\n    }\n\n    popupCenter({\n        url: url.format(URL),\n        title: 'Paytrie Deposit',\n        w: 450,\n        h: 700,\n    })\n};\n\nexport const openTransak = ({ walletAddress, selectedNetwork }) => {\n    let networks = selectedNetwork === 'avalanche' ? 'avaxcchain' : selectedNetwork\n    let defaultCurency = {\n        'ethereum': 'USDC',\n        'polygon': 'USDC',\n        'arbitrum': 'ETH',\n        'avaxcchain': 'AVAX'\n    }\n\n    const transak = new transakSDK({\n        apiKey: TRANSAK_API_KEY,\n        environment: TRANSAK_ENV,\n        networks,\n        defaultCryptoCurrency: defaultCurency[networks],\n        disableWalletAddressForm: true,\n        walletAddress,\n        themeColor: '282b33',\n        email: '',\n        redirectURL: '',\n        hostURL: window.location.origin,\n        widgetHeight: 'calc(100% - 60px)',\n        widgetWidth: '100%',\n    })\n\n    transak.init()\n\n    transak.on(transak.ALL_EVENTS, data => {\n        console.log(data)\n    })\n\n    transak.on(transak.EVENTS.TRANSAK_ORDER_SUCCESSFUL, orderData => {\n        console.log(orderData)\n        transak.close()\n    })\n}","export const popupCenter = ({ url, title, w, h }) => {\n\t// Fixes dual-screen position                             Most browsers      Firefox\n\tconst dualScreenLeft =\n\t\twindow.screenLeft !== undefined ? window.screenLeft : window.screenX\n\tconst dualScreenTop =\n\t\twindow.screenTop !== undefined ? window.screenTop : window.screenY\n\n\tconst width = window.innerWidth\n\t\t? window.innerWidth\n\t\t: document.documentElement.clientWidth\n\t\t? document.documentElement.clientWidth\n\t\t: window.screen.width\n\tconst height = window.innerHeight\n\t\t? window.innerHeight\n\t\t: document.documentElement.clientHeight\n\t\t? document.documentElement.clientHeight\n\t\t: window.screen.height\n\n\tconst systemZoom = width / window.screen.availWidth\n\tconst left = (width - w) / 2 / systemZoom + dualScreenLeft\n\tconst top = (height - h) / 2 / systemZoom + dualScreenTop\n\tconst newWindow = window.open(\n\t\turl,\n\t\ttitle,\n\t\t`\n\t\ttoolbar=no,scrollbars=no,resizable=no\n\t\twidth=${w / systemZoom}, \n\t\theight=${h / systemZoom}, \n\t\ttop=${top}, \n\t\tleft=${left},\n\t\t`\n\t)\n\n\tif (window.focus) newWindow.focus()\n}","import './Providers.scss'\n\nimport RAMP_LOGO from '../../../../resources/ramp.svg';\nimport PAYTRIE_LOGO from '../../../../resources/paytrie.svg';\nimport TRANSAK_LOGO from '../../../../resources/transak.svg';\n\nimport { openRampNetwork, openPayTrie, openTransak } from '../../../../services/providers'\n\nexport default function Providers({ walletAddress, networkDetails }) {\n    const providers = [\n        {\n            logo: RAMP_LOGO,\n            name: 'Ramp',\n            type: 'Bank Transfer, Credit/Debit Card, Apple Pay',\n            fees: '0.49%-2.9%',\n            limits: '10,000EUR/m',\n            currencies: 'USD, EUR, GBP',\n            networks: ['ethereum', 'polygon', 'avalanche'],\n            onClick: () => openRampNetwork({walletAddress, selectedNetwork: networkDetails.id})\n        },\n        {\n            logo: PAYTRIE_LOGO,\n            name: 'PayTrie',\n            type: 'Bank Transfer',\n            fees: '1% (min. $2 CAD)',\n            limits: '$2,000CAD/day',\n            currencies: 'CAD',\n            networks: ['ethereum', 'polygon'],\n            onClick: () => openPayTrie({walletAddress, selectedNetwork: networkDetails.id})\n        },\n        {\n            logo: TRANSAK_LOGO,\n            name: 'Transak',\n            type: 'Credit/Debit card and Bank Transfer (methods availability depends on location)',\n            fees: 'from 0.5%',\n            limits: 'up to 15,000 EUR/day',\n            currencies: 'GBP, EUR, USD and many more',\n            networks: ['ethereum', 'polygon', 'avalanche', 'arbitrum'],\n            onClick: () => openTransak({walletAddress, selectedNetwork: networkDetails.id})\n        }\n    ];\n\n    const shouldBeDisabled = (networks) => {\n        return networks.includes(networkDetails.id) ? null : 'disabled'; \n    };\n\n    return (\n        <div id=\"providers\">\n            {\n                providers.map(({ logo, name, type, fees, limits, currencies, networks, onClick }) =>\n                    <div className={`provider ${shouldBeDisabled(networks)}`} key={name} onClick={onClick}>\n                        <div className=\"logo\">\n                            <img src={logo} alt={name}></img>\n                        </div>\n                        <div className=\"details\">\n                            <div className=\"type\">\n                                { type }\n                            </div>\n                            <div className=\"fees\">\n                                Fees: { fees }\n                            </div>\n                            <div className=\"limits\">\n                                Limits: { limits }\n                            </div>\n                            <div className=\"currencies\">\n                                Currencies: { currencies }\n                            </div>\n                        </div>\n                    </div>\n                )\n            }\n            {\n                networkDetails.id !== 'ethereum' ? \n                    <div id=\"network-warning\">\n                        <b>NOTE:</b> Some deposit methods are unavailable on <b>{networkDetails.name}</b>. Switch to Ethereum for the widest support.\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n}\n","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/polygon-logo.d08b26bd.svg\";","import './Deposit.scss'\n\nimport { MdAccountBalance, MdAccountBalanceWallet } from 'react-icons/md'\nimport TextInput from '../../common/TextInput/TextInput'\nimport Providers from './Providers/Providers'\n\nimport ETHEREUM_LOGO from '../../../resources/ethereum-logo.png'\nimport POLYGON_LOGO from '../../../resources/polygon-logo.svg'\nimport networks from '../../../consts/networks'\n\nexport default function Deposit({ selectedAcc, selectedNetwork }) {\n    const networkDetails = networks.find(({ id }) => id === selectedNetwork)\n\n    return (\n        <section id=\"deposit\">\n            <div className=\"panel\">\n                <div className=\"heading\">\n                     <div className=\"title\">\n                        <MdAccountBalanceWallet size={35}/>\n                        Deposit Tokens\n                    </div>\n                    <div className=\"subtitle\">\n                        Direct Deposit\n                    </div>\n                </div>\n                <div className=\"description\">\n                    <TextInput className=\"depositAddress\" label=\"Send tokens or collectibles (NFTs) to this address:\" value={selectedAcc} copy/>\n                </div>\n                <div id=\"networks\">\n                    Following networks supported:\n                    <div className=\"logos\">\n                        <img src={ETHEREUM_LOGO} alt=\"Ethereum\"/>\n                        <img src={POLYGON_LOGO} alt=\"Polygon\"/>\n                    </div>\n                </div>\n            </div>\n            <div className=\"panel\">\n                <div className=\"heading\">\n                    <div className=\"title\">\n                        <MdAccountBalance size={35}/>\n                        Fiat Currency\n                    </div>\n                    <div className=\"subtitle\">\n                        Credit Card & Bank Transfer\n                    </div>\n                </div>\n                <div className=\"description\">\n                    Deposit with credit card to your account directly using one of our partners\n                </div>\n                <Providers walletAddress={selectedAcc} networkDetails={networkDetails}/>\n            </div>\n        </section>\n    )\n}","import './SushiFrame.scss';\n\nimport React, { useEffect, useRef } from 'react'\n\nimport { SUSHI_SWAP_FRAME } from '../../../config'\n\nconst ambireSushi = {\n    name: \"Ambire swap\",\n    url: SUSHI_SWAP_FRAME,\n    logo: 'https://www.ambire.com/ambire-logo.png',\n    desc: 'Ambire swap'\n}\n\nexport default function SushiSwap({ network, selectedAcc, gnosisConnect, gnosisDisconnect }) {\n    const iframeRef = useRef(null);\n\n    const genHash = () => {\n        return ambireSushi.url + network.chainId + selectedAcc\n    }\n\n    useEffect(() => {\n        gnosisConnect({\n            selectedAcc,\n            iframeRef,\n            app: ambireSushi\n        });\n\n        return () => {\n            gnosisDisconnect()\n        }\n\n    }, [network, selectedAcc, iframeRef, gnosisConnect, gnosisDisconnect])\n\n    return (\n        <div className='iframe-container'>\n            <iframe id='swap-frame' ref={iframeRef} key={genHash()} title='sushi-swap' src={SUSHI_SWAP_FRAME} />\n        </div>\n    )\n}","import './Swap.scss';\n\nimport React from 'react';\nimport SwapComponent from './SushiIframe'\n\nexport default function Swap(props) {\n    return (\n        <section id=\"swap\">     \n            <SwapComponent {...props} />  \n        </section>\n    )\n}","import './SendPlaceholder.scss'\n\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { NavLink } from 'react-router-dom'\nimport { Button } from '../../../common'\n\nconst SendPlaceholder = () => {\n    return (\n        <div id=\"send-placeholder\">\n            <label>You don't have any funds on this account.</label>\n            <NavLink to=\"/wallet/deposit\">\n                <Button small icon={<GiReceiveMoney/>}>Deposit</Button>\n            </NavLink>\n        </div>\n    )\n}\n\nexport default SendPlaceholder","import './Transfer.scss'\n\nimport { AiOutlineWarning } from 'react-icons/ai'\nimport { BsArrowDown } from 'react-icons/bs'\nimport { FaAddressCard } from 'react-icons/fa'\nimport { useParams, withRouter } from 'react-router'\nimport { useEffect, useState } from 'react'\nimport { ethers } from 'ethers'\nimport SendPlaceholder from './SendPlaceholder/SendPlaceholder'\nimport { Interface } from 'ethers/lib/utils'\nimport { useToasts } from '../../../hooks/toasts'\nimport { TextInput, NumberInput, Button, Select, Loading, DropDown } from '../../common'\nimport { names, tokens } from '../../../consts/humanizerInfo'\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\nconst crossChainAssets = [\n    {\n        label: 'USD Coin (Polygon)',\n        value: 'USDC-polygon',\n        icon: 'https://raw.githubusercontent.com/sushiswap/assets/master/blockchains/polygon/assets/0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174/logo.png'\n    },\n    {\n        label: 'Tether USD (Polygon)',\n        value: 'USDT-polygon',\n        icon: 'https://raw.githubusercontent.com/sushiswap/assets/master/blockchains/polygon/assets/0xc2132D05D31c914a87C6611C10748AEb04B58e8F/logo.png'\n    }\n]\n\nconst Transfer = ({ history, portfolio, selectedAcc, selectedNetwork, accounts, addRequest }) => {\n    const { addToast } = useToasts()\n    const { tokenAddress } = useParams()\n    const [asset, setAsset] = useState(tokenAddress)\n    const [amount, setAmount] = useState(0)\n    const [bigNumberHexAmount, setBigNumberHexAmount] = useState('')\n    const [address, setAddress] = useState('')\n    const [disabled, setDisabled] = useState(true)\n    const [warning, setWarning] = useState(false)\n\n    const assetsItems = portfolio.tokens.map(({ label, address, img }) => ({\n        label,\n        value: address,\n        icon: img\n    }))\n\n    const addressesItems = accounts\n        .filter(({ id }) => id !== selectedAcc)\n        .map(({ id }) => id)\n\n    const selectedAsset = portfolio.tokens.find(({ address }) => address === asset)\n\n    const getMaxAmount = () => {\n        if (!selectedAsset) return 0;\n        const { balanceRaw, decimals } = selectedAsset\n        return ethers.utils.formatUnits(balanceRaw, decimals)\n    }\n\n    const setMaxAmount = () => onAmountChange(getMaxAmount(amount))\n\n    const onAmountChange = (value) => {\n        setAmount(value)\n\n        if (value.length) {\n            const amount = value || '0'\n            const { decimals } = selectedAsset\n            const bigNumberAmount = ethers.utils.parseUnits(amount, decimals).toHexString()\n            setAmount(amount)\n            setBigNumberHexAmount(bigNumberAmount)\n        }\n    }\n\n    const sendTx = () => {\n        try {\n            const txn = {\n                to: tokenAddress,\n                value: '0',\n                data: ERC20.encodeFunctionData('transfer', [address, bigNumberHexAmount])\n            }\n\n            if (Number(tokenAddress) === 0) {\n                txn.to = address\n                txn.value = bigNumberHexAmount\n                txn.data = '0x'\n            }\n\n            addRequest({\n                id: `transfer_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn\n            })\n\n            setAmount(0)\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        setAmount(0)\n        setBigNumberHexAmount('')\n        history.replace({ pathname: `/wallet/transfer/${asset}` })\n    }, [asset, history])\n\n    useEffect(() => {\n        const addressToLowerCase = address.toLowerCase()\n        const tokensAddresses = Object.keys(tokens)\n        const contractsAddresses = Object.keys(names)\n        const isKnowTokenOrContract = tokensAddresses.includes(addressToLowerCase) || contractsAddresses.includes(addressToLowerCase)\n        const isAddressValid = /^0x[a-fA-F0-9]{40}$/.test(address)\n\n        setWarning(isKnowTokenOrContract)\n        setDisabled(isKnowTokenOrContract || !isAddressValid || !(amount > 0) || !(amount <= selectedAsset?.balance) || address === selectedAcc)\n    }, [address, amount, selectedAcc, selectedAsset])\n\n    return (\n        <div id=\"transfer\">\n           <div className=\"panel\">\n               <div className=\"title\">\n                   Send\n               </div>\n               {\n                    portfolio.isBalanceLoading ?\n                        <Loading/>\n                        :\n                        assetsItems.length ? \n                            <div className=\"form\">\n                                <Select searchable defaultValue={asset} items={assetsItems} onChange={(value) => setAsset(value)}/>\n                                <NumberInput\n                                    label={`Available Amount: ${getMaxAmount()} ${selectedAsset?.symbol}`}\n                                    value={amount}\n                                    min=\"0\"\n                                    onInput={onAmountChange}\n                                    button=\"MAX\"\n                                    onButtonClick={() => setMaxAmount()}\n                                />\n                                <div id=\"recipient-field\">\n                                    <TextInput\n                                        placeholder=\"Recipient\"\n                                        info=\"Please double-check the recipient address, blockchain transactions are not reversible.\"\n                                        value={address}\n                                        onInput={setAddress}\n                                    />\n                                    {\n                                        addressesItems.length ? \n                                            <DropDown title={<FaAddressCard/>} closeOnClick={true}>\n                                                <label>Select from your accounts:</label>\n                                                {\n                                                    addressesItems.map(id => (\n                                                        <div className={`item ${id === address ? 'active' : ''}`} key={id} onClick={() => setAddress(id)}>\n                                                            { id }\n                                                        </div>\n                                                    ))\n                                                }\n                                            </DropDown>\n                                            :\n                                            null\n                                    }\n                                </div>\n                                <div className=\"separator\"/>\n                                {\n                                    warning ?\n                                        <div id=\"address-warning\">\n                                            <AiOutlineWarning/>\n                                            You are trying to send tokens to a smart contract. Doing so would burn them.\n                                        </div>\n                                        :\n                                        null\n                                }\n                                <Button disabled={disabled} onClick={sendTx}>Send</Button>\n                            </div>\n                            :\n                            <SendPlaceholder/>\n               }\n           </div>\n           <div className=\"panel\">\n               <div className=\"placeholder-overlay\">\n                    Coming Soon...\n               </div>\n               <div className=\"title blurred\">\n                   Cross-chain\n               </div>\n               <div className=\"form blurred\">\n                    <label>From</label>\n                    <Select searchable items={assetsItems} onChange={() => {}}/>\n                    <NumberInput value={amount} min=\"0\" onInput={value => setAmount(value)} button=\"MAX\" onButtonClick={() => setMaxAmount()}/>\n                    <div className=\"separator\">\n                        <BsArrowDown/>\n                    </div>\n                    <label>To</label>\n                    <Select searchable items={crossChainAssets} onChange={() => {}}/>\n                    <NumberInput value={0} min=\"0\" onInput={() => {}} button=\"MAX\" onButtonClick={() => {}}/>\n                    <Button>Transfer</Button>\n                </div>\n           </div>\n        </div>\n    )\n}\n\nexport default withRouter(Transfer)\n","const AAVELendingPoolAbi = [\n    \"function getLendingPool() view returns (address address)\",\n    \"function getReservesList() view returns (address[] memory)\",\n    \"function getReserveData(address asset) view returns (tuple(uint256 availableLiquidity, uint256 totalStableDebt, uint256 totalVariableDebt, uint256 liquidityRate, uint256 variableBorrowRate, uint256 stableBorrowRate, uint256 averageStableBorrowRate, uint256 liquidityIndex, uint256 variableBorrowIndex, uint40 lastUpdateTimestamp) memory)\",\n    \"function deposit(address asset, uint256 amount, address onBehalfOf, uint16 referralCode)\",\n    \"function withdraw(address asset, uint256 amount, address to)\",\n]\n\nexport default AAVELendingPoolAbi","const AAVELendingPoolProviders = {\n    ethereum: '0xb53c1a33016b2dc2ff3653530bff1848a515c8c5',\n    polygon: '0xd05e3E715d945B59290df0ae8eF85c1BdB684744',\n    avalanche: '0xb6A86025F0FE1862B372cb0ca18CE3EDe02A318f'\n}\n\nexport default AAVELendingPoolProviders","export default __webpack_public_path__ + \"static/media/aave.58aec338.svg\";","import './Card.scss'\n\nimport { Select, Segments, NumberInput, Button, Loading } from '../../../../common'\nimport { useEffect, useState } from 'react'\nimport { BsArrowDownSquare, BsArrowUpSquare } from 'react-icons/bs'\nimport { ethers } from 'ethers'\n\nconst segments = [{ value: 'Deposit' }, { value: 'Withdraw' }]\n\nconst Card = ({ loading, unavailable, tokensItems, icon, details, onTokenSelect, onValidate }) => {    \n    const [segment, setSegment] = useState(segments[0].value)\n    const [tokens, setTokens] = useState([])\n    const [token, setToken] = useState()\n    const [amount, setAmount] = useState(0)\n    const [disabled, setDisabled] = useState(true)\n\n    const currentToken = tokens.find(({ value }) => value === token)\n\n    const getMaxAmount = () => {\n        if (!currentToken) return 0;\n        const { balanceRaw, decimals } = currentToken\n        return ethers.utils.formatUnits(balanceRaw, decimals)\n    }\n\n    const setMaxAmount = () => setAmount(getMaxAmount(amount))\n\n    useEffect(() => {\n        if (segment === segments[0].value) setTokens(tokensItems.filter(({ type }) => type === 'deposit'))\n        if (segment === segments[1].value) setTokens(tokensItems.filter(({ type }) => type === 'withdraw'))\n    }, [segment, tokensItems])\n\n    useEffect(() => setAmount(0), [segment])\n\n    useEffect(() => {\n        onTokenSelect(token)\n        setDisabled(!token || !tokens.length)\n    }, [token, onTokenSelect, tokens.length])\n\n    return (\n        <div className=\"card\">\n            <div className=\"title\">\n                <img src={icon} alt=\"Icon\" />\n            </div>\n            {\n                loading ?\n                    <Loading/>\n                    :\n                    unavailable ?\n                        <div className=\"unavailable\">\n                            Unavailable on this Network\n                        </div>\n                        :\n                        <div className=\"content\">\n                            <Select\n                                searchable\n                                disabled={disabled}\n                                label=\"Choose Token\"\n                                defaultValue={token}\n                                items={tokens}\n                                onChange={(value) => setToken(value)}\n                            />\n                            {\n                                !disabled ? \n                                    <ul className=\"details\">\n                                        {\n                                            details.map(([type, value]) => (\n                                                <li key={type}><b>{type}</b> {value}</li>\n                                            ))\n                                        }\n                                    </ul>\n                                    :\n                                    <div className=\"details-placeholder\">\n                                        <div/>\n                                        <div/>\n                                        <div/>\n                                    </div>\n                            }\n                            <Segments small defaultValue={segment} segments={segments} onChange={(value) => setSegment(value)}></Segments>\n                            <NumberInput\n                                disabled={!currentToken?.balance}\n                                min=\"0\"\n                                max={currentToken?.balance}\n                                value={amount}\n                                label={`Available Amount: ${!disabled ? `${getMaxAmount()} ${currentToken?.symbol}` : '0'}`}\n                                onInput={(value) => setAmount(value)}\n                                button=\"MAX\"\n                                onButtonClick={setMaxAmount}\n                            />\n                            <Button \n                                disabled={disabled || amount <= 0 || amount > currentToken?.balance}\n                                icon={segment === segments[0].value ? <BsArrowDownSquare/> : <BsArrowUpSquare/>}\n                                onClick={() => onValidate(segment, token, amount)}>\n                                    { segment }\n                            </Button>\n                        </div>\n            }\n        </div>\n    )\n}\n\nexport default Card","let zapperStorage = 'https://storage.googleapis.com/zapper-fi-assets/tokens'\nlet tokens = {\n    ethereum: [\n        {\n            address: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n            symbol: 'WETH'\n        },\n        {\n            address: '0x2260fac5e5542a773aa44fbcfedf7c193bc2c599',\n            symbol: 'WBTC'\n        },\n        {\n            address: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',\n            symbol: 'USDC'\n        },\n        {\n            address: '0xdac17f958d2ee523a2206206994597c13d831ec7',\n            symbol: 'USDT'\n        },\n        {\n            address: '0x6b175474e89094c44da98b954eedeac495271d0f',\n            symbol: 'DAI'\n        },\n        {\n            address: '0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9',\n            symbol: 'AAVE'\n        },\n    ],\n    polygon: [\n        {\n            address: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\n            symbol: 'WETH'\n        },\n        {\n            address: '0x1bfd67037b42cf73acf2047067bd4f2c47d9bfd6',\n            symbol: 'WBTC'\n        },\n        {\n            address: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174',\n            symbol: 'USDC'\n        },\n        {\n            address: '0xc2132d05d31c914a87c6611c10748aeb04b58e8f',\n            symbol: 'USDT'\n        },\n        {\n            address: '0x8f3cf7ad23cd3cadbd9735aff958023239c6a063',\n            symbol: 'DAI'\n        },\n        {\n            address: '0xd6df932a45c0f255f85145f286ea0b292b21c90b',\n            symbol: 'AAVE'\n        },\n    ],\n    avalanche: [\n        {\n            address: '0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab',\n            symbol: 'WETH.e'\n        },\n        {\n            address: '0x50b7545627a5162f82a992c33b87adc75187b218',\n            symbol: 'WBTC.e'\n        },\n        {\n            address: '0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664',\n            symbol: 'USDC.e'\n        },\n        {\n            address: '0xc7198437980c041c805a1edcba50c1ce5db95118',\n            symbol: 'USDT.e'\n        },\n        {\n            address: '0xd586e7f844cea2f87f50152665bcbc2c279d8d70',\n            symbol: 'DAI.e'\n        },\n        {\n            address: '0x63a72806098bd3d9520cc43356dd78afe5d386d9',\n            symbol: 'AAVE.e'\n        },\n    ]\n}\n\nconst getDefaultTokensItems = network => {\n    const items = tokens[network].map(token => ({\n        ...token,\n        img: `${zapperStorage}/${network}/${token.address}.png`,\n        balance: 0,\n        balanceRaw: '0',\n    }))\n\n    return [\n        ...items.map(token => ({ ...token, type: 'deposit' })),\n        ...items.map(token => ({ ...token, type: 'withdraw', symbol: `a${token.symbol}` }))\n    ]\n}\n\nexport { getDefaultTokensItems }","import { ethers, getDefaultProvider } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport { useToasts } from '../../../../../hooks/toasts'\nimport ERC20Abi from 'adex-protocol-eth/abi/ERC20.json'\nimport AAVELendingPoolAbi from '../../../../../consts/AAVELendingPoolAbi'\nimport AAVELendingPoolProviders from '../../../../../consts/AAVELendingPoolProviders'\nimport networks from '../../../../../consts/networks'\n\nimport AAVE_ICON from '../../../../../resources/aave.svg'\nimport Card from '../Card/Card'\nimport { getDefaultTokensItems } from './defaultTokens'\n\nconst ERC20Interface = new Interface(ERC20Abi)\nconst AAVELendingPool = new Interface(AAVELendingPoolAbi)\nconst RAY = 10**27\nlet lendingPoolAddress = null\n\nconst AAVECard = ({ networkId, tokens, protocols, account, addRequest }) => {\n    const { addToast } = useToasts()\n\n    const [isLoading, setLoading] = useState(true)\n    const [unavailable, setUnavailable] = useState(false)\n    const [tokensItems, setTokensItems] = useState([])\n    const [details, setDetails] = useState([])\n\n    const onTokenSelect = useCallback(async (value) => {\n        const token = tokensItems.find(({ address }) => address === value)\n        if (token) {\n            setDetails([\n                ['Annual Percentage Rate (APR)', `${token.apr}%`],\n                ['Lock', 'No Lock'],\n                ['Type', 'Variable Rate'],\n            ])\n        }\n    }, [tokensItems])\n\n    const networkDetails = networks.find(({ id }) => id === networkId)\n    const defaultTokens = useMemo(() => getDefaultTokensItems(networkDetails.id), [networkDetails.id])\n    const getToken = (type, address) => tokensItems.filter(token => token.type === type).find(token => token.address === address)\n    const addRequestTxn = (id, txn, extraGas = 0) => addRequest({ id, type: 'eth_sendTransaction', chainId: networkDetails.chainId, account, txn, extraGas })\n\n    const approveToken = async (tokenAddress, bigNumberHexAmount) => {\n        try {\n            const ZERO = ethers.BigNumber.from(0)\n            const provider = getDefaultProvider(networkDetails.rpc)\n            const tokenContract = new ethers.Contract(tokenAddress, ERC20Interface, provider)\n            const allowance = await tokenContract.allowance(account, tokenAddress)\n\n            if (allowance.lt(bigNumberHexAmount)) {\n                if (allowance.gt(ZERO)) {\n                    addRequestTxn(`aave_pool_approve_${Date.now()}`, {\n                        to: lendingPoolAddress,\n                        value: bigNumberHexAmount,\n                        data: '0x'\n                    })\n                }\n                addRequestTxn(`aave_pool_approve_${Date.now()}`, {\n                    to: tokenAddress,\n                    value: '0x0',\n                    data: ERC20Interface.encodeFunctionData('approve', [lendingPoolAddress, bigNumberHexAmount])\n                })\n            }\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    const onValidate = async (type, tokenAddress, amount) => {\n        if (type === 'Deposit') {\n            const token = getToken('deposit', tokenAddress)\n            const bigNumberHexAmount = ethers.utils.parseUnits(amount.toString(), token.decimals).toHexString()\n            await approveToken(tokenAddress, bigNumberHexAmount)\n\n            try {\n                addRequestTxn(`aave_pool_deposit_${Date.now()}`, {\n                    to: lendingPoolAddress,\n                    value: '0x0',\n                    data: AAVELendingPool.encodeFunctionData('deposit', [tokenAddress, bigNumberHexAmount, account, 0])\n                }, 60000)\n            } catch(e) {\n                console.error(e)\n                addToast(`Error: ${e.message || e}`, { error: true })\n            }\n        }\n        else if (type === 'Withdraw') {\n            const token = getToken('withdraw', tokenAddress)\n            const bigNumberHexAmount = ethers.utils.parseUnits(amount.toString(), token.decimals).toHexString()\n            await approveToken(tokenAddress, bigNumberHexAmount)\n\n            try {\n                addRequestTxn(`aave_pool_withdraw_${Date.now()}`, {\n                    to: lendingPoolAddress,\n                    value: '0x0',\n                    data: AAVELendingPool.encodeFunctionData('withdraw', [tokenAddress, bigNumberHexAmount, account])\n                }, 60000)\n            } catch(e) {\n                console.error(e)\n                addToast(`Error: ${e.message || e}`, { error: true })\n            }\n        }\n    }\n\n    const loadPool = useCallback(async () => {\n        const providerAddress = AAVELendingPoolProviders[networkDetails.id]\n        if (!providerAddress) {\n            setLoading(false)\n            setUnavailable(true)\n            return\n        }\n\n        try {\n            const provider = getDefaultProvider(networkDetails.rpc)\n            const lendingPoolProviderContract = new ethers.Contract(providerAddress, AAVELendingPool, provider)\n            lendingPoolAddress = await lendingPoolProviderContract.getLendingPool()\n        \n            const lendingPoolContract = new ethers.Contract(lendingPoolAddress, AAVELendingPool, provider)\n            const reserves = await lendingPoolContract.getReservesList()\n            const reservesAddresses = reserves.map(reserve => reserve.toLowerCase())\n\n            const withdrawTokens = (protocols.find(({ label }) => label === 'Aave V2')?.assets || [])\n                .map(({ tokens }) => tokens.map(({ img, symbol, tokens }) => tokens.map(token => ({\n                    ...token,\n                    img,\n                    symbol,\n                    type: 'withdraw'\n                }))))\n                .flat(2)\n\n            const depositTokens = tokens.filter(({ address }) => reservesAddresses.includes(address)).map(token => ({\n                ...token,\n                type: 'deposit'\n            }))\n\n            const allTokens = (await Promise.all([\n                ...defaultTokens.filter(({ type, address }) => type === 'deposit' && !depositTokens.map(({ address }) => address).includes(address)),\n                ...defaultTokens.filter(({ type, address }) => type === 'withdraw' && !withdrawTokens.map(({ address }) => address).includes(address)),\n                ...withdrawTokens,\n                ...depositTokens\n            ]))\n            \n            const uniqueTokenAddresses = [...new Set(allTokens.map(({ address }) => address))]\n            const tokensAPR = Object.fromEntries(await Promise.all(uniqueTokenAddresses.map(async address => {\n                const data = await lendingPoolContract.getReserveData(address)\n                const { liquidityRate } = data\n                const apr = ((liquidityRate / RAY) * 100).toFixed(2)\n                return [address, apr]\n            })))\n\n            const tokensItems = allTokens.map(token => ({\n                ...token,\n                apr: tokensAPR[token.address],\n                icon: token.img,\n                label: `${token.symbol} (${tokensAPR[token.address]}% APR)`,\n                value: token.address\n            }))\n\n            setTokensItems(tokensItems)\n            setLoading(false)\n            setUnavailable(false)\n        } catch(e) {\n            console.error(e);\n            addToast(e.message | e, { error: true })\n        }\n    }, [addToast, protocols, tokens, defaultTokens, networkDetails.id, networkDetails.rpc])\n\n    useEffect(() => loadPool(), [loadPool])\n    useEffect(() => setLoading(true), [networkId])\n\n    return (\n        <Card loading={isLoading} unavailable={unavailable} icon={AAVE_ICON} details={details} tokensItems={tokensItems} onTokenSelect={onTokenSelect} onValidate={onValidate}/>\n    )\n}\n\nexport default AAVECard","import './Earn.scss'\nimport AAVECard from './Cards/AAVECard/AAVECard'\nimport { Loading } from '../../common'\n\nconst Earn = ({ portfolio, selectedNetwork, selectedAcc, addRequest }) => {\n    return (\n        <div id=\"earn\">\n            {\n                portfolio.isBalanceLoading ?\n                    <Loading/>\n                    :\n                    <AAVECard networkId={selectedNetwork.id} tokens={portfolio.tokens} protocols={portfolio.protocols} account={selectedAcc} addRequest={addRequest}/>\n            }\n        </div>\n    )\n}\n\nexport default Earn","const privilegesOptions = {\n  true: '0x0000000000000000000000000000000000000000000000000000000000000001',\n  false: '0x0000000000000000000000000000000000000000000000000000000000000000',\n}\nexport default privilegesOptions\n","import './Security.scss'\n\nimport { Loading, TextInput, Button } from '../../common'\nimport { Interface } from 'ethers/lib/utils'\nimport accountPresets from '../../../consts/accountPresets'\nimport privilegesOptions from '../../../consts/privilegesOptions'\nimport { useRelayerData } from '../../../hooks'\n\nconst IDENTITY_INTERFACE = new Interface(\n  require('adex-protocol-eth/abi/Identity5.2')\n)\n\nconst Security = ({ relayerURL, selectedAcc, selectedNetwork, accounts, addRequest }) => {\n  const { data, errMsg, isLoading } = useRelayerData(relayerURL ? `${relayerURL}/identity/${selectedAcc}/${selectedNetwork.id}/privileges` : null)\n  const privileges = data ? data.privileges : {}\n\n  const craftTransaction = (address, privLevel) => {\n    return {\n      to: selectedAcc,\n      data: IDENTITY_INTERFACE.encodeFunctionData('setAddrPrivilege', [\n        address,\n        privLevel,\n      ]),\n      value: '0x00',\n    }\n  }\n\n  const addTransactionToAddRequest = txn => {\n    addRequest({\n      id: `setPriv_${txn.data}`,\n      type: 'eth_sendTransaction',\n      txn: txn,\n      chainId: selectedNetwork.chainId,\n      account: selectedAcc,\n    })\n  }\n\n  const onMakeDefaultBtnClicked = key => {\n    // @TODO\n  }\n\n  const onRemoveBtnClicked = key => {\n    const txn = craftTransaction(key, privilegesOptions.false)\n    addTransactionToAddRequest(txn)\n  }\n\n  const selectedAccount = accounts.find(x => x.id === selectedAcc)\n\n  const privList = Object.entries(privileges).map(([addr, privValue]) => {\n    if (!privValue) return null\n    const isQuickAcc = addr === accountPresets.quickAccManager\n    const privText = isQuickAcc\n      ? `Email/Password signer (${selectedAccount.email})`\n      : addr\n    const signerAddress = isQuickAcc\n      ? selectedAccount.signer.quickAccManager\n      : selectedAccount.signer.address\n    const isSelected = signerAddress === addr\n\n    return (\n      <li key={addr}>\n        <TextInput className='depositAddress' value={privText} disabled />\n        <div className='btns-wrapper'>\n          <Button disabled={isSelected} onClick={() => onMakeDefaultBtnClicked(addr)} small>\n            {isSelected ? 'Current signer' : 'Make default'}\n          </Button>\n          <Button\n            onClick={() => onRemoveBtnClicked(addr)}\n            small\n            red\n            title={isSelected ? 'Cannot remove the currently used signer' : ''}\n            disabled={isSelected}\n          >\n            Remove\n          </Button>\n        </div>\n      </li>\n    )\n  }).filter(x => x)\n\n  // @TODO relayerless mode: it's not that hard to implement in a primitive form, we need everything as-is\n  // but rendering the initial privileges instead; or maybe using the relayerless transactions hook/service\n  // and aggregate from that\n  if (!relayerURL) return (<section id='security'>\n    <h3 className='error'>Unsupported: not currently connected to a relayer.</h3>\n  </section>)\n  return (\n    <section id='security'>\n      <div className='panel'>\n        <div className='title'>Authorized signers</div>\n        {errMsg && (<h3 className='error'>Error getting authorized signers: {errMsg}</h3>)}\n        {isLoading && <Loading />}\n        <ul className='content'>{!isLoading && privList}</ul>\n      </div>\n    </section>\n  )\n}\n\nexport default Security\n","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { nativeToken, token } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.UniV2Router)\nconst recipientText = (recipient, txnFrom) => recipient.toLowerCase() === txnFrom.toLowerCase()\n  ? `` : ` and send it to ${recipient}`\nconst deadlineText = deadlineSecs => {\n  const minute = 60000\n  const deadline = deadlineSecs * 1000\n  const diff = deadline - Date.now()\n  if (diff < 0 && diff > -minute*2) return `, expired just now`\n  // Disabled this: this is a bit of a hack cause we don't want it to show for mined txns\n  // we don't really need it for pending ones, simply because we'll show the big error message instead\n  //if (diff < 0) return `, expired ${Math.floor(-diff / minute)} minutes ago`\n  if (diff < 0) return ''\n  if (diff < minute) return `, expires in less than a minute`\n  if (diff < 10*minute) return `, expires in ${Math.floor(diff / minute)} minutes`\n  return ''\n}\n\nconst uniV2Mapping = {\n  // ordered in the same order as the router\n  [iface.getSighash('swapExactTokensForTokens')]: (txn, network) => {\n    const [ amountIn, amountOutMin, path, to, deadline ] = iface.parseTransaction(txn).args\n    const outputAsset = path[path.length - 1]\n    return [`Swap ${token(path[0], amountIn)} for at least ${token(outputAsset, amountOutMin)}${recipientText(to, txn.from)}${deadlineText(deadline)}`]\n  },\n  [iface.getSighash('swapTokensForExactTokens')]: (txn, network) => {\n    const [ amountOut, amountInMax, path, to, deadline ] = iface.parseTransaction(txn).args\n    const outputAsset = path[path.length - 1]\n    return [`Swap up to ${token(path[0], amountInMax)} for ${token(outputAsset, amountOut)}${recipientText(to, txn.from)}${deadlineText(deadline)}`]\n  },\n  [iface.getSighash('swapExactETHForTokens')]: (txn, network) => {\n    const { args, value } = iface.parseTransaction(txn)\n    const [ amountOutMin, path, to, deadline ] = args\n    const outputAsset = path[path.length - 1]\n    return [`Swap ${nativeToken(network, value)} for at least ${token(outputAsset, amountOutMin)}${recipientText(to, txn.from)}${deadlineText(deadline)}`]\n  },\n  [iface.getSighash('swapTokensForExactETH')]: (txn, network) => {\n    const [ amountOut, amountInMax, path, to, deadline ] = iface.parseTransaction(txn).args\n    return [`Swap up to ${token(path[0], amountInMax)} for ${nativeToken(network, amountOut)}${recipientText(to, txn.from)}${deadlineText(deadline)}`]\n  },\n  [iface.getSighash('swapExactTokensForETH')]: (txn, network) => {\n    const [ amountIn, amountOutMin, path, to, deadline ] = iface.parseTransaction(txn).args\n    return [`Swap ${token(path[0], amountIn)} for at least ${nativeToken(network, amountOutMin)}${recipientText(to, txn.from)}${deadlineText(deadline)}`]\n  },\n  [iface.getSighash('swapETHForExactTokens')]: (txn, network) => {\n    const { args, value } = iface.parseTransaction(txn)\n    const [ amountOut, path, to, deadline ] = args\n    const outputAsset = path[path.length - 1]\n    return [`Swap up to ${nativeToken(network, value)} for ${token(outputAsset, amountOut)}${recipientText(to, txn.from)}${deadlineText(deadline)}`]\n  },\n  // Liquidity\n  [iface.getSighash('addLiquidity')]: (txn, network) => {\n    const [tokenA, tokenB, amountADesired, amountBDesired, /*amountAMin*/, /*amountBMin*/, to, deadline] =  iface.parseTransaction(txn).args\n    return [`Add liquidity: ${token(tokenA, amountADesired)} and ${token(tokenB, amountBDesired)}${recipientText(to, txn.from)}${deadlineText(deadline)}`]\n  },\n  [iface.getSighash('addLiquidityETH')]: (txn, network) => {\n    const { args, value } = iface.parseTransaction(txn)\n    const [token, amountTokenDesired, /*amountTokenMin*/, /*amountETHMin*/, to, deadline] = args\n    return [`Add liquidity: ${token(token, amountTokenDesired)} and ${nativeToken(network, value)}${recipientText(to, txn.from)}${deadlineText(deadline)}`]\n  },\n  [iface.getSighash('removeLiquidity')]: (txn, network) => {\n    const [tokenA, tokenB, /*liquidity*/, amountAMin, amountBMin, to, deadline] =  iface.parseTransaction(txn).args\n    return [`Remove liquidity: at least ${token(tokenA, amountAMin)} and ${token(tokenB, amountBMin)}${recipientText(to, txn.from)}${deadlineText(deadline)}`]\n  },\n  [iface.getSighash('removeLiquidityETH')]: (txn, network) => {\n    const [token, /*liquidity*/, amountTokenMin, amountETHMin, to, deadline] =  iface.parseTransaction(txn).args\n    return [`Remove liquidity: at least ${token(token, amountTokenMin)} and ${nativeToken(network, amountETHMin)}${recipientText(to, txn.from)}${deadlineText(deadline)}`]\n  },\n  // NOTE: We currently do not support *WithPermit functions cause they require an ecrecover signature\n  // Uniswap will detect we don't support it cause it will fail on requesting eth_signTypedData_v4\n}\n\nconst ifaceV3 = new Interface(abis.UniV3Router)\nconst parsePath = pathBytes => {\n    // some decodePacked fun\n    // can we do this with Ethers AbiCoder? probably not\n    let path = []\n    // address, uint24\n    for (let i = 2; i < pathBytes.length; i += 46) {\n      path.push('0x' + pathBytes.substr(i, 40))\n    }\n    return path\n}\nconst uniV3Mapping = {\n  [ifaceV3.getSighash('multicall')]: (txn, network) => {\n    const [ calls ] = ifaceV3.parseTransaction(txn).args\n    // @TODO: Multicall that outputs ETH should be detected as such and displayed as one action\n    // the current verbosity of \"Swap ..., unwrap WETH to ETH\" will be a nice pedantic quirk\n    return calls.map(data => {\n      const humanizer = uniV3Mapping[data.slice(0, 10)]\n      return humanizer ? humanizer({ ...txn, data }) : null\n    }).flat().filter(x => x)\n  },\n  // NOTE: selfPermit is not supported cause it requires an ecrecover signature\n  [ifaceV3.getSighash('exactInputSingle')]: (txn, network) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    // @TODO: consider fees\n    return [`Swap ${token(params.tokenIn, params.amountIn)} for at least ${token(params.tokenOut, params.amountOutMinimum)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline)}`]\n  },\n  [ifaceV3.getSighash('exactInput')]: (txn, network) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    const path = parsePath(params.path)\n    return [`Swap ${token(path[0], params.amountIn)} for at least ${token(path[path.length - 1], params.amountOutMinimum)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline)}`]\n  },\n  [ifaceV3.getSighash('exactOutputSingle')]: (txn, network) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    return [`Swap up to ${token(params.tokenIn, params.amountInMaximum)} for ${token(params.tokenOut, params.amountOut)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline)}`]\n  },\n  [ifaceV3.getSighash('exactOutput')]: (txn, network) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    const path = parsePath(params.path)\n    return [`Swap up to ${token(path[0], params.amountInMaximum)} for ${token(path[path.length - 1], params.amountOut)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline)}`]\n  },\n  [ifaceV3.getSighash('unwrapWETH9')]: (txn, network) => {\n    const [ amountMin, recipient ] = ifaceV3.parseTransaction(txn).args\n    return [`Unwrap at least ${nativeToken(network, amountMin)}${recipientText(recipient, txn.from)}`]\n  },\n}\n\nconst mapping = { ...uniV2Mapping, ...uniV3Mapping }\nexport default mapping","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { token, getContractName } from '../humanReadableTransactions'\nimport { constants } from 'ethers'\n\nconst iface = new Interface(abis.ERC20)\n\nconst ERC20Mapping = {\n  [iface.getSighash('approve')]: (txn, network) => {\n    const [ approvedAddress, amount ] = iface.parseTransaction(txn).args\n    const name = getContractName(approvedAddress, network)\n    const tokenName = getContractName(txn.to, network)\n    if (amount.eq(0)) return [`Revoke approval for ${name} to use ${tokenName}`]\n    if (amount.eq(constants.MaxUint256)) return [`Approve ${name} to use your ${tokenName}`]\n    return [`Approve ${name} to use ${token(txn.to, amount)}`]\n  },\n  [iface.getSighash('transfer')]: (txn, network) => {\n    const [ to, amount ] = iface.parseTransaction(txn).args\n    return [`Send ${token(txn.to, amount)} to ${getContractName(to, network)}`]\n  },\n  /*\n  // HACK: since this conflicts with ERC721 in terms of sigHash, but ERC721 is more likely to use this function from a user perspective, do not define this one\n  [iface.getSighash('transferFrom')]: (txn, network) => {\n    const [ from, to, amount ] = iface.parseTransaction(txn).args\n    return [`Send ${token(txn.to, amount)} from ${getContractName(from, network)} to ${getContractName(to, network)}`]\n  },*/\n}\nexport default ERC20Mapping\n","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { token } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.AaveLendingPoolV2)\nconst onBehalfText = (onBehalf, txnFrom) => onBehalf.toLowerCase() !== txnFrom.toLowerCase()\n  ? ' on behalf of '+onBehalf\n  : ''\n\nconst AaveMapping = {\n  [iface.getSighash('deposit')]: (txn, network) => {\n    const [ asset, amount, onBehalf ] = iface.parseTransaction(txn).args\n    return [`Deposit ${token(asset, amount)} to Aave lending pool${onBehalfText(onBehalf, txn.from)}`]\n  },\n  [iface.getSighash('withdraw')]: (txn, network) => {\n    const [ asset, amount, onBehalf ] = iface.parseTransaction(txn).args\n    return [`Withdraw ${token(asset, amount)} from Aave lending pool${onBehalfText(onBehalf, txn.from)}`]\n  },\n  [iface.getSighash('repay')]: (txn, network) => {\n    const [ asset, amount, onBehalf ] = iface.parseTransaction(txn).args\n    return [`Repay ${token(asset, amount)} to Aave lending pool$${onBehalfText(onBehalf, txn.from)}`]\n  },\n}\nexport default AaveMapping","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { getContractName } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.ERC721)\nconst fromText = (from, txnFrom) => from.toLowerCase() !== txnFrom.toLowerCase() ? ` from ${from}` : ''\n\nconst ERC721Mapping = {\n  [iface.getSighash('transferFrom')]: (txn, network) => {\n    const [ from, to, tokenId ] = iface.parseTransaction(txn).args\n    return [`Send token #${tokenId.toString(10)}${fromText(from, txn.from)} to ${getContractName(to, network)}`]\n  },\n  [iface.getSighash('safeTransferFrom(address,address,uint256)')]: (txn, network) => {\n    const [ from, to, tokenId ] = iface.parseTransaction(txn).args\n    return [`Send token #${tokenId.toString(10)}${fromText(from, txn.from)} to ${getContractName(to, network)}`]\n  }\n}\nexport default ERC721Mapping","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { nativeToken } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.WETH)\nconst WETHMapping = {\n  [iface.getSighash('deposit')]: (txn, network) => {\n    const { value } = iface.parseTransaction(txn)\n    return [`Wrap ${nativeToken(network, value)}`]\n  },\n  [iface.getSighash('withdraw')]: (txn, network) => {\n    const [ amount ] = iface.parseTransaction(txn).args\n    return [`Unwrap ${nativeToken(network, amount)}`]\n  },\n}\nexport default WETHMapping","import { Interface } from 'ethers/lib/utils'\nimport { getContractName } from '../humanReadableTransactions'\nimport accountPresets from '../../consts/accountPresets'\nimport privilegesOptions from '../../consts/privilegesOptions'\n\nconst iface = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\n\nconst IdentityMapping = {\n  [iface.getSighash('setAddrPrivilege')]: (txn, network) => {\n    const [ addr, privLevel ] = iface.parseTransaction(txn).args\n    const name = getContractName(addr, network)\n    const isQuickAccManager = addr.toLowerCase() === accountPresets.quickAccManager.toLowerCase()\n    if (privLevel === privilegesOptions.false) {\n      if (isQuickAccManager) return [`Revoke email/password access`]\n      else return [`Revoke access for signer ${name}`]\n    } else if (privLevel === privilegesOptions.true) {\n      if (isQuickAccManager) return [`INVALID PROCEDURE - DO NOT SIGN`]\n      return [`Authorize signer ${name}`]\n    } else {\n      if (isQuickAccManager) return [`Add email/password signer`]\n      return [`Set special authorization for ${name}`]\n    }\n  }\n}\nexport default IdentityMapping\n","import UniRouters from './UniRouters'\nimport ERC20 from './ERC20'\nimport AaveLendingPoolV2 from './AaveLendingPoolV2'\nimport ERC721 from './ERC721'\nimport WETH from './WETH'\nimport AmbireIdentity from './AmbireIdentity'\n\nconst all = {\n\t...UniRouters,\n\t...AaveLendingPoolV2,\n\t...ERC20,\n\t...ERC721,\n\t...WETH,\n\t...AmbireIdentity,\n}\nexport default all","import { formatUnits } from 'ethers/lib/utils'\nimport { constants } from 'ethers'\nimport { names, tokens } from '../consts/humanizerInfo'\nimport networks from '../consts/networks'\nimport humanizers from './humanizers'\n\nexport function getTransactionSummary(txn, networkId, accountAddr) {\n    const [to, value, data = '0x'] = txn\n    const network = networks.find(x => x.id === networkId || x.chainId === networkId)\n    if (!network) return 'Unknown network (unable to parse)'\n\n    const tokenInfo = tokens[to.toLowerCase()]\n    const name = names[to.toLowerCase()]\n\n    if (data === '0x' && to.toLowerCase() === accountAddr.toLowerCase()) {\n        // Doesn't matter what the value is, this is always a no-op\n        return `Transaction cancellation`\n    }\n\n    let callSummary, sendSummary\n    if (parseInt(value) > 0) sendSummary = `send ${nativeToken(network, value)} to ${name || to}`\n    if (data !== '0x') {\n        callSummary = `Unknown interaction with ${name || (tokenInfo ? tokenInfo[0] : to)}`\n\n        const sigHash = data.slice(0, 10)\n        const humanizer = humanizers[sigHash]\n        if (humanizer) {\n            try {\n                const actions = humanizer({ to, value, data, from: accountAddr }, network)\n                return actions.join(', ')\n            } catch (e) {\n                callSummary += ' (unable to parse)'\n                console.error('internal tx humanization error', e)\n            }\n        }\n    }\n    return [callSummary, sendSummary].filter(x => x).join(', ')\n}\n\n// Currently takes network because one day we may be seeing the same addresses used on different networks\nexport function getContractName(addr, network) {\n    const address = addr.toLowerCase()\n    return names[address] || (tokens[address] ? tokens[address][0] + ' token' : null) || addr\n}\n\nexport function token(addr, amount) {\n    const address = addr.toLowerCase()\n    const assetInfo = tokens[address]\n    if (assetInfo) {\n        if (constants.MaxUint256.eq(amount)) return `maximum ${assetInfo[0]}`\n        return `${formatUnits(amount, assetInfo[1])} ${assetInfo[0]}`\n    } else {\n        return `${formatUnits(amount, 0)} units of unknown token`\n    }\n}\n\nexport function nativeToken(network, amount) {\n    // All EVM chains use a 18 decimal native asset\n    if (network) {\n        return `${formatUnits(amount, 18)} ${network.nativeAssetSymbol}`\n    } else {\n        return `${formatUnits(amount, 18)} unknown native token`\n    }\n}\n\n// @TODO\n// export function getMethodName(txn)","import './TxnPreview.scss'\n\nimport { useState } from 'react'\nimport { FaTimes, FaChevronDown, FaChevronUp } from 'react-icons/fa'\n\nimport { getContractName, getTransactionSummary } from '../../../lib/humanReadableTransactions'\nimport networks from '../../../consts/networks'\nimport { formatUnits } from 'ethers/lib/utils'\n\nfunction getNetworkSymbol(networkId) {\n  const network = networks.find(x => x.id === networkId)\n  return network ? network.nativeAssetSymbol : 'UNKNW'\n}\nexport default function TxnPreview ({ txn, onDismiss, network, account, isFirstFailing }) {\n  const [isExpanded, setExpanded] = useState(false)\n  const contractName = getContractName(txn[0], network)\n  return (\n    <div className={isFirstFailing ? 'txnPreview firstFailing' : 'txnPreview'}>\n        <div className=\"heading\" onClick={() => setExpanded(e => !e)}>\n          <div className=\"info\">\n            <div className=\"summary-container\">\n              <div className='expandTxn'>\n                {isExpanded ? (<FaChevronDown/>) : (<FaChevronUp/>)}\n              </div>\n              <div className=\"summary\">{getTransactionSummary(txn, network, account)}</div>\n            </div>\n            {isFirstFailing ? (<div className='firstFailingLabel'>This is the first failing transaction.</div>) : (<></>)}\n          </div>\n          <div className='actionIcons'>\n              {onDismiss ? (<span className='dismissTxn' onClick={onDismiss}><FaTimes/></span>) : (<></>)}\n            </div>\n        </div>\n        {\n          isExpanded ? (<div className='advanced'>\n            <div><b>Interacting with (<i>to</i>):</b> {txn[0]}{contractName ? ` (${contractName})` : ''}</div>\n            <div><b>{getNetworkSymbol(network)} to be sent (<i>value</i>):</b> {formatUnits(txn[1] || '0x0', 18)}</div>\n            <div><b>Data:</b> {txn[2]}</div>\n          </div>) : (<></>)\n        }\n    </div>\n  )\n}\n","import './Transactions.scss'\nimport { BsCoin, BsCalendarWeek, BsGlobe2, BsCheck2All } from 'react-icons/bs'\nimport { MdOutlinePendingActions } from 'react-icons/md'\nimport { useRelayerData } from '../../../hooks'\nimport TxnPreview from '../../common/TxnPreview/TxnPreview'\nimport { Loading } from '../../common'\nimport accountPresets from '../../../consts/accountPresets'\nimport networks from '../../../consts/networks'\nimport { getTransactionSummary } from '../../../lib/humanReadableTransactions'\nimport { Bundle } from 'adex-protocol-eth'\nimport { useEffect, useState } from 'react'\nimport fetch from 'node-fetch'\nimport { useToasts } from '../../../hooks/toasts'\n\nfunction Transactions ({ relayerURL, selectedAcc, selectedNetwork, showSendTxns }) {\n  const { addToast } = useToasts()\n  const [cacheBreak, setCacheBreak] = useState(() => Date.now())\n  // @TODO refresh this after we submit a bundle; perhaps with the upcoming transactions service\n  // We want this pretty much on every rerender with a 5 sec debounce\n  useEffect(() => {\n    if ((Date.now() - cacheBreak) > 5000) setCacheBreak(Date.now())\n    const intvl = setTimeout(() => setCacheBreak(Date.now()), 10000)\n    return () => clearTimeout(intvl)\n  }, [cacheBreak])\n  const url = relayerURL\n    ? `${relayerURL}/identity/${selectedAcc}/${selectedNetwork.id}/transactions?cacheBreak=${cacheBreak}`\n    : null\n  const { data, errMsg, isLoading } = useRelayerData(url)\n\n  // @TODO implement a service that stores sent transactions locally that will be used in relayerless mode\n  if (!relayerURL) return (<section id='transactions'>\n    <h3 className='error'>Unsupported: not currently connected to a relayer.</h3>\n  </section>)\n\n  // @TODO: visualize other pending bundles\n  const firstPending = data && data.txns.find(x => !x.executed && !x.replaced)\n\n  const mapToBundle = (relayerBundle, extra = {}) => (new Bundle({\n    ...relayerBundle,\n    nonce: relayerBundle.nonce.num,\n    gasLimit: null,\n    ...extra\n  }))\n  const cancelByReplacing = relayerBundle => showSendTxns(mapToBundle(relayerBundle, { txns: [[selectedAcc, '0x0', '0x']] }))\n  const cancel = relayerBundle => {\n    // @TODO relayerless\n    mapToBundle(relayerBundle).cancel({ relayerURL, fetch })\n      .then(({ success }) => {\n        if (!success) {\n          addToast('Transaction already picked up by the network, you will need to pay a fee to replace it with a cancellation transaction.')\n          cancelByReplacing(relayerBundle)\n        } else {\n          addToast('Transaction cancelled successfully')\n        }\n      })\n      .catch(e => {\n        console.error(e)\n        cancelByReplacing(relayerBundle)\n      })\n  }\n\n  // @TODO: we are currently assuming the last txn is a fee; change that (detect it)\n  const speedup = relayerBundle => showSendTxns(mapToBundle(relayerBundle, { txns: relayerBundle.txns.slice(0, -1) }))\n\n  return (\n    <section id='transactions'>\n      { !!firstPending && (<div className='panel'>\n        <div className='title'><MdOutlinePendingActions/>Pending transaction bundle</div>\n        <div className=\"content\">\n          <div className=\"bundle\">\n            <MinedBundle bundle={firstPending}></MinedBundle>\n            <div className='actions'>\n              <button onClick={() => cancel(firstPending)}>Cancel</button>\n              <button className='cancel' onClick={() => speedup(firstPending)}>Speed up</button>\n            </div>\n          </div>\n        </div>\n      </div>) }\n\n      <div id=\"confirmed\" className=\"panel\">\n        <div className=\"title\">\n          <BsCheck2All/>\n          {(data && data.txns.length === 0) ? 'No transactions yet.' : 'Confirmed transactions'}\n        </div>\n        <div className=\"content\">\n          {!relayerURL && (<h3 className='error'>Unsupported: not currently connected to a relayer.</h3>)}\n          {errMsg && (<h3 className='error'>Error getting list of transactions: {errMsg}</h3>)}\n          {(isLoading && !data) && <Loading />}\n          {\n              // @TODO respect the limit and implement pagination\n              data && data.txns.filter(x => x.executed && x.executed.mined).map(bundle => MinedBundle({ bundle }))\n          }\n        </div>\n      </div>\n    </section>\n  )\n}\n\nfunction MinedBundle({ bundle }) {\n  const network = networks.find(x => x.id === bundle.network)\n  if (!Array.isArray(bundle.txns)) return (<h3 className='error'>Bundle has no transactions (should never happen)</h3>)\n  const lastTxn = bundle.txns[bundle.txns.length - 1]\n  // terribly hacky; @TODO fix\n  // all of the values are prob checksummed so we may not need toLowerCase\n  const lastTxnSummary = getTransactionSummary(lastTxn, bundle.network, bundle.identity)\n  const hasFeeMatch = lastTxnSummary.match(new RegExp(`to ${accountPresets.feeCollector}`, 'i'))\n  const txns = hasFeeMatch ? bundle.txns.slice(0, -1) : bundle.txns\n  const toLocaleDateTime = date => `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`\n\n  return (<div className='minedBundle bundle' key={bundle._id}>\n    {txns.map((txn, i) => (<TxnPreview\n      key={i} // safe to do this, individual TxnPreviews won't change within a specific bundle\n      txn={txn} network={bundle.network} account={bundle.identity}/>\n    ))}\n    <ul className=\"details\">\n      {\n        hasFeeMatch ?\n          <li>\n            <label><BsCoin/>Fee</label>\n            <p>{lastTxnSummary.slice(5, -hasFeeMatch[0].length)}</p>\n          </li>\n          :\n          null\n      }\n      <li>\n        <label><BsCalendarWeek/>Submitted on</label>\n        <p>{bundle.submittedAt && (toLocaleDateTime(new Date(bundle.submittedAt))).toString()}</p>\n      </li>\n      {\n        bundle.replacesTxId ?\n          <li>\n            <label>Replaces transaction</label>\n            <p>{bundle.replacesTxId}</p>\n          </li>\n          :\n          null\n      }\n      {\n        bundle.txId ?\n          <li>\n            <label><BsGlobe2/>Block Explorer</label>\n            <p><a href={network.explorerUrl+'/tx/'+bundle.txId} target='_blank' rel='noreferrer'>{network.explorerUrl.split('/')[2]}</a></p>\n          </li>\n          :\n          null\n      }\n    </ul>\n  </div>)\n}\n\nexport default Transactions\n","import './GnosisSafeApps.scss'\n\nimport {useEffect, useRef, useState} from 'react'\n\nconst dapps = [{\n  name: 'LocalTest',\n  url: 'http://localhost:3002',\n  logo: 'http://localhost:3002/logo-test.png',\n  desc: 'Local dapp test with some lorem ipsum stuff'\n},\n  {\n    name: 'ParaSwap',\n    url: 'https://paraswap.io',\n    logo: 'https://paraswap.io/paraswap.svg',\n    desc: 'ParaSwap allows dApps and traders to get the best DEX liquidity by aggregating multiple markets and offering the best rates'\n  },\n  {\n    name: '0xPlasma Finance',\n    url: 'https://apy.plasma.finance',\n    logo: 'https://apy.plasma.finance/logo.svg',\n    desc: 'Cross-chain DeFi & DEX aggregator, farming, asset management, fiat on-ramp'\n  },\n  {\n    name: 'MEW',\n    url: 'https://www.myetherwallet.com/wallet/sign',\n    logo: 'https://www.myetherwallet.com/wallet/sign/logo.svg',\n    desc: 'MEW as dapp'\n  },\n]\n\nexport default function GnosisSafeApps({network, selectedAcc, gnosisConnect, gnosisDisconnect}) {\n\n  const iframeRef = useRef(null)\n  const [selectedApp, setSelectedApp] = useState(null)\n\n  //to refresh iframe\n  const genHash = () => {\n    return selectedApp?.url + network.chainId + selectedAcc\n  }\n\n  useEffect(() => {\n    if (selectedApp) {\n      gnosisConnect({\n        selectedAcc: selectedAcc,\n        iframeRef: iframeRef,\n        app: selectedApp\n      })\n    }\n\n    return () => {\n      gnosisDisconnect()\n    }\n  }, [selectedApp, network, selectedAcc, iframeRef, gnosisConnect, gnosisDisconnect])\n\n  return (\n    <div id=\"plugin-gnosis-conainer\">\n      {selectedApp ? (\n        <iframe title='Ambire Plugin' key={genHash()} ref={iframeRef} src={selectedApp.url}/>\n      ) : (\n        <ul id=\"dapps-container\">\n          {dapps.map((dapp, index) => (\n            <li key={index} onClick={() => setSelectedApp(dapp)}>\n              <div className=\"logo-container\" style={{backgroundImage: `url(${dapp.logo})`}}></div>\n              <div className=\"dapp-name\">{dapp.name}</div>\n              <div className=\"dapp-desc\">{dapp.desc}</div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>)\n}\n","const ERC721Abi = [\n    \"function name() view returns (string memory)\",\n    \"function tokenURI(uint256 _tokenId) view returns (string memory)\",\n    \"function ownerOf(uint256 tokenId) view returns (address)\",\n    \"function transferFrom(address from, address to, uint256 tokenId)\"\n]\n\nexport default ERC721Abi","import './Collectible.scss'\n\nimport { useParams } from 'react-router-dom'\nimport { ethers, getDefaultProvider } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useCallback, useEffect, useState } from 'react'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { BsFillImageFill } from 'react-icons/bs'\nimport * as blockies from 'blockies-ts';\nimport { useToasts } from '../../../hooks/toasts'\nimport { TextInput, Button, Loading } from '../../common'\nimport ERC721Abi from '../../../consts/ERC721Abi'\nimport networks from '../../../consts/networks'\n\nconst ERC721 = new Interface(ERC721Abi)\n\nconst handleUri = uri => {\n    uri = uri.startsWith('data:application/json') ? uri.replace('data:application/json;utf8,', '') : uri\n    return uri.startsWith('ipfs://') ? uri.replace(/ipfs:\\/\\/ipfs\\/|ipfs:\\/\\//g, 'https://ipfs.io/ipfs/') : uri\n}\n\nconst Collectible = ({ selectedAcc, selectedNetwork, addRequest }) => {\n    const { addToast } = useToasts()\n    const { network, collectionAddr, tokenId } = useParams()\n    const [isLoading, setLoading] = useState(true)\n    const [metadata, setMetadata] = useState({\n        owner: {\n            address: '',\n            icon: ''\n        },\n        name: '',\n        description: '',\n        image: '',\n        collection: '',\n        explorerUrl: ''\n    })\n    const [recipientAddress, setRecipientAddress] = useState('')\n    const [isTransferDisabled, setTransferDisabled] = useState(true)\n\n    const sendTransferTx = () => {\n        try {\n            addRequest({\n                id: `transfer_nft_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn: {\n                    to: collectionAddr,\n                    value: '0',\n                    data: ERC721.encodeFunctionData('transferFrom', [metadata.owner.address, recipientAddress, tokenId])\n                }\n            })\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        const isAddressValid = /^0x[a-fA-F0-9]{40}$/.test(recipientAddress)\n        setTransferDisabled(!isAddressValid || selectedAcc === recipientAddress || metadata.owner.address !== selectedAcc || selectedNetwork.id !== network)\n    }, [recipientAddress, metadata, selectedNetwork, selectedAcc, network])\n\n    const fetchMetadata = useCallback(async () => {\n        setLoading(true)\n        setMetadata({})\n    \n        try {\n            const networkDetails = networks.find(({ id }) => id === network)\n            if (!networkDetails) throw new Error('This network is not supported')\n\n            const { rpc, explorerUrl } = networkDetails\n            const provider = getDefaultProvider(rpc)\n            const contract = new ethers.Contract(collectionAddr, ERC721Abi, provider)\n\n            const [collection, address, uri] = await Promise.all([\n                contract.name(),\n                contract.ownerOf(tokenId),\n                contract.tokenURI(tokenId)\n            ])\n\n            try {\n                let json = {}\n\n                if (uri.startsWith('data:application/json')) {\n                    json = JSON.parse(uri.replace('data:application/json;utf8,', ''))\n                } else {\n                    const jsonUrl = handleUri(uri)\n                    const response = await fetch(jsonUrl)\n                    json = await response.json()\n                }\n\n                setMetadata(metadata => ({\n                    ...metadata,\n                    ...json,\n                    image: json ? handleUri(json.image) : null\n                }))\n            } catch(e) {\n                throw e\n            }\n\n            setMetadata(metadata => ({\n                ...metadata,\n                collection,\n                owner: {\n                    address,\n                    icon: blockies.create({ seed: address }).toDataURL()\n                },\n                explorerUrl\n            }))\n\n            setLoading(false)\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }, [addToast, tokenId, collectionAddr, network])\n\n    useEffect(() => fetchMetadata(), [fetchMetadata])\n\n    return (\n        <div id=\"collectible\">\n            <div className=\"panel\">\n                <div className=\"title\">\n                    { metadata.collection } #{ tokenId }\n                    <div className=\"contract\">\n                        Contract address: <a className=\"address\" href={`${metadata.explorerUrl}/address/${collectionAddr}`} target=\"_blank\" rel=\"noreferrer\">{ collectionAddr }</a>\n                    </div>\n                </div>\n                {\n                    isLoading ?\n                        <Loading/>\n                        :\n                        <div className=\"metadata\">\n                            <div className=\"image\" style={{backgroundImage: `url(${metadata.image})`}}>\n                                { !metadata.image ? <BsFillImageFill/> : null }\n                            </div>\n                            <div className=\"info\">\n                                <div className=\"name\">\n                                    { metadata.name }\n                                </div>\n                                <div className=\"description\">\n                                    { metadata.description }\n                                </div>\n                            </div>\n                            <div className=\"owner\">\n                                Owner:\n                                <a className=\"address\" href={`${metadata.explorerUrl}/address/${metadata.owner.address}`} target=\"_blank\" rel=\"noreferrer\">\n                                    <div className=\"icon\" style={{backgroundImage: `url(${metadata.owner.icon})`}}></div>\n                                    { \n                                        metadata.owner.address === selectedAcc ? \n                                            <span>You ({ metadata.owner.address })</span>\n                                            :\n                                            metadata.owner.address\n                                    }\n                                    \n                                </a>\n                            </div>\n                        </div>\n                }\n            </div>\n            <div className=\"panel\">\n                <div className=\"title\">Transfer</div>\n                <div className=\"content\">\n                    <TextInput placeholder=\"Recipient Address\" onInput={(value) => setRecipientAddress(value)}/>\n                    <div className=\"separator\"></div>\n                    <Button icon={<AiOutlineSend/>} disabled={isTransferDisabled} onClick={sendTransferTx}>Send</Button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Collectible","import './PermissionsModal.scss'\n\nimport { MdCheck, MdClose } from 'react-icons/md'\nimport { useModals, usePermissions } from '../../../hooks'\nimport { useToasts } from '../../../hooks/toasts'\nimport { askForPermission, isFirefox } from '../../../helpers/permissions'\nimport { Modal, Toggle, Button, Checkbox } from \"../../common\"\n\nconst PermissionsModal = () => {\n    const { hideModal } = useModals()\n    const { isNoticationsGranted, isClipboardGranted, modalHidden, setModalHidden } = usePermissions()\n    const { addToast } = useToasts()\n\n    const requestNotificationsPermission = async () => {\n        const status = await askForPermission('notifications')\n        if (!status) addToast('You blocked the Notifications permission.', { error: true })\n    }\n\n    const requestClipboardPermission = async () => {\n        const status = await askForPermission('clipboard-read')\n        if (!status) addToast('You blocked the Clipboard permission.', { error: true })\n    }\n\n    const buttonDisabled = !modalHidden && ((!isFirefox && !isClipboardGranted) || !isNoticationsGranted)\n\n    return (\n        <Modal id=\"permissions-modal\" title=\"Permissions\">\n            <div className=\"intro\">\n                Ambire Wallet needs you to allow some browser permissions to improve your experience.\n            </div>\n            <div className=\"permission\">\n                <div className=\"details\">\n                    <div className=\"name\">Notifications</div>\n                    <div className=\"description\">\n                        Needed to draw your attention to Ambire Wallet when there is a transaction signing request.<br/>\n                        You can also click the notifications to go directly to the Ambire tab.<br/>\n                        We do not send any other notifications.\n                    </div>\n                </div>\n                <Toggle checked={isNoticationsGranted} onChange={() => requestNotificationsPermission()}/>\n            </div>\n            <div className={`permission ${isFirefox ? 'disabled' : ''}`}>\n                <div className=\"details\">\n                    <div className=\"name\">Clipboard { isFirefox ? <span className=\"unavailable\">(Unavailable in Firefox)</span> : null }</div>\n                    <div className=\"description\">\n                        Needed so that dApps can be connected automatically just by copying their WalletConnect URL\n                    </div>\n                </div>\n                <Toggle checked={isClipboardGranted} onChange={() => requestClipboardPermission()}/>\n            </div>\n            <Checkbox label=\"I understand, do not show this modal again.\" checked={modalHidden} onChange={({ target }) => setModalHidden(target.checked)}/>\n            <div className=\"buttons\">\n                <Button clear small icon={<MdClose/>} onClick={hideModal}>Ignore</Button>\n                <Button small icon={<MdCheck/>} disabled={buttonDisabled} onClick={hideModal}>Done</Button>\n            </div>\n        </Modal>\n    )\n}\n\nexport default PermissionsModal","import \"./Wallet.scss\"\n\nimport { Switch, Route, Redirect } from \"react-router-dom\"\nimport Dashboard from \"./Dashboard/Dashboard\"\nimport TopBar from \"./TopBar/TopBar\"\nimport SideBar from \"./SideBar/SideBar\"\nimport Deposit from \"./Deposit/Deposit\"\nimport Swap from \"./Swap/Swap\"\nimport Transfer from \"./Transfer/Transfer\"\nimport Earn from \"./Earn/Earn\"\nimport Security from \"./Security/Security\"\nimport Transactions from './Transactions/Transactions'\nimport PluginGnosisSafeApps from \"../Plugins/GnosisSafeApps/GnosisSafeApps\"\nimport Collectible from \"./Collectible/Collectible\"\nimport { PermissionsModal } from '../Modals'\nimport { useModals, usePermissions } from \"../../hooks\"\nimport { useCallback, useEffect } from \"react\"\nimport { isFirefox } from '../../helpers/permissions'\n\nexport default function Wallet(props) {\n  const { showModal } = useModals()\n  const { isClipboardGranted, isNoticationsGranted, arePermissionsLoaded, modalHidden } = usePermissions()\n\n  const routes = [\n    {\n      path: '/dashboard',\n      component: <Dashboard portfolio={props.portfolio} setNetwork={props.setNetwork} />\n    },\n    {\n      path: '/deposit',\n      component: <Deposit selectedAcc={props.selectedAcc} selectedNetwork={props.network.id} />\n    },\n    {\n      path: '/transfer/:tokenAddress?',\n      component: <Transfer portfolio={props.portfolio} selectedAcc={props.selectedAcc} selectedNetwork={{...props.network}} accounts={props.accounts} addRequest={props.addRequest}/>\n    },\n    {\n      path: '/earn',\n      component: <Earn portfolio={props.portfolio} selectedNetwork={{...props.network}} selectedAcc={props.selectedAcc} addRequest={props.addRequest}/>\n    },\n    {\n      path: '/security',\n      component: <Security relayerURL={props.relayerURL} selectedAcc={props.selectedAcc} selectedNetwork={props.network} accounts={props.accounts} addRequest={props.addRequest}/>\n    },\n    {\n      path: '/transactions',\n      component: <Transactions relayerURL={props.relayerURL} selectedAcc={props.selectedAcc} selectedNetwork={props.network} addRequest={props.addRequest} eligibleRequests={props.eligibleRequests} showSendTxns={props.showSendTxns}/>\n    },\n    {\n      path: '/swap',\n      component: <Swap\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    },\n    {\n      path: '/nft/:network/:collectionAddr/:tokenId',\n      component: <Collectible selectedAcc={props.selectedAcc} selectedNetwork={{...props.network}} addRequest={props.addRequest}/>\n    },\n    {\n      path: '/gnosis/plugins',\n      component: <PluginGnosisSafeApps\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    }\n  ]\n\n  const handlePermissionsModal = useCallback(async () => {\n    if (!modalHidden && arePermissionsLoaded && ((!isFirefox && !isClipboardGranted) || !isNoticationsGranted)) showModal(<PermissionsModal/>)\n  }, [showModal, isClipboardGranted, isNoticationsGranted, arePermissionsLoaded, modalHidden])\n\n  useEffect(() => handlePermissionsModal(), [handlePermissionsModal])\n\n  return (\n    <div id=\"wallet\">\n      <TopBar {...props} />\n      <SideBar match={props.match} portfolio={props.portfolio}/>\n      <div id=\"wallet-container\">\n        <Switch>\n          {\n            routes.map(({ path, component }) => (\n              <Route path={props.match.url + path} key={path}>\n                { component ? component : null }\n              </Route>\n            ))\n          }\n          <Route path={props.match.url + \"/\"}>\n            <Redirect to={props.match.url + \"/dashboard\"} />\n          </Route>\n        </Switch>\n      </div>\n    </div>\n  );\n}\n","import { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport TrezorConnect from 'trezor-connect'\nimport { ethers } from 'ethers'\nimport HDNode from 'hdkey'\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\n\nlet wallets = {}\n\n// opts\n// passphrase: string\n// noCache: boolean\nexport function getWallet ({ signer, signerExtra, chainId }, opts = {}) {\n    const id = `${signer.address || signer.one}${chainId}`\n    if (wallets[id]) return wallets[id]\n    return wallets[id] = getWalletNew({ signer, signerExtra, chainId }, opts)\n}\n\nfunction getWalletNew ({ chainId, signer, signerExtra }, opts) {\n    if (signerExtra && signerExtra.type === 'trezor') {\n        const providerTrezor = new TrezorSubprovider({\n            trezorConnectClientApi: TrezorConnect,\n            networkId: chainId\n        })\n        providerTrezor._initialDerivedKeyInfo = getInitialDerivedKeyInfo(signerExtra)\n        // for Trezor/ledger, alternatively we can shim using https://www.npmjs.com/package/web3-provider-engine and then wrap in Web3Provider\n        return {\n            signMessage: hash => providerTrezor.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n            signTransaction: params => providerTrezor.signTransactionAsync({ ...params, from: signer.address })\n        }\n    } else if (signerExtra && signerExtra.type === 'ledger') {\n        const provider = new LedgerSubprovider({\n            networkId: chainId,\n            ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n            baseDerivationPath: signerExtra.info.baseDerivationPath\n        })\n        return {\n            signMessage: hash => provider.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n            signTransaction: params => provider.signTransactionAsync({ ...params, from: signer.address })\n        }\n    } else if (signer.address) {\n        if (!window.ethereum) throw new Error('No web3 support detected in your browser: if you created this account through MetaMask, please install it.')\n        // NOTE: for metamask, use `const provider = new ethers.providers.Web3Provider(window.ethereum)`\n        // 'any' is explained here: https://github.com/ethers-io/ethers.js/issues/1107\n        const provider = new ethers.providers.Web3Provider(window.ethereum, 'any')\n        return provider.getSigner(signer.address)\n    } else if (signer.one) {\n        throw new Error('getWallet not applicable for QuickAccounts: use primaryKeyBackup with the passphrase and /second-sig')\n    } else {\n        throw new Error('unknown signer type')\n    }\n}\n\nfunction getInitialDerivedKeyInfo (signerExtra) {\n    return {\n        hdKey: HDNode.fromExtendedKey(signerExtra.info.hdKey.xpub),\n        derivationPath: signerExtra.info.derivationPath,\n        baseDerivationPath: signerExtra.info.baseDerivationPath\n    }\n}","// It costs around 19k to send a token, if that token was interacted with before in the same transaction,\n// because of SLOAD costs - they depend on whether a slot has been read\n// however, it costs 30k if the token has not been interacted with\n// we may decrease it a bit and lean on the relayer failsafe values (cfg.gasAddedOnEstimate) later on\nconst ADDED_GAS_TOKEN = 30000\nconst ADDED_GAS_NATIVE = 12000\n\nexport function isTokenEligible (token, speed, estimation) {\n  const min = token.isStable ? estimation.feeInUSD[speed] : estimation.feeInNative[speed]\n  return parseInt(token.balance) / Math.pow(10, token.decimals) > min\n}\n\n// can't think of a less funny name for that\nexport function getFeePaymentConsequences (token, estimation) {\n  // Relayerless mode\n  if (!estimation.feeInUSD) return { multiplier: 1, addedGas: 0 }\n  // Relayer mode\n  const addedGas = !token.address || token.address === '0x0000000000000000000000000000000000000000'\n    ? ADDED_GAS_NATIVE\n    : ADDED_GAS_TOKEN\n  return {\n    // otherwise we get very long floating point numbers with trailing .999999\n    multiplier: parseFloat(((estimation.gasLimit + addedGas) / estimation.gasLimit).toFixed(4)),\n    addedGas\n  }\n}\n\nexport function mapTxnErrMsg(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Swap expired'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Swap will suffer slippage higher than your requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'Your signer address is no longer authorized.'\n  return msg\n}\n\nexport function getErrHint(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Try performing the swap again'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Try performing the swap again or increase your slippage requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'If you set a new signer for this account, try re-adding the account.'\n  return 'Sending this transaction batch will result in an error.'\n}","import { AiOutlineWarning } from 'react-icons/ai'\nimport { FiHelpCircle } from 'react-icons/fi'\nimport { Loading } from '../common'\nimport { isTokenEligible, getFeePaymentConsequences, mapTxnErrMsg, getErrHint } from './helpers'\n\nconst SPEEDS = ['slow', 'medium', 'fast', 'ape']\n\nexport function FeeSelector ({ disabled, signer, estimation, network, setEstimation, feeSpeed, setFeeSpeed }) {\n    if (!estimation) return (<Loading/>)\n  \n    const insufficientFee = estimation && estimation.feeInUSD\n      && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation)\n    const willFail = (estimation && !estimation.success) || insufficientFee\n    if (willFail) return insufficientFee ?\n        (<h3 className='error'>Insufficient balance for the fee. Accepted tokens: {(estimation.remainingFeeTokenBalances || []).map(x => x.symbol).join(', ')}</h3>)\n        : (<FailingTxn\n            message={<>The current transaction batch cannot be sent because it will fail: {mapTxnErrMsg(estimation.message)}</>}\n            tooltip={getErrHint(estimation.message)}\n        />)\n  \n    if (!estimation.feeInNative) return (<></>)\n    if (estimation && !estimation.feeInUSD && estimation.gasLimit < 40000) {\n      return (<div>\n        <b>WARNING:</b> Fee estimation unavailable when you're doing your first account transaction and you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>, make sure you have {network.nativeAssetSymbol} there.\n      </div>)\n    }\n  \n    const { nativeAssetSymbol } = network\n    const tokens = estimation.remainingFeeTokenBalances || ({ symbol: nativeAssetSymbol, decimals: 18 })\n    const onFeeCurrencyChange = e => {\n      const token = tokens.find(({ symbol }) => symbol === e.target.value)\n      setEstimation({ ...estimation, selectedFeeToken: token })\n    }\n    const feeCurrencySelect = estimation.feeInUSD ? (<>\n      <span style={{ marginTop: '1em' }}>Fee currency</span>\n      <select disabled={disabled} value={estimation.selectedFeeToken.symbol} onChange={onFeeCurrencyChange}>\n        {tokens.map(token => \n          (<option\n            disabled={!isTokenEligible(token, feeSpeed, estimation)}\n            key={token.symbol}>\n              {token.symbol}\n            </option>\n          )\n        )}\n      </select>\n    </>) : (<></>)\n  \n    const { isStable } = estimation.selectedFeeToken\n    const { multiplier } = getFeePaymentConsequences(estimation.selectedFeeToken, estimation)\n    const feeAmountSelectors = SPEEDS.map(speed => (\n      <div \n        key={speed}\n        className={`feeSquare${feeSpeed === speed ? ' selected' : ''}${disabled ? ' disabled' : ''}`}\n        onClick={() => !disabled && setFeeSpeed(speed)}\n      >\n        <div className='speed'>{speed}</div>\n        <div className='feeEstimation'>\n          {isStable\n            ? '$'+(estimation.feeInUSD[speed] * multiplier)\n            : (\n              nativeAssetSymbol === 'ETH' ?\n                'Ξ '+(estimation.feeInNative[speed] * multiplier)\n                : (estimation.feeInNative[speed] * multiplier)+' '+nativeAssetSymbol\n            )\n          }\n        </div>\n      </div>\n    ))\n  \n    return (<>\n      {feeCurrencySelect}\n      <div className='feeAmountSelectors'>\n        {feeAmountSelectors}\n      </div>\n      { // Visualize the fee once again with a USD estimation if in native currency\n      !isStable && (<div>\n        Fee: {(estimation.feeInNative[feeSpeed] * multiplier)+' '+nativeAssetSymbol}\n        &nbsp;(~ ${(estimation.feeInNative[feeSpeed] * multiplier * estimation.nativeAssetPriceInUSD).toFixed(2)})\n      </div>)}\n      {!estimation.feeInUSD ?\n        (<span><b>WARNING:</b> Paying fees in tokens other than {nativeAssetSymbol} is unavailable because you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>.</span>)\n        : (<></>)}\n    </>)\n}\n\nexport function FailingTxn ({ message, tooltip = '' }) {\n    return (<div className='failingTxn'>\n        <AiOutlineWarning></AiOutlineWarning>\n        <h3 className='error'>{message}</h3>\n        <FiHelpCircle title={tooltip}></FiHelpCircle>\n    </div>)\n}","import { useState, useRef } from 'react'\nimport { Loading } from '../common'\nimport { isTokenEligible } from './helpers'\n\nexport default function Actions({ estimation, feeSpeed, approveTxn, rejectTxn, signingStatus }) {\n  const [quickAccCredentials, setQuickAccCredentials] = useState({ code: '', passphrase: '' })\n  const form = useRef(null)\n\n  const rejectButton = rejectTxn && (\n    <button type='button' className='rejectTxn' onClick={rejectTxn}>Reject</button>\n  )\n  const insufficientFee = estimation && estimation.feeInUSD\n    && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation)\n  const willFail = (estimation && !estimation.success) || insufficientFee\n  if (willFail) {\n    return (<div className='buttons'>\n      {rejectButton}\n    </div>)\n  }\n\n  const signButtonLabel = signingStatus && signingStatus.inProgress ?\n    (<><Loading/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Signing...</>)\n    : (<>Sign and send</>)\n\n  // @TODO make this common\n  if (signingStatus && signingStatus.quickAcc) {\n    return (<>\n      <div>\n        {signingStatus.confCodeRequired === 'otp' ? (<b>Please enter your OTP code and your password.</b>) : (<></>)}\n        {signingStatus.confCodeRequired === 'email' ? (<b>A confirmation code was sent to your email, please enter it along with your password.</b>) : (<></>)}\n      </div>\n      <input type='password' required minLength={3} placeholder='Password' value={quickAccCredentials.passphrase} onChange={e => setQuickAccCredentials({ ...quickAccCredentials, passphrase: e.target.value })}></input>\n      <form ref={form} className='quickAccSigningForm' onSubmit={e => { e.preventDefault() }}>\n        {/* Changing the autoComplete prop to a random string seems to disable it more often */}\n        <input\n          type='text' pattern='[0-9]+'\n          title='Confirmation code should be 6 digits'\n          autoComplete='nope'\n          required minLength={6} maxLength={6}\n          placeholder='Confirmation code'\n          value={quickAccCredentials.code}\n          onChange={e => setQuickAccCredentials({ ...quickAccCredentials, code: e.target.value })}\n        ></input>\n        {rejectButton}\n        <button className='approveTxn'\n          onClick={() => {\n            if (!form.current.checkValidity()) return\n            approveTxn({ quickAccCredentials })\n          }}\n        >\n          {signButtonLabel}\n        </button>\n      </form>\n    </>)\n  }\n\n  return (<div className='buttons'>\n      {rejectButton}\n      <button className='approveTxn' disabled={!estimation || signingStatus} onClick={approveTxn}>\n        {signButtonLabel}\n      </button>\n  </div>)\n}\n","import { Interface, hexlify } from 'ethers/lib/utils'\nconst IdentityInterface = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\nconst FactoryInterface = new Interface(require('adex-protocol-eth/abi/IdentityFactory5.2'))\n\nexport async function sendNoRelayer ({ finalBundle, account, network, wallet, estimation, feeSpeed, provider }) {\n    const { signer } = finalBundle\n    // @TODO: in case we need deploying, run using deployAndCall pipeline with signed msgs\n    // @TODO: quickAccManager\n    if (signer.quickAccManager) throw new Error('quickAccManager not supported in relayerless mode yet')\n    // currently disabled quickAccManager cause 1) we don't have a means of getting the second sig 2) we still have to sign txes so it's inconvenient\n    // if (signer.quickAccManager) await finalBundle.sign(wallet)\n    //const [to, data] = signer.quickAccManager ? [signer.quickAccManager, QuickAccManagerInterface.encodeFunctionData('send', [finalBundle.identity, [signer.timelock, signer.one, signer.two], [false, finalBundle.signature, '0x']])] :\n  \n    // NOTE: just adding values to gasLimit is bad because 1) they're hardcoded estimates\n    // and 2) the fee displayed in the UI does not reflect that\n    const isDeployed = await provider.getCode(finalBundle.identity).then(code => code !== '0x')\n\n    let gasLimit\n    let to, data\n    if (isDeployed) {\n      gasLimit = estimation.gasLimit + 20000\n      to = finalBundle.identity\n      data = IdentityInterface.encodeFunctionData('executeBySender', [finalBundle.txns])\n    } else {\n      await finalBundle.getNonce(provider)\n      // just some hardcoded value to make the signing pass\n      finalBundle.gasLimit = 400000\n      await finalBundle.sign(wallet)\n      to = account.identityFactoryAddr\n      data = FactoryInterface.encodeFunctionData('deployAndExecute', [account.bytecode, account.salt, finalBundle.txns, finalBundle.signature])\n      gasLimit = (await provider.estimateGas({ to, data, from: signer.address })).toNumber() + 20000\n    }\n  \n    const txn = {\n      from: signer.address,\n      to, data,\n      gas: hexlify(gasLimit),\n      gasPrice: hexlify(Math.floor(estimation.feeInNative[feeSpeed] / estimation.gasLimit * 1e18)),\n      nonce: hexlify(await provider.getTransactionCount(signer.address))\n    }\n    try {\n      let txId\n      if (!wallet.sendTransaction) {\n        // HW wallets which only sign\n        const signed = await wallet.signTransaction(txn)\n        txId = (await provider.sendTransaction(signed)).hash\n      } else {\n        // web3 injectors which can't sign, but can sign+send\n        // they also don't like the gas arg they fully control the chain ID\n        const { chainId } = await wallet.provider.getNetwork()\n        if (network.chainId !== chainId) throw new Error(`Connected to the wrong network: please switch to ${network.name}`)\n        txId = (await wallet.sendTransaction({ from: txn.from, to: txn.to, data: txn.data, gasPrice: txn.gasPrice, nonce: txn.nonce })).hash\n      }\n      return { success: true, txId }\n    } catch(e) {\n      if (e.code === 'INSUFFICIENT_FUNDS') throw new Error(`Insufficient gas fees: you need to have ${network.nativeAssetSymbol} on ${signer.address}`)\n      throw e\n    }\n  }","//import { GrInspect } from 'react-icons/gr'\n// GiObservatory is also interesting\nimport { GiTakeMyMoney, GiSpectacles, GiGorilla } from 'react-icons/gi'\nimport { FaSignature, FaChevronLeft } from 'react-icons/fa'\nimport { MdOutlineAccountCircle } from 'react-icons/md'\nimport './SendTransaction.css'\nimport { useEffect, useState, useMemo } from 'react'\nimport fetch from 'node-fetch'\nimport { Bundle } from 'adex-protocol-eth/js'\nimport { getDefaultProvider, Wallet } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport * as blockies from 'blockies-ts';\nimport { useToasts } from '../../hooks/toasts'\nimport { getWallet } from '../../lib/getWallet'\nimport accountPresets from '../../consts/accountPresets'\nimport { FeeSelector, FailingTxn } from './FeeSelector'\nimport Actions from './Actions'\nimport TxnPreview from '../common/TxnPreview/TxnPreview'\nimport { sendNoRelayer } from './noRelayer'\nimport { isTokenEligible, getFeePaymentConsequences } from './helpers'\nimport { fetchPost } from '../../lib/fetch'\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\n\nconst DEFAULT_SPEED = 'fast'\nconst REESTIMATE_INTERVAL = 15000\n\nfunction toBundleTxn({ to, value, data }) {\n  return [to, value || '0x0', data || '0x']\n}\n\nfunction makeBundle(account, networkId, requests) {\n  const bundle = new Bundle({\n    network: networkId,\n    identity: account.id,\n    txns: requests.map(({ txn }) => toBundleTxn(txn)),\n    signer: account.signer\n  })\n  bundle.extraGas = requests.map(x => x.extraGas || 0).reduce((a, b) => a + b, 0)\n  bundle.requestIds = requests.map(x => x.id)\n  return bundle\n}\n\nexport default function SendTransaction({ relayerURL, accounts, network, selectedAcc, requests, resolveMany, replacementBundle, onDismiss }) {\n  // NOTE: this can be refactored at a top level to only pass the selected account (full object)\n  // keeping it that way right now (selectedAcc, accounts) cause maybe we'll need the others at some point?\n  const account = accounts.find(x => x.id === selectedAcc)\n\n  // Also filtered in App.js, but better safe than sorry here\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account, txn }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n      && txn && (!txn.from || txn.from.toLowerCase() === selectedAcc.toLowerCase())\n    // we only need to update on change of IDs\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    ), [requests.map(x => x.id).join(','), network.chainId, selectedAcc])\n  const bundle = useMemo(\n    () => replacementBundle || makeBundle(account, network.id, eligibleRequests),\n    [replacementBundle, network.id, account, eligibleRequests]\n  )\n\n  if (!account || !bundle.txns.length) return (<div id='sendTransaction'>\n      <h3 className='error'>SendTransactions: No account or no requests: should never happen.</h3>\n  </div>)\n  return (<SendTransactionWithBundle\n      relayerURL={relayerURL}\n      bundle={bundle}\n      network={network}\n      account={account}\n      resolveMany={resolveMany}\n      onDismiss={onDismiss}\n  />)\n}\n\nfunction SendTransactionWithBundle ({ bundle, network, account, resolveMany, relayerURL, replacementBundle, onDismiss }) {\n  const [estimation, setEstimation] = useState(null)\n  const [signingStatus, setSigningStatus] = useState(false)\n  const [feeSpeed, setFeeSpeed] = useState(DEFAULT_SPEED)\n  const { addToast } = useToasts()\n  useEffect(() => {\n    if (!bundle.txns.length) return\n    setEstimation(null)\n  }, [bundle, setEstimation])\n\n  // Estimate the bundle & reestimate periodically\n  useEffect(() => {    // eslint-disable-next-line react-hooks/exhaustive-deps\n    if (!bundle.txns.length) return\n\n    let unmounted = false\n\n    // get latest estimation\n    const reestimate = () => (relayerURL\n      ? bundle.estimate({ relayerURL, fetch })\n      : bundle.estimateNoRelayer({ provider: getDefaultProvider(network.rpc) })\n    )\n      .then(estimation => {\n        if (unmounted) return\n        estimation.selectedFeeToken = { symbol: network.nativeAssetSymbol }\n        setEstimation(prevEstimation => {\n          if (estimation.remainingFeeTokenBalances) {\n            // If there's no eligible token, set it to the first one cause it looks more user friendly (it's the preferred one, usually a stablecoin)\n            estimation.selectedFeeToken = (prevEstimation && prevEstimation.selectedFeeToken)\n              || estimation.remainingFeeTokenBalances.find(token => isTokenEligible(token, feeSpeed, estimation))\n              || estimation.remainingFeeTokenBalances[0]\n          }\n          return estimation\n        })\n      })\n      .catch(e => {\n        if (unmounted) return\n        console.log('estimation error', e)\n        addToast(`Estimation error: ${e.message || e}`, { error: true })\n      })\n\n    reestimate()\n    const intvl = setInterval(reestimate, REESTIMATE_INTERVAL)\n\n    return () => {\n      unmounted = true\n      clearInterval(intvl)\n    }\n  }, [bundle, setEstimation, feeSpeed, addToast, network, relayerURL])\n\n  const getFinalBundle = () => {\n    if (!relayerURL) return new Bundle({\n      ...bundle,\n      gasLimit: estimation.gasLimit\n      // set nonce here when we implement \"replace current pending transaction\"\n    })\n\n    const feeToken = estimation.selectedFeeToken\n    const { addedGas, multiplier } = getFeePaymentConsequences(feeToken, estimation)\n    const toHexAmount = amnt => '0x'+Math.round(amnt).toString(16)\n    const feeTxn = feeToken.symbol === network.nativeAssetSymbol\n      ? [accountPresets.feeCollector, toHexAmount(estimation.feeInNative[feeSpeed]*multiplier*1e18), '0x']\n      : [feeToken.address, '0x0', ERC20.encodeFunctionData('transfer', [\n        accountPresets.feeCollector,\n        toHexAmount(\n          (feeToken.isStable ? estimation.feeInUSD[feeSpeed] : estimation.feeInNative[feeSpeed])\n          * multiplier\n          * Math.pow(10, feeToken.decimals)\n        )\n    ])]\n    return new Bundle({\n      ...bundle,\n      txns: [...bundle.txns, feeTxn],\n      gasLimit: estimation.gasLimit + addedGas + (bundle.extraGas || 0)\n    })\n  }\n\n  const approveTxnImpl = async () => {\n    if (!estimation) throw new Error('no estimation: should never happen')\n\n    const finalBundle = getFinalBundle()\n    const provider = getDefaultProvider(network.rpc)\n    const signer = finalBundle.signer\n\n    const wallet = getWallet({\n      signer,\n      signerExtra: account.signerExtra,\n      chainId: network.chainId\n    })\n    if (relayerURL) {\n      // Temporary way of debugging the fee cost\n      // const initialLimit = finalBundle.gasLimit - getFeePaymentConsequences(estimation.selectedFeeToken, estimation).addedGas\n      // finalBundle.estimate({ relayerURL, fetch }).then(estimation => console.log('fee costs: ', estimation.gasLimit - initialLimit), estimation.selectedFeeToken).catch(console.error)\n      if (typeof finalBundle.nonce !== 'number') await finalBundle.getNonce(provider)\n      await finalBundle.sign(wallet)\n      return await finalBundle.submit({ relayerURL, fetch })\n    } else {\n      return await sendNoRelayer({\n        finalBundle, account, network, wallet, estimation, feeSpeed, provider\n      })\n    }\n  }\n\n  const approveTxnImplQuickAcc = async ({ quickAccCredentials }) => {\n    if (!estimation) throw new Error('no estimation: should never happen')\n    if (!relayerURL) throw new Error('Email/Password account signing without the relayer is not supported yet')\n\n    const finalBundle = (signingStatus && signingStatus.finalBundle) || getFinalBundle()\n    const signer = finalBundle.signer\n\n    if (typeof finalBundle.nonce !== 'number') {\n      await finalBundle.getNonce(getDefaultProvider(network.rpc))\n    }\n\n    const { signature, success, message, confCodeRequired } = await fetchPost(\n      `${relayerURL}/second-key/${bundle.identity}/${network.id}/sign`, {\n        signer, txns: finalBundle.txns, nonce: finalBundle.nonce, gasLimit: finalBundle.gasLimit,\n        code: quickAccCredentials && quickAccCredentials.code\n      }\n    )\n    if (!success) {\n      if (!message) throw new Error(`Secondary key: no success but no error message`)\n      if (message.includes('invalid confirmation code')) {\n        addToast('Unable to sign: wrong confirmation code', { error: true })\n        return\n      }\n      throw new Error(`Secondary key error: ${message}`)\n    }\n    if (confCodeRequired) {\n      setSigningStatus({ quickAcc: true, finalBundle, confCodeRequired })\n    } else {\n      if (!signature) throw new Error(`QuickAcc internal error: there should be a signature`)\n      if (!account.primaryKeyBackup) throw new Error(`No key backup found: perhaps you need to import the account via JSON?`)\n      setSigningStatus({ quickAcc: true, inProgress: true })\n      const pwd = quickAccCredentials.passphrase || alert('Enter password')\n      const wallet = await Wallet.fromEncryptedJson(JSON.parse(account.primaryKeyBackup), pwd)\n      await finalBundle.sign(wallet)\n      finalBundle.signatureTwo = signature\n      return await finalBundle.submit({ relayerURL, fetch })\n    }\n  }\n\n  const approveTxn = ({ quickAccCredentials }) => {\n    if (signingStatus && signingStatus.inProgress) return\n    setSigningStatus(signingStatus || { inProgress: true })\n\n    const requestIds = bundle.requestIds\n    const blockExplorerUrl = network.explorerUrl\n    const approveTxnPromise = bundle.signer.quickAccManager ?\n      approveTxnImplQuickAcc({ quickAccCredentials })\n      : approveTxnImpl()\n    approveTxnPromise.then(bundleResult => {\n      // special case for approveTxnImplQuickAcc\n      if (!bundleResult) return\n\n      // be careful not to call this after onDimiss, cause it might cause state to be changed post-unmount\n      setSigningStatus(null)\n\n      // Inform everything that's waiting for the results (eg WalletConnect)\n      const skipResolve = !bundleResult.success && bundleResult.message && bundleResult.message.match(/underpriced/i)\n      if (!skipResolve && requestIds) resolveMany(requestIds, { success: bundleResult.success, result: bundleResult.txId, message: bundleResult.message })\n\n      if (bundleResult.success) {\n        addToast((\n          <span>Transaction signed and sent successfully!\n            &nbsp;Click to view on block explorer.\n          </span>), { url: blockExplorerUrl+'/tx/'+bundleResult.txId, timeout: 15000 })\n        onDismiss()\n      } else addToast(`Transaction error: ${bundleResult.message || 'unspecified error'}`, { error: true })\n    })\n    .catch(e => {\n      setSigningStatus(null)\n      console.error(e)\n      if (e && e.message.includes('must provide an Ethereum address')) {\n        addToast(`Signing error: not connected with the correct address. Make sure you're connected with ${bundle.signer.address}.`, { error: true })\n      } else if (e && e.message.includes('0x6b0c')) {\n        // not sure if that's actually the case with this hellish error, but after unlocking the device it no longer appeared\n        // however, it stopped appearing after that even if the device is locked, so I'm not sure it's related...\n        addToast(`Ledger: unknown error (0x6b0c): is your Ledger unlocked and in the Ethereum application?`, { error: true })\n      } else {\n        console.log(e.message)\n        addToast(`Signing error: ${e.message || e}`, { error: true })\n      }\n    })\n  }\n\n  // Not applicable when .requestIds is not defined (replacement bundle)\n  const rejectTxn = bundle.requestIds && (() => {\n    onDismiss()\n    resolveMany(bundle.requestIds, { message: 'user rejected' })\n  })\n\n  return (<div id='sendTransaction'>\n      <div className='dismiss' onClick={onDismiss}>\n        <FaChevronLeft size={35}/><span>back</span>\n      </div>\n      <h2>Pending transactions: {bundle.txns.length}</h2>\n      <div className='container'>\n        <div id='topPanel' className='panel'>\n          <div className='title'>\n            <MdOutlineAccountCircle/>\n            Signing with account:\n          </div>\n          <div className=\"content\">\n            <div className='account'>\n              <img className='icon' src={blockies.create({ seed: account.id }).toDataURL()} alt='Account Icon'/>\n              { account.id }\n            </div>\n            on\n            <div className='network'>\n              <img className='icon' src={network.icon} alt='Network Icon'/>\n              { network.name }\n            </div>\n          </div>\n        </div>\n        <div id='panelHolder'>\n          <div className='panel'>\n              <div className='heading'>\n                      <div className='title'>\n                          <GiSpectacles size={35}/>\n                          Transaction summary\n                      </div>\n              </div>\n              <div className=\"content\">\n                <div className={`listOfTransactions${bundle.requestIds ? '' : ' frozen'}`}>\n                    {bundle.txns.map((txn, i) => {\n                      const isFirstFailing = estimation && !estimation.success && estimation.firstFailing === i\n                      // we need to re-render twice per minute cause of DEX deadlines\n                      const min = Math.floor(Date.now() / 30000)\n                      return (<TxnPreview\n                        key={[...txn, i, min].join(':')}\n                        onDismiss={bundle.requestIds && (() => resolveMany([bundle.requestIds[i]], { message: 'rejected' }))}\n                        txn={txn} network={bundle.network} account={bundle.identity}\n                        isFirstFailing={isFirstFailing}/>\n                      )\n                    })}\n                </div>\n                <div className='transactionsNote'>\n                  {bundle.requestIds ? (<>\n                    <b><GiGorilla size={16}/> DEGEN TIP:</b> You can sign multiple transactions at once. Add more transactions to this batch by interacting with a connected dApp right now.\n                  </>) : (<><b>NOTE:</b> You are currently replacing a pending transaction.</>)}\n                </div>\n              </div>\n          </div>\n          <div className='secondaryPanel'>\n              <div className='panel feePanel'>\n                  <div className='heading'>\n                          <div className='title'>\n                              <GiTakeMyMoney size={35}/>\n                              Fee\n                          </div>\n                          <FeeSelector\n                            disabled={signingStatus && signingStatus.finalBundle && !(estimation && !estimation.success)}\n                            signer={bundle.signer}\n                            estimation={estimation}\n                            setEstimation={setEstimation}\n                            network={network}\n                            feeSpeed={feeSpeed}\n                            setFeeSpeed={setFeeSpeed}\n                          ></FeeSelector>\n                  </div>\n              </div>\n              <div className='panel actions'>\n                  <div className='heading'>\n                      <div className='title'>\n                          <FaSignature size={35}/>\n                          Sign\n                      </div>\n                  </div>\n                  {(bundle.signer.quickAccManager && !relayerURL) ? (\n                    <FailingTxn message='Signing transactions with an email/password account without being connected to the relayer is unsupported.'></FailingTxn>\n                  ) : (\n                      <Actions\n                        estimation={estimation}\n                        approveTxn={approveTxn}\n                        rejectTxn={rejectTxn}\n                        signingStatus={signingStatus}\n                        feeSpeed={feeSpeed}\n                      />\n                  )}\n              </div>\n          </div>\n        </div>\n      </div>\n  </div>)\n}","import './SignMessage.scss'\nimport { FaSignature } from 'react-icons/fa'\nimport { MdOutlineAccountCircle } from 'react-icons/md'\nimport { Wallet } from 'ethers'\nimport { toUtf8String, keccak256, arrayify, isHexString } from 'ethers/lib/utils'\nimport { signMsgHash } from 'adex-protocol-eth/js/Bundle'\nimport * as blockies from 'blockies-ts';\nimport { getWallet } from '../../lib/getWallet'\nimport { useToasts } from '../../hooks/toasts'\nimport { fetchPost } from '../../lib/fetch'\nimport { useState } from 'react'\nimport { Loading } from '../common'\n\nexport default function SignMessage ({ toSign, resolve, account, relayerURL, totalRequests }) {\n  const defaultState = () => ({ codeRequired: false, passphrase: '' })\n  const { addToast } = useToasts()\n  const [signingState, setSigningState] = useState(defaultState())\n  const [isLoading, setLoading] = useState(false)\n\n  if (!toSign || !account) return (<></>)\n  if (toSign && !isHexString(toSign.txn)) return (<div id='signMessage'>\n    <h3 className='error'>Invalid signing request: .txn has to be a hex string</h3>\n    <button type='button' className='reject' onClick={() => resolve({ message: 'signature denied' })}>Reject</button>\n  </div>)\n\n  const handleSigningErr = e => {\n    console.error('Signing error', e)\n    if (e && e.message.includes('must provide an Ethereum address')) {\n      addToast(`Signing error: not connected with the correct address. Make sure you're connected with ${account.id}.`, { error: true })\n    } else {\n      addToast(`Signing error: ${e.message || e}`, { error: true })\n    }\n  }\n  const approveQuickAcc = async confirmationCode => {\n    if (!relayerURL) {\n      addToast('Email/pass accounts not supported without a relayer connection', { error: true })\n      return\n    }\n    if (!signingState.passphrase) {\n      addToast('Password required to unlock the account', { error: true })\n      return\n    }\n    setLoading(true)\n    try {\n      const hash = keccak256(arrayify(toSign.txn))\n\n      const { signature, success, message, confCodeRequired } = await fetchPost(\n        // network doesn't matter when signing\n        `${relayerURL}/second-key/${account.id}/ethereum/sign`, {\n          toSign: hash,\n          code: confirmationCode\n        }\n      )\n      if (!success) {\n        if (!message) throw new Error(`Secondary key: no success but no error message`)\n        if (message.includes('invalid confirmation code')) {\n          addToast('Unable to sign: wrong confirmation code', { error: true })\n        }\n        addToast(`Second signature error: ${message}`, { error: true })\n        return\n      }\n      if (confCodeRequired) {\n        const confCode = prompt('A confirmation code has been sent to your email, it is valid for 3 minutes. Please enter it here:')\n        if (!confCode) throw new Error('You must enter a confirmation code')\n        await approveQuickAcc(confCode)\n        return\n      }\n\n      const wallet = await Wallet.fromEncryptedJson(JSON.parse(account.primaryKeyBackup), signingState.passphrase)\n      const sig = await signMsgHash(wallet, account.id, account.signer, arrayify(hash), signature)\n      resolve({ success: true, result: sig })\n      addToast(`Successfully signed!`)\n    } catch(e) { handleSigningErr(e) }\n    setLoading(false)\n  }\n\n  const approve = async () => {\n    if (account.signer.quickAccManager) {\n      await approveQuickAcc()\n      return\n    }\n\n    setLoading(true)\n    try {\n      // if quick account, wallet = await fromEncryptedBackup\n      // and just pass the signature as secondSig to signMsgHash\n      const wallet = getWallet({\n        signer: account.signer,\n        signerExtra: account.signerExtra,\n        chainId: 1 // does not matter\n      })\n      // It would be great if we could pass the full data cause then web3 wallets/hw wallets can display the full text\n      // Unfortunately that isn't possible, because isValidSignature only takes a bytes32 hash; so to sign this with\n      // a personal message, we need to be signing the hash itself as binary data such that we match 'Ethereum signed message:\\n32<hash binary data>' on the contract\n      const hash = keccak256(arrayify(toSign.txn)) // hacky equivalent is: id(toUtf8String(toSign.txn)) \n      const sig = await signMsgHash(wallet, account.id, account.signer, arrayify(hash))\n      resolve({ success: true, result: sig })\n      addToast(`Successfully signed!`)\n    } catch(e) { handleSigningErr(e) }\n    setLoading(false)\n  }\n\n  return (<div id='signMessage'>\n    <div id='signingAccount' className='panel'>\n      <div className='title'>\n        <MdOutlineAccountCircle/>\n        Signing with account\n      </div>\n      <div className=\"content\">\n        <img className='icon' src={blockies.create({ seed: account.id }).toDataURL()} alt='Account Icon'/>\n        { account.id }\n      </div>\n    </div>\n    <div className='panel'>\n        <div className='heading'>\n            <div className='title'>\n                <FaSignature size={35}/>\n                Sign message\n            </div>\n            <div style={{ marginTop: 20 }}>\n              <b>A dApp is requesting your signature.</b>{totalRequests > 1 ? ` You have ${totalRequests - 1} more pending requests.` : ''}\n            </div>\n        </div>\n\n        <textarea\n          className='message'\n          type='text'\n          value={getMessageAsText(toSign.txn)}\n          readOnly={true}\n        />\n\n        <div className='actions'>\n          <form onSubmit={e => { e.preventDefault() }}>\n            {account.signer.quickAccManager && (<>\n              <input type='password'\n                required minLength={3}\n                placeholder='Account password'\n                value={signingState.passphrase}\n                onChange={e => setSigningState({ ...signingState, passphrase: e.target.value })}\n              ></input>\n            </>)}\n\n            <button type='button' className='reject' onClick={() => resolve({ message: 'signature denied' })}>Reject</button>\n            <button className='approve' onClick={approve} disabled={isLoading}>\n                {isLoading ? (<><Loading/>&nbsp;&nbsp;&nbsp;&nbsp;Signing...</>)\n                : (<>Sign</>)}\n            </button>\n          </form>\n        </div>\n    </div>\n  </div>)\n}\n\nfunction getMessageAsText(msg) {\n  try { return toUtf8String(msg) }\n  catch(_) { return msg }\n}","import {\n  getSDKVersion,\n  MessageFormatter,\n  Methods\n} from '@gnosis.pm/safe-apps-sdk'\n\nfunction GnosisConnector(_iframeRef, _app) {\n  this.iframeRef = _iframeRef\n  this.app = _app\n  this.handlers = {}\n\n  this.on = (method, handler) => {\n    this.handlers[method] = handler\n  }\n\n  this.isValidMessage = (msg) => {\n    // @ts-expect-error .parent doesn't exist on some possible types\n    if (!msg?.source?.parent) {\n      return false\n    }\n    const sentFromIframe = msg.source.parent === window.parent\n    const knownMethod = Object.values(Methods).includes(msg.data.method)\n\n    return sentFromIframe && knownMethod\n  }\n\n  this.canHandleMessage = (msg) => {\n    return Boolean(this.handlers[msg.data.method])\n  }\n\n  this.send = (data, requestId, error) => {\n    const sdkVersion = getSDKVersion()\n    const msg = error\n      ? MessageFormatter.makeErrorResponse(requestId, error, sdkVersion)\n      : MessageFormatter.makeResponse(requestId, data, sdkVersion)\n\n    if (this.iframeRef) {\n      //console.log(\"Posting to child\")\n      //console.log(msg)\n      this.iframeRef.current?.contentWindow?.postMessage(msg, '*')\n    } else {\n      console.log('Iframe not referenced ')\n    }\n  }\n\n  this.handleIncomingMessage = async (msg) => {\n\n    const validMessage = this.isValidMessage(msg)\n    const hasHandler = this.canHandleMessage(msg)\n\n    if (validMessage && hasHandler) {\n      const handler = this.handlers[msg.data.method]\n      try {\n        // @ts-expect-error Handler existence is checked in this.canHandleMessage\n        const response = await handler(msg)\n\n        // If response is not returned, it means the response will be send somewhere else\n        if (typeof response !== 'undefined') {\n          this.send(response, msg.data.id)\n        }\n      } catch (err) {\n        console.error(\"GS : \" + err);\n        this.send(err.message, msg.data.id, true)\n        /*trackError(Errors._901, err.message, {\n          contexts: {\n            safeApp: this.app,\n            request: msg.data,\n          },\n        })*/\n      }\n    }\n  }\n\n  this.clear = () => {\n    //console.log('removeListener...')\n    window.removeEventListener('message', this.handleIncomingMessage)\n  }\n\n  console.log('new appCommunicator')\n  window.addEventListener('message', this.handleIncomingMessage)\n}\n\nexport {GnosisConnector}\n","import { useCallback, useRef, useEffect } from 'react'\nimport { getTransactionSummary } from '../lib/humanReadableTransactions'\nimport { ethers } from 'ethers'\nimport { useToasts } from './toasts'\nimport networks from '../consts/networks'\n\nconst REQUEST_TITLE_PREFIX = 'Ambire Wallet: '\nconst SUPPORTED_TYPES =  ['eth_sendTransaction', 'personal_sign']\nconst BALANCE_TRESHOLD = 0.00005 \nlet currentNotifs = []\nlet isLastTotalBalanceInit = false\nlet lastTokensBalanceRaw = []\n\nconst getAmountReceived = (lastToken, newBalanceRaw, decimals) => {\n    const amountRecieved = lastToken ? newBalanceRaw - lastToken.balanceRaw : newBalanceRaw\n    return ethers.utils.formatUnits(amountRecieved.toString(), decimals)\n}\n\nexport default function useNotifications (requests, onShow, portfolio, selectedAcc, network) {\n    const { addToast } = useToasts()\n    const onShowRef = useRef({})\n    onShowRef.current.onShow = onShow\n\n    useEffect(() => {\n        if (window.Notification && Notification.permission !== 'denied') {\n            Notification.requestPermission(() => {\n                // @TODO: perhaps warn the user in some way\n            })\n        }\n        // hack because for whatever reason it doesn't work when we access the ref directly\n        window.onClickNotif = req => onShowRef.current.onShow(req)\n    }, [])\n    \n    const showNotification = useCallback(({ id, title, body, requireInteraction, request }) => {\n        const notification = new Notification(title, {\n            requireInteraction: requireInteraction || false,\n            body,\n            icon: 'public/logo192.png',\n        })\n        //notification.onclose = \n        notification.onclick = () => {\n            if (request.type === 'eth_sendTransaction') window.onClickNotif(request)\n            window.focus()\n            notification.close()\n        }\n        currentNotifs.push({ id, notification })\n    }, [])\n\n    requests.forEach(request => {\n        if (!SUPPORTED_TYPES.includes(request.type)) return\n        if (currentNotifs.find(n => n.id === request.id)) return\n        if (!request.txn) return\n        const isSign = request.type === 'personal_sign'\n        const network = networks.find(x => x.chainId === request.chainId)\n        const title = REQUEST_TITLE_PREFIX+(\n            isSign\n                ? 'you have a new message to sign'\n                : `new transaction request on ${network ? network.name : 'unknown network'}`\n        )\n        const body = isSign ? 'Click to preview' : getTransactionSummary([request.txn.to, request.txn.value, request.txn.data], request.chainId, request.account)\n        showNotification({\n            id: request.id,\n            title,\n            body,\n            request,\n            requireInteraction: true\n        })\n    })\n\n    useEffect(() => {\n        try {\n            if (!portfolio.isBalanceLoading && portfolio.balance) {\n                if (!isLastTotalBalanceInit) {\n                    isLastTotalBalanceInit = true\n                    lastTokensBalanceRaw = portfolio.tokens.map(({ address, balanceRaw }) => ({ address, balanceRaw }))\n                }\n\n                const changedAmounts = portfolio.tokens.filter(({ address, balanceRaw, decimals }) => {\n                    const lastToken = lastTokensBalanceRaw.find(token => token.address === address)\n                    const amountRecieved = getAmountReceived(lastToken, balanceRaw, decimals)\n                    return !lastToken || (lastToken && (balanceRaw > lastToken.balanceRaw) && (amountRecieved > BALANCE_TRESHOLD))\n                })\n\n                changedAmounts.forEach(({ address, symbol, decimals, balanceRaw }) => {\n                    const lastToken = lastTokensBalanceRaw.find(token => token.address === address)\n                    const amountRecieved = getAmountReceived(lastToken, balanceRaw, decimals)\n\n                    showNotification({\n                        id: `received_amount_${Date.now()}`,\n                        title: `${amountRecieved} ${symbol} Received.`,\n                        body: `Your ${symbol} balance increased by ${amountRecieved} ${symbol}`\n                    })\n\n                    lastToken ? lastTokensBalanceRaw = [\n                        ...lastTokensBalanceRaw.filter(token => token.address !== address),\n                        { address, balanceRaw }\n                    ] : lastTokensBalanceRaw.push({ address, balanceRaw })\n                })\n            }\n        } catch(e) {\n            console.error(e);\n            addToast(e.message | e, { error: true })\n        }\n    }, [portfolio, addToast, showNotification])\n\n    useEffect(() => {\n        isLastTotalBalanceInit = false\n        lastTokensBalanceRaw = []\n    }, [selectedAcc, network])\n\n    currentNotifs = currentNotifs.filter(({ id, notification }) => {\n        if (!requests.find(r => r.id === id)) {\n            notification.close()\n            return false\n        }\n        return true\n    })\n  }\n  \n","import './App.scss'\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n  Prompt\n} from 'react-router-dom'\nimport { useState, useEffect, useMemo } from 'react'\nimport EmailLogin from './components/EmailLogin/EmailLogin'\nimport AddAccount from './components/AddAccount/AddAccount'\nimport Wallet from './components/Wallet/Wallet'\nimport ToastProvider from './components/ToastProvider/ToastProvider'\nimport ModalProvider from './components/ModalProvider/ModalProvider'\nimport SendTransaction from './components/SendTransaction/SendTransaction'\nimport SignMessage from './components/SignMessage/SignMessage'\nimport useAccounts from './hooks/accounts'\nimport useNetwork from './hooks/network'\nimport useWalletConnect from './hooks/walletconnect'\nimport useGnosisSafe from './hooks/useGnosisSafe'\nimport useNotifications from './hooks/notifications'\nimport { usePortfolio } from './hooks'\n\nconst relayerURL = process.env.hasOwnProperty('REACT_APP_RELAYER_URL') ? process.env.REACT_APP_RELAYER_URL : 'http://localhost:1934'\n\nsetTimeout(() => {\n  //console.warn('☢️ If you do, malicious code could steal your funds! ☢️')\n  //console.error('Only use the console if you are an experienced developer who knows what he\\'s doing')\n  console.log(\" ✋ Hey...! Slow down you ambitious adventurer! You want to keep your funds safe! 🦄\")\n  console.error('       💀 DO NOT PASTE ANY CODE HERE ! 💀')\n  console.error(' _          ___   ___  _  _   ___  ___  ___         _')\n  console.error('| |        |   \\\\ /   \\\\| \\\\| | / __|| __|| _ \\\\       | |')\n  console.error('|_|        | |) || - || .  || (_ || _| |   /       |_|')\n  console.error('(_)        |___/ |_|_||_|\\\\_| \\\\___||___||_|_\\\\       (_)')\n  console.log('At Ambire, we care about our users 💜. Safety is our top priority! DO NOT PASTE ANYTHING HERE or it could result in the LOSS OF YOUR FUNDS!')\n}, 4000);\n\nfunction AppInner () {\n  // basic stuff: currently selected account, all accounts, currently selected network\n  const { accounts, selectedAcc, onSelectAcc, onAddAccount, onRemoveAccount } = useAccounts()\n  const { network, setNetwork, allNetworks } = useNetwork()\n\n  // Signing requests: transactions/signed msgs: all requests are pushed into .requests\n  const { connections, connect, disconnect, requests: wcRequests, resolveMany: wcResolveMany } = useWalletConnect({\n    account: selectedAcc,\n    chainId: network.chainId\n  })\n  const { requests: gnosisRequests, resolveMany: gnosisResolveMany, connect: gnosisConnect, disconnect: gnosisDisconnect } = useGnosisSafe({\n\t  selectedAccount: selectedAcc,\n\t  network: network\n\t}, [selectedAcc, network])\n\n  // Internal requests: eg from the Transfer page, Security page, etc. - requests originating in the wallet UI itself\n  // unlike WalletConnect or SafeSDK requests, those do not need to be persisted\n  const [internalRequests, setInternalRequests] = useState([])\n  const addRequest = req => setInternalRequests(reqs => [...reqs, req])\n\n  // Merge all requests\n  const requests = useMemo(\n    () => [...internalRequests, ...wcRequests, ...gnosisRequests]\n      .filter(({ account }) => accounts.find(({ id }) => id === account)),\n    [wcRequests, internalRequests, gnosisRequests, accounts]\n  )\n  const resolveMany = (ids, resolution) => {\n    wcResolveMany(ids, resolution)\n    gnosisResolveMany(ids, resolution)\n    setInternalRequests(reqs => reqs.filter(x => !ids.includes(x.id)))\n  }\n\n  // Portfolio: this hook actively updates the balances/assets of the currently selected user\n  const portfolio = usePortfolio({\n    currentNetwork: network.id,\n    account: selectedAcc\n  })\n\n  // Navigate to the send transaction dialog if we have a new txn\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n    ), [requests, network.chainId, selectedAcc])\n  const [sendTxnState, setSendTxnState] = useState(() => ({ showing: !!eligibleRequests.length }))\n  useEffect(\n    () => setSendTxnState({ showing: !!eligibleRequests.length }),\n    [eligibleRequests.length]\n  )\n\n  // Network shouldn't matter here\n  const everythingToSign = useMemo(() => requests\n    .filter(({ type, account }) => type === 'personal_sign'\n      && account === selectedAcc\n    ), [requests, selectedAcc])\n\n  // When the user presses back, we first hide the SendTransactions dialog (keeping the queue)\n  // Then, signature requests will need to be dismissed one by one, starting with the oldest\n  const onPopHistory = () => {\n    if (sendTxnState.showing) {\n      setSendTxnState({ showing: false })\n      return false\n    }\n    if (everythingToSign.length) {\n      resolveMany([everythingToSign[0].id], { message: 'signature rejected' })\n      return false\n    }\n    return true\n  }\n\n  // Show notifications for all requests\n  useNotifications(requests, request => {\n    onSelectAcc(request.account)\n    setNetwork(request.chainId)\n    setSendTxnState(state => ({ ...state, showing: true }))\n  }, portfolio, selectedAcc, network)\n\n  return (<>\n    <Prompt\n      message={(location, action) => {\n        if (action === 'POP') return onPopHistory()\n        return true\n    }}/>\n\n    {!!everythingToSign.length && (<SignMessage\n      selectedAcc={selectedAcc}\n      account={accounts.find(x => x.id === selectedAcc)}\n      toSign={everythingToSign[0]}\n      totalRequests={everythingToSign.length}\n      relayerURL={relayerURL}\n      resolve={outcome => resolveMany([everythingToSign[0].id], outcome)}\n    ></SignMessage>)}\n\n    {sendTxnState.showing ? (\n      <SendTransaction\n          accounts={accounts}\n          selectedAcc={selectedAcc}\n          network={network}\n          requests={eligibleRequests}\n          resolveMany={resolveMany}\n          relayerURL={relayerURL}\n          onDismiss={() => setSendTxnState({ showing: false })}\n          replacementBundle={sendTxnState.replacementBundle}\n      ></SendTransaction>\n      ) : (<></>)\n    }\n\n    <Switch>\n      <Route path=\"/add-account\">\n        <AddAccount relayerURL={relayerURL} onAddAccount={onAddAccount}></AddAccount>\n      </Route>\n\n      <Route path=\"/email-login\">\n        <EmailLogin relayerURL={relayerURL} onAddAccount={onAddAccount}></EmailLogin>\n      </Route>\n\n      <Route path=\"/wallet\">\n        <Wallet\n          match={{ url: \"/wallet\" }}\n          accounts={accounts}\n          selectedAcc={selectedAcc}\n          portfolio={portfolio}\n          onSelectAcc={onSelectAcc}\n          onRemoveAccount={onRemoveAccount}\n          allNetworks={allNetworks}\n          network={network}\n          setNetwork={setNetwork}\n          addRequest={addRequest}\n          connections={connections}\n          // needed by the top bar to disconnect/connect dapps\n          connect={connect}\n          disconnect={disconnect}\n          // needed by the gnosis plugins\n          gnosisConnect={gnosisConnect}\n          gnosisDisconnect={gnosisDisconnect}\n          // required for the security and transactions pages\n          relayerURL={relayerURL}\n          // required by the transactions page\n          eligibleRequests={eligibleRequests}\n          showSendTxns={bundle => setSendTxnState({ showing: true, replacementBundle: bundle })}\n        >\n        </Wallet>\n      </Route>\n\n      <Route path=\"/\">\n        <Redirect to={selectedAcc ? \"/wallet/dashboard\" : \"/add-account\" }/>\n      </Route>\n\n    </Switch>\n  </>)\n}\n\n// handles all the providers so that we can use provider hooks inside of AppInner\nexport default function App() {\n  return (\n    <ToastProvider>\n      <ModalProvider>\n        <Router>\n          <AppInner/>\n        </Router>\n      </ModalProvider>\n    </ToastProvider>\n  )\n}\n","import { useState, useCallback } from 'react'\nimport { useToasts } from '../hooks/toasts'\nimport { useHistory } from 'react-router-dom'\n\nexport default function useAccounts () {\n    const { addToast } = useToasts()\n    const history = useHistory()\n\n    const [accounts, setAccounts] = useState(() => {\n      try {\n        const accs = JSON.parse(localStorage.accounts || '[]')\n        if (!Array.isArray(accs)) throw new Error('accounts: incorrect format')\n        return accs\n      } catch (e) {\n        console.error('accounts parsing failure', e)\n        return []\n      }\n    })\n    const [selectedAcc, setSelectedAcc] = useState(() => {\n      const initialSelectedAcc = localStorage.selectedAcc\n      if (!initialSelectedAcc || !accounts.find(x => x.id === initialSelectedAcc)) {\n        return accounts[0] ? accounts[0].id : ''\n      }\n      return initialSelectedAcc\n    })\n  \n    const onSelectAcc = useCallback(selected => {\n      localStorage.selectedAcc = selected\n      setSelectedAcc(selected)\n    }, [setSelectedAcc])\n    const onAddAccount = useCallback((acc, opts = {}) => {\n      if (!(acc.id && acc.signer)) throw new Error('account: internal err: missing ID or signer')\n\n      const existingIdx = accounts\n        .findIndex(x => x.id.toLowerCase() === acc.id.toLowerCase())\n  \n      if (existingIdx !== -1) addToast('Account already added')\n\n      if (existingIdx === -1) accounts.push(acc)\n      else accounts[existingIdx] = acc\n  \n      // need to make a copy, otherwise no rerender\n      setAccounts([ ...accounts ])\n  \n      localStorage.accounts = JSON.stringify(accounts)\n  \n      if (opts.select) onSelectAcc(acc.id)\n      if (Object.keys(accounts).length) {\n        history.push('/wallet/dashboard')\n      }\n    }, [accounts, addToast, onSelectAcc, history])\n  \n    const onRemoveAccount = useCallback(id => {\n      if (!id) throw new Error('account: internal err: missing ID/Address')\n\n      const clearedAccounts = accounts.filter(account => account.id !== id)\n      setAccounts([...clearedAccounts])\n      localStorage.accounts = JSON.stringify(clearedAccounts)\n      \n      if (!clearedAccounts.length) history.push('/add-account')\n    }, [accounts, history])\n    return { accounts, selectedAcc, onSelectAcc, onAddAccount, onRemoveAccount }\n  }","import { useState, useCallback } from 'react'\nimport networks from '../consts/networks'\n\nexport default function useNetwork ({ defaultNetwork = 'ethereum' } = {}) {\n    const [networkId, setNetworkId] = useState(() =>\n        networks.find(n => n.id === localStorage.network) ? localStorage.network : defaultNetwork\n    )\n    const setNetwork = useCallback(networkIdentifier => {\n        const network = networks.find(n => n.id === networkIdentifier || n.name === networkIdentifier || n.chainId === networkIdentifier)\n        if (!network) throw new Error(`no network found: ${networkIdentifier}`)\n        localStorage.network = network.id\n        setNetworkId(network.id)\n    }, [setNetworkId])\n\n    return {\n        setNetwork,\n        network: networks.find(n => n.id === networkId),\n        allNetworks: networks\n    }\n}","import {useCallback, useEffect, useState, useRef, useMemo} from 'react'\nimport {useToasts} from '../hooks/toasts'\n\nimport {Methods} from '@gnosis.pm/safe-apps-sdk'\nimport {GnosisConnector} from '../lib/GnosisConnector'\nimport {getDefaultProvider} from 'ethers'\n\nconst STORAGE_KEY = 'gnosis_safe_state'\n\nexport default function useGnosisSafe({selectedAccount, network, verbose = 0}) {\n  // One connector at a time\n  const connector = useRef(null)\n\n  const uniqueId = useMemo(() => new Date().getTime() + ' ' + network.chainId + ' ' + selectedAccount, [selectedAccount, network])\n\n  const {addToast} = useToasts()\n\n  // This is needed cause of the Gnosis Safe event handlers (listeners)\n  const stateRef = useRef()\n  stateRef.current = {\n    selectedAccount,\n    network\n  }\n\n  const [requests, setRequests] = useState(() => {\n    const json = localStorage[STORAGE_KEY]\n    if (!json) return []\n    try {\n      const parsed = JSON.parse(json)\n      return Array.isArray(parsed) ? parsed : []\n    } catch (e) {\n      console.error(e)\n      return []\n    }\n  })\n\n  const connect = useCallback(connectorOpts => {\n    verbose > 1 && console.log(\"GS: creating connector\")\n\n    try {\n      connector.current = new GnosisConnector(\n        connectorOpts.iframeRef,\n        connectorOpts.app,\n        uniqueId\n      )\n    } catch (e) {\n      addToast(`Unable to connect to ${connectorOpts.app.url}: ${e.message}`)\n      return null\n    }\n\n    // reply back to iframe with safe data\n    connector.current.on(Methods.getSafeInfo, () => {\n      return {\n        safeAddress: stateRef.current.selectedAccount,\n        network: stateRef.current.network.id,\n        chainId: stateRef.current.network.chainId,\n        owners: [stateRef.current.selectedAccount],\n        threshold: 1, //Number of confirmations (not used in ambire)\n      }\n    })\n\n    //reply back to iframe with safe data\n\n    // connector.current.on(Methods.getSafeBalances, async (msg) => {\n    //   verbose>0 && console.log(\"DApp requested getSafeBalances\") && console.log(msg)\n\n    //TODO later\n    //await portfolio.updatePortfolio(\"polygon\", selectedAccount, true)//not this because it does NOT return the updated state anyway\n    //console.log(portfolio)\n\n    //struct template\n    /*connector.current.on(Methods.getSafeBalances, () => {\n      return {\n        \"fiatTotal\": \"0.18072\",\n          \"items\": [\n          {\n            \"tokenInfo\": {\n              \"type\": \"NATIVE_TOKEN\",\n              \"address\": \"0x0000000000000000000000000000000000000000\",\n              \"decimals\": 18,\n              \"symbol\": \"MATIC\",\n              \"name\": \"Matic\",\n              \"logoUri\": \"https://safe-transaction-assets.staging.gnosisdev.com/chains/137/currency_logo.png\"\n            },\n            \"balance\": \"100000000000000000\",\n            \"fiatBalance\": \"0.18072\",\n            \"fiatConversion\": \"1.8072\"\n          }\n        ]\n      }\n     })*/\n\n    connector.current.on(Methods.rpcCall, async (msg) => {\n      verbose > 0 && console.log(\"DApp requested rpcCall\", msg)\n\n      if (!msg?.data?.params) {\n        throw new Error(\"invalid call object\")\n      }\n      const method = msg.data.params.call//0 == tx, 1 == blockNum\n      const callTx = msg.data.params.params//0 == tx, 1 == blockNum\n\n      const provider = getDefaultProvider(stateRef.current.network.rpc)\n      let result\n      if (method === \"eth_call\") {\n        result = await provider.call(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getBalance\") {\n        result = await provider.getBalance(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_blockNumber\") {\n        result = await provider.getBlockNumber().catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getBlockByNumber\" || method === \"eth_getBlockByHash\") {\n        if (callTx[1]) {\n          result = await provider.getBlockWithTransactions(callTx[0]).catch(err => {\n            throw err\n          })\n        } else {\n          result = await provider.getBlock(callTx[0]).catch(err => {\n            throw err\n          })\n        }\n      } else if (method === \"eth_getTransactionByHash\") {\n        result = await provider.getTransaction(callTx[0]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getCode\") {\n        result = await provider.getCode(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getBlockByNumber\") {\n        result = await provider.getBlock(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getTransactionReceipt\") {\n        result = await provider.getTransactionReceipt(callTx[0]).catch(err => {\n          throw err\n        })\n      } else if (method === \"personal_sign\") {\n        result = await handlePersonalSign(msg).catch(err => {\n          throw err\n        })\n      } else {\n        throw new Error(\"method not supported \" + method)\n      }\n      return result\n    })\n\n    connector.current.on(Methods.sendTransactions, (msg) => {\n      verbose > 0 && console.log(\"DApp requested sendTx\") && console.log(msg)\n\n      const data = msg?.data\n      if (!data) {\n        console.error('GS: no data')\n        return\n      }\n\n      const id = 'gs_' + data.id\n      const txs = data?.params?.txs\n      if (txs?.length) {\n        for (let i in txs) {\n          if (!txs[i].from) txs[i].from = stateRef.current.selectedAccount\n        }\n      } else {\n        console.error('GS: no txs in received payload')\n        return\n      }\n\n      const request = {\n        id,\n        forwardId: msg.data.id,\n        type: 'eth_sendTransaction',\n        txn: txs[0], //if anyone finds a dapp that sends a bundle, please reach me out\n        chainId: stateRef.current.network.chainId,\n        account: stateRef.current.selectedAccount\n      }\n\n      setRequests(prevRequests => prevRequests.find(x => x.id === request.id) ? prevRequests : [...prevRequests, request])\n    })\n\n    const handlePersonalSign = (msg) => {\n      verbose > 0 && console.log(\"DApp requested signMessage\") && console.log(msg)\n\n      console.log(msg);\n\n      const data = msg?.data\n      if (!data) {\n        console.error('GS: no data')\n        return\n      }\n\n      const id = 'gs_' + data.id\n      const message = data?.params?.message\n      if (!message) {\n        console.error('GS: no message in received payload')\n        return\n      }\n\n      const request = {\n        id,\n        forwardId: msg.data.id,\n        type: 'personal_sign',\n        txn: message,\n        chainId: stateRef.current.network.chainId,\n        account: stateRef.current.selectedAccount\n      }\n\n      setRequests(prevRequests => prevRequests.find(x => x.id === request.id) ? prevRequests : [...prevRequests, request])\n    }\n\n    connector.current.on(Methods.signMessage, (msg) => {\n        return handlePersonalSign(msg)\n    })\n\n    connector.current.on(Methods.getTxBySafeTxHash, async (msg) => {\n      const {safeTxHash} = msg.data.params\n      const provider = getDefaultProvider(stateRef.current.network.rpc)\n      try {\n        const res = await provider.getTransaction(safeTxHash)\n\n        return res\n      } catch (e) {\n        console.error(\"GS: Err getting transaction \" + safeTxHash)\n        console.log(e)\n        return {}\n      }\n    })\n  }, [uniqueId, addToast, verbose])\n\n\n  const disconnect = useCallback(() => {\n    verbose > 1 && console.log(\"GS: disconnecting connector\")\n    connector.current?.clear()\n  }, [verbose])\n\n  const resolveMany = (ids, resolution) => {\n    for (let req of requests.filter(x => ids.includes(x.id))) {\n      const replyData = {\n        id: req.forwardId,\n        success: null,\n        txId: null,\n        error: null\n      }\n      if (!resolution) {\n        replyData.error = 'Nothing to resolve'\n        replyData.success = false\n      } else if (!resolution.success) {\n        replyData.error = resolution.message\n        replyData.success = false\n      } else { //onSuccess\n        replyData.success = true\n        replyData.txId = resolution.result\n        replyData.safeTxHash = resolution.result\n      }\n      if (!connector.current) {\n        //soft error handling: sendTransaction has issues\n        //throw new Error(\"gnosis safe connector not set\")\n        console.error('gnosis safe connector not set')\n      } else {\n        connector.current.send(replyData, req.forwardId, replyData.error)\n      }\n    }\n\n    setRequests(prevRequests => prevRequests.filter(x => !ids.includes(x.id)))\n  }\n\n  // Side effects that will run on every state change/rerender\n  useEffect(() => {\n    localStorage[STORAGE_KEY] = JSON.stringify(requests)\n  }, [requests, selectedAccount, network])\n\n  return {\n    requests,\n    resolveMany,\n    connect,\n    disconnect\n  }\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}