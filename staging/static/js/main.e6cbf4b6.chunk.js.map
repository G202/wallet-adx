{"version":3,"sources":["lib/ledgerWebHID.js","lib/fetch.js","consts/accountPresets.js","components/common/AddressBook/AddressList/AddressList.js","components/common/AddressBook/AddressBook.js","helpers/address.js","components/common/AddressWarning/AddressWarning.js","components/common/Button/Button.js","components/common/Chart/Chart.js","components/common/Checkbox/Checkbox.js","helpers/onClickOutside.js","components/common/DropDown/DropDown.js","components/common/Loading/Loading.js","components/common/Loading/AmbireLoading.js","components/common/Loading/Skeleton.js","components/ToastProvider/ToastProvider.js","hooks/toasts.js","consts/networks.js","config/index.js","consts/supportedProtocols.js","lib/humanizers/UniRouters.js","lib/humanizers/ERC20.js","lib/humanizers/AaveLendingPoolV2.js","lib/humanizers/ERC721.js","lib/humanizers/WETH.js","consts/privilegesOptions.js","lib/humanizers/AmbireIdentity.js","lib/humanizers/AmbireFactory.js","lib/humanizers/YearnVault.js","lib/humanizers/Movr.js","lib/humanizers/index.js","lib/humanReadableTransactions.js","lib/balanceOracle.js","hooks/portfolio.js","lib/isFirefox.js","hooks/walletconnect.js","hooks/relayerData.js","hooks/addressBook.js","hooks/attentionGrabber.js","components/ModalProvider/ModalProvider.js","hooks/modals.js","hooks/permissions.js","components/common/Modal/Modal.js","components/common/Radios/Radios.js","components/common/Segments/Segments.js","components/common/Select/Select.js","components/common/TextInput/TextInput.js","components/common/NumberInput/NumberInput.js","components/common/PasswordInput/PasswordInput.js","components/common/Toggle/Toggle.js","components/common/ToolTip/ToolTip.js","components/common/NoFundsPlaceholder/NoFundsPlaceholder.js","components/LoginOrSignupForm/LoginOrSignupForm.js","components/EmailLogin/EmailLogin.js","helpers/permissions.js","components/Modals/PermissionsModal/PermissionsModal.js","components/Modals/InputModal/InputModal.js","components/Modals/SelectSignerAccountModal/SelectSignerAccountModal.js","helpers/recoveryBundle.js","components/Modals/ResetPasswordModal/ResetPasswordModal.js","components/Modals/WalletTokenModal/WalletTokenModal.js","components/Modals/AddTokenModal/AddTokenModal.js","lib/validations/importedAccountValidations.js","components/AddAccount/AddAccount.js","components/Wallet/Dashboard/Balances/Balances.js","components/Wallet/Dashboard/Protocols/ProtocolsPlaceholder/ProtocolsPlaceholder.js","components/Wallet/Dashboard/Protocols/Protocols.js","components/Wallet/Dashboard/Collectibles/CollectiblesPlaceholder/CollectiblesPlaceholder.js","components/Wallet/Dashboard/Collectibles/Collectibles.js","components/Wallet/Dashboard/Dashboard.js","components/Wallet/TopBar/Accounts/Accounts.js","components/Wallet/TopBar/DApps/DApps.js","components/Wallet/TopBar/Links/Links.js","components/Wallet/TopBar/TopBar.js","components/Wallet/SideBar/SideBar.js","resources/ramp.svg","resources/paytrie.svg","resources/transak.svg","services/providers.js","helpers/popupHelper.js","components/Wallet/Deposit/Providers/Providers.js","components/Wallet/Deposit/Deposit.js","components/Plugins/GnosisSafeApps/GnosisSafeAppIframe.js","components/Wallet/Swap/SushiIframe.js","components/Wallet/Swap/Swap.js","lib/validations/formValidations.js","components/Wallet/Transfer/Addresses/Addresses.js","components/Wallet/Transfer/Transfer.js","consts/AAVELendingPoolAbi.js","consts/AAVELendingPoolProviders.js","resources/aave.svg","components/Wallet/Earn/Cards/Card/Card.js","components/Wallet/Earn/Cards/AAVECard/defaultTokens.js","components/Wallet/Earn/Cards/AAVECard/AAVECard.js","consts/YearnVaultABI.js","resources/yearn.svg","components/Wallet/Earn/Cards/YearnCard/YearnCard.js","components/Wallet/Earn/Earn.js","components/Wallet/Security/AddAuthSigner/AddAuthSigner.js","components/Modals/OtpTwoFAModal/OtpTwoFAModal.js","components/Modals/OtpTwoFADisableModal/OtpTwoFADisableModal.js","components/Wallet/Security/Backup/Backup.js","components/Wallet/Security/PendingRecoveryNotice/PendingRecoveryNotice.js","components/Wallet/Security/Security.js","components/common/TxnPreview/TxnPreview.js","lib/requestToBundleTxn.js","components/Wallet/Transactions/Transactions.js","components/Plugins/GnosisSafeApps/GnosisSafeApps.js","consts/ERC721Abi.js","components/Wallet/Collectible/Collectible.js","services/movr.js","components/Wallet/CrossChain/Quotes/Quotes.js","components/Wallet/CrossChain/CrossChain.js","components/Wallet/Wallet.js","lib/getWallet.js","components/SendTransaction/helpers.js","components/SendTransaction/FeeSelector.js","components/SendTransaction/Actions.js","components/SendTransaction/noRelayer.js","components/SendTransaction/SendTransaction.js","components/SignMessage/SignMessage.js","lib/GnosisConnector.js","resources/icon.png","hooks/notifications.js","hooks/oneTimeQueryParam.js","App.js","hooks/accounts.js","hooks/network.js","hooks/useGnosisSafe.js","reportWebVitals.js","index.js"],"names":["ethUtil","require","HDNode","connectedDevices","PARENT_HD_PATH","getTransport","a","TransportWebHID","list","length","opened","request","Error","ledgerGetAddresses","returnData","error","addresses","catch","err","transport","getAccounts","accountsData","close","accounts","map","address","parentKeyDerivationPath","getAddressInternal","then","o","statusCode","message","ledgerResponse","console","log","hdKey","publicKey","Buffer","from","chainCode","mainAddress","addressOfHDKey","initialDerivedKeyInfo","derivationPath","baseDerivationPath","calculateDerivedHDKeyInfos","appEth","AppEth","ledgerTimeout","Promise","resolve","reject","timeoutHandle","setTimeout","race","getAddress","res","clearTimeout","ledgerSignTransaction","txn","chainId","fromAddr","unsignedTxObj","gasLimit","gas","serializedUnsigned","serialize","toLowerCase","signTransaction","substr","rsvResponse","intV","parseInt","v","Math","floor","serializedSigned","r","s","ledgerSignMessage","hash","signerAddress","account","signPersonalMessage","rsvReply","signedMsg","toString","count","derivedKeys","i","fullDerivationPath","path","derive","derivedKey","baseDerivationPathh","push","derivedPublicKey","ethereumAddressUnprefixed","publicToAddress","addHexPrefix","fetch","fetchPost","url","body","headers","method","JSON","stringify","json","fetchGet","response","status","fetchCaught","params","resp","errMsg","accountPresets","salt","identityFactoryAddr","baseIdentityAddr","quickAccManager","feeCollector","quickAccTimelock","encryptionOpts","scrypt","N","AddressList","noAccounts","onSelectAddress","removeAddress","items","filter","isAccount","className","icon","name","onClick","style","backgroundImage","AddressBook","addAddress","newAddress","onClose","useState","setAddress","setName","isOpen","setOpenMenu","openAddAddress","setOpenAddAddress","isAddAddressFormValid","test","onAddAddress","useCallback","onDropDownChange","state","useEffect","title","open","onChange","id","autoComplete","placeholder","value","onInput","clear","small","disabled","isValidAddress","isKnownTokenOrContract","addressToLowerCase","tokensAddresses","Object","keys","tokens","contractsAddresses","names","includes","AddressWarning","onAddNewAddress","isKnownAddress","confirmed","setConfirmed","unknownWarning","useMemo","smartContractWarning","label","checked","target","Button","children","mini","iconAfter","red","danger","border","type","args","apply","Chart","data","size","hoveredItem","setHoveredItem","colors","height","width","onMouseEnter","item","sort","b","sortData","startAngle","strokeColor","innerRadius","selectedOffset","legend","toggled","maxHeight","backgroundColor","index","trunc","Checkbox","forwardRef","props","ref","inputElem","required","useOnClickOutside","handler","listener","event","current","contains","document","addEventListener","removeEventListener","DropDown","badge","closeOnClick","onOpen","useRef","transitionRef","isMenuOpen","setMenuOpen","CSSTransition","unmountOnExit","in","timeout","classNames","nodeRef","Loading","AmbireLoading","Skeleton","ToastContext","React","createContext","ToastProvider","toasts","setToasts","removeToast","t","addToast","content","options","toast","createRef","position","sticky","updateToastsPositions","forEach","toastElement","bottomToasts","element","find","getComputedStyle","marginBottom","x","clientWidth","y","offsetHeight","reduce","acc","curr","transform","onResize","window","Provider","TransitionGroup","href","rel","useToasts","useContext","networks","rpc","nativeAssetSymbol","explorerUrl","ZAPPER_API_KEY","process","suportedProtocols","network","protocols","balancesProvider","iface","Interface","abis","UniV2Router","recipientText","recipient","txnFrom","deadlineText","deadlineSecs","mined","minute","diff","Date","now","uniV2Mapping","getSighash","opts","parseTransaction","amountIn","amountOutMin","to","deadline","outputAsset","token","amountOut","amountInMax","nativeToken","tokenA","tokenB","amountADesired","amountBDesired","amountTokenDesired","amountAMin","amountBMin","amountTokenMin","amountETHMin","ifaceV3","UniV3Router","parsePath","pathBytes","uniV3Mapping","parsed","sigHash","slice","humanizer","flat","tokenIn","tokenOut","amountOutMinimum","amountInMaximum","amountMin","ifaceV32","UniV3Router2","uniV32Mapping","calls","concat","toNumber","mapping","ERC20","ERC20Mapping","approvedAddress","amount","getName","tokenName","eq","constants","MaxUint256","AaveLendingPoolV2","onBehalfText","onBehalf","AaveMapping","asset","ERC721","fromText","ERC721Mapping","tokenId","WETH","WETHMapping","privilegesOptions","true","false","IdentityMapping","addr","privLevel","isQuickAccManager","FactoryMapping","code","generateAddress2","hexConcat","YearnVault","YearnMapping","vaultInfo","yearnVaults","baseToken","split","join","MovrAnyswapInterface","MovrAnyswap","MovrRouterInterface","MovrRouter","getNetwork","n","Number","formatNativeTokenAddress","repeat","MovrMapping","middlewareInputToken","tokenToBridge","toChainId","middlewareRequest","bridgeRequest","inputToken","outputToken","all","UniRouters","AmbireIdentity","AmbireFactory","Movr","knownAliases","knownTokens","getTransactionSummary","networkId","accountAddr","callSummary","sendSummary","tokenInfo","humanizers","actions","e","assetInfo","formatUnits","setKnownAddresses","addrs","isKnown","ethers","utils","AbiCoder","isAddress","hexlify","RemainingBalancesOracle","oracle","SPOOFER","blockTag","remainingBalancesOracleAddr","getTokenListBalance","walletAddr","updateBalance","call","result","success","newBalance","newTokenBalance","parseFloat","balance","decimals","symbol","price","balanceRaw","updateAt","balanceUSD","toFixed","tokenImageUrl","provider","getDefaultProvider","coder","txParams","encodeFunctionData","isErr","callResult","balances","decode","ERROR_SIG","PANIC_SIG","hex","startsWith","checkTokenList","hidden","visibilityChange","getBalances","apiKey","protocol","msHidden","webkitHidden","lastOtherProcolsRefresh","supplementTokensDataFromNetwork","tokensData","extraTokens","Set","tokenList","td","ceil","some","callTokens","tokenBalances","usePortfolio","currentNetwork","currentAccount","isBalanceLoading","setBalanceLoading","areProtocolsLoading","setProtocolsLoading","tokensByNetworks","setTokensByNetworks","otherProtocolsByNetworks","setOtherProtocolsByNetworks","total","full","truncated","setBalance","otherBalances","setOtherBalances","setTokens","setProtocols","collectibles","setCollectibles","storedExtraTokens","localStorage","parse","setExtraTokens","getExtraTokensAssets","extra","extraToken","isExtraToken","fetchTokens","supportedProtocols","failedRequests","requestsCount","values","meta","products","extraTokensAssets","assets","updatedTokens","updatedNetworks","fetchOtherProtocols","updatedProtocols","protocolsByNetworks","refreshTokensIfVisible","requestOtherProtocolsRefresh","updateHumanizerData","tokensList","setKnownTokens","loadBalance","loadProtocols","balanceByNetworks","toLocaleString","otherProtocols","refreshInterval","setInterval","clearInterval","getSupplementTokenData","currentNetworkTokens","rcpTokenData","updatedExtraTokens","updated","onAddExtraToken","coingeckoId","isFirefox","navigator","userAgent","noop","noopSessionStorage","setSession","getSession","removeSession","SUPPORTED_METHODS","connectors","useWalletConnect","initialUri","stateRef","useReducer","action","connections","uri","session","requests","ids","c","errors","max","dispatch","connect","connectorOpts","connector","WalletConnectCore","cryptoLib","sessionStorage","sessionStart","sessionTimeout","onError","peerMeta","suggestion","bridge","on","payload","approveSession","time","signPayload","primaryType","domain","verifyingContract","functionSignature","rejectRequest","wcUri","notification","disconnect","killSession","updateConnections","updateSession","wcConnect","clipboardError","tryReadClipboard","clipboard","readText","runInitEffects","resolveMany","resolution","approveRequest","useRelayerData","isLoading","setLoading","setData","setErr","prevUrl","updateData","resetDataTimer","stripQuery","unloaded","accountType","email","signerExtra","walletType","toIcon","seed","blockies","toDataURL","useAddressBook","addressList","Array","isArray","entry","setAddresses","updateAddresses","newAddresses","documentTitle","flashingTitleInterval","stickyIds","removeFlashingTitle","useAttentionGrabber","eligibleRequests","isSendTxnShowing","onSitckyClick","location","useLocation","removeStickyToasts","isRouteWallet","pathname","Notification","permission","showFlashingTitle","ModalContext","ModalProvider","modal","setModal","showModal","disableClose","hideModal","useModals","onPermissionChange","permissions","query","onchange","usePermissions","arePermissionsLoaded","setPermissionsLoaded","isClipboardGranted","setClipboardGranted","isNoticationsGranted","setNotificationsGranted","permissionsModalHidden","modalHidden","setModalHidden","checkForPermissions","clipboardState","notificationsState","Modal","buttons","isCloseBtnShown","Radios","radios","defaultValue","currentValue","setCurrentValue","onSelect","Segments","segments","setValue","setSegment","segment","Select","native","monospace","searchable","hiddenTextInput","setOpen","search","setSearch","selectedItem","setSelectedItem","filteredItems","selectItem","focus","ev","buttonLabel","onButtonClick","TextInput","pattern","minLength","maxLength","info","password","copy","writeText","NumberInput","precision","button","afterDecimals","PasswordInput","peakPassword","showPassword","setShowPassword","Toggle","defaultChecked","ToolTip","mousePosition","setMousePosition","onMouseMove","clientY","clientX","top","left","NoFundsPlaceholder","LoginOrSignupForm","onAccRequest","inProgress","passConfirmInput","passphrase","passphraseConfirm","setState","onUpdate","updates","newState","invalid","setCustomValidity","isSignup","days","noBackupDisclaimer","additionalOnSignup","backupOptout","Link","stopPropagation","additionalInputs","onSubmit","preventDefault","accType","display","EmailLogin","relayerURL","onAddAccount","requiresEmailConfFor","setRequiresConfFor","setInProgress","attemptLogin","ignoreEmailConfirmationRequired","encodeURIComponent","authorization","loginSessionKey","errType","requestAuthResp","sessionKey","_id","identityInfo","bytecode","quickAccSigner","primaryKeyBackup","signer","select","onLoginUserAction","timer","class","inner","color","checkPermissions","onPrompt","allowWithoutGesture","checkClipboardPermission","prompt","askForPermission","requestPermission","toastErrorMessage","PermissionsModal","relayerIdentityURL","isEmailConfirmed","setEmailConfirmed","isEmailResent","setEmailResent","areBlockedPermissions","isAccountNotConfirmed","emailConfRequired","buttonDisabled","sendConfirmationEmail","checkEmailConfirmation","identity","emailConfirmed","isConfirmed","requestNotificationsPermission","requestClipboardPermission","emailConfirmationInterval","onCloseModal","InputModal","inputs","isDisabled","setDisabled","inputsFields","input","isFormValid","validate","every","SelectSignerAccountModal","signersToChoose","onSignerAddressClicked","selectedNetwork","description","currentPage","setCurrentPage","pages","val","idx","formatAddress","prevBtnDisabled","nextBtnDisabled","onAddressClicked","prevState","IDENTITY_INTERFACE","buildRecoveryBundle","newValues","abiCoder","timelock","one","two","newQuickAccHash","keccak256","encode","Bundle","txns","recoveryMode","ResetPassword","showSendTxns","setType","oldPassword","setOldPassword","newPassword","setNewPassword","newPasswordConfirm","setNewPasswordConfirm","passwordsMustMatchWarning","setPasswordsMustMatchWarning","passwordsLengthWarning","setPasswordsLengthWarning","checkboxes","changePassword","Wallet","fromEncryptedJson","wallet","encrypt","signMessage","sig","resetPassword","extraEntropy","random","performance","firstKeyWallet","createRandom","preRecovery","bundle","preRecoveryPrimaryKeyBackup","validateForm","arePasswordsMatching","areFieldsNotEmpty","isLengthValid","areCheckboxesChecked","modalButtons","autocomplete","WalletTokenModal","rewards","claimButton","multipliers","mul","ERC20Interface","ERC20ABI","AddTokenModal","onAddToken","loading","tokenDetails","setTokenDetails","showError","setShowError","tokenContract","Contract","balanceOf","tokenStandard","NUMBER_STRING_REGEX","NEEDED_KEYS","validateImportedAccountProps","validateAccountProps","isValidTimeLock","isValidSalt","hexDataLength","key","fileSizeValidator","file","AddAccount","setChooseSigners","addAccErr","setAddAccErr","wrapProgress","fn","wrapErr","createQuickAcc","req","secondKeySecret","mnemonic","phrase","secondKeyResp","quickAccountTuple","accHash","privileges","getProxyDeployBytecode","privSlot","identityAddr","undefined","createResp","isNew","createFromEOA","hexZeroPad","connectWeb3AndGetAccounts","ethereum","web3Accs","onEOASelected","signerName","getAccountByAddr","idAddr","signerAddr","getOwnedByEOAs","eoas","allUniqueOwned","entries","connectTrezorAndGetAccounts","TrezorSubprovider","trezorConnectClientApi","TrezorConnect","getAccountsAsync","_initialDerivedKeyInfo","connectLedgerAndGetAccounts","connectLedgerAndGetAccountsU2F","connectLedgerAndGetAccountsWebHID","LedgerSubprovider","ledgerEthereumClientFactoryAsync","ledgerEthereumBrowserClientFactoryAsync","_initialDerivedKeyInfoAsync","addrData","transportProtocol","addAccount","owned","onDrop","acceptedFiles","rejectedFiles","reader","FileReader","readAsText","onload","readerEvent","fileContent","validatedFile","useDropzone","noClick","noKeyboard","accept","maxFiles","validator","getInputProps","addFromSignerButtons","manifest","appUrl","Balances","portfolio","setNetwork","networkDetails","ProtocolsPlaceholder","onClickAddToken","src","alt","Protocols","failedImg","setFailedImg","sortedTokens","shouldShowPlaceholder","tokenItem","img","send","draggable","failed","openAddTokenModal","category","CollectiblesPlaceholder","collectionName","collectionImg","image","Collectibles","assetName","assetImg","Dashboard","selectedAccount","chartTokensData","setChartTokensData","chartProtocolsData","setChartProtocolsData","chartType","setChartType","tableType","setTableType","chartSegments","tableSegments","useLayoutEffect","totalProtocols","protocolsData","Accounts","selectedAddress","onSelectAcc","onRemoveAccount","logoutWarning","setLogoutWarning","closed","setClosed","shortenedAddress","isActive","copyAddress","onSelectAccount","DApps","checkPermission","readClipboard","isLegacyWC","isConnectionInterrupted","icons","endsWith","Links","linksViewed","setLinksViewed","TopBar","selectedAcc","allNetworks","rewardsData","setRewards","rewardsTotal","setRewardsTotal","networksItems","accountIcon","showWalletTokenModal","rewardsDetails","fromEntries","SideBar","match","sidebarRef","balanceFontSize","setBalanceFontSize","resizeBalance","balanceFontSizes","charLength","closest","prev","abs","fontSize","activeClassName","openPayTrie","walletAddress","URL","rightSideLabel","polygon","w","h","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","innerWidth","documentElement","screen","innerHeight","clientHeight","systemZoom","availWidth","newWindow","popupCenter","format","Providers","providers","logo","RAMP_LOGO","fees","limits","currencies","RampInstantSDK","hostAppName","hostLogoUrl","variant","swapAsset","avalanche","userAddress","hostApiKey","show","openRampNetwork","PAYTRIE_LOGO","TRANSAK_LOGO","transak","transakSDK","environment","defaultCryptoCurrency","disableWalletAddressForm","themeColor","redirectURL","hostURL","origin","widgetHeight","widgetWidth","init","ALL_EVENTS","EVENTS","TRANSAK_ORDER_SUCCESSFUL","orderData","openTransak","shouldBeDisabled","Deposit","qrCodeUrl","setQrCodeUrl","generateQRCode","QRCode","quality","margin","GnosisSafeAppIframe","selectedApp","gnosisConnect","gnosisDisconnect","setHash","iframeRef","app","onLoad","ambireSushi","desc","SushiSwap","Swap","validateAddress","validateSendTransferAddress","addressConfirmed","isValidAddr","Addresses","modalInputs","inputModal","withRouter","history","addRequest","addressBook","tokenAddressOrSymbol","useParams","tokenAddress","setAsset","setAmount","bigNumberHexAmount","setBigNumberHexAmount","setAddressConfirmed","setNewAddress","messages","validationFormMgs","setValidationFormMgs","assetsItems","selectedAsset","maxAmount","onAmountChange","bigNumberAmount","parseUnits","toHexString","replace","isValidRecipientAddress","isValidSendTransferAmount","parsedAmount","indexOf","gt","validateSendTransferAmount","amountLabel","AAVELendingPoolAbi","AAVELendingPoolProviders","Card","unavailable","tokensItems","details","onTokenSelect","onValidate","setToken","currentToken","getEquToken","sortedTokenItems","getMaxAmount","min","ERC20Abi","AAVELendingPool","RAY","lendingPoolAddress","AAVECard","setUnavailable","setTokensItems","setDetails","apr","defaultTokens","getDefaultTokensItems","getToken","addRequestTxn","extraGas","approveToken","ZERO","BigNumber","allowance","lt","loadPool","providerAddress","lendingPoolProviderContract","getLendingPool","lendingPoolContract","getReservesList","reserves","reservesAddresses","reserve","withdrawTokens","depositTokens","allTokens","uniqueTokenAddresses","getReserveData","liquidityRate","tokensAPR","AAVE_ICON","YearnVaultABI","v2VaultsAddresses","customVaultMetadata","displayName","displayIcon","YearnVaultInterface","YEARN_VAULT_ABI","YearnCard","accountId","getTokenFromPortfolio","loadVaults","yearn","Yearn","vaults","get","v2Vaults","metadata","apy","vaultAddress","net_apy","yToken","vault","selectedToken","load","YEARN_ICON","Earn","AddAuthSigner","setSignerAddress","modalToggle","setModalToggle","textInputInfo","setTextInputInfo","isAddressValid","validateAddAuthSignerAddress","onAddBtnClicked","OtpTwoFAModal","setCacheBreak","secret","authenticator","generateSecret","imageURL","setImageURL","receivedOtp","setReceivedOTP","showSecret","setShowSecret","currentPassword","setCurrentPassword","generateQR","otpAuth","keyuri","verifyOTP","isValid","verify","otp","resetForm","OtpTwoFADisableModal","disableOTP","Backup","download","PendingRecoveryNotice","recoveryLock","isAlreadyInitiated","createRecoveryRequest","recoveryLockStatus","remainingTime","seconds","cursor","remaining","Security","cacheBreak","intvl","otpEnabled","useHistory","craftTransaction","addTransactionToAddRequest","onMakeDefaultBtnClicked","isQuickAccount","showResetPasswordModal","handleEnableOtp","handleDisableOtp","getRootProps","isDragActive","isDragAccept","isDragReject","hasPendingReset","privList","addressName","isQuickAcc","privText","isSelected","canChangePassword","onRemoveBtnClicked","showLoading","signersFragment","newSignerAddress","getNetworkSymbol","TxnPreview","onDismiss","isFirstFailing","disableExpand","isExpanded","setExpanded","contractName","IdentityFactory","toBundleTxn","BundlePreview","date","lastTxnSummary","hasFeeMatch","RegExp","executed","errorMsg","submittedAt","toLocaleDateString","toLocaleTimeString","replacesTxId","txId","Transactions","firstPending","replaced","mapToBundle","relayerBundle","nonce","num","minFeeInUSDPerGas","feeInUSDPerGas","cancelByReplacing","cancel","dapps","GnosisSafeApps","setSelectedApp","dapp","ERC721Abi","handleUri","Collectible","collectionAddr","owner","collection","setMetadata","recipientAddress","setRecipientAddress","isTransferDisabled","setTransferDisabled","validateSendNftAddress","fetchMetadata","contract","ownerOf","tokenURI","maybeUri1","maybeUri2","jsonUrl","baseURL","fetchChains","fetchFromTokens","fetchToTokens","fetchQuotes","fromAsset","fromChainId","toAsset","excludeBridges","approvalBuildTx","chainID","allowanceTarget","sendBuildTx","output","routePath","formatAmount","pow","formatFeeAmount","fee","route","Quotes","fromTokensItems","quotes","onCancel","fromNetwork","toNetwork","selectedRoute","setSelectedRoute","routes","middlewareRoute","bridgeRoute","middlewareFee","bridgeFee","middlewareInfo","bridgeInfo","inputAmount","outputAmount","sendTx","onConfirm","isApprovalRequired","tx","CrossChain","loadingFromTokens","setLoadingFromTokens","loadingToTokens","setLoadingToTokens","loadingQuotes","setLoadingQuotes","setFromTokenItems","fromToken","setFromToken","chainsItems","setChainsItems","toChain","setToChain","toTokenItems","setToTokenItems","toToken","setToToken","setQuotes","portfolioTokens","fromChain","formDisabled","hasNoFunds","getTokenFromPortofolio","loadChains","chains","isSupported","loadFromTokens","fromTokens","filteredFromTokens","uniqueFromTokenAddresses","loadToTokens","toTokens","filteredToTokens","tokenItems","localeCompare","portfolioToken","getQuotes","flatAmount","fromTokenItem","equivalentToken","asyncLoad","setStateLoading","loadCallback","loaded","walletContainer","isLoggedIn","component","LoggedInGuard","handlePermissionsModal","permissionsModal","showCauseOfPermissions","scrollTimeout","scrollTo","behavior","exact","wallets","getWallet","getWalletNew","providerTrezor","fromExtendedKey","xpub","getInitialDerivedKeyInfo","signPersonalMessageAsync","signTransactionAsync","Web3Provider","getSigner","isTokenEligible","speed","estimation","isStable","feeInUSD","feeInNative","getFeePaymentConsequences","multiplier","addedGas","mapTxnErrMsg","msg","getErrHint","SPEEDS","FeeSelector","setEstimation","feeSpeed","setFeeSpeed","insufficientFee","selectedFeeToken","FailingTxn","tooltip","remainingFeeTokenBalances","feeCurrencySelect","marginTop","areSelectorsDisabled","feeAmountSelectors","nativeAssetPriceInUSD","Actions","approveTxn","rejectTxn","signingStatus","quickAccCredentials","setQuickAccCredentials","form","rejectButton","signButtonLabel","isRecoveryMode","finalBundle","quickAcc","confCodeRequired","visibility","checkValidity","IdentityInterface","FactoryInterface","sendNoRelayer","getCode","getNonce","sign","signature","estimateGas","getTransactionCount","gasPrice","sendTransaction","signed","REJECT_MSG","SendTransaction","replacementBundle","onBroadcastedTxn","requestIds","makeBundle","SendTransactionWithBundle","setSigningStatus","unmounted","reestimate","estimate","replacing","estimateNoRelayer","prevEstimation","getFinalBundle","feeToken","toHexAmount","amnt","round","feeTxn","approveTxnImpl","submit","approveTxnImplQuickAcc","pwd","alert","signatureTwo","firstFailing","bundleResult","SignMessage","toSign","totalRequests","codeRequired","signingState","setSigningState","isHexString","handleSigningErr","approveQuickAcc","confirmationCode","arrayify","confCode","signMsgHash","approve","getMessageAsText","readOnly","toUtf8String","_","GnosisConnector","_iframeRef","_app","this","handlers","isValidMessage","source","parent","sentFromIframe","knownMethod","Methods","canHandleMessage","Boolean","requestId","sdkVersion","getSDKVersion","MessageFormatter","makeErrorResponse","makeResponse","contentWindow","postMessage","handleIncomingMessage","validMessage","hasHandler","SUPPORTED_TYPES","currentNotifs","isLastTotalBalanceInit","lastTokensBalanceRaw","useNotifications","onShow","sentTxn","confirmSentTx","onShowRef","onClickNotif","showNotification","requireInteraction","AMBIRE_ICON","onclick","isSign","lastToken","isSignificantChange","amountRecieved","newBalanceRaw","sub","getAmountReceived","interval","txStatusInterval","getTransactionReceipt","hasOwnProperty","AppInner","accs","setAccounts","initialSelectedAcc","setSelectedAcc","selected","existing","existingIdx","clearedAccounts","useAccounts","defaultNetwork","setNetworkId","networkIdentifier","useNetwork","searchParam","urlSearchParams","URLSearchParams","oneTimeQueryParam","setOneTimeQueryParam","altParams","deleteOneTimeQueryParam","has","delete","useOneTimeQueryParam","wcRequests","wcResolveMany","verbose","uniqueId","getTime","setRequests","getSafeInfo","safeAddress","owners","threshold","rpcCall","callTx","getBalance","getBlockNumber","getBlockWithTransactions","getBlock","getTransaction","handlePersonalSign","sendTransactions","txs","forwardId","prevRequests","getTxBySafeTxHash","safeTxHash","replyData","useGnosisSafe","gnosisRequests","gnosisResolveMany","internalRequests","setInternalRequests","reqs","showing","sendTxnState","setSendTxnState","everythingToSign","setSentTxn","txHash","outcome","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e6cbf4b6.chunk.js","sourcesContent":["import TransportWebHID from '@ledgerhq/hw-transport-webhid'\nimport AppEth from '@ledgerhq/hw-app-eth'\nimport { serialize } from '@ethersproject/transactions'\n\nconst EIP_155_CONSTANT = 35\n\nconst ethUtil = require('ethereumjs-util')\nconst HDNode = require('hdkey')\n\nlet connectedDevices = null\n\nexport const PARENT_HD_PATH = \"44'/60'/0'/0\"\n\nasync function getTransport() {\n  connectedDevices = await TransportWebHID.list()\n  if (connectedDevices.length && connectedDevices[0].opened) {\n    return new TransportWebHID(connectedDevices[0])\n  } else {\n    try {\n      return await TransportWebHID.request()\n    } catch (e) {\n      throw new Error('Could not request WebHID ledger')\n    }\n  }\n}\n\n\nexport async function ledgerGetAddresses() {\n  const returnData = {\n    error: null,\n    addresses: []\n  }\n\n  const transport = await getTransport().catch(err => {\n    returnData.error = err\n  })\n  if (!transport) return returnData\n\n  const accountsData = await getAccounts(transport)\n\n  transport.close()\n\n  if (accountsData.error) {\n    returnData.error = accountsData.error\n  } else {\n    returnData.addresses = accountsData.accounts.map(a => a.address)\n  }\n\n  return returnData\n}\n\nasync function getAccounts(transport) {\n  const parentKeyDerivationPath = `m/${PARENT_HD_PATH}`\n  const returnData = {\n    error: null,\n    accounts: []\n  }\n  let ledgerResponse\n  try {\n    ledgerResponse = await getAddressInternal(transport, parentKeyDerivationPath).then(o => o).catch(err => {\n      if (err.statusCode === 25871 || err.statusCode === 27404) {\n        returnData.error = 'Please make sure your ledger is unlocked and running the Ethereum app. ' + err.message\n      } else {\n        returnData.error = 'Could not get address from ledger : ' + err\n      }\n    })\n  } catch (e) {\n    console.log(e)\n  }\n\n  if (!ledgerResponse) {\n    return returnData\n  }\n\n  const hdKey = new HDNode()\n  hdKey.publicKey = Buffer.from(ledgerResponse.publicKey, 'hex')\n  hdKey.chainCode = Buffer.from(ledgerResponse.chainCode, 'hex')\n  const mainAddress = addressOfHDKey(hdKey)\n\n  const initialDerivedKeyInfo = {\n    hdKey,\n    address: mainAddress,\n    derivationPath: parentKeyDerivationPath,\n    baseDerivationPath: PARENT_HD_PATH,\n  }\n\n  // currently we can't get addrs to match with what appears in MM/Ledger live so only one is derived\n  returnData.accounts = calculateDerivedHDKeyInfos(initialDerivedKeyInfo, 1)\n  return returnData\n}\n\n\nasync function getAddressInternal(transport, parentKeyDerivationPath) {\n  let timeoutHandle\n  const appEth = new AppEth(transport)\n\n  const ledgerTimeout = new Promise((resolve, reject) => {\n    timeoutHandle = setTimeout(() => {\n      return reject(new Error('Device took too long to respond...'))\n    }, 10000)\n  })\n\n  return Promise.race([\n    appEth.getAddress(parentKeyDerivationPath, false, true),\n    ledgerTimeout\n  ]).then((res) => {\n    clearTimeout(timeoutHandle)\n    return res\n  })\n}\n\nexport async function ledgerSignTransaction(txn, chainId) {\n  const transport = await getTransport().catch(err => {\n    throw err\n  })\n\n  const fromAddr = txn.from\n\n  const unsignedTxObj = {\n    ...txn,\n    gasLimit: txn.gasLimit || txn.gas,\n    chainId: chainId\n  }\n  delete unsignedTxObj.from\n  delete unsignedTxObj.gas\n\n  let serializedUnsigned = serialize(unsignedTxObj)\n  const accountsData = await getAccounts(transport)\n  if (accountsData.error) {\n    throw new Error(accountsData.error)\n  }\n\n  //Managing only 1 addr for now\n  const address = accountsData.accounts[0].address\n\n  let serializedSigned\n  if (address.toLowerCase() === fromAddr.toLowerCase()) {\n    let rsvResponse\n    try {\n      rsvResponse = await new AppEth(transport).signTransaction(accountsData.accounts[0].derivationPath, serializedUnsigned.substr(2))\n    } catch (e) {\n      throw new Error('Could not sign transaction ' + e)\n    }\n\n    const intV = parseInt(rsvResponse.v, 16)\n    const signedChainId = Math.floor((intV - EIP_155_CONSTANT) / 2)\n\n    if (signedChainId !== chainId) {\n      throw new Error('Invalid returned V 0x' + rsvResponse.v)\n    }\n\n    delete unsignedTxObj.v\n    serializedSigned = serialize(unsignedTxObj, {\n      r: '0x' + rsvResponse.r,\n      s: '0x' + rsvResponse.s,\n      v: intV\n    })\n  } else {\n    throw new Error('Incorrect address. Are you using the correct account/ledger?')\n  }\n\n  transport.close()\n\n  return serializedSigned\n}\n\nexport async function ledgerSignMessage(hash, signerAddress) {\n  const transport = await getTransport().catch(err => {\n    throw err\n  })\n\n  const accountsData = await getAccounts(transport)\n  if (accountsData.error) {\n    throw new Error(accountsData.error)\n  }\n\n  //TODO for multiple accs?\n  const account = accountsData.accounts[0]\n\n  let signedMsg\n  if (account.address.toLowerCase() === signerAddress.toLowerCase()) {\n    try {\n      const rsvReply = await new AppEth(transport).signPersonalMessage(account.derivationPath, hash.substr(2))\n      signedMsg = '0x' + rsvReply.r + rsvReply.s + rsvReply.v.toString(16)\n    } catch (e) {\n      throw new Error('Signature denied ' + e.message)\n    }\n  } else {\n    throw new Error('Incorrect address. Are you using the correct account/ledger?')\n  }\n  transport.close()\n  return signedMsg\n}\n\nfunction calculateDerivedHDKeyInfos(initialDerivedKeyInfo, count) {\n  const derivedKeys = []\n  for (let i = 0; i < count; i++) {\n\n    const fullDerivationPath = `m/${initialDerivedKeyInfo.baseDerivationPath}/${i}`\n    const path = `m/${i}`\n    const hdKey = initialDerivedKeyInfo.hdKey.derive(path)\n    const address = addressOfHDKey(hdKey)\n    const derivedKey = {\n      address,\n      hdKey,\n      baseDerivationPath: initialDerivedKeyInfo.baseDerivationPathh,\n      derivationPath: fullDerivationPath,\n    }\n\n    derivedKeys.push(derivedKey)\n  }\n  return derivedKeys\n}\n\nexport function addressOfHDKey(hdKey) {\n  const shouldSanitizePublicKey = true\n  const derivedPublicKey = hdKey.publicKey\n  const ethereumAddressUnprefixed = ethUtil\n    .publicToAddress(derivedPublicKey, shouldSanitizePublicKey)\n    .toString('hex')\n  return ethUtil.addHexPrefix(ethereumAddressUnprefixed).toLowerCase()\n}\n","export const fetch = require('node-fetch')\n\nexport async function fetchPost (url, body) {\n\tconst r = await fetch(url, {\n\t\theaders: { 'content-type': 'application/json' },\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(body)\n\t})\n\treturn r.json()\n}\n\nexport const fetchGet = async url => {\n  const response = await fetch(url, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (response.status !== 200) throw new Error('Failed to fetch')\n  return response.json()\n}\n\nexport async function fetchCaught (url, params) {\n    let resp\n    try {\n      resp = await fetch(url, params)\n    } catch (e) {\n      console.error(e)\n      return { errMsg: `Unexpected error: ${e && e.message}` }\n    }\n    let body\n    try {\n      body = await resp.json()\n    } catch(e) {\n      console.error(e)\n      return { errMsg: `Unexpected error: ${resp.status}, ${e && e.message}`, resp }\n    }\n    return { body, resp, errMsg: '' }\n}","// NOTE: This is a compromise, but we can afford it cause QuickAccs require a secondary key\n// Consider making it more\nconst SCRYPT_ITERATIONS = 131072 / 8\n\n// NOTE: those should only apply to new accounts, never for existing accounts, since some existing accounts may be on older versions of those\nconst accountPresets = {\n    salt: '0x0000000000000000000000000000000000000000000000000000000000000001',\n    identityFactoryAddr: '0xBf07a0Df119Ca234634588fbDb5625594E2a5BCA',\n    baseIdentityAddr: '0x2A2b85EB1054d6f0c6c2E37dA05eD3E5feA684EF',\n    quickAccManager: '0xfF3f6D14DF43c112aB98834Ee1F82083E07c26BF',\n    feeCollector: '0x942f9CE5D9a33a82F88D233AEb3292E680230348',\n    quickAccTimelock: 259200, // 3 days\n    encryptionOpts: { scrypt: { N: SCRYPT_ITERATIONS } }\n}\nexport default accountPresets","import './AddressList.scss'\n\nimport { MdOutlineDelete } from 'react-icons/md'\n\nconst AddressList = ({ noAccounts, addresses, onSelectAddress, removeAddress }) => {\n    const items = addresses.filter(({ isAccount }) => !(isAccount && noAccounts))\n\n    return (\n        <div className=\"address-list\">\n            {\n                !items.length ?\n                    <div className=\"placeholder\">Your Address Book is empty</div>\n                    :\n                    items.map(({ isAccount, icon, name, address }) => (\n                        <div className=\"item\" key={address + name}>\n                            <div className=\"inner\" onClick={() => onSelectAddress && onSelectAddress(address)}>\n                                <div className=\"icon\" style={{ backgroundImage: `url(${icon})`}}></div>\n                                <div className=\"details\">\n                                    <label>{ name }</label>\n                                    <div className=\"address\">{ address }</div>\n                                </div>\n                            </div>\n                            {\n                                !isAccount ? \n                                    <div className=\"button\" onClick={() => removeAddress(name, address)}>\n                                        <MdOutlineDelete/>\n                                    </div>\n                                    :\n                                    null\n                            }\n                        </div>\n                    ))\n            }\n        </div>\n    )\n}\n\nexport default AddressList","import './AddressBook.scss'\n\nimport { FaAddressCard } from 'react-icons/fa'\nimport { MdOutlineAdd, MdClose } from 'react-icons/md'\nimport { Button, DropDown, TextInput } from '..'\nimport { useCallback, useEffect, useState } from 'react'\nimport AddressList from './AddressList/AddressList'\n\nconst AddressBook = ({ addresses, addAddress, removeAddress, newAddress, onClose, onSelectAddress }) => {\n    const [address, setAddress] = useState('')\n    const [name, setName] = useState('')\n    const [isOpen, setOpenMenu] = useState(false)\n    const [openAddAddress, setOpenAddAddress] = useState(false)\n\n    const selectAddress = address => {\n        onSelectAddress && onSelectAddress(address)\n        setOpenMenu(false)\n    }\n    \n    const isAddAddressFormValid = address.length && name.length && /^0x[a-fA-F0-9]{40}$/.test(address)\n    const onAddAddress = useCallback(() => {\n        setOpenMenu(false)\n        setOpenAddAddress(false)\n        addAddress(name, address)\n    }, [name, address, addAddress])\n\n    const onDropDownChange = useCallback(state => {\n        setOpenMenu(state)\n        if (!state) {\n            setName('')\n            setAddress('')\n        }\n    }, [])\n\n    useEffect(() => !isOpen && onClose ? onClose() : null, [isOpen, onClose])\n\n    useEffect(() => {\n        if (newAddress) {\n            setAddress(newAddress)\n            setOpenMenu(true)\n            setOpenAddAddress(true)\n        }\n    }, [newAddress])\n\n    return (\n        <DropDown title={<><FaAddressCard/>Address Book</>} className=\"address-book\" open={isOpen} onChange={onDropDownChange}>\n            <div className=\"heading\">\n                <div className=\"title\">\n                    <FaAddressCard/> Address Book\n                </div>\n                {\n                    !openAddAddress ?\n                        <div className=\"button\" onClick={() => setOpenAddAddress(true)}>\n                            <MdOutlineAdd/>\n                        </div>\n                        :\n                        <div className=\"button\" onClick={() => setOpenAddAddress(false)}>\n                            <MdClose/>\n                        </div>\n                }\n            </div>\n            {\n                openAddAddress ?\n                    <div id=\"add-address\" className=\"content\">\n                        <div className=\"fields\">\n                            <TextInput autoComplete=\"nope\" placeholder=\"Name\" value={name} onInput={value => setName(value)}/>\n                            <TextInput autoComplete=\"nope\" placeholder=\"Address\" value={address} onInput={value => setAddress(value)}/>\n                        </div>\n                        <Button clear small disabled={!isAddAddressFormValid} onClick={onAddAddress}>\n                            <MdOutlineAdd/> Add Address\n                        </Button>\n                    </div>\n                    :\n                    !addresses.length ?\n                        <div className=\"content\">\n                            Your Address Book is empty.\n                        </div>\n                        :\n                        <div className=\"content\">\n                            <AddressList\n                                addresses={addresses}\n                                onSelectAddress={selectAddress}\n                                removeAddress={removeAddress}\n                            />\n                        </div>\n            }\n        </DropDown>\n    )\n}\n\nexport default AddressBook","import { names, tokens } from '../consts/humanizerInfo'\n\nconst isValidAddress = address => /^0x[a-fA-F0-9]{40}$/.test(address)\n\nconst isKnownTokenOrContract = address => {\n    const addressToLowerCase = address.toLowerCase()\n    const tokensAddresses = Object.keys(tokens)\n    const contractsAddresses = Object.keys(names)\n    return tokensAddresses.includes(addressToLowerCase) || contractsAddresses.includes(addressToLowerCase)\n}\n\nexport {\n    isValidAddress,\n    isKnownTokenOrContract\n}","import './AddressWarning.scss'\n\nimport { MdOutlineAdd } from 'react-icons/md'\nimport { Checkbox } from '..'\nimport { useEffect, useMemo, useState } from 'react'\nimport { isValidAddress, isKnownTokenOrContract } from '../../../helpers/address';\n\nconst AddressWarning = ({ address, onChange, onAddNewAddress, isKnownAddress }) => {\n    const [confirmed, setConfirmed] = useState(false)\n    const unknownWarning = useMemo(() => isValidAddress(address) && !isKnownAddress(address), [address, isKnownAddress])\n    const smartContractWarning = useMemo(() => isKnownTokenOrContract(address), [address])\n\n    useEffect(() => {\n        if (onChange) onChange(confirmed)\n    }, [confirmed, onChange])\n\n    return (\n        <>\n            {\n                !smartContractWarning && unknownWarning ?\n                    <div id=\"unknown-address-warning\">\n                        <Checkbox\n                            label=\"Confirm sending to a previously unknown address\"\n                            checked={confirmed}\n                            onChange={({ target }) => setConfirmed(target.checked)}\n                        />\n                        <div className=\"button\" onClick={onAddNewAddress}>\n                            <MdOutlineAdd/>\n                            Add it to the address book\n                        </div>\n                    </div>\n                    :\n                    null\n            }\n        </>\n    )\n}\n\nexport default AddressWarning","import './Button.scss'\n\nconst Button = ({ children, className, small, mini, icon, iconAfter, disabled, onClick, red, danger, clear, border, title, type }) => {\n    return (\n        <button\n            onClick={(...args) => !disabled && onClick && onClick.apply(this, args)}\n            className={`buttonComponent ${className} ${small ? 'small' : ''} ${mini ? 'mini' : ''} ${danger || red ? 'danger' : ''} ${clear ? 'clear' : ''} ${border ? 'border' : ''} ${disabled ? 'disabled' : ''}`}\n            // disabled={disabled} // causing pointer-events to not trigger \n            title={title}\n            // used with <form>\n            type={type}\n        >\n            { icon ? <div className=\"icon-button\">{ icon }</div> : null }\n            { children }\n            { iconAfter ? <div className=\"icon-button\">{ iconAfter }</div> : null }\n        </button>\n    )\n}\n\nexport default Button\n","import './Chart.scss';\n\nimport DonutChart from \"react-donut-chart\";\nimport { useState } from 'react';\n\nconst Chart = ({ data, size }) => {\n    const [hoveredItem, setHoveredItem] = useState({});\n\n    const colors = [\n        \"#AA6AFF\",\n        \"#80FFDB\",\n        \"#8088FF\",\n        \"#E680FF\",\n        \"#A5FF80\",\n        \"#E6FF80\",\n        \"#FFC480\",\n        \"#FF8080\",\n    ];\n    \n    const strokeColor = \"transparent\";\n    const innerRadius = 0.5;\n    const selectedOffset = 0.05;\n\n    const onMouseEnter = (item) => {\n        setHoveredItem(item.label);\n    };\n\n    const onClick = (item, toggled) => {\n        if (toggled) {\n            console.log(item);\n        }\n    };\n\n    const sortData = data => {\n        return data.sort((a, b) => b.value - a.value);\n    };\n\n    const getItemColor = index => {\n        const colorCount = colors.length - 1;\n        return index > colorCount ? colors[index - (colors.length * Math.trunc(index / colors.length))] : colors[index];\n    };\n\n    return (\n        <div className=\"chart\">\n            <DonutChart\n                className=\"donut\"\n                height={size}\n                width={size}\n                onMouseEnter={(item) => onMouseEnter(item)}\n                data={sortData(data)}\n                colors={colors}\n                startAngle={-90}\n                strokeColor={strokeColor}\n                innerRadius={innerRadius}\n                selectedOffset={selectedOffset}\n                legend={false}\n                onClick={(item, toggled) => onClick(item, toggled)}\n            />\n            <div className=\"legend\" style={{maxHeight: size}}>\n                {\n                    data.map((item, i) => (\n                        <div className={`item ${hoveredItem === item.label ? 'active' : ''}`} key={`item-${i}`}>\n                            <div className=\"color\" style={{backgroundColor: getItemColor(i)}}/>\n                            <label>{ item.label }</label>\n                            <div className=\"separator\"></div>\n                            <div className=\"percent\">\n                                { item.value }%\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default Chart;","import React, { forwardRef } from 'react';\nimport './Checkbox.scss'\n\nconst Checkbox = forwardRef((props, ref) => {\n    const inputElem =  (\n        <input type=\"checkbox\" checked={props.checked} required={props.required} onChange={props.onChange} ref={ref}/>\n    )\n\n    return props.label ? (<label className={`checkbox-container ${props.disabled ? 'disabled': ''}`}>\n        {inputElem}\n        <div className=\"checkbox-mark\"></div>\n        <div className=\"checkbox-label\">{props.label}</div>\n    </label>) : (<>\n        {inputElem}\n        <div className=\"checkbox-mark\"></div>\n    </>)\n})\n\nexport { Checkbox as default }","import { useEffect } from 'react';\n\nexport default function useOnClickOutside(ref, handler) {\n    useEffect(\n        () => {\n            const listener = (event) => {\n                if (!ref.current || ref.current.contains(event.target)) {\n                    return;\n                }\n                handler(event);\n            };\n            document.addEventListener(\"mousedown\", listener);\n            document.addEventListener(\"touchstart\", listener);\n                return () => {\n                    document.removeEventListener(\"mousedown\", listener);\n                    document.removeEventListener(\"touchstart\", listener);\n                };\n        },\n        [ref, handler]\n    );\n}","import './DropDown.scss'\n\nimport { useEffect, useRef, useState } from 'react';\nimport { BsChevronDown } from 'react-icons/bs'\nimport { CSSTransition } from 'react-transition-group';\nimport useOnClickOutside from '../../../helpers/onClickOutside';\n\nexport default function DropDown({ children, id, icon, className, title, badge, open, closeOnClick, onChange, onOpen, onClose, style }) {\n    const ref = useRef();\n    const transitionRef = useRef();\n    const [isMenuOpen, setMenuOpen] = useState(false);\n\n    useEffect(() => setMenuOpen(open), [open]);\n    useEffect(() => onChange && onChange(isMenuOpen), [onChange, isMenuOpen]);\n    useEffect(() => !isMenuOpen && onClose && onClose(), [isMenuOpen, onClose]);\n    useEffect(() => isMenuOpen && onOpen && onOpen(), [isMenuOpen, onOpen])\n    useOnClickOutside(ref, () => setMenuOpen(false));\n\n    return (\n        <div id={id} style={style} className={`dropdown ${className}`} ref={ref}>\n            <div className=\"content\" onClick={() => setMenuOpen(!isMenuOpen)}>\n                {\n                    icon ?\n                        <div className=\"icon\" style={{backgroundImage: `url(${icon})`}} />\n                        :\n                        null\n                }\n                <div className=\"title\">{ title }</div>\n                {\n                    badge ? \n                        <div className=\"badge\">\n                            { badge > 9 ? '9+' : badge }\n                        </div>\n                        :\n                        null\n                }\n                <div className=\"separator\"></div>\n                <div className={`handle ${isMenuOpen ? 'open' : ''}`}>\n                    <BsChevronDown size={20}></BsChevronDown>\n                </div>\n            </div>\n            <CSSTransition unmountOnExit in={isMenuOpen} timeout={200} classNames=\"fade\" nodeRef={transitionRef}>\n                <div className=\"menu\" ref={transitionRef} onClick={closeOnClick ? () => setMenuOpen(false) : null}>\n                    { children }\n                </div>\n            </CSSTransition>\n        </div>\n    )\n}","import './Loading.scss';\n\nimport { AiOutlineLoading } from 'react-icons/ai';\n\nconst Loading = () => {\n    return (\n        <div className=\"loading\">\n            <div className=\"icon\">\n                <AiOutlineLoading size={35}/>\n            </div>\n        </div>\n    );\n};\n\nexport default Loading;","import './Loading.scss';\n\nconst AmbireLoading = () => {\n    return (\n        <div className=\"ambire-loading-animation-128\">\n        </div>\n    );\n};\n\nexport default AmbireLoading;","import './Loading.scss';\n\nconst Skeleton = ({children}) => {\n    return (\n        <div className=\"Skeleton\">\n            <div className=\"\">\n                {children}\n            </div>\n        </div>\n    );\n};\n\nexport default Skeleton;","import './ToastProvider.scss';\n\nimport React, { createRef, useState, useCallback, useEffect } from \"react\";\nimport { MdOutlineClose } from 'react-icons/md';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\n\nconst ToastContext = React.createContext(null);\n\nlet id = 0\n\nconst ToastProvider = ({ children }) => {\n    const [toasts, setToasts] = useState([]);\n\n    const removeToast = useCallback(id => {\n        setToasts(toasts => toasts.filter(t => t.id !== id));\n    }, []);\n\n    const addToast = useCallback((content, options) => {\n        const defaultOptions = {\n            timeout: 8000,\n            error: false,\n            position: 'center',\n            sticky: false,\n            badge: null,\n            onClick: null,\n            url: null,\n        }\n\n        const toast = {\n            id: id++,\n            content,\n            ref: createRef(),\n            ...defaultOptions,\n            ...options\n        }\n        \n        setToasts(toasts => [\n            ...toasts,\n            toast\n        ]);\n\n        !toast.sticky && setTimeout(() => removeToast(toast.id), toast.timeout)\n\n        return toast.id;\n    }, [setToasts, removeToast]);\n\n    const updateToastsPositions = useCallback(() => {\n        toasts\n            .filter(({ sticky }) => !sticky)\n            .forEach(({ id, ref }) => {\n                const toastElement = ref.current\n                if (!toastElement) return\n\n                let bottomToasts = []\n                for (let i = id; i <= toasts[toasts.length - 1].id; i++) {\n                    const element = toasts.filter(({ sticky }) => !sticky).find(({ id }) => id === i)\n                    if (element) bottomToasts.push(element)\n                }\n\n                const style = getComputedStyle(toastElement)\n                const marginBottom = parseInt(style.marginBottom)\n\n                const x = (document.body.clientWidth / 2) - (toastElement.clientWidth / 2)\n                const y = bottomToasts.map(({ ref }) => ref.current && ref.current.offsetHeight).reduce((acc, curr) => acc + curr + marginBottom, 0)\n                toastElement.style.transform = `translate(${x}px, -${y}px)`\n            })\n    }, [toasts])\n\n    useEffect(() => updateToastsPositions(), [toasts, updateToastsPositions])\n    useEffect(() => {\n        const onResize = () => updateToastsPositions()\n        window.addEventListener('resize', onResize, false);\n        return () => window.removeEventListener('resize', onResize, false);\n    }, [updateToastsPositions])\n    \n    return (\n        <ToastContext.Provider\n            value={{\n                addToast,\n                removeToast\n            }}\n        >\n            <div id=\"toast-container\" className={!toasts.length ? 'hide' : ''}>\n                <TransitionGroup className=\"transition-group\">\n                {\n                    toasts.map(({ id, ref, url, error, sticky, badge, position, content, onClick }) => (\n                        <CSSTransition timeout={200} classNames=\"slide-fade\" key={id} nodeRef={ref}>\n                            <a href={url} target=\"_blank\" rel=\"noreferrer\">\n                                <div className={`toast ${error ? 'error' : ''} ${sticky ? 'sticky' : ''} ${position ? position : ''}`} ref={ref}>\n                                    <div className=\"inner\" onClick={() => onClick ? onClick() : removeToast(id)}>\n                                        { badge ? <div className=\"badge\">{ badge }</div> : null }\n                                        { content }\n                                    </div>\n                                    {\n                                        sticky ? \n                                            <div className=\"close\" onClick={() => removeToast(id)}>\n                                                <MdOutlineClose/>\n                                            </div>\n                                            :\n                                            null\n                                    }\n                                </div>\n                            </a>\n                        </CSSTransition>\n                    ))\n                }\n                </TransitionGroup>\n            </div>\n            { children }\n        </ToastContext.Provider>\n    );\n};\n\nexport { ToastContext };\nexport default ToastProvider;","import { useContext } from 'react';\nimport { ToastContext } from '../components/ToastProvider/ToastProvider';\n\nconst useToasts = () => {\n    return useContext(ToastContext);\n};\n\nexport { useToasts };","const networks = [{\n\t\tid: 'ethereum',\n\t\tchainId: 1,\n\t\trpc: 'https://mainnet.infura.io/v3/3d22938fd7dd41b7af4197752f83e8a1',\n\t\tnativeAssetSymbol: 'ETH',\n\t\tname: 'Ethereum',\n\t\ticon: '/resources/networks/ethereum.png',\n\t\texplorerUrl: 'https://etherscan.io'\n\t},  {\n\t\tid: 'polygon',\n\t\tchainId: 137,\n\t\trpc: 'https://polygon-rpc.com/rpc',\n\t\tnativeAssetSymbol: 'MATIC',\n\t\tname: 'Polygon',\n\t\ticon: '/resources/networks/polygon.png',\n\t\texplorerUrl: 'https://polygonscan.com'\n\t}, {\n\t\tid: 'avalanche',\n\t\tchainId: 43114,\n\t\trpc: 'https://api.avax.network/ext/bc/C/rpc',\n\t\tnativeAssetSymbol: 'AVAX',\n\t\tname: 'Avalanche',\n\t\ticon: '/resources/networks/avalanche.png',\n\t\texplorerUrl: 'https://snowtrace.io'\n\t}, {\n\t\t// to match the zapper ID\n\t\tid: 'binance-smart-chain',\n\t\tchainId: 56,\n\t\trpc: 'https://bsc-dataseed1.defibit.io',\n\t\tnativeAssetSymbol: 'BNB',\n\t\tname: 'Binance Smart Chain',\n\t\ticon: '/resources/networks/bsc.png',\n\t\texplorerUrl: 'https://bscscan.com'\n\t}/*, {\n\t\tid: 'arbitrum',\n\t\tchainId: 42161,\n\t\trpc: 'https://arb1.arbitrum.io/rpc',\n\t\tnativeAssetSymbol: 'AETH',\n\t\tname: 'Arbitrum',\n\t\ticon: '/resources/networks/arbitrum.svg',\n\t\texplorerUrl: 'https://arbiscan.io'\n}*/]\n\nexport default networks\n","export const RAMP_HOST_API_KEY = process.env.REACT_APP_RAMP_HOST_API_KEY;\nexport const PAYTRIE_PARTNER_URL = process.env.REACT_APP_PAYTRIE_PARTNER_URL;\nexport const TRANSAK_API_KEY = process.env.REACT_APP_TRANSAK_API_KEY;\nexport const TRANSAK_ENV = process.env.REACT_APP_TRANSAK_ENV;\nexport const ZAPPER_API_KEY = process.env.REACT_APP_ZAPPER_API_KEY;\nexport const ZAPPER_API_ENDPOINT = process.env.REACT_APP_ZAPPER_API_ENDPOINT;\nexport const SUSHI_SWAP_FRAME = process.env.REACT_APP_SUSHI_SWAP_FRAME_URL;\nexport const VELCRO_API_ENDPOINT = process.env.REACT_APP_VELCRO_API_ENDPOINT;","// List of all supported protocols by networks: https://api.zapper.fi/v1/protocols/balances/supported?api_key=5d1237c2-3840-4733-8e92-c5a58fe81b88\n\nconst suportedProtocols = [\n    {\n        network: 'ethereum',\n        protocols: ['1inch', 'aave-v2', 'alchemix', 'badger', 'balancer-v2', 'compound', 'cream', 'curve', 'sushiswap', 'uniswap-v2', 'uniswap-v3', 'nft'],\n        balancesProvider: 'velcro'\n    },\n    {\n        network: 'polygon',\n        protocols: ['aave-v2', 'quickswap', 'sushiswap'],\n        balancesProvider: 'velcro'\n    },\n    {\n        network: 'avalanche',\n        protocols: ['aave-v2'],\n        balancesProvider: 'velcro'\n    },\n    {\n        network: 'binance-smart-chain',\n        protocols: ['pancakeswap'],\n        balancesProvider: 'velcro'\n    }\n]\n\nexport default suportedProtocols\n","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { nativeToken, token } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.UniV2Router)\nconst recipientText = (recipient, txnFrom) => recipient.toLowerCase() === txnFrom.toLowerCase()\n  ? `` : ` and send it to ${recipient}`\nconst deadlineText = (deadlineSecs, mined) => {\n  if (mined) return ''\n  const minute = 60000\n  const deadline = deadlineSecs * 1000\n  const diff = deadline - Date.now()\n  if (diff < 0 && diff > -minute*2) return `, expired just now`\n  // Disabled this: this is a bit of a hack cause we don't want it to show for mined txns\n  // we don't really need it for pending ones, simply because we'll show the big error message instead\n  //if (diff < 0) return `, expired ${Math.floor(-diff / minute)} minutes ago`\n  if (diff < 0) return ''\n  if (diff < minute) return `, expires in less than a minute`\n  if (diff < 10*minute) return `, expires in ${Math.floor(diff / minute)} minutes`\n  return ''\n}\n\nconst uniV2Mapping = {\n  // ordered in the same order as the router\n  [iface.getSighash('swapExactTokensForTokens')]: (txn, network, opts = {}) => {\n    const [ amountIn, amountOutMin, path, to, deadline ] = iface.parseTransaction(txn).args\n    const outputAsset = path[path.length - 1]\n    return [`Swap ${token(path[0], amountIn)} for at least ${token(outputAsset, amountOutMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('swapTokensForExactTokens')]: (txn, network, opts = {}) => {\n    const [ amountOut, amountInMax, path, to, deadline ] = iface.parseTransaction(txn).args\n    const outputAsset = path[path.length - 1]\n    return [`Swap up to ${token(path[0], amountInMax)} for ${token(outputAsset, amountOut)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('swapExactETHForTokens')]: (txn, network, opts = {}) => {\n    const { args, value } = iface.parseTransaction(txn)\n    const [ amountOutMin, path, to, deadline ] = args\n    const outputAsset = path[path.length - 1]\n    return [`Swap ${nativeToken(network, value)} for at least ${token(outputAsset, amountOutMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('swapTokensForExactETH')]: (txn, network, opts = {}) => {\n    const [ amountOut, amountInMax, path, to, deadline ] = iface.parseTransaction(txn).args\n    return [`Swap up to ${token(path[0], amountInMax)} for ${nativeToken(network, amountOut)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('swapExactTokensForETH')]: (txn, network, opts = {}) => {\n    const [ amountIn, amountOutMin, path, to, deadline ] = iface.parseTransaction(txn).args\n    return [`Swap ${token(path[0], amountIn)} for at least ${nativeToken(network, amountOutMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('swapETHForExactTokens')]: (txn, network, opts = {}) => {\n    const { args, value } = iface.parseTransaction(txn)\n    const [ amountOut, path, to, deadline ] = args\n    const outputAsset = path[path.length - 1]\n    return [`Swap up to ${nativeToken(network, value)} for ${token(outputAsset, amountOut)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  // Liquidity\n  [iface.getSighash('addLiquidity')]: (txn, network, opts = {}) => {\n    const [tokenA, tokenB, amountADesired, amountBDesired, /*amountAMin*/, /*amountBMin*/, to, deadline] =  iface.parseTransaction(txn).args\n    return [`Add liquidity: ${token(tokenA, amountADesired)} and ${token(tokenB, amountBDesired)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('addLiquidityETH')]: (txn, network, opts = {}) => {\n    const { args, value } = iface.parseTransaction(txn)\n    const [token, amountTokenDesired, /*amountTokenMin*/, /*amountETHMin*/, to, deadline] = args\n    return [`Add liquidity: ${token(token, amountTokenDesired)} and ${nativeToken(network, value)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('removeLiquidity')]: (txn, network, opts = {}) => {\n    const [tokenA, tokenB, /*liquidity*/, amountAMin, amountBMin, to, deadline] =  iface.parseTransaction(txn).args\n    return [`Remove liquidity: at least ${token(tokenA, amountAMin)} and ${token(tokenB, amountBMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('removeLiquidityETH')]: (txn, network, opts = {}) => {\n    const [token, /*liquidity*/, amountTokenMin, amountETHMin, to, deadline] =  iface.parseTransaction(txn).args\n    return [`Remove liquidity: at least ${token(token, amountTokenMin)} and ${nativeToken(network, amountETHMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  // NOTE: We currently do not support *WithPermit functions cause they require an ecrecover signature\n  // Uniswap will detect we don't support it cause it will fail on requesting eth_signTypedData_v4\n}\n\nconst ifaceV3 = new Interface(abis.UniV3Router)\nconst parsePath = pathBytes => {\n    // some decodePacked fun\n    // can we do this with Ethers AbiCoder? probably not\n    let path = []\n    // address, uint24\n    for (let i = 2; i < pathBytes.length; i += 46) {\n      path.push('0x' + pathBytes.substr(i, 40))\n    }\n    return path\n}\n\nconst uniV3Mapping = {\n  [ifaceV3.getSighash('multicall')]: (txn, network) => {\n    const args = ifaceV3.parseTransaction(txn).args\n    const calls = args[args.length - 1]\n    // @TODO: Multicall that outputs ETH should be detected as such and displayed as one action\n    // the current verbosity of \"Swap ..., unwrap WETH to ETH\" will be a nice pedantic quirk\n    const parsed = calls.map(data => {\n      const sigHash = data.slice(0, 10)\n      const humanizer = uniV3Mapping[sigHash]\n      return humanizer ? humanizer({ ...txn, data }, network) : null\n    }).flat().filter(x => x)\n    return parsed.length ? parsed : [`Unknown Uni V3 interaction`]\n  },\n  // NOTE: selfPermit is not supported cause it requires an ecrecover signature\n  [ifaceV3.getSighash('exactInputSingle')]: (txn, network, opts = {}) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    // @TODO: consider fees\n    return [`Swap ${token(params.tokenIn, params.amountIn)} for at least ${token(params.tokenOut, params.amountOutMinimum)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline, opts.mined)}`]\n  },\n  [ifaceV3.getSighash('exactInput')]: (txn, network, opts = {}) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    const path = parsePath(params.path)\n    return [`Swap ${token(path[0], params.amountIn)} for at least ${token(path[path.length - 1], params.amountOutMinimum)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline, opts.mined)}`]\n  },\n  [ifaceV3.getSighash('exactOutputSingle')]: (txn, network, opts = {}) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    return [`Swap up to ${token(params.tokenIn, params.amountInMaximum)} for ${token(params.tokenOut, params.amountOut)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline, opts.mined)}`]\n  },\n  [ifaceV3.getSighash('exactOutput')]: (txn, network, opts = {}) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    const path = parsePath(params.path)\n    return [`Swap up to ${token(path[0], params.amountInMaximum)} for ${token(path[path.length - 1], params.amountOut)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline, opts.mined)}`]\n  },\n  [ifaceV3.getSighash('unwrapWETH9')]: (txn, network) => {\n    const [ amountMin, recipient ] = ifaceV3.parseTransaction(txn).args\n    return [`Unwrap at least ${nativeToken(network, amountMin)}${recipientText(recipient, txn.from)}`]\n  },\n}\n\nconst ifaceV32 = new Interface(abis.UniV3Router2)\nconst uniV32Mapping = {\n  [ifaceV32.getSighash('multicall(uint256,bytes[])')]: (txn, network, opts = {}) => {\n    const [deadline, calls] = ifaceV32.parseTransaction(txn).args\n    // @TODO: Multicall that outputs ETH should be detected as such and displayed as one action\n    // the current verbosity of \"Swap ..., unwrap WETH to ETH\" will be a nice pedantic quirk\n    const parsed = calls.map(data => {\n      const sigHash = data.slice(0, 10)\n      const humanizer = uniV32Mapping[sigHash]\n      return humanizer ? humanizer({ ...txn, data }, network) : null\n    }).flat().filter(x => x)\n    return (parsed.length ? parsed : [`Unknown Uni V3 interaction`])\n      // the .slice(2) is needed cause usuall this returns something like \", expires\"... and we concat all actions with \", \" anyway\n      .concat([deadlineText(deadline.toNumber(), opts.mined).slice(2)]).filter(x => x)\n  },\n  // NOTE: selfPermit is not supported cause it requires an ecrecover signature\n  [ifaceV32.getSighash('exactInputSingle')]: (txn, network) => {\n    const [ params ] = ifaceV32.parseTransaction(txn).args\n    // @TODO: consider fees\n    return [`Swap ${token(params.tokenIn, params.amountIn)} for at least ${token(params.tokenOut, params.amountOutMinimum)}${recipientText(params.recipient, txn.from)}`]\n  },\n  [ifaceV32.getSighash('exactInput')]: (txn, network) => {\n    const [ params ] = ifaceV32.parseTransaction(txn).args\n    const path = parsePath(params.path)\n    return [`Swap ${token(path[0], params.amountIn)} for at least ${token(path[path.length - 1], params.amountOutMinimum)}${recipientText(params.recipient, txn.from)}`]\n  },\n  [ifaceV32.getSighash('exactOutputSingle')]: (txn, network) => {\n    const [ params ] = ifaceV32.parseTransaction(txn).args\n    return [`Swap up to ${token(params.tokenIn, params.amountInMaximum)} for ${token(params.tokenOut, params.amountOut)}${recipientText(params.recipient, txn.from)}`]\n  },\n  [ifaceV32.getSighash('exactOutput')]: (txn, network) => {\n    const [ params ] = ifaceV32.parseTransaction(txn).args\n    const path = parsePath(params.path)\n    return [`Swap up to ${token(path[0], params.amountInMaximum)} for ${token(path[path.length - 1], params.amountOut)}${recipientText(params.recipient, txn.from)}}`]\n  },\n  [ifaceV32.getSighash('swapTokensForExactTokens')]: (txn, network) => {\n    // NOTE: is amountInMax set when dealing with ETH? it should be... cause value and max are not the same thing\n    const { amountOut, amountInMax, path, to } = ifaceV32.parseTransaction(txn).args\n    return [`Swap up to ${token(path[0], amountInMax)} for ${token(path[path.length - 1], amountOut)}${recipientText(to, txn.from)}}`]\n  },\n  [ifaceV32.getSighash('swapExactTokensForTokens')]: (txn, network) => {\n    // NOTE: is amountIn set when dealing with ETH?\n    const { amountIn, amountOutMin, path, to } = ifaceV32.parseTransaction(txn).args\n    return [`Swap ${token(path[0], amountIn)} for at least ${token(path[path.length - 1], amountOutMin)}${recipientText(to, txn.from)}`]\n  },\n  [ifaceV32.getSighash('unwrapWETH9(uint256)')]: (txn, network) => {\n    const [ amountMin ] = ifaceV32.parseTransaction(txn).args\n    return [`Unwrap at least ${nativeToken(network, amountMin)}`]\n  },\n  [ifaceV32.getSighash('unwrapWETH9(uint256,address)')]: (txn, network) => {\n    const [ amountMin, recipient ] = ifaceV32.parseTransaction(txn).args\n    return [`Unwrap at least ${nativeToken(network, amountMin)}${recipientText(recipient, txn.from)}`]\n  },\n}\n\n\nconst mapping = { ...uniV2Mapping, ...uniV3Mapping, ...uniV32Mapping }\nexport default mapping","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { token, getName } from '../humanReadableTransactions'\nimport { constants } from 'ethers'\n\nconst iface = new Interface(abis.ERC20)\n\nconst ERC20Mapping = {\n  [iface.getSighash('approve')]: (txn, network) => {\n    const [ approvedAddress, amount ] = iface.parseTransaction(txn).args\n    const name = getName(approvedAddress, network)\n    const tokenName = getName(txn.to, network)\n    if (amount.eq(0)) return [`Revoke approval for ${name} to use ${tokenName}`]\n    if (amount.eq(constants.MaxUint256)) return [`Approve ${name} to use your ${tokenName}`]\n    return [`Approve ${name} to use ${token(txn.to, amount)}`]\n  },\n  [iface.getSighash('transfer')]: (txn, network) => {\n    const [ to, amount ] = iface.parseTransaction(txn).args\n    const name = getName(to, network)\n    return [`Send ${token(txn.to, amount)} to ${to === name ? to : name+' ('+to+')'}`]\n  },\n  /*\n  // HACK: since this conflicts with ERC721 in terms of sigHash, but ERC721 is more likely to use this function from a user perspective, do not define this one\n  [iface.getSighash('transferFrom')]: (txn, network) => {\n    const [ from, to, amount ] = iface.parseTransaction(txn).args\n    return [`Send ${token(txn.to, amount)} from ${getName(from, network)} to ${getName(to, network)}`]\n  },*/\n}\nexport default ERC20Mapping\n","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { token } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.AaveLendingPoolV2)\nconst onBehalfText = (onBehalf, txnFrom) => onBehalf.toLowerCase() !== txnFrom.toLowerCase()\n  ? ' on behalf of '+onBehalf\n  : ''\n\nconst AaveMapping = {\n  [iface.getSighash('deposit')]: (txn, network) => {\n    const [ asset, amount, onBehalf ] = iface.parseTransaction(txn).args\n    return [`Deposit ${token(asset, amount)} to Aave lending pool${onBehalfText(onBehalf, txn.from)}`]\n  },\n  [iface.getSighash('withdraw')]: (txn, network) => {\n    const [ asset, amount, onBehalf ] = iface.parseTransaction(txn).args\n    return [`Withdraw ${token(asset, amount)} from Aave lending pool${onBehalfText(onBehalf, txn.from)}`]\n  },\n  [iface.getSighash('repay')]: (txn, network) => {\n    const [ asset, amount, onBehalf ] = iface.parseTransaction(txn).args\n    return [`Repay ${token(asset, amount)} to Aave lending pool${onBehalfText(onBehalf, txn.from)}`]\n  },\n  [iface.getSighash('borrow')]: (txn, network) => {\n    const [ asset, amount ] = iface.parseTransaction(txn).args\n    return [`Borrow ${token(asset, amount)} from Aave lending pool`]\n  },\n}\nexport default AaveMapping","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { getName } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.ERC721)\nconst fromText = (from, txnFrom) => from.toLowerCase() !== txnFrom.toLowerCase() ? ` from ${from}` : ''\n\nconst ERC721Mapping = {\n  [iface.getSighash('transferFrom')]: (txn, network) => {\n    const [ from, to, tokenId ] = iface.parseTransaction(txn).args\n    return [`Send token #${tokenId.toString(10)}${fromText(from, txn.from)} to ${getName(to, network)}`]\n  },\n  [iface.getSighash('safeTransferFrom(address,address,uint256)')]: (txn, network) => {\n    const [ from, to, tokenId ] = iface.parseTransaction(txn).args\n    return [`Send token #${tokenId.toString(10)}${fromText(from, txn.from)} to ${getName(to, network)}`]\n  }\n}\nexport default ERC721Mapping","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { nativeToken } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.WETH)\nconst WETHMapping = {\n  [iface.getSighash('deposit')]: (txn, network) => {\n    const { value } = iface.parseTransaction(txn)\n    return [`Wrap ${nativeToken(network, value)}`]\n  },\n  [iface.getSighash('withdraw')]: (txn, network) => {\n    const [ amount ] = iface.parseTransaction(txn).args\n    return [`Unwrap ${nativeToken(network, amount)}`]\n  },\n}\nexport default WETHMapping","const privilegesOptions = {\n  true: '0x0000000000000000000000000000000000000000000000000000000000000001',\n  false: '0x0000000000000000000000000000000000000000000000000000000000000000',\n}\nexport default privilegesOptions\n","import { Interface } from 'ethers/lib/utils'\nimport { getName } from '../humanReadableTransactions'\nimport accountPresets from '../../consts/accountPresets'\nimport privilegesOptions from '../../consts/privilegesOptions'\n\nconst iface = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\n\nconst IdentityMapping = {\n  [iface.getSighash('setAddrPrivilege')]: (txn, network) => {\n    const [ addr, privLevel ] = iface.parseTransaction(txn).args\n    const name = getName(addr, network)\n    const isQuickAccManager = addr.toLowerCase() === accountPresets.quickAccManager.toLowerCase()\n    if (privLevel === privilegesOptions.false) {\n      if (isQuickAccManager) return [`Revoke email/password access`]\n      else return [`Revoke access for signer ${name}`]\n    } else if (privLevel === privilegesOptions.true) {\n      if (isQuickAccManager) return [`INVALID PROCEDURE - DO NOT SIGN`]\n      return [`Authorize signer ${name}`]\n    } else {\n      if (isQuickAccManager) return [`Add a new email/password signer`]\n      return [`Set special authorization for ${name}`]\n    }\n  }\n}\nexport default IdentityMapping\n","import { Interface, getAddress, hexConcat } from 'ethers/lib/utils'\nimport { generateAddress2 } from 'ethereumjs-util'\n\n// the factory can be used for deploying contracts from Ambire\nconst iface = new Interface(require('adex-protocol-eth/abi/IdentityFactory'))\n\nconst FactoryMapping = {\n  [iface.getSighash('deploy')]: (txn, network) => {\n    const [ code, salt ] = iface.parseTransaction(txn).args\n    const addr = getAddress('0x' + generateAddress2(txn.to, hexConcat([salt]), code).toString('hex'))\n    return [`Deploy contract with address ${addr}`]\n  }\n}\nexport default FactoryMapping\n","import { abis, yearnVaults } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { token } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.YearnVault)\n\n// add 'y' prefix, eg '10 USDC' will become '10 yUSDC' to signify vault tokens\nconst addY = x => x.split(' ').map((x, i) => i === 1 ? 'y'+x : x).join(' ')\n\nconst YearnMapping = {\n  [iface.getSighash('deposit(uint256,address)')]: (txn, network) => {\n    const [ amount ] = iface.parseTransaction(txn).args\n    const vaultInfo = yearnVaults.find(x => x.addr === txn.to)\n    if (vaultInfo) return [`Deposit ${token(vaultInfo.baseToken, amount)} to Yearn`]\n    return [`Deposit ${amount} units to Yearn`]\n  },\n  [iface.getSighash('withdraw(uint256,address)')]: (txn, network) => {\n    const [ amount ] = iface.parseTransaction(txn).args\n    const vaultInfo = yearnVaults.find(x => x.addr === txn.to)\n    if (vaultInfo) return [`Withdraw ${addY(token(vaultInfo.baseToken, amount))} from Yearn`]\n    return [`Withdraw ${amount} units from Yearn`]\n  },\n}\nexport default YearnMapping","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { token } from '../humanReadableTransactions'\nimport networks from '../../consts/networks'\n\nconst MovrAnyswapInterface = new Interface(abis.MovrAnyswap)\nconst MovrRouterInterface = new Interface(abis.MovrRouter)\n\nconst getNetwork = chainId => networks.find(n => n.chainId === Number(chainId)).name\nconst formatNativeTokenAddress = address => address.toLowerCase() === `0x${'e'.repeat(40)}` ? `0x${'0'.repeat(40)}` : address.toLowerCase()\n\nconst MovrMapping = {\n  [MovrAnyswapInterface.getSighash('outboundTransferTo')]: (txn, network) => {\n    const { middlewareInputToken, amount, tokenToBridge, toChainId } = MovrAnyswapInterface.parseTransaction(txn).args[0]\n    return [`Transfer ${token(middlewareInputToken, amount)} to ${getNetwork(toChainId)} for ${token(tokenToBridge)}`]\n  },\n  [MovrRouterInterface.getSighash('outboundTransferTo')]: (txn, network) => {\n    const { middlewareRequest, amount, bridgeRequest, toChainId } = MovrRouterInterface.parseTransaction(txn).args[0]\n    const { inputToken } = middlewareRequest\n    const { inputToken: outputToken } = bridgeRequest\n    return [`Transfer ${token(formatNativeTokenAddress(inputToken), amount)} to ${getNetwork(toChainId)} for ${token(formatNativeTokenAddress(outputToken))}`]\n  },\n}\nexport default MovrMapping","import UniRouters from './UniRouters'\nimport ERC20 from './ERC20'\nimport AaveLendingPoolV2 from './AaveLendingPoolV2'\nimport ERC721 from './ERC721'\nimport WETH from './WETH'\nimport AmbireIdentity from './AmbireIdentity'\nimport AmbireFactory from './AmbireFactory'\nimport YearnVault from './YearnVault'\nimport Movr from './Movr'\n\nconst all = {\n\t...UniRouters,\n\t...AaveLendingPoolV2,\n\t...ERC20,\n\t...ERC721,\n\t...WETH,\n\t...AmbireIdentity,\n\t...AmbireFactory,\n\t...YearnVault,\n\t...Movr\n}\nexport default all","import { formatUnits } from 'ethers/lib/utils'\nimport { constants } from 'ethers'\nimport { names, tokens } from '../consts/humanizerInfo'\nimport networks from '../consts/networks'\nimport humanizers from './humanizers'\n\n// address (lwoercase) => name\nconst knownAliases = {}\n// address (lowercase) => [symbol, decimals]\nconst knownTokens = {}\n\nexport function getTransactionSummary(txn, networkId, accountAddr, opts = {}) {\n    const [to, value, data = '0x'] = txn\n    const network = networks.find(x => x.id === networkId || x.chainId === networkId)\n    if (!network) return 'Unknown network (unable to parse)'\n\n    if (to === '0x' || !to) {\n        return 'Deploy contract'\n    }\n\n    const tokenInfo = tokens[to.toLowerCase()]\n    const name = names[to.toLowerCase()]\n\n    if (data === '0x' && to.toLowerCase() === accountAddr.toLowerCase()) {\n        // Doesn't matter what the value is, this is always a no-op\n        return `Transaction cancellation`\n    }\n\n    let callSummary, sendSummary\n    if (parseInt(value) > 0) sendSummary = `send ${nativeToken(network, value)} to ${name || to}`\n    if (data !== '0x') {\n        callSummary = `Unknown interaction with ${name || (tokenInfo ? tokenInfo[0] : to)}`\n\n        const sigHash = data.slice(0, 10)\n        const humanizer = humanizers[sigHash]\n        if (humanizer) {\n            try {\n                const actions = humanizer({ to, value, data, from: accountAddr }, network, opts)\n                return actions.join(', ')\n            } catch (e) {\n                callSummary += ' (unable to parse)'\n                console.error('internal tx humanization error', e)\n            }\n        }\n    }\n    return [callSummary, sendSummary].filter(x => x).join(', ')\n}\n\n// Currently takes network because one day we may be seeing the same addresses used on different networks\nexport function getName(addr, network) {\n    const address = addr.toLowerCase()\n    if (knownAliases[address]) return knownAliases[address]\n    return names[address] || (tokens[address] ? tokens[address][0] + ' token' : null) || addr\n}\n\nexport function token(addr, amount) {\n    const address = addr.toLowerCase()\n    const assetInfo = tokens[address] || knownTokens[address]\n    if (assetInfo) {\n        if (!amount) return assetInfo[0]\n        if (constants.MaxUint256.eq(amount)) return `maximum ${assetInfo[0]}`\n        return `${formatUnits(amount, assetInfo[1])} ${assetInfo[0]}`\n    } else {\n        return `${formatUnits(amount, 0)} units of unknown token`\n    }\n}\n\nexport function nativeToken(network, amount) {\n    // All EVM chains use a 18 decimal native asset\n    if (network) {\n        return `${formatUnits(amount, 18)} ${network.nativeAssetSymbol}`\n    } else {\n        return `${formatUnits(amount, 18)} unknown native token`\n    }\n}\n\nexport function setKnownAddresses(addrs) {\n    addrs.forEach(({ address, name }) => knownAliases[address.toLowerCase()] = name)\n}\n\nexport function setKnownTokens(tokens) {\n    tokens.forEach(({ address, symbol, decimals }) => knownTokens[address.toLowerCase()] = [symbol, decimals])\n}\n\nexport function isKnown(txn, from) {\n    if (txn[0] === from) return true\n    const address = txn[0].toLowerCase()\n    return !!(knownAliases[address] || names[address] || tokens[address] || knownTokens[address])\n}\n\n// @TODO\n// export function getMethodName(txn)","import { ethers, getDefaultProvider } from 'ethers'\nimport networks from '../consts/networks'\nimport oracle from 'adex-protocol-eth/abi/RemainingBalancesOracle.json'\nimport tokenList from '../consts/tokenList.json'\n\nconst { Interface, AbiCoder, formatUnits, hexlify, isAddress } = ethers.utils\nconst RemainingBalancesOracle = new Interface(oracle)\nconst SPOOFER = '0x0000000000000000000000000000000000000001'\nconst blockTag = 'pending'\nconst remainingBalancesOracleAddr = '0xF1628de74193Dde3Eed716aB0Ef31Ca2b6347eB1'\n\nasync function getTokenListBalance ({walletAddr, tokens, network, updateBalance}) {\n  let result = await call({ walletAddr, tokens, network })\n  if (result.success) {\n    const newBalance = tokens.map(t => {\n      const newTokenBalance = result.data.filter(r => r.address === t.address && parseFloat(r.balance) > 0)[0]\n      return (newTokenBalance ? {\n        type: \"base\",\n        network: network,\n        address: newTokenBalance.address,\n        decimals: newTokenBalance.decimals,\n        symbol: newTokenBalance.symbol,\n        price: newTokenBalance.price || 0,\n        balance: Number(newTokenBalance.balance),\n        balanceRaw: newTokenBalance.balanceRaw,\n        updateAt: (new Date()).toString(),\n        balanceUSD: Number(parseFloat(newTokenBalance.price * newTokenBalance.balance || 0).toFixed(2)),\n        tokenImageUrl: newTokenBalance.tokenImageUrl || `https://storage.googleapis.com/zapper-fi-assets/tokens/${network}/${newTokenBalance.address}.png`\n      } : t)\n    }).filter (t => t && t.balance && parseFloat(t.balance) > 0)\n    if (updateBalance && typeof updateBalance === 'function') updateBalance(newBalance)\n    return newBalance\n  } else {\n    console.error(result.message, result.data)\n    return tokens\n  }\n}\n\n//ToDo check for missing data and double check for incompleted returns\nasync function call ({ walletAddr, tokens, network }) {\n  if (!isAddress(walletAddr)) return {success: false, data: walletAddr, message:`Wallet address is not valide eth address`}\n  const provider = getDefaultProvider(networks.filter(n => n.id===network)[0]?.rpc || null)\n  const coder = new AbiCoder()\n  const args = [\n    // identityFactoryAddr\n    '0xBf07a0Df119Ca234634588fbDb5625594E2a5BCA',\n    // bytecode dummy.sol\n    '0x6080604052348015600f57600080fd5b50604880601d6000396000f3fe6080604052348015600f57600080fd5b5000fea2646970667358221220face6a0e4f251ee8ded32eb829598230ad218691166fa0a46bc85583c202c60c64736f6c634300080a0033',\n    // salt\n    '0x0000000000000000000000000000000000000000000000000000000000000001',\n    // txns\n    [['0x0000000000000000000000000000000000000000', '0x0', '0x0000000000000000000000000000000000000000']],\n    '0x000000000000000000000000000000000000000000000000000000000000000000',\n    walletAddr,\n    tokens.map(x => x.address)\n  ]\n  const txParams = {\n    from: SPOOFER,\n    to: remainingBalancesOracleAddr,\n    data: RemainingBalancesOracle.encodeFunctionData('getRemainingBalances', args)\n  }\n  try {\n    const callResult = await provider.call(txParams, blockTag)\n    if (isErr(callResult)) return { success: false, data: tokens, message: `probably one ot following tokens is not ERC20 and missing balanceOf()` } //hex2a(callResult)\n    const balances = coder.decode(['uint[]'], callResult)[0]\n    const result = tokens.map((x, i) => ({ ...x, balanceRaw: balances[i].toString(), balance: parseFloat(formatUnits(balances[i], x.decimals)).toFixed(10) }))\n    return { success: true, data: result }\n  } catch(e){\n    return { success: false, data: tokens, message: `probably one ot following tokens is not ERC20 and missing balanceOf()` }\n  }\n}\n\n// Signature of Error(string)\nconst ERROR_SIG = '0x08c379a0'\n// Signature of Panic(uint256)\nconst PANIC_SIG = '0x4e487b71'\n\nfunction isErr (hex) {\n\treturn hex.startsWith(ERROR_SIG) || hex.startsWith(PANIC_SIG)\n}\n\nasync function getErrMsg (provider, txParams, blockTag) {\n\t// .call always returisErrns a hex string with ethers\n\ttry {\n\t\t// uncomment if you need HEVM debugging\n\t\t// console.log(`hevm exec --caller ${txParams.from} --address ${txParams.to} --calldata ${txParams.data} --gas 1000000 --debug --rpc ${provider.connection.rpc} ${!isNaN(blockTag) && blockTag ? '--block '+blockTag : ''}`)\n\t\tconst returnData = await provider.call(txParams, blockTag)\n    if (returnData.startsWith(PANIC_SIG)) return returnData.slice(10)\n\t\treturn returnData.startsWith(ERROR_SIG)\n\t\t\t? (new AbiCoder()).decode(['string'], '0x' + returnData.slice(10))[0]\n\t\t\t: returnData\n\t} catch (e) {\n\t\t// weird infura case\n\t\tif (e.code === 'UNPREDICTABLE_GAS_LIMIT' && e.error) return e.error.message.slice(20)\n\t\tif (e.code === 'CALL_EXCEPTION') return 'no error string, possibly insufficient amount or wrong SmartWallet sig'\n\t\tif (e.code === 'INVALID_ARGUMENT') return `unable to deserialize: ${hexlify(e.value)}`\n\t\tthrow e\n\t}\n}\n\nfunction checkTokenList (list) {\n  return list.filter(t => {\n    return isAddress(t.address)\n  })\n}\n\nexport {\n    call,\n    tokenList,\n    getErrMsg,\n    checkTokenList,\n    getTokenListBalance\n}","import { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { ZAPPER_API_KEY } from '../config';\nimport { fetchGet } from '../lib/fetch';\nimport { ZAPPER_API_ENDPOINT } from '../config'\nimport supportedProtocols from '../consts/supportedProtocols';\nimport { useToasts } from '../hooks/toasts'\nimport { setKnownAddresses, setKnownTokens } from '../lib/humanReadableTransactions';\nimport { VELCRO_API_ENDPOINT } from '../config'\nimport { getTokenListBalance, tokenList, checkTokenList } from '../lib/balanceOracle'\n\nconst getBalances = (apiKey, network, protocol, address, provider) => fetchGet(`${provider === 'velcro' ? VELCRO_API_ENDPOINT : ZAPPER_API_ENDPOINT}/protocols/${protocol}/balances?addresses[]=${address}&network=${network}&api_key=${apiKey}&newBalances=true`)\n\nlet hidden, visibilityChange;\nif (typeof document.hidden !== 'undefined') {\n    hidden = 'hidden';\n    visibilityChange = 'visibilitychange';\n} else if (typeof document.msHidden !== 'undefined') {\n    hidden = 'msHidden';\n    visibilityChange = 'msvisibilitychange';\n} else if (typeof document.webkitHidden !== 'undefined') {\n    hidden = 'webkitHidden';\n    visibilityChange = 'webkitvisibilitychange';\n}\nlet lastOtherProcolsRefresh = null\n\n//use Balance Oracle\nasync function supplementTokensDataFromNetwork({ walletAddr, network, tokensData, extraTokens, updateBalance }) {\n    if (!walletAddr || walletAddr===\"\" || !network || !network === \"\" ) return []\n    if (!tokensData || !tokensData[0]) tokensData = checkTokenList(tokensData || []) //tokensData check and populate for test if undefind\n    if (!extraTokens || !extraTokens[0]) extraTokens = checkTokenList(extraTokens || [])  //extraTokens check and populate for test if undefind\n  \n    //concat predefind token list with extraTokens list (extraTokens must be ERC20)\n    let tokens = [ ...new Set(tokenList[network] ? tokenList[network].concat(extraTokens) : [].concat(extraTokens))].map (t => {\n      return tokensData.filter(td => td.address === t.address)[0] || t\n    })\n  \n    let from = 0; let calls = []\n    for (let i = 1; i <= Math.ceil(tokens.length / 50); i++) {\n    calls.push(tokens.slice(from, (i * 50)))\n        from += 50\n    }\n    // tokensData separated calls prevent errors from non erc20 tokens\n    tokensData.filter(td => {\n      return !tokens.some(t => t.address === td.address)\n    }).forEach(t => calls.push([t]))\n  \n    const tokenBalances = [].concat(...await Promise.all(calls.map(callTokens => {\n          return getTokenListBalance({walletAddr, tokens: callTokens, network, updateBalance})\n      })))\n    return tokenBalances\n  }\n  \n  \nexport default function usePortfolio({ currentNetwork, account }) {\n    const { addToast } = useToasts()\n\n    const currentAccount = useRef();\n    const [isBalanceLoading, setBalanceLoading] = useState(true);\n    const [areProtocolsLoading, setProtocolsLoading] = useState(true);\n\n    const [tokensByNetworks, setTokensByNetworks] = useState([])\n    const [otherProtocolsByNetworks, setOtherProtocolsByNetworks] = useState([])\n\n    const [balance, setBalance] = useState({\n        total: {\n            full: 0,\n            truncated: 0,\n            decimals: '00'\n        },\n        tokens: []\n    });\n    const [otherBalances, setOtherBalances] = useState([]);\n    const [tokens, setTokens] = useState([]);\n    const [protocols, setProtocols] = useState([]);\n    const [collectibles, setCollectibles] = useState([]);\n    const [extraTokens, setExtraTokens] = useState(() => {\n        const storedExtraTokens = localStorage.extraTokens\n        return storedExtraTokens ? JSON.parse(storedExtraTokens) : []\n    });\n\n    const getExtraTokensAssets = useCallback((account, network) => extraTokens\n        .filter(extra => extra.account === account && extra.network === network)\n        .map(extraToken => ({\n            ...extraToken,\n            type: 'base',\n            price: 0,\n            balanceUSD: 0,\n            isExtraToken: true\n        }))\n    , [extraTokens])\n\n    const fetchTokens = useCallback(async (account, currentNetwork = false) => {\n        try {\n            const networks = currentNetwork ? [supportedProtocols.find(({ network }) => network === currentNetwork)] : supportedProtocols\n\n            let failedRequests = 0\n            const requestsCount = networks.length\n\n            const updatedTokens = (await Promise.all(networks.map(async ({ network, balancesProvider }) => {\n                try {\n                    const balance = await getBalances(ZAPPER_API_KEY, network, 'tokens', account, balancesProvider)\n                    if (!balance) return null\n\n                    const { meta, products } = Object.values(balance)[0]\n\n                    const extraTokensAssets = getExtraTokensAssets(account, network) // Add user added extra token to handle\n                    const assets = [\n                        ...products.map(({ assets }) => assets.map(({ tokens }) => tokens)).flat(2),\n                        ...extraTokensAssets\n                    ]\n\n                    return {\n                        network,\n                        meta,\n                        assets\n                    }\n                } catch(e) {\n                    console.error('Balances API error', e)\n                    failedRequests++\n                }\n            }))).filter(data => data)\n            const updatedNetworks = updatedTokens.map(({ network }) => network)\n\n            // Prevent race conditions\n            if (currentAccount.current !== account) return\n\n            setTokensByNetworks(tokensByNetworks => ([\n                ...tokensByNetworks.filter(({ network }) => !updatedNetworks.includes(network)),\n                ...updatedTokens\n            ]))\n\n            if (failedRequests >= requestsCount) throw new Error('Failed to fetch Tokens from API')\n            return true\n        } catch (error) {\n            console.error(error)\n            addToast(error.message, { error: true })\n            return false\n        }\n    }, [getExtraTokensAssets, addToast])\n\n    const fetchOtherProtocols = useCallback(async (account, currentNetwork = false) => {\n        try {\n            const protocols = currentNetwork ? [supportedProtocols.find(({ network }) => network === currentNetwork)] : supportedProtocols\n\n            let failedRequests = 0\n            const requestsCount = protocols.reduce((acc, curr) => curr.protocols.length + acc, 0)\n\n            const updatedProtocols = (await Promise.all(protocols.map(async ({ network, protocols }) => {\n                const all = (await Promise.all(protocols.map(async protocol => {\n                    try {\n                        const balance = await getBalances(ZAPPER_API_KEY, network, protocol, account)\n                        return balance ? Object.values(balance)[0] : null\n                    } catch(e) {\n                        console.error('Balances API error', e)\n                        failedRequests++\n                    }\n                }))).filter(data => data).flat()\n\n                return all.length ? {\n                    network,\n                    protocols: all.map(({ products }) => products.map(({ label, assets }) => ({ label, assets: assets.map(({ tokens }) => tokens).flat(1) }))).flat(2)\n                } : null\n            }))).filter(data => data)\n            const updatedNetworks = updatedProtocols.map(({ network }) => network)\n\n            // Prevent race conditions\n            if (currentAccount.current !== account) return\n\n            setOtherProtocolsByNetworks(protocolsByNetworks => ([\n                ...protocolsByNetworks.filter(({ network }) => !updatedNetworks.includes(network)),\n                ...updatedProtocols\n            ]))\n            \n            lastOtherProcolsRefresh = Date.now()\n\n            if (failedRequests >= requestsCount) throw new Error('Failed to fetch other Protocols from API')\n            return true\n        } catch (error) {\n            console.error(error)\n            addToast(error.message, { error: true })\n            return false\n        }\n    }, [addToast])\n\n    const refreshTokensIfVisible = useCallback(() => {\n        if (!account) return\n        if (!document[hidden] && !isBalanceLoading) fetchTokens(account, currentNetwork)\n    }, [isBalanceLoading, account, fetchTokens, currentNetwork])\n\n    const requestOtherProtocolsRefresh = async () => {\n        if (!account) return\n        if ((Date.now() - lastOtherProcolsRefresh) > 30000 && !areProtocolsLoading) await fetchOtherProtocols(account, currentNetwork)\n    }\n\n    // Make humanizer 'learn' about new tokens and aliases\n    const updateHumanizerData = tokensByNetworks => {\n        const tokensList = Object.values(tokensByNetworks).map(({ assets }) => assets).flat(1)\n        const knownAliases = tokensList.map(({ address, symbol }) => ({ address, name: symbol}))\n        setKnownAddresses(knownAliases)\n        setKnownTokens(tokensList)\n    }\n\n    const onAddExtraToken = extraToken => {\n        const { address, name, symbol } = extraToken\n        if (extraTokens.map(({ address }) => address).includes(address)) return addToast(`${name} (${symbol}) is already added to your wallet.`)\n        if (Object.values(tokenList).flat(1).map(({ address }) => address).includes(address)) return addToast(`${name} (${symbol}) is already handled by your wallet.`)\n        if (tokens.map(({ address }) => address).includes(address)) return addToast(`You already have ${name} (${symbol}) in your wallet.`)\n\n        const updatedExtraTokens = [\n            ...extraTokens,\n            {\n                ...extraToken,\n                coingeckoId: null\n            }\n        ]\n\n        localStorage.extraTokens = JSON.stringify(updatedExtraTokens)\n        setExtraTokens(updatedExtraTokens)\n        addToast(`${name} (${symbol}) token added to your wallet!`)\n    }\n\n    // Fetch balances and protocols on account change\n    useEffect(() => {\n        currentAccount.current = account\n\n        async function loadBalance() {\n            if (!account) return\n            setBalanceLoading(true)\n            if (await fetchTokens(account)) setBalanceLoading(false)\n        }\n\n        async function loadProtocols() {\n            if (!account) return\n            setProtocolsLoading(true)\n            if (await fetchOtherProtocols(account)) setProtocolsLoading(false)\n        }\n\n        loadBalance()\n        loadProtocols()\n    }, [account, fetchTokens, fetchOtherProtocols])\n\n    // Update states on network, tokens and ohterProtocols change\n    useEffect(() => {\n        try {\n            const tokens = tokensByNetworks.find(({ network }) => network === currentNetwork)\n            if (tokens) setTokens(tokens.assets)\n\n            const balanceByNetworks = tokensByNetworks.map(({ network, meta, assets }) => {\n                const totalUSD = assets.reduce((acc, curr) => acc + curr.balanceUSD, 0)\n                const balanceUSD = totalUSD + meta.find(({ label }) => label === 'Debt')?.value\n                if (!balanceUSD) return {\n                    network,\n                    total: {\n                        full: 0,\n                        truncated: 0,\n                        decimals: '00'\n                    }\n                }\n\n                const [truncated, decimals] = Number(balanceUSD.toString()).toFixed(2).split('.')\n                return {\n                    network,\n                    total: {\n                        full: balanceUSD,\n                        truncated: Number(truncated).toLocaleString('en-US'),\n                        decimals\n                    }\n                }\n            })\n\n            const balance = balanceByNetworks.find(({ network }) => network === currentNetwork)\n            if (balance) {\n                setBalance(balance)\n                setOtherBalances(balanceByNetworks.filter(({ network }) => network !== currentNetwork))\n            }\n\n            updateHumanizerData(tokensByNetworks)\n\n            const otherProtocols = otherProtocolsByNetworks.find(({ network }) => network === currentNetwork)\n            if (tokens && otherProtocols) {\n                setProtocols([\n                    {\n                        label: 'Tokens',\n                        assets: tokens.assets\n                    },\n                    ...otherProtocols.protocols.filter(({ label }) => label !== 'NFTs')\n                ])\n                setCollectibles(otherProtocols.protocols.find(({ label }) => label === 'NFTs')?.assets || [])\n            }\n        } catch(e) {\n            console.error(e);\n            addToast(e.message | e, { error: true })\n        }\n    }, [currentNetwork, tokensByNetworks, otherProtocolsByNetworks, addToast])\n\n    // Refresh tokens on network change\n    useEffect(() => {\n        refreshTokensIfVisible()\n    }, [currentNetwork, refreshTokensIfVisible])\n\n    // Refresh balance every 90s if visible\n    useEffect(() => {\n        const refreshInterval = setInterval(refreshTokensIfVisible, 90000)\n        return () => clearInterval(refreshInterval)\n    }, [refreshTokensIfVisible])\n\n    // Refresh balance every 150s if hidden\n    useEffect(() => {\n        const refreshIfHidden = () => document[hidden] && !isBalanceLoading ? fetchTokens(account, currentNetwork) : null\n        const refreshInterval = setInterval(refreshIfHidden, 150000)\n        return () => clearInterval(refreshInterval)\n    }, [account, currentNetwork, isBalanceLoading, fetchTokens])\n\n    // Get supplement tokens data every 20s\n    useEffect(() => {\n        const getSupplementTokenData = async () => {\n            const currentNetworkTokens = tokensByNetworks.find(({ network }) => network === currentNetwork)\n            if (!currentNetworkTokens) return\n\n            const extraTokensAssets = getExtraTokensAssets(account, currentNetwork)\n            const rcpTokenData = await supplementTokensDataFromNetwork({\n                walletAddr: account,\n                network: currentNetwork,\n                tokensData: currentNetworkTokens.assets.filter(({ isExtraToken }) => !isExtraToken), // Filter out extraTokens\n                extraTokens: extraTokensAssets\n            })\n\n            currentNetworkTokens.assets = rcpTokenData\n\n            // Update stored extraTokens with new rpc data\n            try {\n                const storedExtraTokens = JSON.parse(localStorage.extraTokens || '[]') || []\n                const updatedExtraTokens = rcpTokenData.map(updated => {\n                    const extraToken = storedExtraTokens.find(extra => extra.address === updated.address && extra.network === updated.network && extra.account === account)\n                    if (!extraToken) return null\n                    return {\n                        ...extraToken,\n                        ...updated\n                    }\n                }).filter(updated => updated)\n\n                localStorage.extraTokens = JSON.stringify(updatedExtraTokens)\n            } catch(e) {\n                console.error(e)\n            }\n\n            setTokensByNetworks([\n                ...tokensByNetworks.filter(({ network }) => network !== currentNetwork),\n                currentNetworkTokens\n            ])\n        }\n        const refreshInterval = setInterval(getSupplementTokenData, 20000)\n        return () => clearInterval(refreshInterval)\n    }, [account, currentNetwork, isBalanceLoading, fetchTokens, tokensByNetworks, extraTokens, getExtraTokensAssets])\n\n    // Refresh balance when window is focused\n    useEffect(() => {\n        document.addEventListener(visibilityChange, refreshTokensIfVisible, false);\n        return () => document.removeEventListener(visibilityChange, refreshTokensIfVisible, false);\n    }, [refreshTokensIfVisible])\n\n    return {\n        isBalanceLoading,\n        areProtocolsLoading,\n        balance,\n        otherBalances,\n        tokens,\n        protocols,\n        collectibles,\n        requestOtherProtocolsRefresh,\n        onAddExtraToken\n        //updatePortfolio//TODO find a non dirty way to be able to reply to getSafeBalances from the dapps, after the first refresh\n    }\n}\n","export function isFirefox() {\n  return typeof (navigator) !== 'undefined' && navigator.userAgent.toLowerCase().includes('firefox')\n}\n","import { useCallback, useEffect, useReducer, useRef } from 'react'\nimport { useToasts } from '../hooks/toasts'\nimport { isFirefox } from '../lib/isFirefox'\n\nimport WalletConnectCore from '@walletconnect/core'\nimport * as cryptoLib from '@walletconnect/iso-crypto'\n\nconst noop = () => null\nconst noopSessionStorage = { setSession: noop, getSession: noop, removeSession: noop }\n\nconst STORAGE_KEY = 'wc1_state'\nconst SUPPORTED_METHODS = ['eth_sendTransaction', 'gs_multi_send', 'personal_sign', 'eth_sign']\nconst SESSION_TIMEOUT = 10000\n\nconst getDefaultState = () => ({ connections: [], requests: [] })\n\nlet connectors = {}\n\nexport default function useWalletConnect ({ account, chainId, initialUri }) {\n    const { addToast } = useToasts()\n\n    // This is needed cause of the WalletConnect event handlers\n    const stateRef = useRef()\n    stateRef.current = { account, chainId }\n\n    const [state, dispatch] = useReducer((state, action) => {\n        if (action.type === 'updateConnections') return { ...state, connections: action.connections }\n        if (action.type === 'connectedNewSession') {\n            return {\n                ...state,\n                connections: [...state.connections, { uri: action.uri, session: action.session }]\n            }\n        }\n        if (action.type === 'disconnected') {\n            return {\n                ...state,\n                connections: state.connections.filter(x => x.uri !== action.uri)\n            }\n        }\n        if (action.type === 'requestAdded') {\n            if (state.requests.find(({ id }) => id === action.request.id)) return { ...state }\n            return { ...state, requests: [...state.requests, action.request] }\n        }\n        if (action.type === 'requestsResolved') {\n            return {\n                ...state,\n                requests: state.requests.filter(x => !action.ids.includes(x.id))\n            }\n        }\n        if (action.type === 'connectionError') {\n            return {\n                ...state,\n                connections: state\n                    .connections\n                    .map(c => c.uri === action.uri ?\n                        {\n                            ...c, session: {\n                                ...c.session,\n                                errors:\n                                    [\n                                        ...(c.session.errors || [])\n                                            .slice(Math.max((c.session.errors || []).length - 420, 0)),\n                                        action.error\n                                    ]\n                            }\n                        }\n                        : c)\n            }\n        }\n        return { ...state }\n    }, null, () => {\n        const json = localStorage[STORAGE_KEY]\n        if (!json) return getDefaultState()\n        try {\n            return {\n                ...getDefaultState(),\n                ...JSON.parse(json)\n            }\n        } catch(e) {\n            console.error(e)\n            return getDefaultState()\n        }\n    })\n\n    const connect = useCallback(connectorOpts => {\n        if (connectors[connectorOpts.uri]) {\n            addToast('dApp already connected')\n            return connectors[connectorOpts.uri]\n        }\n        let connector\n        try {\n            connector = connectors[connectorOpts.uri] = new WalletConnectCore({\n                connectorOpts,\n                cryptoLib,\n                sessionStorage: noopSessionStorage\n            })\n        } catch(e) {\n            console.error(e)\n            addToast(`Unable to connect to ${connectorOpts.uri}: ${e.message}`, { error: true })\n            return null\n        }\n\n        const onError = err => {\n            addToast(`WalletConnect error: ${(connector.session && connector.session.peerMeta && connector.session.peerMeta.name)} ${err.message || err}`, { error: true })\n            console.error('WalletConnect error', err)\n        }\n\n        let sessionStart\n        let sessionTimeout\n        if (!connector.session.peerMeta) sessionTimeout = setTimeout(() => {\n            const suggestion = /https:\\/\\/bridge.walletconnect.org/g.test(connector.session.bridge)\n                // @TODO: 'or try an alternative connection method' when we implement one\n                ? 'this dApp is using an old version of WalletConnect - please tell them to upgrade!'\n                : 'perhaps the link has expired? Refresh the dApp and try again.'\n            if (!connector.session.peerMeta) addToast(`Unable to get session from dApp - ${suggestion}`, { error: true })\n        }, SESSION_TIMEOUT)\n\n        connector.on('session_request', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n\n            sessionStart = Date.now()\n            clearTimeout(sessionTimeout)\n\n            connector.approveSession({\n                accounts: [stateRef.current.account],\n                chainId: stateRef.current.chainId,\n            })\n            // It's safe to read .session right after approveSession because 1) approveSession itself normally stores the session itself\n            // 2) connector.session is a getter that re-reads private properties of the connector; those properties are updated immediately at approveSession\n            dispatch({ type: 'connectedNewSession', uri: connectorOpts.uri, session: connector.session })\n\n            addToast('Successfully connected to '+connector.session.peerMeta.name)\n        })\n\n        connector.on('transport_error', (error, payload) => {\n            console.error('transport_error', error, payload)\n            dispatch({ type: 'connectionError', uri: connectorOpts.uri, error: { event: payload.event, time: Date.now() } })\n        })\n\n        connector.on('call_request', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n            // @TODO: refactor into wcRequestHandler\n            // Opensea \"unlock currency\" hack; they use a stupid MetaTransactions system built into WETH on Polygon\n            // There's no point of this because the user has to sign it separately as a tx anyway; but more importantly,\n            // it breaks Ambire and other smart wallets cause it relies on ecrecover and does not depend on EIP1271\n            if (payload.method === 'eth_signTypedData') {\n                // @TODO: try/catch the JSON parse?\n                const signPayload = JSON.parse(payload.params[1])\n                if (signPayload.primaryType === 'MetaTransaction') {\n                    payload = {\n                        ...payload,\n                        method: 'eth_sendTransaction',\n                        params: [{\n                            to: signPayload.domain.verifyingContract,\n                            from: signPayload.message.from,\n                            data: signPayload.message.functionSignature, // @TODO || data?\n                            value: signPayload.message.value || '0x0'\n                        }]\n                    }\n                }\n            }\n            if (!SUPPORTED_METHODS.includes(payload.method)) {\n                const isUniIgnorable = payload.method === 'eth_signTypedData_v4'\n                    && connector.session.peerMeta\n                    && connector.session.peerMeta.name.includes('Uniswap')\n                // @TODO: if the dapp is in a \"allow list\" of dApps that have fallbacks, ignore certain messages\n                // eg uni has a fallback for eth_signTypedData_v4\n                if (!isUniIgnorable) addToast(`dApp requested unsupported method: ${payload.method}`, { error: true })\n                connector.rejectRequest({ id: payload.id, error: { message: 'METHOD_NOT_SUPPORTED' }})\n                return\n            }\n            const wrongAcc = (\n                payload.method === 'eth_sendTransaction' && payload.params[0] && payload.params[0].from\n                && payload.params[0].from.toLowerCase() !== connector.session.accounts[0].toLowerCase()\n            ) || (\n                payload.method === 'eth_sign' && payload.params[1]\n                && payload.params[1].toLowerCase() !== connector.session.accounts[0].toLowerCase()\n            )\n            if (wrongAcc) {\n                addToast(`dApp sent a request for the wrong account: ${payload.params[0].from}`, { error: true })\n                connector.rejectRequest({ id: payload.id, error: { message: 'Sent a request for the wrong account' }})\n                return\n            }\n            dispatch({ type: 'requestAdded', request: {\n                id: payload.id,\n                type: payload.method,\n                wcUri: connectorOpts.uri,\n                txn: payload.method === 'eth_sign' ? payload.params[1] : payload.params[0],\n                chainId: connector.session.chainId,\n                account: connector.session.accounts[0],\n                notification: true\n            } })\n        })\n\n        connector.on('disconnect', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n\n            clearTimeout(sessionTimeout)\n            // NOTE the dispatch() will cause double rerender when we trigger a disconnect,\n            // cause we will call it once on disconnect() and once when the event arrives\n            // we can prevent this by checking if (!connectors[...]) but we'd rather stay safe and ensure\n            // the connection is removed\n            dispatch({ type: 'disconnected', uri: connectorOpts.uri })\n            connectors[connectorOpts.uri] = null\n\n            // NOTE: this event might be invoked 2 times when the dApp itself disconnects\n            // currently we don't dedupe that\n            if (sessionStart && (Date.now() - sessionStart) < SESSION_TIMEOUT) {\n                addToast('dApp disconnected immediately - perhaps it does not support the current network?', { error: true })\n            } else {\n                addToast(`${connector.session.peerMeta.name} disconnected: ${payload.params[0].message}`)\n            }\n        })\n\n        connector.on('error', onError)\n\n        return connector\n    }, [addToast])\n\n    const disconnect = useCallback(uri => {\n        // connector might not be there, either cause we disconnected before,\n        // or cause we failed to connect in the first place\n        if (connectors[uri]) {\n            connectors[uri].killSession()\n            connectors[uri] = null\n        }\n        dispatch({ type: 'disconnected', uri })\n    }, [])\n\n    const resolveMany = (ids, resolution) => {\n        state.requests.forEach(({ id, wcUri }) => {\n            if (ids.includes(id)) {\n                const connector = connectors[wcUri]\n                if (!connector) return\n                if (resolution.success) connector.approveRequest({ id, result: resolution.result })\n                else connector.rejectRequest({ id, error: { message: resolution.message } })\n            }\n        })\n        dispatch({ type: 'requestsResolved', ids })\n    }\n\n    // Side effects on init\n    useEffect(() => {\n        state.connections.forEach(({ uri, session }) => {\n            if (!connectors[uri]) connect({ uri, session })\n        })\n    // we specifically want to run this only once despite depending on state\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [connect])\n\n    // Side effects that will run on every state change/rerender\n    useEffect(() => {\n        // restore connectors and update the ones that are stale\n        let updateConnections = false\n        state.connections.forEach(({ uri, session }) => {\n            if (connectors[uri]) {\n                const connector = connectors[uri]\n                const session = connector.session\n                if (session.accounts[0] !== account || session.chainId !== chainId) {\n                    connector.updateSession({ accounts: [account], chainId })\n                    updateConnections = true\n                }\n            }\n        })\n\n        localStorage[STORAGE_KEY] = JSON.stringify(state)\n\n        if (updateConnections) dispatch({\n            type: 'updateConnections',\n            connections: state.connections\n                .filter(({ uri }) => connectors[uri])\n                .map(({ uri }) => ({ uri, session: connectors[uri].session }))\n        })\n    }, [state, account, chainId, connect])\n\n    // Initialization effects\n    useEffect(() => runInitEffects(connect, account, initialUri, addToast), [connect, account, initialUri, addToast])\n\n    return {\n        connections: state.connections,\n        requests: state.requests,\n        resolveMany,\n        connect, disconnect\n    }\n}\n\n// Initialization side effects\n// Connect to the URL, read from clipboard, etc.\nfunction runInitEffects(wcConnect, account, initialUri, addToast) {\n    if (initialUri) {\n        if (account) wcConnect({ uri: initialUri })\n        else addToast('WalletConnect dApp connection request detected, please create an account and you will be connected to the dApp.', { timeout: 15000 })\n    }\n\n    // hax\n    window.wcConnect = uri => wcConnect({ uri })\n\n    // @TODO on focus and on user action\n    const clipboardError = e => console.log('non-fatal clipboard/walletconnect err:', e.message)\n    const tryReadClipboard = async () => {\n        if (!account) return\n        if (isFirefox()) return\n        try {\n            const clipboard = await navigator.clipboard.readText()\n            if (clipboard.startsWith('wc:') && !connectors[clipboard]) wcConnect({ uri: clipboard })\n        } catch(e) { clipboardError(e) }\n    }\n\n    tryReadClipboard()\n    window.addEventListener('focus', tryReadClipboard)\n    return () => window.removeEventListener('focus', tryReadClipboard)\n}\n","import { useEffect, useCallback, useState, useRef } from 'react'\nimport { fetchCaught } from '../lib/fetch'\n\n// 250ms after we've triggered a load of another URL, we will clear the data\n//  so that the component that uses this hook cann display the loading spinner\nconst RESET_DATA_AFTER = 250\n\nexport default function useRelayerData(url) {\n  const [isLoading, setLoading] = useState(true)\n  const [data, setData] = useState(null)\n  const [err, setErr] = useState(null)\n  const prevUrl = useRef('')\n\n  const updateData = useCallback(async () => {\n    const { resp, body, errMsg } = await fetchCaught(url)\n\n    if (resp && resp.status === 200) {\n      return body\n    } else {\n      console.log('relayerData error', { resp, body, errMsg })\n      throw new Error(errMsg || `status code ${resp && resp.status}`)\n    }\n  }, [url])\n\n  useEffect(() => {\n    if (!url) return\n\n    // Data reset: if some time passes before we load the next piece of data, and the URL is different,\n    // we will reset the data so that the UI knows to display a loading indicator\n    let resetDataTimer = null\n    const stripQuery = x => x.split('?')[0]\n    if (stripQuery(prevUrl.current) !== stripQuery(url)) {\n      resetDataTimer = setTimeout(() => setData(null), RESET_DATA_AFTER)\n    }\n    prevUrl.current = url\n\n    let unloaded = false\n    setLoading(true)\n    setErr(null)\n    updateData()\n      .then(data => !unloaded && prevUrl.current === url && setData(data))\n      .catch(e => !unloaded && setErr(e.message || e))\n      .then(() => {\n        clearTimeout(resetDataTimer)\n        !unloaded && setLoading(false)\n      })\n    return () => {\n      unloaded = true\n      clearTimeout(resetDataTimer)\n    }\n  }, [url, updateData])\n\n  return { data, isLoading, errMsg: err }\n}\n","import { useCallback, useEffect, useMemo, useState } from 'react'\nimport { useToasts } from './toasts'\nimport * as blockies from 'blockies-ts'\nimport { isValidAddress, isKnownTokenOrContract } from '../helpers/address'\nimport { setKnownAddresses } from '../lib/humanReadableTransactions'\n\nconst accountType = ({ email, signerExtra }) => {\n    const walletType = signerExtra && signerExtra.type === 'ledger' ? 'Ledger' : signerExtra && signerExtra.type === 'trezor' ? 'Trezor' : 'Web3'\n    return email ? `Ambire account for ${email}` : `Ambire account (${walletType})`\n}\nconst toIcon = seed => blockies.create({ seed }).toDataURL()\n\nconst useAddressBook = ({ accounts }) => {\n    const { addToast } = useToasts()\n\n    const addressList = useMemo(() => {\n        try {\n            const addresses = JSON.parse(localStorage.addresses || '[]')\n            if (!Array.isArray(addresses)) throw new Error('Address Book: incorrect format')\n            return [\n                ...accounts.map(account => ({\n                    isAccount: true,\n                    name: accountType(account),\n                    address: account.id,\n                    icon: toIcon(account.id)\n                })),\n                ...addresses.map(entry => ({\n                    ...entry,\n                    icon: toIcon(entry.address)\n                }))\n            ]\n        } catch (e) {\n            console.error('Address Book parsing failure', e)\n            return []\n        }\n    }, [accounts])\n\n    const [addresses, setAddresses] = useState(() => addressList)\n\n    const updateAddresses = addresses => {\n        setAddresses(addresses.map(entry => ({\n            ...entry,\n            icon: toIcon(entry.address)\n        })))\n        localStorage.addresses = JSON.stringify(addresses.filter(({ isAccount }) => !isAccount))\n    }\n\n    const isKnownAddress = useCallback(address => [\n        ...addresses.map(({ address }) => address),\n        ...accounts.map(({ id }) => id)\n    ].includes(address), [addresses, accounts])\n\n    const addAddress = useCallback((name, address) => {\n        if (!name || !address) throw new Error('Address Book: invalid arguments supplied')\n        if (!isValidAddress(address)) throw new Error('Address Book: invalid address format')\n        if (isKnownTokenOrContract(address)) return addToast('The address you\\'re trying to add is a smart contract.', { error: true })\n\n        const newAddresses = [\n            ...addresses,\n            {\n                name,\n                address\n            }\n        ]\n\n        updateAddresses(newAddresses)\n\n        addToast(`${address} added to your Address Book.`)\n    }, [addresses, addToast])\n\n    const removeAddress = useCallback((name, address) => {\n        if (!name || !address) throw new Error('Address Book: invalid arguments supplied')\n        if (!isValidAddress(address)) throw new Error('Address Book: invalid address format')\n\n        const newAddresses = addresses\n            .filter(a => !(a.name === name && a.address === address))\n\n        updateAddresses(newAddresses)\n\n        addToast(`${address} removed from your Address Book.`)\n    }, [addresses, addToast])\n\n    useEffect(() => { setAddresses(addressList) }, [accounts, addressList])\n\n    // a bit of a 'cheat': update the humanizer with the latest known addresses\n    // this is breaking the react patterns cause the humanizer has a 'global' state, but that's fine since it simply constantly learns new addr aliases,\n    // so there's no 'inconsistent state' there, the more the better\n    useEffect(() => setKnownAddresses(addresses), [addresses])\n\n    return {\n        addresses,\n        addAddress,\n        removeAddress,\n        isKnownAddress\n    }\n}\n\nexport default useAddressBook","import { useEffect, useCallback, useMemo } from 'react'\nimport { useLocation } from \"react-router-dom\";\nimport { useToasts} from './toasts'\n\nlet documentTitle = document.title\nlet flashingTitleInterval = null\nlet stickyIds = []\n\nconst showFlashingTitle = () => {\n    let count = 0\n    clearInterval(flashingTitleInterval)\n    flashingTitleInterval = setInterval(() => {\n        document.title = (count % 2 === 0 ? '⚠️' : '🔥') + ' PENDING SIGNING REQUEST'\n        count++\n    }, 500)\n}\n\nconst removeFlashingTitle = () => {\n    clearInterval(flashingTitleInterval)\n    document.title = documentTitle\n}\n\nconst useAttentionGrabber = ({ eligibleRequests, isSendTxnShowing, onSitckyClick }) => {\n    const location = useLocation()\n    const { addToast, removeToast } = useToasts()\n\n    const removeStickyToasts = useCallback(() => stickyIds.forEach(id => removeToast(id)), [removeToast])\n    const isRouteWallet = useMemo(() => location.pathname.startsWith('/wallet'), [location.pathname])\n    \n    useEffect(() => {\n        if (eligibleRequests.length && isRouteWallet) {\n            if (isSendTxnShowing) removeStickyToasts()\n            else {\n                stickyIds.push(addToast('Transactions waiting to be signed', {\n                    position: 'right',\n                    sticky: true,\n                    badge: eligibleRequests.length,\n                    onClick: () => onSitckyClick()\n                }))\n            }\n\n            !(window.Notification && Notification.permission !== 'denied') ? showFlashingTitle() : removeFlashingTitle()\n        } else {\n            removeStickyToasts()\n            removeFlashingTitle()\n        }\n\n        return () => clearInterval(flashingTitleInterval)\n    }, [removeStickyToasts, eligibleRequests, isSendTxnShowing, onSitckyClick, addToast, removeToast, isRouteWallet])\n}\n\nexport default useAttentionGrabber\n\n","import { createContext, useCallback, useState } from 'react'\nimport './ModalProvider.scss'\n\nconst ModalContext = createContext(null)\n\nconst ModalProvider = ({ children }) => {\n    const [modal, setModal] = useState(null)\n    \n    const showModal = useCallback((element, opts = { disableClose: false }) => setModal({element, opts}), [])\n    const hideModal = useCallback(() => setModal(null), [])\n    \n    return (\n        <ModalContext.Provider value={{ showModal, hideModal }}>\n            { \n                modal ? \n                    <div id=\"modal-container\">\n                        <div className=\"backdrop\" onClick={modal.opts.disableClose ? null : hideModal }></div>\n                        { modal.element }\n                    </div>\n                    :\n                    null\n            }\n            { children }\n        </ModalContext.Provider>\n    )\n}\n\nexport { ModalContext }\nexport default ModalProvider","import { useContext } from 'react'\nimport { ModalContext } from '../components/ModalProvider/ModalProvider'\n\nconst useModals = () => useContext(ModalContext)\nexport default useModals","import { useEffect, useState } from 'react'\nimport { isFirefox } from '../lib/isFirefox'\n\nconst onPermissionChange = async (name, listener) => {\n    try {\n        const status = await navigator.permissions.query({ name })\n        status.onchange = () => listener(status.state === 'granted')\n        return status.state === 'granted'\n    } catch(e) {\n        console.error(e);\n        return false\n    }\n}\n\nconst usePermissions = () => {\n    const [arePermissionsLoaded, setPermissionsLoaded] = useState(false)\n    const [isClipboardGranted, setClipboardGranted] = useState(false)\n    const [isNoticationsGranted, setNotificationsGranted] = useState(false)\n    const [modalHidden, setModalHidden] = useState(() => localStorage.permissionsModalHidden === 'true')\n\n    const checkForPermissions = async () => {\n\tif (isFirefox()) {\n\t\tsetClipboardGranted(false)\n\t} else {\n\t\tconst clipboardState = await onPermissionChange('clipboard-read', state => setClipboardGranted(state))\n\t\tsetClipboardGranted(clipboardState)\n\t}\n\n        const notificationsState = await onPermissionChange('notifications', state => setNotificationsGranted(state))\n        setNotificationsGranted(notificationsState)\n\n        setPermissionsLoaded(true)\n    }\n\n    useEffect(() => localStorage.permissionsModalHidden = modalHidden, [modalHidden])\n    useEffect(() => checkForPermissions(), [])\n\n    return {\n        isClipboardGranted,\n        isNoticationsGranted,\n        arePermissionsLoaded,\n        modalHidden,\n        setModalHidden\n    }\n}\n\nexport default usePermissions\n","import './Modal.scss'\n\nimport { MdClose } from 'react-icons/md'\nimport { useModals } from '../../../hooks'\n\nconst Modal = ({ children, id, title, buttons, isCloseBtnShown = true, onClose }) => {\n    const { hideModal } = useModals()\n\n    const onCloseModal = () => {\n        hideModal()\n        onClose && onClose()\n    }\n\n    return (\n        <div id={id} className={`modal ${buttons ? 'buttons' : ''}`}>\n            <div className=\"heading\">\n                <div className=\"title\">{ title }</div>\n                {isCloseBtnShown ? (<div className=\"close\" onClick={onCloseModal}>\n                    <MdClose/>\n                </div>) : <></>}\n            </div>\n            <div className=\"content\">{ children }</div>\n            { buttons ? \n                <div className=\"buttons\">{ buttons }</div>\n            : null}\n        </div>\n    )\n}\n\nexport default Modal\n","import './Radios.scss'\n\nimport { useState } from 'react'\n\nconst Radios = ({ radios, defaultValue, onChange }) => {\n    const [currentValue, setCurrentValue] = useState(defaultValue || null)\n\n    const onSelect = value => {\n        setCurrentValue(value)\n        onChange && onChange(value)\n    }\n\n    return (\n        <div className=\"radios-container\">\n            {\n                radios.map(({label, value, disabled }, i) => (\n                    <div className={`radio-container ${value === currentValue ? 'active' : ''} ${disabled ? 'disabled' : ''}`} key={`radio-${i}`} onClick={() => !disabled && onSelect(value)}>\n                        <div className=\"radio\"></div>\n                        <label>{ label }</label>\n                    </div>\n                ))\n            }\n        </div>\n    )\n}\n\nexport default Radios","import { useCallback, useEffect, useState } from 'react'\nimport './Segments.scss'\n\nconst Segments = ({ small, defaultValue, segments, onChange }) => {\n    const [value, setValue] = useState(defaultValue);\n\n    const setSegment = useCallback(value => {\n        setValue(value)\n        onChange(value)\n    }, [onChange])\n\n    useEffect(() => {\n        setSegment(defaultValue)\n    }, [defaultValue, setSegment])\n\n    return (\n        <div className={`segments ${small ? 'small': ''}`}>\n            {\n                segments.map(segment => (\n                    <div className={`segment ${segment.value === value ? 'active' : ''}`} key={segment.value} onClick={() => setSegment(segment.value)}>\n                        {\n                            segment.icon ?\n                                <div className=\"icon\">{ segment.icon }</div>\n                                :\n                                null\n                        }\n                        { segment.value }\n                    </div>\n                ))\n            }\n        </div>\n    )\n}\n\nexport default Segments","import './Select.scss';\n\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { BsChevronDown } from 'react-icons/bs'\nimport { CSSTransition } from 'react-transition-group';\nimport useOnClickOutside from '../../../helpers/onClickOutside';\nimport { TextInput } from '..';\nimport { MdOutlineClose } from 'react-icons/md';\n\nconst Select = ({ children, native, monospace, searchable, disabled, label, defaultValue, items, onChange }) => {\n    const ref = useRef();\n    const hiddenTextInput = useRef();\n    const transitionRef = useRef();\n    const [isOpen, setOpen] = useState();\n    const [search, setSearch] = useState('');\n    const [selectedItem, setSelectedItem] = useState({\n        label: null,\n        value: null,\n        icon: null,\n    });\n\n    const filteredItems = search.length ? items.filter(({ label }) => label.toLowerCase().includes(search.toLowerCase())) : items\n\n    const selectItem = useCallback(item => {\n        setSearch('')\n        setSelectedItem(item);\n        onChange(item.value);\n    }, [onChange])\n\n    useEffect(() => {\n        if (items.length) selectItem(items.find(item => item.value === defaultValue) || items[0])\n        else setSelectedItem({})\n    }, [defaultValue, items, selectItem]);\n\n    useEffect(() => {\n        if (isOpen && searchable) {\n            hiddenTextInput.current.focus()\n            setSearch('')\n        }\n    }, [isOpen, searchable])\n\n    useOnClickOutside(ref, () => setOpen(false));\n\n    return (\n        !native ? \n            <div className={`select ${monospace ? 'monospace': ''} ${disabled ? 'disabled' : ''}`} ref={ref}>\n                {\n                    searchable ? \n                        <TextInput\n                            className={`search-input ${search.length ? 'visible': ''}`}\n                            disabled={disabled}\n                            value={search}\n                            ref={hiddenTextInput}\n                            buttonLabel={<MdOutlineClose/>}\n                            onInput={value => setSearch(value)}\n                            onButtonClick={() => setSearch('')}\n                        />\n                        :\n                        null\n                }\n                {\n                    label ? \n                        <label>{ label }</label>\n                        :\n                        null\n                }\n                {\n                    selectedItem ? \n                        <div className=\"input\" onClick={() => setOpen(!isOpen)}>\n                            { selectedItem.icon ? <div className=\"icon\" style={{backgroundImage: `url(${selectedItem.icon})`}}/> : null }\n                            <div className=\"label\">{ selectedItem.label || selectedItem.value }</div>\n                            <div className=\"separator\"></div>\n                            <div className={`handle ${isOpen ? 'open' : ''}`}>\n                                <BsChevronDown size={20}></BsChevronDown>\n                            </div>\n                            {\n                                <CSSTransition unmountOnExit in={isOpen} timeout={200} classNames=\"fade\" nodeRef={transitionRef}>\n                                    <div className=\"list\" ref={transitionRef}>\n                                        {\n                                            filteredItems.map(item => (\n                                                <div className={`option ${item.value === selectedItem.value ? 'active' : ''}`} key={item.value} onClick={() => selectItem(item)}>\n                                                    { item.icon ? <div className=\"icon\" style={{backgroundImage: `url(${item.icon})`}}/> : null }\n                                                    <div className=\"label\">{ item.label || item.value }</div>\n                                                </div>\n                                            ))\n                                        }\n                                        { children }\n                                    </div>\n                                </CSSTransition>\n                            }\n                        </div>\n                        :\n                        null\n                }\n            </div>\n            :\n            <select className=\"select\" disabled={disabled} onChange={ev => onChange(ev.target.value)} defaultValue={defaultValue}>\n                {\n                    items.map(item => (\n                        <option key={item.value} value={item.value}>\n                            { item.label || item.value }\n                        </option>\n                    ))\n                }\n            </select>\n    );\n};\n\nexport default Select;","import './TextInput.scss'\n\nimport { forwardRef } from 'react';\nimport { MdContentCopy } from 'react-icons/md';\nimport { useToasts } from '../../../hooks/toasts';\n\nconst TextInput = forwardRef(({ value, className, title, pattern, autoComplete, required, minLength, maxLength, placeholder, info, label, buttonLabel, password, disabled, copy, small, onInput, onChange, onButtonClick, style }, ref) => {\n    const { addToast } = useToasts();\n\n    const onClick = async () => {\n        await navigator.clipboard.writeText(value);\n        addToast(\"Copied to clipboard!\");\n    };\n\n    return (\n        <div className={`text-input ${copy ? 'copy' : ''} ${small ? 'small' : ''} ${className}`}>\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"text-input-container\" onClick={copy ? onClick : null}>\n                <input\n                    value={value}\n                    title={title}\n                    pattern={pattern}\n                    autoComplete={autoComplete}\n                    required={required}\n                    minLength={minLength}\n                    maxLength={maxLength}\n                    type={password ? 'password' : 'text'}\n                    placeholder={placeholder}\n                    disabled={copy || disabled}\n                    onInput={ev => onInput && onInput(ev.target.value)}\n                    onChange={ev => onChange && onChange(ev.target.value)}\n                    ref={ref}\n                    style={style}\n                />\n                {\n                    copy ?\n                        <div className=\"button\">\n                            <MdContentCopy size={20}/>\n                        </div>\n                        :\n                        null\n                }\n                {\n                    buttonLabel ?\n                        <div className=\"button\" onClick={onButtonClick}>\n                            { buttonLabel }\n                        </div>\n                        :\n                        null\n                }\n            </div>\n            {\n                info ?\n                    <div className=\"info\">\n                        { info }\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n})\n\nexport default TextInput","import './NumberInput.scss'\n\nconst NumberInput = ({ disabled, precision, label, value, button, onButtonClick, onInput }) => {\n    const onInputValue = ({ target }) => {\n        if (!onInput) return\n        if (!target.value.length) return onInput('')\n\n        const afterDecimals = target.value.split('.')[1] \n        if (afterDecimals && afterDecimals.length > precision) return\n\n        const isIntOrFloat = /^[0-9]+\\.{0,1}[0-9]*$/g.test(target.value)\n        isIntOrFloat && onInput(target.value)\n    }\n\n    return (\n        <div className={`number-input ${disabled ? 'disabled' : ''}`}>\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"input\">\n                <input\n                    type=\"text\"\n                    disabled={disabled}\n                    value={value}\n                    onInput={onInputValue}\n                />\n                {\n                    button ?\n                        <div className=\"button\" onClick={onButtonClick}>\n                            { button }\n                        </div>\n                        :\n                        null\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default NumberInput","import './PasswordInput.scss'\n\nimport { forwardRef, useState } from 'react'\nimport { MdOutlineRemoveRedEye, MdRemoveRedEye } from 'react-icons/md'\n\nconst PasswordInput = forwardRef(({ label, placeholder, autoComplete, peakPassword, disabled, value, onInput, onChange }, ref) => {\n    const [showPassword, setShowPassword] = useState()\n\n    return (\n        <div className=\"password-input\">\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"input-container\">\n                <input\n                    value={value}\n                    autoComplete={autoComplete}\n                    type={!showPassword ? 'password' : 'text'}\n                    placeholder={placeholder}\n                    disabled={disabled}\n                    onInput={ev => onInput && onInput(ev.target.value)}\n                    onChange={ev => onChange && onChange(ev.target.value)}\n                    ref={ref}\n                />\n                {\n                    peakPassword ?\n                        !showPassword ?\n                            <div className=\"button\" onClick={() => setShowPassword(true)}>\n                                <MdOutlineRemoveRedEye size={20}/>\n                            </div>\n                            :\n                            <div className=\"button\" onClick={() => setShowPassword(false)}>\n                                <MdRemoveRedEye size={20}/>\n                            </div>\n                        :\n                        null\n                }\n            </div>\n        </div>\n    )\n})\n\nexport default PasswordInput","import './Toggle.scss'\n\nconst Toggle = ({ defaultChecked, checked, onChange }) => {\n    return (\n        <label className=\"toggle\">\n            <input type=\"checkbox\" defaultChecked={defaultChecked} checked={checked} onChange={onChange}/>\n            <span className=\"slider\"></span>\n        </label>\n    )\n}\n\nexport default Toggle","import { useState } from 'react';\nimport './ToolTip.scss'\n\nconst ToolTip = ({ children, label, className }) => {\n    const [mousePosition, setMousePosition] = useState({ x: 0, y: 0})\n\n    const margin = 15\n    const onMouseMove = ({ clientY, clientX }) => setMousePosition({ x: clientX + margin, y: clientY + margin })\n\n    return (\n        <div className={`tooltip ${className ? className : ''}`} onMouseMove={onMouseMove}>\n            { children }\n            <label style={{top: mousePosition.y, left: mousePosition.x}}>{ label }</label>\n        </div>\n    )\n}\n\nexport default ToolTip","import './NoFundsPlaceholder.scss'\n\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { NavLink } from 'react-router-dom'\nimport { Button } from '..'\n\nconst NoFundsPlaceholder = () => {\n    return (\n        <div id=\"no-funds-placeholder\">\n            <label>You don't have any funds on this account.</label>\n            <NavLink to=\"/wallet/deposit\">\n                <Button small icon={<GiReceiveMoney/>}>Deposit</Button>\n            </NavLink>\n        </div>\n    )\n}\n\nexport default NoFundsPlaceholder","import { useState, useRef } from 'react'\nimport accountPresets from '../../consts/accountPresets'\nimport { Checkbox } from \"../common\"\n\nexport default function LoginOrSignupForm({ action = 'LOGIN', onAccRequest, inProgress }) {\n    const passConfirmInput = useRef(null)\n    const [state, setState] = useState({\n      email: '', passphrase: '', passphraseConfirm: '', action\n    })\n    const onSubmit = e => {\n      e.preventDefault()\n      onAccRequest({\n        action: state.action,\n        accType: 'QUICK',\n        email: state.email,\n        passphrase: state.passphrase,\n        backupOptout: state.backupOptout,\n      })\n    }\n    const onUpdate = updates => {\n      const newState = { ...state, ...updates }\n      setState(newState)\n      const shouldValidate = newState.action === 'SIGNUP'\n      const invalid = shouldValidate && (\n        newState.passphrase !== newState.passphraseConfirm\n      )\n      // @TODO translation string\n      if (passConfirmInput.current) {\n          passConfirmInput.current.setCustomValidity(invalid ? 'Passwords must match' : '')\n      }\n    }\n    const minPwdLen = 8\n    const isSignup = state.action === 'SIGNUP'\n    const days = Math.ceil(accountPresets.quickAccTimelock / 86400)\n    const noBackupDisclaimer = `I understand I will have to manually import/export this account in order to use it on other devices, and if I lose the backup I will have to wait ${days} days to recover the account.`\n    const additionalOnSignup = state.backupOptout ? (\n      <Checkbox label={noBackupDisclaimer} required={true}></Checkbox>\n    ) : (<></>)\n    const Link = ({ href, children }) => (<a href={href} target='_blank' rel='noreferrer' onClick={e => e.stopPropagation()}>{children}</a>)\n    const additionalInputs = isSignup ?\n      (<>\n        <input\n          type=\"password\"\n          required\n          minLength={minPwdLen}\n          placeholder=\"Password\"\n          value={state.passphrase}\n          onChange={e => onUpdate({ passphrase: e.target.value })}\n        ></input>\n        <input\n          ref={passConfirmInput}\n          required\n          minLength={minPwdLen}\n          type=\"password\"\n          placeholder=\"Confirm password\"\n          value={state.passphraseConfirm}\n          onChange={e => onUpdate({ passphraseConfirm: e.target.value })}></input>\n        <Checkbox\n          label={<>I agree to the <Link href='https://www.ambire.com/Ambire%20ToS%20and%20PP%20(26%20November%202021).pdf'>Terms of Service and Privacy policy</Link>.</>}\n          required={true}\n        ></Checkbox>\n        <Checkbox\n          label={<>Backup on <Link href='https://help.ambire.com/hc/en-us/articles/4410892186002-What-is-Ambire-Cloud-'>Ambire Cloud</Link>.</>}\n          checked={!state.backupOptout}\n          onChange={e => onUpdate({ backupOptout: !e.target.checked })}\n        ></Checkbox>\n        {additionalOnSignup}\n      </>) : (<></>)\n\n    return (\n      <form onSubmit={onSubmit}>\n        <input type=\"email\" required placeholder=\"Email\" value={state.email} onChange={e => onUpdate({ email: e.target.value })}></input>\n        {\n          // Trick the password manager into putting in the email\n          !isSignup ? (<input type=\"password\" style={{ display: \"none\" }}></input>): (<></>)\n        }\n        {additionalInputs}\n        <input type=\"submit\" disabled={inProgress} value={isSignup ?\n          (inProgress ? \"Signing up...\" : \"Sign up\")\n          : (inProgress ? \"Logging in...\" : \"Log in\")}></input>\n      </form>\n    )\n}\n","import './EmailLogin.scss'\n\nimport { useState, useEffect } from 'react'\nimport { MdEmail } from 'react-icons/md'\n\nimport { fetch, fetchCaught } from '../../lib/fetch'\n\nimport LoginOrSignup from '../LoginOrSignupForm/LoginOrSignupForm'\n\n// NOTE: the same polling that we do here with the setEffect should be used for txns\n// that require email confirmation\nexport default function EmailLogin({ relayerURL, onAddAccount }) {\n    const [requiresEmailConfFor, setRequiresConfFor] = useState(null)\n    const [err, setErr] = useState('')\n    const [inProgress, setInProgress] = useState(false)\n  \n    const EMAIL_VERIFICATION_RECHECK = 3000\n  \n    const attemptLogin = async ({ email, passphrase }, ignoreEmailConfirmationRequired) => {\n      // try by-email first: if this returns data we can just move on to decrypting\n      // does not matter which network we request\n      const { resp, body, errMsg } = await fetchCaught(`${relayerURL}/identity/by-email/${encodeURIComponent(email)}`, { headers: {\n          authorization: localStorage.loginSessionKey ? `Bearer ${localStorage.loginSessionKey}` : null\n      } })\n      if (errMsg) {\n        setErr(errMsg)\n        return\n      }\n    \n      if (resp.status === 401 && body.errType === 'UNAUTHORIZED') {\n        if (ignoreEmailConfirmationRequired) {\n          // we still have to call this to make sure the state is consistent and to force a re-render (to trigger the effect again)\n          setRequiresConfFor({ email, passphrase })\n          return\n        }\n        const requestAuthResp = await fetch(`${relayerURL}/identity/by-email/${encodeURIComponent(email)}/request-confirm-login`, { method: 'POST' })\n        if (requestAuthResp.status !== 200) {\n          setErr(`Email confirmation needed but unable to request: ${requestAuthResp.status}`)\n          return\n        }\n        localStorage.loginSessionKey = (await requestAuthResp.json()).sessionKey\n        setRequiresConfFor({ email, passphrase })\n        return\n      }\n      // If we make it beyond this point, it means no email confirmation will be required\n      if (resp.status === 404 && body.errType === 'DOES_NOT_EXIST') {\n        setRequiresConfFor(null)\n        setErr('Account does not exist')\n        return\n      }\n  \n      if (resp.status === 200) {\n        const identityInfo = body\n        const { _id, salt, identityFactoryAddr, baseIdentityAddr, bytecode } = identityInfo\n        const { quickAccSigner, primaryKeyBackup } = identityInfo.meta\n\n        onAddAccount({\n          id: _id,\n          email: identityInfo.meta.email,\n          primaryKeyBackup,\n          salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n          signer: quickAccSigner\n        }, { select: true })\n\n        // Delete the key so that it can't be used anymore on this browser\n        delete localStorage.loginSessionKey\n      } else {\n        setErr(body.message ? `Relayer error: ${body.message}` : `Unknown no-message error: ${resp.status}`)\n      }\n      setRequiresConfFor(null)\n    }\n  \n    const onLoginUserAction = async ({ email, passphrase }) => {\n      setErr('')\n      setRequiresConfFor(null)\n      setInProgress(true)\n      try {\n        await attemptLogin({ email, passphrase })\n      } catch (e) {\n          setErr(`Unexpected error: ${e.message || e}`)\n      }\n      setInProgress(false)\n    }\n  \n    // try logging in once after EMAIL_VERIFICATION_RECHECK\n    useEffect(() => {\n      if (requiresEmailConfFor) {\n        const timer = setTimeout(async () => {\n            setInProgress(true)\n            await attemptLogin(requiresEmailConfFor, true)\n            setInProgress(false)\n        }, EMAIL_VERIFICATION_RECHECK)\n        return () => clearTimeout(timer)\n      }\n    })\n\n    // @TODO import from JSON; maybe without a URL, as we'll just pop a file selector and then import the JSON\n    const importJSONHref = `/#/json-import`\n\n    if (!relayerURL) {\n        return (<section className=\"loginSignupWrapper\" id=\"emailLoginSection\">\n            <div id=\"logo\"/>\n            <h3 class=\"error\">Email login not supported without the relayer.</h3>\n            <a href={importJSONHref}><button>Import JSON</button></a>\n        </section>)\n    }\n\n    const inner = requiresEmailConfFor ?\n      (<div id=\"loginEmail\" className=\"emailConf\">\n        <h3><MdEmail size={25} color=\"white\"/>Email confirmation required</h3>\n        <p>\n        We sent an email to {requiresEmailConfFor.email}, please check your inbox and click \"<b>Authorize New Device</b>\".\n        </p>\n        {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n      </div>)\n      : (<div id=\"loginEmail\">\n        <LoginOrSignup onAccRequest={onLoginUserAction} inProgress={inProgress}></LoginOrSignup>\n        <div className='magicLink'>A password will not be required, we will send a magic login link to your email.</div>\n  \n        {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n  \n        {/*<a href={importJSONHref}>Import JSON</a>*/}\n      </div>)\n      \n    return (\n      <section className=\"loginSignupWrapper\" id=\"emailLoginSection\">\n      <div id=\"logo\"/>\n      {inner}\n    </section>\n    )\n  }","import { isFirefox } from '../lib/isFirefox'\n\nconst checkPermissions = async (name, onPrompt) => {\n    let status = false;\n\n    try {\n        const { state } = await navigator.permissions.query({\n            name,\n            allowWithoutGesture: false,\n        })\n        if (state === 'granted') return true\n        if (state === 'prompt') {\n            if (onPrompt) {\n                await onPrompt\n                return checkPermissions(name)\n            } else return false\n        }\n    } catch (e) {\n        console.error('Error while trying to query permissions', e)\n    }\n\n    return status;\n}\n\nconst checkClipboardPermission = (prompt = false) => isFirefox() ? false : prompt ? checkPermissions('clipboard-read', navigator.clipboard.readText()) : checkPermissions('clipboard-read')\nconst checkNotificationPermission = (prompt = false) => prompt ? checkPermissions('notifications', Notification.requestPermission()) : checkPermissions('notifications')\n\nconst askForPermission = async name => {\n    try {\n        if (name === 'clipboard-read') {\n            await navigator.clipboard.readText()\n            return true\n        }\n\n        if (name === 'notifications') {\n            const status = await Notification.requestPermission()\n            return status === 'granted' || status === 'default'\n        }\n\n        return false\n    } catch(e) {\n        console.error(`Permission ${name} blocked`);\n        return false\n    }\n}\n\nexport {\n    askForPermission,\n    checkClipboardPermission,\n    checkNotificationPermission\n}\n","import './PermissionsModal.scss'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { MdCheck, MdClose, MdOutlineCheck } from 'react-icons/md'\nimport { useModals, usePermissions } from '../../../hooks'\nimport { useToasts } from '../../../hooks/toasts'\nimport { askForPermission } from '../../../helpers/permissions'\nimport { Modal, Toggle, Button, Checkbox, Loading } from '../../common'\nimport { isFirefox } from '../../../lib/isFirefox'\nimport { fetchGet } from '../../../lib/fetch'\nimport { AiOutlineReload } from 'react-icons/ai'\n\nconst toastErrorMessage = name => `You blocked the ${name} permission. Check your browser permissions tab.`\n\nconst PermissionsModal = ({ relayerIdentityURL, account, onAddAccount, onClose }) => {\n    const { hideModal } = useModals()\n    const { isNoticationsGranted, isClipboardGranted, modalHidden, setModalHidden } = usePermissions()\n    const { addToast } = useToasts()\n    const [isEmailConfirmed, setEmailConfirmed] = useState(false)\n    const [isEmailResent, setEmailResent] = useState(false)\n\n    const areBlockedPermissions = (!isFirefox() && !isClipboardGranted) || !isNoticationsGranted\n    const isAccountNotConfirmed = account.emailConfRequired && !isEmailConfirmed\n    const buttonDisabled = isAccountNotConfirmed || (!modalHidden && areBlockedPermissions)\n    const sendConfirmationEmail = async () => {\n        try {\n            const response = await fetchGet(relayerIdentityURL + '/resend-verification-email')\n            if (!response.success) throw new Error('Relayer did not return success.')\n\n            addToast('Verification email sent!')\n            setEmailResent(true)\n        } catch(e) {\n            console.error(e)\n            addToast('Could not resend verification email.' + e.message || e, { error: true })\n            setEmailResent(false)\n        }\n    }\n    \n    const checkEmailConfirmation = useCallback(async () => {\n        try {\n            const identity = await fetchGet(relayerIdentityURL)\n            if (identity) {\n                const { emailConfirmed } = identity.meta\n                const isConfirmed = !!emailConfirmed\n                setEmailConfirmed(isConfirmed)\n\n                if (isConfirmed && account.emailConfRequired) {\n                    onAddAccount({\n                        ...account,\n                        emailConfRequired: false\n                    })\n                }\n            }\n        } catch(e) {\n            console.error(e);\n            addToast('Could not check email confirmation.', { error: true })\n        }\n    }, [relayerIdentityURL, account, onAddAccount, addToast])\n    \n    const requestNotificationsPermission = async () => {\n        const status = await askForPermission('notifications')\n        if (!status) addToast(toastErrorMessage('Notifications'), { error: true })\n    }\n    \n    const requestClipboardPermission = async () => {\n        const status = await askForPermission('clipboard-read')\n        if (!status) addToast(toastErrorMessage('Clipboard'), { error: true })\n    }\n    \n    useEffect(() => {\n        !isEmailConfirmed && checkEmailConfirmation()\n        const emailConfirmationInterval = setInterval(() => !isEmailConfirmed && checkEmailConfirmation(), 3000)\n        return () => clearInterval(emailConfirmationInterval)\n    }, [isEmailConfirmed, checkEmailConfirmation])\n\n    const onCloseModal = () => {\n        hideModal()\n        onClose()\n    }\n\n    const buttons = <>\n        <Button clear small icon={<MdClose/>} disabled={isAccountNotConfirmed} onClick={onCloseModal}>Ignore</Button>\n        <Button small icon={<MdCheck/>} disabled={buttonDisabled} onClick={onCloseModal}>Done</Button>\n    </>\n\n    return (\n        <Modal id=\"permissions-modal\" title=\"We need a few things 🙏\" buttons={buttons} onClose={onClose}>\n            {\n                account.email ? \n                    <div className=\"permission\">\n                    <div className=\"details\">\n                        <div className=\"name\">Email Verification</div>\n                        <div className=\"description\">\n                            <b>Confirming your email is mandatory so that we can make sure your account can be recovered in case access is lost.</b>\n                            &nbsp;We already sent an email, please check your inbox.\n                        </div>\n                    </div>\n                    <div className=\"status\">\n                        { !isEmailConfirmed ? <Loading/> : <spam className=\"check-icon\"><MdOutlineCheck/></spam> }\n                        { \n                            !isEmailConfirmed && !isEmailResent ? \n                                <Button mini clear icon={<AiOutlineReload/>} onClick={sendConfirmationEmail}>Resend</Button>\n                                :\n                                null\n                        }\n                    </div>\n                </div>\n                :\n                null\n            }\n            <div className=\"permission\">\n                <div className=\"details\">\n                    <div className=\"name\">Notifications Permission</div>\n                    <div className=\"description\">\n                        Needed to draw your attention to Ambire Wallet when there is a transaction signing request.<br/>\n                        You can also click the notifications to go directly to the Ambire tab.<br/>\n                        We do not send any other notifications.\n                    </div>\n                </div>\n                <Toggle checked={isNoticationsGranted} onChange={() => requestNotificationsPermission()}/>\n            </div>\n            <div className={`permission ${isFirefox() ? 'disabled' : ''}`}>\n                <div className=\"details\">\n                    <div className=\"name\">Clipboard Permission { isFirefox() ? <span className=\"unavailable\">(Unavailable in Firefox)</span> : null }</div>\n                    <div className=\"description\">\n                        Needed so that dApps can be connected automatically just by copying their WalletConnect URL.\n                    </div>\n                    { \n                        isFirefox() ? \n                            <div className=\"unavailable\">\n                                Without this, you can still use Ambire, but you will have to paste URLs manually\n                            </div> : null\n                    }\n                </div>\n                <Toggle checked={isClipboardGranted} onChange={() => requestClipboardPermission()}/>\n            </div>\n            {isAccountNotConfirmed\n                ? (<></>)\n                // Not gonna show this at all if the email is not confirmed\n                : (<Checkbox\n                    label=\"I understand, do not show this again.\"\n                    checked={modalHidden}\n                    onChange={({ target }) => setModalHidden(target.checked)}/>)\n            }\n        </Modal>\n    )\n}\n\nexport default PermissionsModal\n","import './InputModal.scss'\n\nimport { createRef, useState } from 'react'\nimport { MdCheck, MdClose } from 'react-icons/md'\nimport { useModals } from '../../../hooks'\nimport { Modal, TextInput, Button } from \"../../common\"\n\nconst InputModal = ({ title, inputs, onClose }) => {\n    const { hideModal } = useModals()\n    const [isDisabled, setDisabled] = useState(true)\n\n    const inputsFields = inputs.map(input => ({ ...input, ref: createRef() }))\n\n    const onInput = () => {\n        const isFormValid = inputsFields\n            .map(({ ref, validate }) => ref.current.value && (validate ? validate(ref.current.value) : true))\n            .every(v => v === true)\n        setDisabled(!isFormValid)\n    }\n\n    const onConfirm = () => {\n        const values = inputsFields.map(({ ref }) => ref.current.value)\n        onClose && onClose(values)\n        hideModal()\n    }\n\n    const buttons = <>\n        <Button clear small icon={<MdClose/>} onClick={hideModal}>Cancel</Button>\n        <Button small icon={<MdCheck/>} disabled={isDisabled} onClick={onConfirm}>Confirm</Button>\n    </>\n\n    return (\n        <Modal id=\"input-modal\" title={title} buttons={buttons}>\n            {\n                inputsFields.map(({ id, label, placeholder, ref }) => (\n                    <TextInput key={id || label} label={label} placeholder={placeholder} onInput={onInput} ref={ref}/>\n                ))\n            }\n        </Modal>\n    )\n}\n\nexport default InputModal ","import './SelectSignerAccountModal.scss'\n\nimport { useState } from 'react'\nimport { useModals } from '../../../hooks'\nimport { Modal, Button } from '../../common'\nimport { HiOutlineExternalLink } from 'react-icons/hi'\nimport { MdKeyboardArrowLeft, MdKeyboardArrowRight } from 'react-icons/md'\n\nconst SelectSignerAccountModal = ({\n  signersToChoose,\n  onSignerAddressClicked,\n  selectedNetwork = { explorerUrl: 'https://etherscan.io' },\n  description = '',\n  isCloseBtnShown = true\n}) => {\n  const { hideModal } = useModals()\n  const [currentPage, setCurrentPage] = useState(0)\n\n  const paginate = (arr, size) => {\n    return arr.reduce((acc, val, i) => {\n      let idx = Math.floor(i / size)\n      let page = acc[idx] || (acc[idx] = [])\n      page.push(val)\n\n      return acc\n    }, [])\n  }\n\n  let pages = []\n  const pageSize = 5\n\n  pages = paginate(signersToChoose, pageSize)\n\n  const nextPage = () => {\n    if (currentPage === pages.length - 1) return\n    setCurrentPage(prevState => prevState + 1)\n  }\n\n  const prevPage = () => {\n    if (currentPage === 0) return\n    setCurrentPage(prevState => prevState - 1)\n  }\n\n  const formatAddress = addr => {\n    return addr.slice(0, 5) + '...' + addr.slice(addr.length - 4, addr.length)\n  }\n\n  const prevBtnDisabled = currentPage === 0\n  const nextBtnDisabled = currentPage === pages.length - 1\n\n  const onAddressClicked = (addr, index) => {\n    onSignerAddressClicked({\n      address: addr,\n      index: index,\n    })\n\n    hideModal()\n  }\n\n  return (\n    <Modal id=\"select-signer-modal\" title=\"Select a signer account\" isCloseBtnShown={isCloseBtnShown}>\n      <div className=\"intro\">{description}</div>\n      <div className=\"loginSignupWrapper chooseSigners\">\n        <ul id=\"signersToChoose\">\n          {signersToChoose\n            ? pages[currentPage].map((addr, index) => (\n                <li\n                  key={addr}\n                  className={!(index % 2) ? ' odd-rows-bg' : ''}\n                  onClick={() =>\n                    onAddressClicked(addr, currentPage * pageSize + index)\n                  }\n                >\n                  <span className=\"index-row\">\n                    {currentPage * pageSize + index + 1}\n                  </span>\n                  <span>\n                    {formatAddress(addr)}\n                  </span>\n                  <a\n                    href={selectedNetwork.explorerUrl + '/address/' + addr}\n                    target='_blank'\n                    rel='noreferrer'\n                    onClick={e => e.stopPropagation()}\n                  >\n                    <HiOutlineExternalLink size={25} />\n                  </a>\n                </li>\n              ))\n            : null}\n        </ul>\n        <div className=\"pages\">\n          {currentPage + 1}/{pages.length}\n        </div>\n        <div className=\"buttons\">\n          <Button disabled={prevBtnDisabled} icon={<MdKeyboardArrowLeft/>} small clear type=\"button\" onClick={prevPage}>\n            Previous page\n          </Button>\n          <Button disabled={nextBtnDisabled} iconAfter={<MdKeyboardArrowRight/>} small clear type=\"button\" onClick={nextPage}>\n            Next page\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  )\n}\n\nexport default SelectSignerAccountModal\n","import { Bundle } from 'adex-protocol-eth'\nimport { Interface, keccak256, AbiCoder } from 'ethers/lib/utils'\nimport accountPresets from '../consts/accountPresets'\n\nconst IDENTITY_INTERFACE = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\nconst { quickAccManager } = accountPresets\n\nconst buildRecoveryBundle = (identity, network, signer, newValues) => {\n    const abiCoder = new AbiCoder()\n    const { timelock, one, two } = newValues.signer\n    const newQuickAccHash = keccak256(abiCoder.encode(['tuple(uint, address, address)'], [[timelock, one, two]]))\n\n    return new Bundle({\n        identity,\n        network,\n        signer,\n        txns: [[\n            identity,\n            '0x00',\n            IDENTITY_INTERFACE.encodeFunctionData('setAddrPrivilege', [\n                quickAccManager,\n                newQuickAccHash,\n            ]),\n        ]],\n        recoveryMode: newValues\n    })\n}\n\nexport default buildRecoveryBundle","import './ResetPasswordModal.scss'\n\nimport { Wallet } from 'ethers'\nimport { id } from 'ethers/lib/utils'\nimport { useState, useMemo, createRef, useEffect, useCallback } from 'react'\nimport { Modal, Radios, Checkbox, Button, ToolTip, Loading, PasswordInput } from '../../common'\nimport { MdOutlineCheck, MdOutlineClose, MdOutlineHelpOutline } from 'react-icons/md'\nimport { useModals } from '../../../hooks'\nimport { useToasts } from '../../../hooks/toasts'\nimport accountPresets from '../../../consts/accountPresets'\nimport { fetchPost } from '../../../lib/fetch'\nimport buildRecoveryBundle from '../../../helpers/recoveryBundle'\n\nconst ResetPassword = ({ account, selectedNetwork, relayerURL, onAddAccount, showSendTxns }) => {\n    const { hideModal } = useModals()\n    const { addToast } = useToasts()\n\n    const [isLoading, setLoading] = useState(false)\n    const [type, setType] = useState(null)\n    const [oldPassword, setOldPassword] = useState('')\n    const [newPassword, setNewPassword] = useState('')\n    const [newPasswordConfirm, setNewPasswordConfirm] = useState('')\n    const [disabled, setDisabled] = useState(true)\n\n    const [passwordsMustMatchWarning, setPasswordsMustMatchWarning] = useState(false)\n    const [passwordsLengthWarning, setPasswordsLengthWarning] = useState(false)\n    \n    const radios = useMemo(() => [\n        {\n            label: 'Change the password on this device and Ambire Cloud. Best if you just want to routinely change the password.',\n            value: 'change',\n            disabled: !account.primaryKeyBackup\n        },\n        {\n            label: 'Reset the key and password: takes 3 days. Chose this if you\\'ve forgotten the old password.',\n            value: 'reset'\n        }\n    ], [account.primaryKeyBackup])\n\n    const checkboxes = useMemo(() => ([\n        [\n            {\n                label: \n                    <>\n                        I understand the following: the new password will be required for subsequent logins, but places where you're already logged in will work with the old password until you re-login.\n                        <ToolTip\n                            label=\"This is because, for security reasons, the encrypted key is retrieved only when logging in, so we have no way of forcing every device to update it.\n                            If you want to disable access for other devices, consider the next option.\">\n                            <MdOutlineHelpOutline/>\n                        </ToolTip>\n                    </>,\n                ref: createRef()\n            }\n        ],\n        [\n            {\n                label: <>\n                    I understand I am only changing the password on the {selectedNetwork.name} network.\n                    <ToolTip\n                        label=\"You will be able to trigger the change for other networks by switching the network\">\n                        <MdOutlineHelpOutline/>\n                    </ToolTip>\n                </>,\n                ref: createRef()\n            },\n            {\n                label: 'I understand I need to wait for 3 days for the change to be finalized.',\n                ref: createRef()\n            }\n        ]\n    ]), [selectedNetwork.name])\n\n    const onRadioChange = value => {\n        setType(value)\n        setOldPassword('')\n        setNewPassword('')\n        setNewPasswordConfirm('')\n        setPasswordsMustMatchWarning(false)\n        setPasswordsLengthWarning(false)\n    }\n\n    const changePassword = async () => {\n        setLoading(true)\n        // let react do one tick of rerendering before we block on .encrypt/.signMessage\n        await new Promise(resolve => setTimeout(resolve))\n\n        try {\n            const wallet = await Wallet.fromEncryptedJson(JSON.parse(account.primaryKeyBackup), oldPassword)\n            const primaryKeyBackup = JSON.stringify(await wallet.encrypt(newPassword, accountPresets.encryptionOpts))\n            const sig = await wallet.signMessage(JSON.stringify({ primaryKeyBackup }))\n            const resp = await fetchPost(`${relayerURL}/identity/${account.id}/modify`, { primaryKeyBackup, sig })\n\n            if (resp.success) {\n                onAddAccount({ ...account, primaryKeyBackup })\n                addToast('You password was successfully updated')\n                hideModal()\n            } else {\n                throw new Error(`Unable to update account: ${resp.message || 'unknown error'}`)\n            }\n        } catch(e) {\n            console.error(e)\n            addToast('Changing password error: '+(e.message || e), { error: true })\n        }\n\n        setLoading(false)\n    }\n\n    const resetPassword = async () => {\n        setLoading(true)\n        // let react do one tick of rerendering before we block on .encrypt/.signMessage\n        await new Promise(resolve => setTimeout(resolve))\n\n        try {\n            // @TODO: move extraEntropy to a util\n            const extraEntropy = id(account.email + ':' + Date.now() + ':' + Math.random() + ':' + (typeof performance === 'object' && performance.now()))\n            const firstKeyWallet = Wallet.createRandom({ extraEntropy })\n\n            const { quickAccManager, quickAccTimelock, encryptionOpts } = accountPresets\n            const signer = {\n                quickAccManager,\n                timelock: quickAccTimelock,\n                one: firstKeyWallet.address,\n                two: account.signer.two,\n                preRecovery: account.signer\n            }\n\n            const primaryKeyBackup = JSON.stringify(await firstKeyWallet.encrypt(newPassword, encryptionOpts))\n\n            const bundle = buildRecoveryBundle(account.id, selectedNetwork.id, signer.preRecovery, { signer, primaryKeyBackup })\n            hideModal()\n            showSendTxns(bundle)\n            onAddAccount({\n                ...account,\n                primaryKeyBackup,\n                signer,\n                preRecoveryPrimaryKeyBackup: account.primaryKeyBackup\n            }, { select: true })\n        } catch(e) {\n            console.error(e);\n            addToast('Reset password error: ' + (e.message || e), { error: true })\n        }\n\n        setLoading(false)\n    }\n\n    const validateForm = useCallback(() => {\n        const arePasswordsMatching = newPassword === newPasswordConfirm\n        let areFieldsNotEmpty = false\n        let isLengthValid = false\n        let areCheckboxesChecked = false\n        \n        if (type === 'change') {\n            areFieldsNotEmpty = oldPassword.length && newPassword.length && newPasswordConfirm.length\n            isLengthValid = oldPassword.length >= 8 && newPassword.length >= 8 && newPasswordConfirm.length >= 8\n            areCheckboxesChecked = checkboxes[0].every(({ ref }) => ref.current && ref.current.checked)\n        }\n\n        if (type === 'reset') {\n            areFieldsNotEmpty = newPassword.length && newPasswordConfirm.length\n            isLengthValid = newPassword.length >= 8 && newPasswordConfirm.length >= 8\n            areCheckboxesChecked = checkboxes[1].every(({ ref }) => ref.current && ref.current.checked)\n        }\n\n        setDisabled(!isLengthValid || !arePasswordsMatching || !areCheckboxesChecked)\n\n        if (areFieldsNotEmpty) {\n            setPasswordsLengthWarning(!isLengthValid)\n            setPasswordsMustMatchWarning(!arePasswordsMatching)\n        } else {\n            setPasswordsLengthWarning(false)\n            setPasswordsMustMatchWarning(false)\n        }\n    }, [checkboxes, type, oldPassword, newPassword, newPasswordConfirm])\n\n    useEffect(() => validateForm(), [isLoading, validateForm, oldPassword, newPassword, newPasswordConfirm])\n\n    const modalButtons = <>\n        <Button icon={<MdOutlineClose/>} clear onClick={() => hideModal()}>Cancel</Button>\n        <Button icon={<MdOutlineCheck/>} disabled={disabled} onClick={() => type === 'change' ? changePassword(): resetPassword()}>Confirm</Button>\n    </>\n\n    return (\n        <Modal id=\"reset-password-modal\" title=\"Reset Password\" buttons={modalButtons}>\n            {\n                isLoading ?\n                    <div id=\"loading-overlay\">\n                        <Loading/>\n                    </div>\n                    :\n                    null\n            }\n            <Radios radios={radios} onChange={onRadioChange}/>\n            {\n                type === 'change' ?\n                    <form>\n                        <PasswordInput autocomplete=\"current-password\" placeholder=\"Old Password\" onInput={value => setOldPassword(value)}/>\n                        <PasswordInput peakPassword autocomplete=\"new-password\" placeholder=\"New Password\" onInput={value => setNewPassword(value)}/>\n                        <PasswordInput autocomplete=\"new-password\" placeholder=\"Confirm New Password\" onInput={value => setNewPasswordConfirm(value)}/>\n                        {\n                            checkboxes[0].map(({ label, ref }, i) => (\n                                <Checkbox key={`checkbox-${i}`} ref={ref} label={label} onChange={() => validateForm()}/>\n                            ))\n                        }\n                    </form> : null\n            }\n            {\n                type === 'reset' ?\n                    <form>\n                        <PasswordInput peakPassword autocomplete=\"new-password\" placeholder=\"New Password\" onInput={value => setNewPassword(value)}/>\n                        <PasswordInput autocomplete=\"new-password\" placeholder=\"Confirm New Password\" onInput={value => setNewPasswordConfirm(value)}/>\n                        {\n                            checkboxes[1].map(({ label, ref }, i) => (\n                                <Checkbox key={`checkbox-${i}`} ref={ref} label={label} onChange={() => validateForm()}/>\n                            ))\n                        }\n                    </form> : null\n            }\n            <div id=\"warnings\">\n                {\n                    passwordsMustMatchWarning ?\n                        <div className=\"warning\">Passwords must match</div> : null\n                }\n                {\n                    passwordsLengthWarning ?\n                        <div className=\"warning\">Password length must be greater than 8 characters</div> : null\n                }\n            </div>\n        </Modal>\n    )\n}\n\nexport default ResetPassword","import './WalletTokenModal.scss'\n\nimport { Button, Modal, ToolTip } from '../../common'\nimport { MdOutlineClose } from 'react-icons/md'\nimport { useModals } from '../../../hooks'\n\nconst WalletTokenModal = ({ rewards }) => {\n    const { hideModal } = useModals()\n\n    const claimButton = <>\n        <ToolTip label=\"Claiming will be available after the official token launch\">\n            <Button small clear disabled>CLAIM</Button>\n        </ToolTip>\n    </>\n\n    const modalButtons = <>\n        <Button clear icon={<MdOutlineClose/>} onClick={() => hideModal()}>Close</Button>\n    </>\n\n    return (\n        <Modal id=\"wallet-token-modal\" title=\"WALLET token distribution\" buttons={modalButtons}>\n            <div className=\"item\">\n                <div className=\"details\">\n                    <label>Early users Incentive</label>\n                    <div className=\"balance\">\n                        <div className=\"amount\"><span className=\"primary-accent\">{ rewards['balance-rewards'] }</span></div>\n                        {/* <div className=\"amount-dollar\"><span className=\"secondary-accent\">$</span> 0</div> */}\n                    </div>\n                </div>\n                <div className=\"actions\">\n                    { claimButton }\n                </div>\n            </div>\n            {/* <div className=\"item\">\n                <div className=\"details\">\n                    <label>Referral Incentive</label>\n                    <div className=\"balance\">\n                        <div className=\"amount\"><span className=\"primary-accent\">0</span></div>\n                        <div className=\"amount-dollar\"><span className=\"secondary-accent\">$</span> 0</div>\n                    </div>\n                </div>\n                <div className=\"actions\">\n                    { claimButton }\n                </div>\n            </div> */}\n            <div className=\"item\">\n                <div className=\"details\">\n                    <label>ADX Staking Bonus</label>\n                    <div className=\"balance\">\n                        <div className=\"amount\"><span className=\"primary-accent\">{ rewards['adx-rewards'] }</span></div>\n                        {/* <div className=\"amount-dollar\"><span className=\"secondary-accent\">$</span> 0</div> */}\n                    </div>\n                </div>\n                <div className=\"actions\">\n                    { claimButton }\n                </div>\n            </div>\n            {/* <div className=\"item\">\n                <div className=\"details\">\n                    <label>Gas Rebates</label>\n                    <div className=\"balance\">\n                        <div className=\"amount\"><span className=\"primary-accent\">0</span></div>\n                        <div className=\"amount-dollar\"><span className=\"secondary-accent\">$</span> 0</div>\n                    </div>\n                </div>\n                <div className=\"actions\">\n                    { claimButton }\n                </div>\n            </div> */}\n            { rewards.multipliers && (<div className='multipliers'>\n                {rewards.multipliers.map(({ mul, name }) => (\n                    <Button small border disabled key={name}>{mul}x {name} multiplier</Button>\n                ))}\n            </div>)}\n            <div id=\"info\">\n                You are receiving $WALLETS for holding funds on your Ambire wallet as an early user. Have in mind that $WALLET has not launched yet. <a href=\"https://blog.ambire.com/announcing-the-wallet-token-a137aeda9747\" target=\"_blank\" rel=\"noreferrer\">Read More</a>\n            </div>\n        </Modal>\n    )\n}\n\nexport default WalletTokenModal","import './AddTokenModal.scss'\n\nimport { Contract, getDefaultProvider } from 'ethers';\nimport { formatUnits, Interface } from 'ethers/lib/utils';\nimport ERC20ABI from 'adex-protocol-eth/abi/ERC20'\nimport { isValidAddress } from '../../../helpers/address';\nimport { Button, Loading, Modal, TextInput } from '../../common'\nimport { useState } from 'react';\nimport { useToasts } from '../../../hooks/toasts';\nimport { MdOutlineAdd, MdOutlineClose } from 'react-icons/md';\nimport { useModals } from '../../../hooks';\n\nconst ERC20Interface = new Interface(ERC20ABI)\n\nconst AddTokenModal = ({ network, account, onAddToken }) => {\n    const { addToast } = useToasts()\n    const { hideModal } = useModals()\n\n    const [loading, setLoading] = useState(false)\n    const [tokenDetails, setTokenDetails] = useState(null)\n    const [showError, setShowError] = useState(false)\n\n    const disabled = !tokenDetails || !(tokenDetails.symbol && tokenDetails.decimals)\n\n    const onInput = async address => {\n        setTokenDetails(null)\n\n        if (!isValidAddress(address)) return \n        setLoading(true)\n        setShowError(false)\n\n        try {\n            const provider = getDefaultProvider(network.rpc)\n            const tokenContract = new Contract(address, ERC20Interface, provider)\n            \n            const [balanceOf, name, symbol, decimals] = await Promise.all([\n                tokenContract.balanceOf(account),\n                tokenContract.name(),\n                tokenContract.symbol(),\n                tokenContract.decimals()\n            ])\n\n            const balance = formatUnits(balanceOf, decimals)\n            setTokenDetails({\n                account,\n                address,\n                network: network.id,\n                balance,\n                balanceRaw: balanceOf.toString(),\n                tokenImageUrl: `https://storage.googleapis.com/zapper-fi-assets/tokens/${network.id}/${address}.png`,\n                name,\n                symbol,\n                decimals\n            })\n        } catch(e) {\n            console.error(e)\n            addToast('Failed to load token info', { error: true })\n            setShowError(true)\n        }\n\n        setLoading(false)\n    }\n\n    const onAdd = () => {\n        onAddToken(tokenDetails)\n        hideModal()\n    }\n\n    const buttons = <>\n        <Button clear icon={<MdOutlineClose/>} onClick={() => hideModal()}>Close</Button>\n        <Button icon={<MdOutlineAdd/>} disabled={disabled} onClick={onAdd}>Add</Button>\n    </>\n    const tokenStandard = network.id === 'binance-smart-chain' ? 'a BEP20' : (\n        network.id === 'ethereum'\n            ? 'an ERC20'\n            : 'a valid'\n    )\n\n    return (\n        <Modal id=\"add-token-modal\" title=\"Add Token\" buttons={buttons}>\n            <TextInput\n                label=\"Token Address\"\n                placeholder=\"0x...\"\n                onInput={value => onInput(value)}\n            />\n            {\n                showError ? \n                    <div className=\"validation-error\">\n                        The address you entered does not appear to correspond to {tokenStandard} token on { network.name }.\n                    </div>\n                    :\n                    null\n            }\n            {\n                loading ?\n                    <Loading/>\n                    :\n                        !showError && tokenDetails ? \n                            <div className=\"details\">\n                                <div className=\"heading\">\n                                    <div className=\"icon\" style={{backgroundImage: `url(${tokenDetails.icon})`}}/>\n                                    <div className=\"title\">{ tokenDetails.name } ({ tokenDetails.symbol })</div>\n                                </div>\n                                <div className=\"balance\">\n                                    Balance: <span>{ tokenDetails.balance }</span> <b>{ tokenDetails.symbol }</b>\n                                </div>\n                            </div>\n                            :\n                            null\n            }\n        </Modal>\n    )\n}\n\nexport default AddTokenModal","import { getAddress, hexDataLength } from 'ethers/lib/utils'\n\nconst NUMBER_STRING_REGEX = /^([0-9]+\\.?[0-9]*)$/\nconst HEX_DATA_LENGTH = 32\nconst TIME_LOCK_NUMBER_LENGTH = 6\nconst MAX_FILE_SIZE = 3072\nconst NEEDED_KEYS = [\n  'salt',\n  'identityFactoryAddr',\n  'baseIdentityAddr',\n  'bytecode',\n  'signer',\n]\n\nconst validateImportedAccountProps = acc => {\n  if (!(acc && validateAccountProps(acc))) {\n    return {\n      success: false,\n      message: 'The imported file does not contain needed account data.',\n    }\n  }\n\n  if (!(acc.id && isValidAddress(acc.id))) {\n    return { \n      success: false, \n      message: 'Failed to import JSON file: invalid id' \n    }\n  }\n\n  if (!(acc.signer && isValidAddress(acc.signer.address || acc.signer.quickAccManager))) {\n    return {\n      success: false,\n      message: 'JSON file: invalid signer address',\n    }\n  }\n\n  if (acc.signer.quickAccManager) {\n    if (!(acc.signer.timelock && isValidTimeLock(acc.signer.timelock))) {\n      return {\n        success: false,\n        message: 'Failed to import JSON file: invalid signer timelock',\n      }\n    }\n\n    if (!(acc.signer.one && isValidAddress(acc.signer.one))) {\n      return {\n        success: false,\n        message: 'Failed to import JSON file: invalid signer one',\n      }\n    }\n\n    if (!(acc.signer.two && isValidAddress(acc.signer.two))) {\n      return {\n        success: false,\n        message: 'Failed to import JSON file: invalid signer two',\n      }\n    }\n  }\n\n  if (!(acc.salt && isValidSalt(acc.salt))) {\n    return { success: false, message: 'JSON file: invalid salt' }\n  }\n\n  if (!(acc.identityFactoryAddr && isValidAddress(acc.identityFactoryAddr))) {\n    return {\n      success: false,\n      message: 'JSON file: invalid identity Factory Address',\n    }\n  }\n\n  if (!(acc.baseIdentityAddr && isValidAddress(acc.baseIdentityAddr))) {\n    return {\n      success: false,\n      message: 'JSON file: invalid base Identity Address',\n    }\n  }\n\n  return { success: true }\n}\n\nconst isValidAddress = addr => {\n  try {\n    return getAddress(addr) === addr\n  } catch (e) {\n    return false\n  }\n}\n\nconst isValidTimeLock = timelock => {\n  return NUMBER_STRING_REGEX.test(timelock) && timelock.toString().length === TIME_LOCK_NUMBER_LENGTH\n}\nconst isValidSalt = salt => hexDataLength(salt) === HEX_DATA_LENGTH\nconst validateAccountProps = acc => NEEDED_KEYS.every(key => Object.keys(acc).includes(key))\nconst fileSizeValidator = file => {\n  if (file.size > MAX_FILE_SIZE) {\n    return {\n      code: \"file-size-too-large\",\n      message: `The file size is larger than ${(MAX_FILE_SIZE / 1024).toFixed(2)} KB.`\n    }\n  }\n\n  return null\n}\n\n\nexport {\n  validateImportedAccountProps,\n  fileSizeValidator\n}\n","import './AddAccount.scss'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { Link } from 'react-router-dom'\nimport LoginOrSignup from '../LoginOrSignupForm/LoginOrSignupForm'\nimport TrezorConnect from 'trezor-connect'\nimport { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { hexZeroPad, AbiCoder, keccak256, id, getAddress } from 'ethers/lib/utils'\nimport { Wallet } from 'ethers'\nimport { generateAddress2 } from 'ethereumjs-util'\nimport { getProxyDeployBytecode } from 'adex-protocol-eth/js/IdentityProxyDeploy'\nimport { fetch, fetchPost } from '../../lib/fetch'\nimport accountPresets from '../../consts/accountPresets'\nimport { useToasts } from '../../hooks/toasts'\nimport { SelectSignerAccountModal } from '../Modals'\nimport { useModals } from '../../hooks'\nimport { Loading } from '../common'\nimport { ledgerGetAddresses, PARENT_HD_PATH } from '../../lib/ledgerWebHID'\nimport { isFirefox } from '../../lib/isFirefox'\nimport { VscJson } from 'react-icons/vsc'\nimport { useDropzone } from 'react-dropzone'\nimport { validateImportedAccountProps, fileSizeValidator } from '../../lib/validations/importedAccountValidations'\n\nTrezorConnect.manifest({\n  email: 'contactus@ambire.com',\n  appUrl: 'https://www.ambire.com'\n})\n\nexport default function AddAccount({ relayerURL, onAddAccount }) {\n  const [signersToChoose, setChooseSigners] = useState(null)\n  const [err, setErr] = useState('')\n  const [addAccErr, setAddAccErr] = useState('')\n  const [inProgress, setInProgress] = useState(false)\n  const { addToast } = useToasts()\n  const { showModal } = useModals()\n\n  const wrapProgress = async (fn, type = true) => {\n    setInProgress(type)\n    try {\n      await fn()\n    } catch (e) {\n      console.error(e)\n      setAddAccErr(`Unexpected error: ${e.message || e}`)\n    }\n    setInProgress(false)\n  }\n\n  const wrapErr = async fn => {\n    setAddAccErr('')\n    try {\n      await fn()\n    } catch (e) {\n      console.error(e)\n      setInProgress(false)\n      setAddAccErr(`Unexpected error: ${e.message || e}`)\n    }\n  }\n\n  const createQuickAcc = async (req) => {\n    setErr('')\n\n    // async hack to let React run a tick so it can re-render before the blocking Wallet.createRandom()\n    await new Promise(resolve => setTimeout(resolve, 0))\n\n    const extraEntropy = id(req.email + ':' + Date.now() + ':' + Math.random() + ':' + (typeof performance === 'object' && performance.now()))\n    const firstKeyWallet = Wallet.createRandom({ extraEntropy })\n    // 6 words is 2048**6\n    const secondKeySecret = Wallet.createRandom({ extraEntropy }).mnemonic.phrase.split(' ').slice(0, 6).join(' ') + ' ' + req.email\n\n    const secondKeyResp = await fetchPost(`${relayerURL}/second-key`, { secondKeySecret })\n    if (!secondKeyResp.address) throw new Error(`second-key returned no address, error: ${secondKeyResp.message || secondKeyResp}`)\n\n    const { salt, baseIdentityAddr, identityFactoryAddr, quickAccManager, quickAccTimelock } = accountPresets\n    const quickAccountTuple = [quickAccTimelock, firstKeyWallet.address, secondKeyResp.address]\n    const signer = {\n      quickAccManager,\n      timelock: quickAccountTuple[0],\n      one: quickAccountTuple[1],\n      two: quickAccountTuple[2]\n    }\n    const abiCoder = new AbiCoder()\n    const accHash = keccak256(abiCoder.encode(['tuple(uint, address, address)'], [quickAccountTuple]))\n    const privileges = [[quickAccManager, accHash]]\n    const bytecode = getProxyDeployBytecode(baseIdentityAddr, privileges, { privSlot: 0 })\n    const identityAddr = getAddress('0x' + generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex'))\n    const primaryKeyBackup = JSON.stringify(\n      await firstKeyWallet.encrypt(req.passphrase, accountPresets.encryptionOpts)\n    )\n\n    const createResp = await fetchPost(`${relayerURL}/identity/${identityAddr}`, {\n      email: req.email,\n      primaryKeyBackup: req.backupOptout ? undefined : primaryKeyBackup,\n      secondKeySecret,\n      salt, identityFactoryAddr, baseIdentityAddr,\n      privileges,\n      quickAccSigner: signer\n    })\n    if (createResp.message === 'EMAIL_ALREADY_USED') {\n      setErr('An account with this email already exists')\n      return\n    }\n    if (!createResp.success) {\n      console.log(createResp)\n      setErr(`Unexpected sign up error: ${createResp.message || 'unknown'}`)\n      return\n    }\n\n    onAddAccount({\n      id: identityAddr,\n      email: req.email,\n      primaryKeyBackup,\n      salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n      signer,\n      // This makes the modal appear, and will be removed by the modal which will call onAddAccount to update it\n      emailConfRequired: true\n    }, { select: true, isNew: true })\n  }\n\n  // EOA implementations\n  // Add or create accounts from Trezor/Ledger/Metamask/etc.\n  const createFromEOA = useCallback(async (addr) => {\n    const privileges = [[getAddress(addr), hexZeroPad('0x01', 32)]]\n    const { salt, baseIdentityAddr, identityFactoryAddr } = accountPresets\n    const bytecode = getProxyDeployBytecode(baseIdentityAddr, privileges, { privSlot: 0 })\n    const identityAddr = getAddress('0x' + generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex'))\n\n    if (relayerURL) {\n      const createResp = await fetchPost(`${relayerURL}/identity/${identityAddr}`, {\n        salt, identityFactoryAddr, baseIdentityAddr,\n        privileges\n      })\n      if (!createResp.success && !(createResp.message && createResp.message.includes('already exists'))) throw createResp\n    }\n\n    return {\n      id: identityAddr,\n      salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n      signer: { address: getAddress(addr) }\n    }\n  }, [relayerURL])\n\n  async function connectWeb3AndGetAccounts() {\n    if (typeof window.ethereum === 'undefined') {\n      throw new Error('MetaMask not available')\n    }\n    const ethereum = window.ethereum\n    const web3Accs = await ethereum.request({ method: 'eth_requestAccounts' })\n    if (!web3Accs.length) throw new Error('No accounts connected')\n    if (web3Accs.length === 1) return onEOASelected(web3Accs[0])\n\n    setChooseSigners({ addresses: web3Accs, signerName: 'Web3' })\n  }\n\n  const getAccountByAddr = useCallback(async (idAddr, signerAddr) => {\n    // In principle, we need these values to be able to operate in relayerless mode,\n    // so we just store them in all cases\n    // Plus, in the future this call may be used to retrieve other things\n    const { salt, identityFactoryAddr, baseIdentityAddr, bytecode } = await fetch(`${relayerURL}/identity/${idAddr}`)\n      .then(r => r.json())\n    if (!(salt && identityFactoryAddr && baseIdentityAddr && bytecode)) throw new Error(`Incomplete data from relayer for ${idAddr}`)\n    return {\n      id: idAddr,\n      salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n      signer: { address: signerAddr }\n    }\n  }, [relayerURL])\n\n  const getOwnedByEOAs = useCallback(async (eoas) => {\n    let allUniqueOwned = {}\n\n    await Promise.all(eoas.map(\n      async signerAddr => {\n        const resp = await fetch(`${relayerURL}/identity/any/by-owner/${signerAddr}?includeFormerlyOwned=true`)\n        const privEntries = Object.entries(await resp.json())\n        // discard the privileges value, we do not need it as we wanna add all accounts EVER owned by this eoa\n        privEntries.forEach(([id, _]) => allUniqueOwned[id] = getAddress(signerAddr))\n      }\n    ))\n\n    return await Promise.all(\n      Object.entries(allUniqueOwned).map(([id, signer]) => getAccountByAddr(id, signer))\n    )\n  }, [getAccountByAddr, relayerURL])\n\n  async function connectTrezorAndGetAccounts() {\n    /*\n    const engine = new Web3ProviderEngine({ pollingInterval: this.pollingInterval })\n    engine.addProvider(new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect, ...this.config }))\n    engine.addProvider(new CacheSubprovider())\n    engine.addProvider(new RPCSubprovider(this.url, this.requestTimeoutMs))\n    */\n    const provider = new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect })\n    const addresses = await provider.getAccountsAsync(50)\n    setChooseSigners({\n      addresses, signerName: 'Trezor', signerExtra: {\n        type: 'trezor',\n        info: JSON.parse(JSON.stringify(provider._initialDerivedKeyInfo))\n      }\n    })\n  }\n\n  async function connectLedgerAndGetAccounts() {\n    if (isFirefox()) {\n      await connectLedgerAndGetAccountsU2F()\n    } else {\n      await connectLedgerAndGetAccountsWebHID()\n    }\n  }\n\n  async function connectLedgerAndGetAccountsU2F() {\n    const provider = new LedgerSubprovider({\n      networkId: 0, // @TODO: probably not needed\n      ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n      baseDerivationPath: PARENT_HD_PATH\n    })\n    // NOTE: do not attempt to do both of these together (await Promise.all)\n    // there is a bug in the ledger subprovider (race condition), so it will think we're trying to make two connections simultaniously\n    // cause one call won't be aware of the other's attempt to connect\n    const addresses = await provider.getAccountsAsync(50)\n    const signerExtra = await provider._initialDerivedKeyInfoAsync().then(info => ({\n      type: 'ledger',\n      info: JSON.parse(JSON.stringify(info))\n    }))\n\n    setChooseSigners({ addresses, signerName: 'Ledger', signerExtra })\n  }\n\n  async function connectLedgerAndGetAccountsWebHID() {\n    let error = null\n    try {\n      const addrData = await ledgerGetAddresses()\n      if (!addrData.error) {\n        const signerExtra = { type: 'ledger', transportProtocol: 'webHID' }\n        if (addrData.addresses.length === 1) {\n            onEOASelected(addrData.addresses[0], signerExtra)\n        } else {\n            setChooseSigners({ addresses: addrData.addresses, signerName: 'Ledger', signerExtra })\n        }\n      } else {\n        error = addrData.error\n      }\n    } catch (e) {\n      console.log(e)\n      if (e.statusCode && e.id === 'InvalidChannel') {\n        error = 'Invalid channel'\n      } else if (e.statusCode && e.statusCode === 25873) {\n        error = 'Please make sure your ledger is connected and the ethereum app is open'\n      } else {\n        error = e.message\n      }\n    }\n\n    if (error) {\n      setAddAccErr(`Ledger error: ${error.message || error}`)\n    }\n  }\n\n  const onEOASelected = useCallback(async (addr, signerExtra) => {\n    const addAccount = (acc, opts) => onAddAccount({ ...acc, signerExtra }, opts)\n    // when there is no relayer, we can only add the 'default' account created from that EOA\n    // @TODO in the future, it would be nice to do getLogs from the provider here to find out which other addrs we control\n    //   ... maybe we can isolate the code for that in lib/relayerless or something like that to not clutter this code\n    if (!relayerURL) return addAccount(await createFromEOA(addr), { select: true })\n    // otherwise check which accs we already own and add them\n    const owned = await getOwnedByEOAs([addr])\n    if (!owned.length) {\n        addAccount(await createFromEOA(addr), { select: true, isNew: true })\n    } else {\n      addToast(`Found ${owned.length} existing accounts with signer ${addr}`, { timeout: 15000 })\n      owned.forEach((acc, i) => addAccount(acc, { select: i === 0 }))\n    }\n  }, [addToast, createFromEOA, getOwnedByEOAs, onAddAccount, relayerURL])\n\n  const onSignerAddressClicked = useCallback(val => {\n    wrapErr(() => onEOASelected(val.address, signersToChoose.signerExtra))\n    setChooseSigners(null)\n  }, [onEOASelected, signersToChoose])\n\n  // The UI for choosing a signer to create/add an account with, for example\n  // when connecting a hardware wallet, it has many addrs you can choose from\n  useEffect(() => {\n    if (signersToChoose) {\n      showModal(\n        <SelectSignerAccountModal\n          signersToChoose={signersToChoose.addresses}\n          onSignerAddressClicked={onSignerAddressClicked}\n          description={`Signer address is the ${signersToChoose.signerName} address you will use to sign transactions on Ambire Wallet.\n                    А new account will be created using this signer if you don’t have one.`}\n          isCloseBtnShown={true}\n        />\n      )\n    }\n  }, [onSignerAddressClicked, showModal, signersToChoose])\n  \n  const onDrop = useCallback((acceptedFiles, rejectedFiles) => {\n    const reader = new FileReader()\n    \n    if (rejectedFiles.length) {\n      addToast(`${rejectedFiles[0].file.path} - ${(rejectedFiles[0].file.size / 1024).toFixed(2)} KB. ${rejectedFiles[0].errors[0].message}`, { error: true })\n    }\n\n    if (acceptedFiles.length){\n      const file = acceptedFiles[0]\n\n      reader.readAsText(file,'UTF-8')\n      reader.onload = readerEvent => {\n        const content = readerEvent.target.result\n        const fileContent = JSON.parse(content)\n        const validatedFile = validateImportedAccountProps(fileContent)\n        \n        if (validatedFile.success) onAddAccount(fileContent, { select: true })\n        else addToast(validatedFile.message, { error: true})\n      }\n    }\n  }, [addToast, onAddAccount])\n\n  const { getInputProps, open } = useDropzone({\n    onDrop,\n    noClick: true,\n    noKeyboard: true,\n    accept: 'application/json',\n    maxFiles: 1,\n    validator: fileSizeValidator\n  })\n\n  // Adding accounts from existing signers\n  const addFromSignerButtons = (<>\n    <button onClick={() => wrapProgress(connectTrezorAndGetAccounts, 'hwwallet')}>\n      <div className=\"icon\" style={{ backgroundImage: 'url(./resources/trezor.png)' }}/>\n      Trezor\n    </button>\n    <button onClick={() => wrapProgress(connectLedgerAndGetAccounts, 'hwwallet')}>\n      <div className=\"icon\" style={{ backgroundImage: 'url(./resources/ledger.png)' }}/>\n      Ledger\n    </button>\n    <button onClick={() => wrapErr(connectWeb3AndGetAccounts)}>\n      <div className=\"icon\" style={{ backgroundImage: 'url(./resources/metamask.png)' }}/>\n      Metamask / Browser\n    </button>\n    <button onClick={() => wrapErr(open)}>\n      <div className=\"icon\"><VscJson size={25}/></div>\n      Import from JSON\n    </button>\n    <input {...getInputProps()} />\n  </>)\n\n  if (!relayerURL) {\n    return (<div className=\"loginSignupWrapper\">\n      <div id=\"logo\"/>\n      <section id=\"addAccount\">\n        <div id=\"loginOthers\">\n          <h3>Add an account</h3>\n          {addFromSignerButtons}\n          <h3>NOTE: You can enable email/password login by connecting to a relayer.</h3>\n        </div>\n      </section>\n    </div>)\n  }\n  //TODO: Would be great to create Ambire spinners(like 1inch but simpler) (I can have a look at them if you need)\n  return (<div className=\"loginSignupWrapper\">\n      <div id=\"logo\"/>\n      <section id=\"addAccount\">\n        <div id=\"loginEmail\">\n          <h3>Create a new account</h3>\n          <LoginOrSignup\n            inProgress={inProgress === 'email'}\n            onAccRequest={req => wrapProgress(() => createQuickAcc(req), 'email')}\n            action=\"SIGNUP\"\n          ></LoginOrSignup>\n          {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n        </div>\n\n        <div id=\"loginSeparator\">\n          <div className=\"verticalLine\"></div>\n          <span>or</span>\n          <div className=\"verticalLine\"></div>\n        </div>\n        <div id=\"loginOthers\">\n          <h3>Add an account</h3>\n          {inProgress !== 'hwwallet' ? (<>\n            <Link to=\"/email-login\">\n              <button>\n                <div className=\"icon\" style={{ backgroundImage: 'url(./resources/envelope.png)' }}/>\n                Email login\n              </button>\n            </Link>\n            {addFromSignerButtons}\n            {addAccErr ? (<p className=\"error\">{addAccErr}</p>) : (<></>)}\n          </>) : (<div className=\"accountLoader\">\n            <Loading/>\n          </div>)}\n        </div>\n      </section>\n    </div>\n  )\n}\n","import './Balances.scss'\n\nimport networks from '../../../../consts/networks'\n\nconst Balances = ({ portfolio, selectedNetwork, setNetwork }) => {\n    const networkDetails = (network) => networks.find(({ id }) => id === network)\n    const otherBalances = portfolio.otherBalances.filter(({ network, total }) => network !== selectedNetwork.id && total.full > 0)\n\n    return (\n        <div id=\"balances\">\n            <span className=\"green-highlight\">$</span> { portfolio.balance.total.truncated }\n            <span className=\"green-highlight\">.{ portfolio.balance.total.decimals }</span>\n            <div id=\"other-balances\">\n                { otherBalances.length ? <label>You also have</label> : null }\n                {\n                    otherBalances.map(({ network, total }, i) => (\n                        <div className=\"balance-container\" key={network}>\n                            <div className=\"other-balance\" onClick={() => setNetwork(network)}>\n                                <label>\n                                    <span className=\"purple-highlight\">$</span> { total.truncated }\n                                    <span className=\"purple-highlight\">.{total.decimals}</span>\n                                </label>\n                                on\n                                <div className=\"network\">\n                                    <div className=\"icon\" style={{backgroundImage: `url(${networkDetails(network).icon})`}}></div>\n                                    <div className=\"name\">\n                                        { networkDetails(network).name }\n                                    </div>\n                                </div>\n                            </div>\n                            { otherBalances.length - 1 !== i ? <label>and</label> : null }\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default Balances","import './ProtocolsPlaceholder.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { Button } from '../../../../common'\nimport { MdOutlineAdd } from 'react-icons/md'\n\nconst ProtocolsPlaceholder = ({ onClickAddToken }) => {\n    const tokens = [\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0xade00c28244d5ce17d72e40330b1c318cd12b7c3.png',\n            symbol: 'ADX',\n            balance: 170027.26,\n            balanceUSD: 138880.64\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x0000000000000000000000000000000000000000.png',\n            symbol: 'ETH',\n            balance: 61.77,\n            balanceUSD: 283170.08\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599.png',\n            symbol: 'WBTC',\n            balance: 0.03,\n            balanceUSD: 2227.24\n        },\n    ]\n\n    return (\n        <div id=\"protocols-placeholder\" >\n            <div className=\"placeholder-overlay\">\n                <label>\n                    Welcome! You don't have any funds on this account.\n                </label>\n                <NavLink to=\"/wallet/deposit\">\n                    <Button small icon={<GiReceiveMoney/>}>Deposit</Button>\n                </NavLink>\n                <div className=\"add-token\">\n                    <label>You have a token that's not displayed?</label>\n                    <Button mini clear icon={<MdOutlineAdd/>} onClick={onClickAddToken}>Click here to add it</Button>\n                </div>\n            </div>\n            <div className=\"category\">\n                <div className=\"title\">Tokens</div>\n                <div className=\"list\">\n                    {\n                        tokens.map(({ icon, symbol, balance, balanceUSD }) => (\n                            <div className=\"token\" key={symbol}>\n                                <div className=\"icon\">\n                                    <img src={icon} alt=\"Token Icon\"/>\n                                </div>\n                                <div className=\"name\">\n                                    { symbol }\n                                </div>\n                                <div className=\"separator\"></div>\n                                <div className=\"balance\">\n                                    <div className=\"currency\">\n                                        { balance } <span className=\"symbol\">{ symbol }</span>\n                                    </div>\n                                    <div className=\"dollar\">\n                                        <span className=\"symbol\">$</span> { balanceUSD }\n                                    </div>\n                                </div>\n                            </div>\n                        ))\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ProtocolsPlaceholder","import './Protocols.scss'\n\nimport { GiToken } from 'react-icons/gi'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { NavLink } from 'react-router-dom'\nimport { Button, Loading } from '../../../common'\nimport ProtocolsPlaceholder from './ProtocolsPlaceholder/ProtocolsPlaceholder'\nimport { useState } from 'react'\nimport { MdOutlineAdd } from 'react-icons/md'\nimport { AddTokenModal } from '../../../Modals'\nimport { useModals } from '../../../../hooks'\n\nconst Protocols = ({ portfolio, network, account }) => {\n    const { showModal } = useModals()\n\n    const [failedImg, setFailedImg] = useState([])\n\n    const { isBalanceLoading, areProtocolsLoading, tokens, protocols } = portfolio\n    const sortedTokens = tokens.sort((a, b) => b.balanceUSD - a.balanceUSD)\n    const otherProtocols = protocols.filter(({ label }) => label !== 'Tokens')\n    const shouldShowPlaceholder = (!isBalanceLoading && !tokens.length) && (!areProtocolsLoading && !otherProtocols.length)\n\n    const tokenItem = (index, img, symbol, balance, balanceUSD, address, send = false) => \n        <div className=\"token\" key={`token-${address}-${index}`}>\n            <div className=\"icon\">\n                { \n                    failedImg.includes(img) ?\n                        <GiToken size={20}/>\n                        :\n                        <img src={img} draggable=\"false\" alt=\"Token Icon\" onError={() => setFailedImg(failed => [...failed, img])}/>\n                }\n            </div>\n            <div className=\"name\">\n                { symbol }\n            </div>\n            <div className=\"separator\"></div>\n            <div className=\"balance\">\n                <div className=\"currency\">\n                    <span className=\"value\">{ balance }</span>\n                    <span className=\"symbol\">{ symbol }</span>\n                </div>\n                <div className=\"dollar\">\n                    <span className=\"symbol\">$</span> { balanceUSD.toFixed(2) }\n                </div>\n            </div>\n            {\n                send ? \n                    <div className=\"actions\">\n                        <NavLink to={`/wallet/transfer/${address}`}>\n                            <Button small icon={<AiOutlineSend/>}>Send</Button>\n                        </NavLink>\n                    </div>\n                    :\n                    null\n            }\n        </div>\n\n    const openAddTokenModal = () => showModal(<AddTokenModal network={network} account={account} onAddToken={portfolio.onAddExtraToken}/>)\n\n    return (\n        <div id=\"protocols-table\">\n            {\n                shouldShowPlaceholder ?\n                    <ProtocolsPlaceholder onClickAddToken={openAddTokenModal}/>\n                    :\n                    null\n            }\n            <>\n                {\n                    isBalanceLoading ?\n                        <Loading/>\n                        :\n                        !shouldShowPlaceholder && sortedTokens.length ?\n                            <div className=\"category\" key=\"category-tokens\">\n                                <div className=\"title\">\n                                    Tokens\n                                    <Button mini clear icon={<MdOutlineAdd/>} onClick={() => openAddTokenModal()}>Add Token</Button>\n                                </div>\n                                <div className=\"list\">\n                                    { \n                                        sortedTokens.map(({ address, symbol, tokenImageUrl, balance, balanceUSD }, i) =>\n                                            tokenItem(i, tokenImageUrl, symbol, balance, balanceUSD, address, true))\n                                    }\n                                </div>\n                            </div>\n                        :\n                        null\n                }\n                {\n                    areProtocolsLoading ?\n                        <Loading/>\n                        :\n                            otherProtocols.map(({ label, assets }, i) => (\n                                <div className=\"category\" key={`category-${i}`}>\n                                    <div className=\"title\">{ label }</div>\n                                    <div className=\"list\">\n                                        {\n                                            assets.map(({ category, symbol, tokenImageUrl, balance, balanceUSD, address }, i) => \n                                                tokenItem(i, tokenImageUrl, symbol, balance, balanceUSD, address, category !== 'claimable'))\n                                        }\n                                    </div>\n                                </div>\n                            ))\n                }\n            </>\n        </div>\n    )\n}\n\nexport default Protocols","import './CollectiblesPlaceholder.scss'\n\nconst CollectiblesPlaceholder = () => {\n    const collectibles = [\n        {\n            collectionName: 'Party Bone',\n            collectionImg: 'https://lh3.googleusercontent.com/ZNc-hDBHOxgioSltBcDvh5hBfWEj623dETJj2nrEC0cLbjuULbo4Ign7OnLDX9qf2XaALrkXsZCRylRqPPHqQgzJOabJg4TRq3MDhA=s2500',\n            name: 'Party Bone #7865',\n            image: 'https://lh3.googleusercontent.com/uznp2aNVNPEhVk4MhLG2Zn-JC2sVaF6PsUcpF_CpyQkgekmv4hh4zbyebsoLFLvkY8PSV6D-TR5OaMp15RhG9zQsYd_AvDCo9SEVF4Q',\n            price: 32.16\n        },\n        {\n            collectionName: 'Pudgy Penguins',\n            collectionImg: 'https://lh3.googleusercontent.com/L9PJp0pOXCscKsTpD1_6zoALxdjG5gIKHLykS_Wk5J_yk590drEqRhM1ElTEZCaWeTjFj2isfxFw2tcFKcbCPlu6-Eu5bUuxsL-x=s2500',\n            name: 'Pudgy Penguin #8675',\n            image: 'https://lh3.googleusercontent.com/J6gQQRnzsMLAOhYiN9qIhogxr2MKn17zfGf6nQFKr3WCZ34thm6H0w9izvnJysxJclsyr8c3yo0hshOaLU73aS-IgTm-CooJb1cw1S0',\n            price: 5675.00\n        },\n        {\n            collectionName: 'Art Blocks Factory',\n            collectionImg: 'https://lh3.googleusercontent.com/sr7Y19-bJwsQsxX6n8Pj5tIaNKdUEotNlfhBsYw8McKpIsYARglTORaNlGhDZ2PrH-tO1vU6tFbpamiWwIImbidhVSh4aoIh4d310Og=s2500',\n            name: 'Transitions #4267',\n            image: 'https://lh3.googleusercontent.com/9MzvH_PSYMvlJE8Cfm5d308ltY5fZx-dooEcQizKgtKZ8g05RvJvd_5LAbqVHIzaoZbM-HOBgNSV8RKvEe_1thkLcQtE4NMMx8Kp5g',\n            price: 263.46\n        },\n        {\n            collectionName: 'Sad Frogs District',\n            collectionImg: 'https://lh3.googleusercontent.com/3U8N73XLrQOQPhJBAMNi7IPR1y3GGJ2zxmyUlit4IHCJURmKFPWClgatjbYfyz9drMk6-XSQTjSFqn7tKL0ZNoRbgvUu8OdLVREA=s2500',\n            name: '1882',\n            image: 'https://lh3.googleusercontent.com/3uwrfkdhHSfWm171BOjJHp3768tbLP9TeyTh2BnvgF6S1nIRI489SFq6EGjI9AISRUeyXXufEjB34Wj0bif_vl-y5h6GesEoJaaZcJg',\n            price: 1563.59\n        },\n        {\n            collectionName: 'GLUEWAVE',\n            collectionImg: 'https://lh3.googleusercontent.com/LheZMF6AyTLPpfwABwAGZqoC0gTWrDlYloDdT2VX2u_GZRZnP-ZpDC90huElm3RXE-eU1d1YluQi8G1uVdeDdysUNLZWJte4jXk3zeY=s2500',\n            name: '000105040307070704',\n            image: 'https://lh3.googleusercontent.com/eP_F_6aa_BXuKfYq1w2aiS6UW3bp4-gByFoeKLMXYuWAkU6Xiyi7mkm31aoewCZ_eG9RAuhas8jxFwXTxAWuxq1E3ZxYg97cLUUE',\n            price: 7107.27\n        }\n    ]\n\n    return (\n        <div id=\"collectibles-placeholder\">\n            <div className=\"placeholder-text\">\n                You don't have any collectibles (NFTs) yet\n            </div>\n            <div className=\"placeholder-overlay\"></div>\n            <div id=\"collectibles\">\n                {\n                    collectibles.map(({ collectionName, collectionImg, name, image, price}) => (\n                        <div className=\"collectible\" key={name}>\n                            <div className=\"artwork\" style={{backgroundImage: `url(${image})`}}/>\n                            <div className=\"info\">\n                                <div className=\"collection\">\n                                    <div className=\"collection-icon\" style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                    { collectionName }\n                                </div>\n                                <div className=\"details\">\n                                    <div className=\"name\">{ name }</div>\n                                    <div className=\"value\"><span className=\"purple-highlight\">$</span> { price }</div>\n                                </div>\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default CollectiblesPlaceholder","import './Collectibles.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport CollectiblesPlaceholder from './CollectiblesPlaceholder/CollectiblesPlaceholder'\n\nconst Collectibles = ({ collectibles }) => {\n    return (\n        !collectibles.length ?\n            <CollectiblesPlaceholder/>\n            :\n            <div id=\"collectibles\">\n                {\n                    collectibles.map(({ tokens }) => tokens.map(({ network, address, collectionName, collectionImg, assets }) => assets.map(({ tokenId, assetName, assetImg, balanceUSD }) => (\n                        <div className=\"collectible\" key={tokenId}>\n                            <NavLink to={`/wallet/nft/${network}/${address}/${tokenId}`}>\n                                <div className=\"artwork\" style={{backgroundImage: `url(${assetImg})`}}/>\n                                <div className=\"info\">\n                                    <div className=\"collection\">\n                                        <div className=\"collection-icon\" style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                        <span className=\"collection-name\">{ collectionName }</span>\n                                    </div>\n                                    <div className=\"details\">\n                                        <div className=\"name\">{ assetName }</div>\n                                        <div className=\"value\"><span className=\"purple-highlight\">$</span> { balanceUSD.toFixed(2) }</div>\n                                    </div>\n                                </div>\n                            </NavLink>\n                        </div>\n                    ))))\n                }\n            </div>\n    )\n}\n\nexport default Collectibles","import './Dashboard.scss'\n\nimport { useEffect, useLayoutEffect, useState } from 'react'\n\nimport { Chart, Loading, Segments } from '../../common'\nimport Balances from './Balances/Balances'\nimport Protocols from './Protocols/Protocols'\nimport Collectibles from './Collectibles/Collectibles'\nimport { MdOutlineInfo } from 'react-icons/md'\n\nexport default function Dashboard({ portfolio, selectedNetwork, selectedAccount, setNetwork }) {\n\n    const [chartTokensData, setChartTokensData] = useState([]);\n    const [chartProtocolsData, setChartProtocolsData] = useState([]);\n    const [chartType, setChartType] = useState([]);\n    const [tableType, setTableType] = useState([]);\n\n    const chartSegments = [\n        {\n            value: 'Tokens'\n        },\n        {\n            value: 'Protocols'\n        }\n    ]\n\n    const tableSegments = [\n        {\n            value: 'Tokens'\n        },\n        {\n            value: 'Collectibles'\n        }\n    ]\n\n    useLayoutEffect(() => {\n        const tokensData = portfolio.tokens\n            .map(({ label, symbol, balanceUSD }) => ({\n                label: label || symbol,\n                value: Number(((balanceUSD / portfolio.balance.total.full) * 100).toFixed(2))\n            }))\n            .filter(({ value }) => value > 0);\n\n        const totalProtocols = portfolio.protocols.map(({ assets }) => \n            assets\n                .map(({ balanceUSD }) => balanceUSD)\n                .reduce((acc, curr) => acc + curr, 0))\n            .reduce((acc, curr) => acc + curr, 0)\n\n        const protocolsData = portfolio.protocols\n            .map(({ label, assets }) => ({\n                label,\n                value: Number(((assets.map(({ balanceUSD }) => balanceUSD).reduce((acc, curr) => acc + curr, 0) / totalProtocols) * 100).toFixed(2))\n            }))\n            .filter(({ value }) => value > 0)\n\n        setChartTokensData(tokensData);\n        setChartProtocolsData(protocolsData)\n    }, [portfolio.balance, portfolio.tokens, portfolio.protocols]);\n\n    useEffect(() => portfolio.requestOtherProtocolsRefresh(), [portfolio])\n\n    return (\n        <section id=\"dashboard\">\n            <div id=\"overview\">\n                <div id=\"balance\" className=\"panel\">\n                    <div className=\"title\">Balance</div>\n                    <div className=\"content\">\n                        {\n                            portfolio.isBalanceLoading ? \n                                <Loading/>\n                                :\n                                <Balances\n                                    portfolio={portfolio}\n                                    selectedNetwork={selectedNetwork}\n                                    setNetwork={setNetwork}\n                                />\n                        }\n                    </div>\n                </div>\n                <div id=\"chart\" className=\"panel\">\n                    <div className=\"title\">\n                        Balance by\n                        <Segments small defaultValue={chartSegments[0].value} segments={chartSegments} onChange={setChartType}/>\n                    </div>\n                    <div className=\"content\">\n                        {\n                            chartType === chartSegments[0].value ?\n                                portfolio.isBalanceLoading ?\n                                    <Loading/>\n                                    :\n                                    <Chart data={chartTokensData} size={200}/>\n                                :\n                                portfolio.areProtocolsLoading ?\n                                    <Loading/>\n                                    :\n                                    <Chart data={chartProtocolsData} size={200}/>\n                        }\n                    </div>\n                </div>\n            </div>\n            <div id=\"table\" className=\"panel\">\n                <div className=\"title\">\n                    Assets\n                    <Segments small defaultValue={tableSegments[0].value} segments={tableSegments} onChange={setTableType}></Segments>\n                </div>\n                <div className=\"content\">\n                    {\n                        tableType === tableSegments[0].value ?\n                            <Protocols\n                                portfolio={portfolio}\n                                network={selectedNetwork}\n                                account={selectedAccount}\n                            />\n                            :\n                            <Collectibles collectibles={portfolio.collectibles}/>\n                    }\n                </div>\n                <div className=\"footer\">\n                    <div id=\"missing-token-notice\">\n                        <MdOutlineInfo/>\n                        <span>\n                            If you don't see a specific token that you own, please check the <a href={`${selectedNetwork.explorerUrl}/address/${selectedAccount}`} target=\"_blank\" rel=\"noreferrer\">Block Explorer</a>\n                        </span>\n                    </div>\n                    {\n                        portfolio.areProtocolsLoading || !portfolio.protocols.length ?\n                            null\n                            :\n                            <div className=\"powered\">\n                                Powered by Velcro\n                            </div>\n                    }\n                </div>\n            </div>\n        </section>\n    )\n}\n","import './Accounts.scss'\n\nimport { useState } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { AiOutlinePlus } from 'react-icons/ai'\nimport { MdOutlineContentCopy, MdLogout, MdOutlineClose, MdOutlineCheck } from 'react-icons/md'\nimport * as blockies from 'blockies-ts';\nimport { DropDown, Button } from '../../../common';\nimport { useToasts } from '../../../../hooks/toasts';\n\nconst Accounts = ({ accounts, selectedAddress, onSelectAcc, onRemoveAccount }) => {\n    const { addToast } = useToasts()\n    const [logoutWarning, setLogoutWarning] = useState(false)\n    const [closed, setClosed] = useState(false)\n\n    const shortenedAddress = address => address.slice(0, 5) + '...' + address.slice(-3)\n    const isActive = id => id === selectedAddress ? 'active' : ''\n    const toIcon = seed => blockies.create({ seed }).toDataURL()\n    const toIconBackgroundImage = seed => ({ backgroundImage: `url(${toIcon(seed)})`})\n    const walletType = signerExtra => {\n        if (signerExtra && signerExtra.type === 'ledger') return 'Ledger'\n        else if (signerExtra && signerExtra.type === 'trezor') return 'Trezor'\n        else return 'Web3'\n    }\n    const copyAddress = async address => {\n        await navigator.clipboard.writeText(address)\n        addToast('Copied to clipboard!')\n    }\n\n    const onSelectAccount = (id) => {\n        onSelectAcc(id)\n        setClosed(true)\n    }\n\n    return (\n        <DropDown id=\"accounts\" icon={toIcon(selectedAddress)} title={shortenedAddress(selectedAddress)} open={closed} onOpen={() => setClosed(false)}>\n          <div className=\"list\">\n            {\n              accounts.map(({ id, email, signer, signerExtra }) => \n                logoutWarning !== id ?\n                    <div className={`account ${isActive(id)}`} key={id}>\n                        <div className=\"inner\" onClick={() => onSelectAccount(id)}>\n                            <div className=\"icon\" style={toIconBackgroundImage(id)}></div>\n                            <div className=\"details\">\n                                <div className=\"address\">{ id }</div>\n                                <label>{ email ? `Email/Password account (${email})` : `${walletType(signerExtra)} (${shortenedAddress(signer.address)})` }</label>\n                            </div>\n                        </div>\n                        <div className=\"buttons\">\n                            <div className=\"button\" onClick={() => copyAddress(id)}>\n                                <MdOutlineContentCopy/>\n                            </div>\n                            <div className=\"button\" onClick={() => setLogoutWarning(id)}>\n                                <MdLogout/>\n                            </div>\n                        </div>\n                    </div>\n                    :\n                    <div id=\"confirm-delete-account\" className={`account ${isActive(id)}`} key={id}>\n                        <div className=\"message\">\n                            Are you sure you want to log out from this account ?\n                        </div>\n                        <div className=\"buttons\">\n                            <div className=\"button danger\" onClick={() => {\n                                setLogoutWarning(false)\n                                onRemoveAccount(id)\n                            }}>\n                                <MdOutlineCheck/>\n                            </div>\n                            <div className=\"button\" onClick={() => setLogoutWarning(false)}>\n                                <MdOutlineClose/>\n                            </div>\n                        </div>\n                    </div>\n              )\n            }\n          </div>\n          <div id=\"add-account\">\n            <NavLink to=\"/add-account\">\n              <Button icon={<AiOutlinePlus/>} small>Add Account</Button>\n            </NavLink>\n          </div>\n        </DropDown>\n    )\n}\n\nexport default Accounts","import './DApps.scss'\n\nimport React, { useState, useCallback } from 'react'\nimport { FiHelpCircle } from 'react-icons/fi'\nimport { BiTransferAlt } from 'react-icons/bi'\nimport { MdBrokenImage } from 'react-icons/md'\nimport { AiOutlineDisconnect } from 'react-icons/ai'\nimport { DropDown, ToolTip, Button } from \"../../../common\"\nimport { checkClipboardPermission } from '../../../../helpers/permissions'\nimport { MdOutlineWarning } from 'react-icons/md'\n\nconst timePastForConnectionErr = 1 * 60 * 1000\n\nconst DApps = ({ connections, connect, disconnect }) => {\n    const [isClipboardGranted, setClipboardGranted] = useState(false)\n\n    const checkPermission = async () => {\n        const status = await checkClipboardPermission()\n        setClipboardGranted(status)\n        return status\n    }\n\n    const readClipboard = useCallback(async () => {\n        if (isClipboardGranted) {\n            const content = await navigator.clipboard.readText()\n            if (content.startsWith('wc:')) connect({ uri: content })\n        } else {\n            const uri = prompt('Enter WalletConnect URI')\n            if (uri) connect({ uri })\n        }\n    }, [connect, isClipboardGranted])\n\n    const isLegacyWC = ({ bridge }) => /https:\\/\\/bridge.walletconnect.org/g.test(bridge)\n    const isConnectionInterrupted = ({ errors = [] }) =>\n        errors.length > 2\n        && errors.slice(-3)\n            .every(({ time } = {}) => time > (Date.now() - timePastForConnectionErr))\n\n    return (\n        <DropDown id=\"dApps\" title=\"dApps\" badge={connections.length} onOpen={() => checkPermission()}>\n            <div id=\"connect-dapp\">\n                <div className=\"heading\">\n                    <Button small icon={<BiTransferAlt />} disabled={isClipboardGranted} onClick={readClipboard}>\n                        Connect dApp\n                    </Button>\n                    <a href='https://help.ambire.com/hc/en-us/articles/4410889965842' target='_blank' rel='noreferrer'>\n                        <FiHelpCircle size={30} />\n                    </a>\n                </div>\n                {isClipboardGranted ? (\n                    <label>\n                        Automatic connection enabled, just copy a WalletConnect URL and\n                        come back to this tab.\n                    </label>\n                ) : null}\n            </div>\n            {connections.map(({ session, uri }) => (\n                <div className=\"item dapps-item\" key={session.key}>\n                    <div className=\"icon\">\n                        <div className=\"icon-overlay\" style={{backgroundImage: `url(${session.peerMeta.icons.filter(x => !x.endsWith('favicon.ico'))[0]})`}}/>\n                        <MdBrokenImage/>\n                    </div>\n                    <a href={session.peerMeta.url} target=\"_blank\" rel=\"noreferrer\">\n                        <div className=\"details\">\n                            { \n                                isLegacyWC(session) ? \n                                    <ToolTip className=\"session-warning\" label=\"dApp uses legacy WalletConnect bridge which is unreliable and often doesn't work. Please tell the dApp to update to the latest WalletConnect version.\">\n                                        <MdOutlineWarning/>\n                                    </ToolTip>\n                                    :\n                                    null\n                            }\n                            {\n                                isConnectionInterrupted(session) ?\n                                    <ToolTip className=\"session-error\" label=\"WalletConnect connection is offline. Check again later. If this warning persist try to disconnect and connect WalletConnect.\">\n                                        <AiOutlineDisconnect />\n                                    </ToolTip>\n                                    :\n                                    null\n                            }\n                            <div className=\"name\">{session.peerMeta.name}</div>\n                        </div>\n                    </a>\n                    <div className=\"separator\"></div>\n                    <button onClick={() => disconnect(uri)}>Disconnect</button>\n                </div>\n          ))}\n        </DropDown>\n    )\n}\n\nexport default DApps","import './Links.scss'\n\nimport { DropDown } from \"../../../common\"\nimport { MdChatBubbleOutline, MdMenuBook, MdOutlineHelpOutline, MdOutlineLightbulb } from \"react-icons/md\";\nimport { BsDiscord, BsTelegram, BsTwitter } from \"react-icons/bs\";\nimport { useState } from 'react';\n\nconst Links = () => {\n    const [linksViewed, setLinksViewed] = useState(() => localStorage.linksViewed ? JSON.parse(localStorage.linksViewed) : false) \n\n    const onOpen = () => {\n        localStorage.linksViewed = true\n        setLinksViewed(true)\n    }\n\n    return (\n        <DropDown id=\"help-dropdown\" className={`${linksViewed ? 'viewed' : ''}`} title={<MdOutlineHelpOutline/>} onOpen={onOpen}>\n            <a className=\"item\" href='https://help.ambire.com/hc/en-us/categories/4404980091538-Ambire-Wallet' target=\"_blank\" rel=\"noreferrer\">\n                <MdMenuBook/> Help Center\n            </a>\n            <a className=\"item\" href=\"https://help.ambire.com/hc/en-us/requests/new\" target=\"_blank\" rel=\"noreferrer\">\n                <MdChatBubbleOutline/> Report an issue\n            </a>\n            <a className=\"item\" href=\"https://discord.gg/nMBGJsb\" target=\"_blank\" rel=\"noreferrer\">\n                <BsDiscord/> Discord\n            </a>\n            <a className=\"item\" href=\"https://twitter.com/AmbireWallet\" target=\"_blank\" rel=\"noreferrer\">\n                <BsTwitter/> Twitter\n            </a>\n            <a className=\"item\" href=\"https://t.me/AdExNetworkOfficial\" target=\"_blank\" rel=\"noreferrer\">\n                <BsTelegram/> Telegram\n            </a>\n            <a className=\"item\" href=\"https://www.ambire.com/Ambire%20ToS%20and%20PP%20(26%20November%202021).pdf\" target=\"_blank\" rel=\"noreferrer\">\n                <MdOutlineLightbulb/> ToS\n            </a>\n        </DropDown>\n    )\n}\n\nexport default Links","import \"./TopBar.scss\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { MdOutlineArrowForward, MdOutlineClose, MdOutlineMenu } from \"react-icons/md\";\nimport { Button, Select, ToolTip } from \"../../common\";\nimport Accounts from \"./Accounts/Accounts\";\nimport DApps from \"./DApps/DApps\";\nimport * as blockies from 'blockies-ts';\nimport Links from \"./Links/Links\";\nimport { useModals } from \"../../../hooks\";\nimport { WalletTokenModal } from \"../../Modals\";\n\nconst TopBar = ({\n  connections,\n  connect,\n  disconnect,\n  onSelectAcc,\n  onRemoveAccount,\n  selectedAcc,\n  accounts,\n  network,\n  setNetwork,\n  allNetworks,\n  rewardsData\n}) => {\n  const { showModal } = useModals()\n  const [isMenuOpen, setMenuOpen] = useState(false)\n  const [rewards, setRewards] = useState({})\n  const [rewardsTotal, setRewardsTotal] = useState(0)\n  const { isLoading, data, errMsg } = rewardsData\n  \n  const networksItems = allNetworks.map(({ id, name, icon }) => ({\n    label: name,\n    value: id,\n    icon\n  }))\n\n  const account = accounts.find(({ id }) => id === selectedAcc)\n  const accountIcon = blockies.create({ seed: account ? account.id : null }).toDataURL()\n\n  const showWalletTokenModal = () => showModal(<WalletTokenModal rewards={rewards}/>)\n\n  useEffect(() => {\n      if (errMsg || !data || !data.success) return\n\n      const { rewards, multipliers } = data\n      if (!rewards.length) return\n\n      const rewardsDetails = Object.fromEntries(rewards.map(({ _id, rewards }) => [_id, rewards[account.id] || 0]))\n      const rewardsTotal = Object.values(rewardsDetails).reduce((acc, curr) => acc + curr, 0)\n      rewardsDetails.multipliers = multipliers\n\n      setRewardsTotal(rewardsTotal)\n      setRewards(rewardsDetails)\n  }, [data, errMsg, account])\n\n  return (\n    <div id=\"topbar\">\n      <div id=\"mobile-menu\" onClick={() => setMenuOpen(!isMenuOpen)}>\n        <div className=\"icon\" style={{backgroundImage: `url(${accountIcon})`}}></div>\n        <MdOutlineArrowForward/>\n        <div className=\"icon\" style={{backgroundImage: `url(${network.icon})`}}></div>\n        <div id=\"menu-button\">\n          { isMenuOpen ? <MdOutlineClose/> : <MdOutlineMenu/> }\n        </div>\n      </div>\n\n      <NavLink to={'/wallet/dashboard'}>\n        <div id=\"logo\" />\n        <div id=\"icon\" />\n      </NavLink>\n      <div className={`container ${isMenuOpen ? 'open' : ''}`}>\n        {\n          !isLoading && (errMsg || !data) ?\n            <ToolTip label=\"WALLET rewards are not available without a connection to the relayer\">\n              <Button small border disabled onClick={showWalletTokenModal}>Unavailable</Button>\n            </ToolTip>\n            :\n            <Button small border disabled={isLoading} onClick={showWalletTokenModal}>{ rewardsTotal.toFixed(3) } WALLET</Button>\n        }\n        <DApps connections={connections} connect={connect} disconnect={disconnect}/>\n        <Accounts accounts={accounts} selectedAddress={selectedAcc} onSelectAcc={onSelectAcc} onRemoveAccount={onRemoveAccount}/>\n        <Select defaultValue={network.id} items={networksItems} onChange={value => setNetwork(value)}/>\n        <Links/>\n      </div>\n    </div>\n  );\n};\n\nexport default TopBar;\n","import './SideBar.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport { MdDashboard, MdLock, MdCompareArrows, MdHelpCenter } from 'react-icons/md'\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { BsCurrencyExchange } from 'react-icons/bs'\nimport { BsPiggyBank } from 'react-icons/bs'\nimport { BiTransfer } from 'react-icons/bi'\nimport { CgArrowsExchangeV } from 'react-icons/cg'\nimport { Loading } from '../../common'\nimport { useCallback, useEffect, useRef, useState } from 'react'\n\nconst helpCenterUrl = 'https://help.ambire.com/hc/en-us/categories/4404980091538-Ambire-Wallet'\n\nconst SideBar = ({ match, portfolio }) => {\n  const sidebarRef = useRef()\n  const [balanceFontSize, setBalanceFontSize] = useState(0)\n    const resizeBalance = useCallback(() => {\n        const balanceFontSizes = {\n            3: '2em',\n            5: '1.5em',\n            7: '1.3em',\n            9: '1.2em',\n            11: '1em',\n        }\n\n        const charLength = portfolio.balance.total.truncated.length\n        const closest = Object.keys(balanceFontSizes).reduce((prev, current) => Math.abs(current - charLength) < Math.abs(prev - charLength) ? current : prev)\n        setBalanceFontSize(balanceFontSizes[closest])\n    }, [portfolio.balance.total])\n\n    useEffect(() => resizeBalance(), [resizeBalance])\n\n  return (\n    <div id=\"sidebar\" ref={sidebarRef}>\n      <div className=\"balance\">\n        <label>Balance</label>\n        {portfolio.isBalanceLoading ? (\n          <Loading />\n        ) : (\n          <div\n            className=\"balanceDollarAmount\"\n            style={{ fontSize: balanceFontSize }}\n          >\n            <span className=\"dollarSign highlight\">$</span>\n            {portfolio.balance.total.truncated}\n            <span className=\"highlight\">\n              .{portfolio.balance.total.decimals}\n            </span>\n          </div>\n        )}\n      </div>\n      <nav>\n        <NavLink to={match.url + \"/dashboard\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <MdDashboard/>Dashboard\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/deposit\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <GiReceiveMoney/>Deposit\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/transfer\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <BiTransfer/>Transfer\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/swap\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <BsCurrencyExchange/>Swap\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/cross-chain\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <CgArrowsExchangeV/>Cross-Chain\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/earn\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <BsPiggyBank/>Earn\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/transactions\"} activeClassName=\"selected\">\n          <div className=\"item\">\n                <MdCompareArrows/>Transactions\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/security\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <MdLock/>Security\n          </div>\n        </NavLink>\n        <div className=\"separator\"></div>\n        <a href={helpCenterUrl} target=\"_blank\" rel=\"noreferrer\">\n          <div className=\"item\" id=\"help-center\">\n            <MdHelpCenter/>Help Center\n          </div>\n        </a>\n      </nav>\n    </div>\n  )\n}\n\nexport default SideBar\n","export default __webpack_public_path__ + \"static/media/ramp.26a99e26.svg\";","export default __webpack_public_path__ + \"static/media/paytrie.338f7c3b.svg\";","export default __webpack_public_path__ + \"static/media/transak.e01c0265.svg\";","import { RampInstantSDK } from '@ramp-network/ramp-instant-sdk'\nimport transakSDK from '@transak/transak-sdk'\nimport { popupCenter } from '../helpers/popupHelper'\nimport url from 'url'\n\nimport { RAMP_HOST_API_KEY, PAYTRIE_PARTNER_URL, TRANSAK_API_KEY, TRANSAK_ENV } from '../config'\n\nexport const openRampNetwork = ({ walletAddress, selectedNetwork }) => {\n    const assetsList = {\n        ethereum: 'ERC20_*,ETH_*',\n        polygon: 'MATIC_ERC20_*,MATIC_*',\n        avalanche: 'AVAX_*',\n        'binance-smart-chain': 'BSC_*,BSC_ERC20_*',\n    }\n\n    const widget = new RampInstantSDK({\n        hostAppName: 'Ambire',\n        hostLogoUrl: 'https://www.ambire.com/ambire-logo.png',\n        variant: 'auto',\n        swapAsset: assetsList[selectedNetwork],\n        userAddress: walletAddress,\n        hostApiKey: RAMP_HOST_API_KEY,\n    })\n    widget.show()\n};\n\nexport const openPayTrie = ({ walletAddress, selectedNetwork }) => {\n    const rightSideLabels = {\n        ethereum: 'USDC',\n        polygon: 'USDC-P',\n        'binance-smart-chain': 'USDT-B',\n    }\n\n    const URL = url.parse(PAYTRIE_PARTNER_URL, true)\n    URL.search = null\n    URL.query = {\n        ...URL.query,\n        addr: walletAddress,\n        rightSideLabel: rightSideLabels[selectedNetwork]\n    }\n\n    popupCenter({\n        url: url.format(URL),\n        title: 'Paytrie Deposit',\n        w: 450,\n        h: 700,\n    })\n};\n\nexport const openTransak = ({ walletAddress, selectedNetwork }) => {\n    const networksAlias = {\n        'avalanche': 'avaxcchain',\n        'binance-smart-chain': 'bsc'\n    }\n\n    const defaultCurency = {\n        'ethereum': 'USDC',\n        'polygon': 'USDC',\n        'arbitrum': 'ETH',\n        'avalanche': 'AVAX',\n        'binance-smart-chain': 'BNB'\n    }\n\n    const transak = new transakSDK({\n        apiKey: TRANSAK_API_KEY,\n        environment: TRANSAK_ENV,\n        networks: networksAlias[selectedNetwork] || selectedNetwork,\n        defaultCryptoCurrency: defaultCurency[selectedNetwork],\n        disableWalletAddressForm: true,\n        walletAddress,\n        themeColor: '282b33',\n        email: '',\n        redirectURL: '',\n        hostURL: window.location.origin,\n        widgetHeight: 'calc(100% - 60px)',\n        widgetWidth: '100%',\n    })\n\n    transak.init()\n\n    transak.on(transak.ALL_EVENTS, data => {\n        console.log(data)\n    })\n\n    transak.on(transak.EVENTS.TRANSAK_ORDER_SUCCESSFUL, orderData => {\n        console.log(orderData)\n        transak.close()\n    })\n}\n","export const popupCenter = ({ url, title, w, h }) => {\n\t// Fixes dual-screen position                             Most browsers      Firefox\n\tconst dualScreenLeft =\n\t\twindow.screenLeft !== undefined ? window.screenLeft : window.screenX\n\tconst dualScreenTop =\n\t\twindow.screenTop !== undefined ? window.screenTop : window.screenY\n\n\tconst width = window.innerWidth\n\t\t? window.innerWidth\n\t\t: document.documentElement.clientWidth\n\t\t? document.documentElement.clientWidth\n\t\t: window.screen.width\n\tconst height = window.innerHeight\n\t\t? window.innerHeight\n\t\t: document.documentElement.clientHeight\n\t\t? document.documentElement.clientHeight\n\t\t: window.screen.height\n\n\tconst systemZoom = width / window.screen.availWidth\n\tconst left = (width - w) / 2 / systemZoom + dualScreenLeft\n\tconst top = (height - h) / 2 / systemZoom + dualScreenTop\n\tconst newWindow = window.open(\n\t\turl,\n\t\ttitle,\n\t\t`\n\t\ttoolbar=no,scrollbars=no,resizable=no\n\t\twidth=${w / systemZoom}, \n\t\theight=${h / systemZoom}, \n\t\ttop=${top}, \n\t\tleft=${left},\n\t\t`\n\t)\n\n\tif (window.focus) newWindow.focus()\n}","import './Providers.scss'\n\nimport RAMP_LOGO from '../../../../resources/ramp.svg';\nimport PAYTRIE_LOGO from '../../../../resources/paytrie.svg';\nimport TRANSAK_LOGO from '../../../../resources/transak.svg';\n\nimport { openRampNetwork, openPayTrie, openTransak } from '../../../../services/providers'\n\nexport default function Providers({ walletAddress, networkDetails }) {\n    const providers = [\n        {\n            logo: RAMP_LOGO,\n            name: 'Ramp',\n            type: 'Bank Transfer, Credit/Debit Card, Apple Pay',\n            fees: '0.49%-2.9%',\n            limits: '10,000EUR/m',\n            currencies: 'USD, EUR, GBP',\n            networks: ['ethereum', 'polygon', 'avalanche', 'binance-smart-chain'],\n            onClick: () => openRampNetwork({walletAddress, selectedNetwork: networkDetails.id})\n        },\n        {\n            logo: PAYTRIE_LOGO,\n            name: 'PayTrie',\n            type: 'Bank Transfer',\n            fees: '1% (min. $2 CAD)',\n            limits: '$2,000CAD/day',\n            currencies: 'CAD',\n            networks: ['ethereum', 'polygon', 'binance-smart-chain'],\n            onClick: () => openPayTrie({walletAddress, selectedNetwork: networkDetails.id})\n        },\n        {\n            logo: TRANSAK_LOGO,\n            name: 'Transak',\n            type: 'Credit/Debit card and Bank Transfer (methods availability depends on location)',\n            fees: 'from 0.5%',\n            limits: 'up to 15,000 EUR/day',\n            currencies: 'GBP, EUR, USD and many more',\n            networks: ['ethereum', 'polygon', 'avalanche', 'arbitrum', 'binance-smart-chain'],\n            onClick: () => openTransak({walletAddress, selectedNetwork: networkDetails.id})\n        }\n    ];\n\n    const shouldBeDisabled = (networks) => {\n        return networks.includes(networkDetails.id) ? null : 'disabled'; \n    };\n\n    return (\n        <div id=\"providers\">\n            {\n                providers.map(({ logo, name, type, fees, limits, currencies, networks, onClick }) =>\n                    <div className={`provider ${shouldBeDisabled(networks)}`} key={name} onClick={onClick}>\n                        <div className=\"logo\">\n                            <img src={logo} alt={name}></img>\n                        </div>\n                        <div className=\"details\">\n                            <div className=\"type\">\n                                { type }\n                            </div>\n                            <div className=\"fees\">\n                                Fees: { fees }\n                            </div>\n                            <div className=\"limits\">\n                                Limits: { limits }\n                            </div>\n                            <div className=\"currencies\">\n                                Currencies: { currencies }\n                            </div>\n                        </div>\n                    </div>\n                )\n            }\n            {\n                networkDetails.id !== 'ethereum' ? \n                    <div id=\"network-warning\">\n                        <b>NOTE:</b> Some deposit methods are unavailable on <b>{networkDetails.name}</b>. Switch to Ethereum for the widest support.\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n}\n","import './Deposit.scss'\n\nimport { useCallback, useEffect, useState } from 'react'\nimport { MdAccountBalance, MdAccountBalanceWallet } from 'react-icons/md'\nimport QRCode from 'qrcode'\nimport TextInput from '../../common/TextInput/TextInput'\nimport Providers from './Providers/Providers'\n\nimport networks from '../../../consts/networks'\n\nexport default function Deposit({ selectedAcc, selectedNetwork }) {\n    const networkDetails = networks.find(({ id }) => id === selectedNetwork)\n    const [qrCodeUrl, setQrCodeUrl] = useState('')\n\n    const generateQRCode = useCallback(() => {\n        QRCode.toDataURL(selectedAcc, {\n            quality: 1,\n            margin: 1\n        }, (error, url) => {\n            if (error) return console.error(error)\n            setQrCodeUrl(url)\n        })\n    }, [selectedAcc])\n\n    useEffect(() => generateQRCode(), [generateQRCode])\n\n    return (\n        <section id=\"deposit\">\n            <div className=\"panel\">\n                <div className=\"heading\">\n                     <div className=\"title\">\n                        <MdAccountBalanceWallet size={35}/>\n                        Deposit Tokens\n                    </div>\n                    <div className=\"subtitle\">\n                        Direct Deposit\n                    </div>\n                </div>\n                <div className=\"description\">\n                    <TextInput className=\"depositAddress\" label={`Send ${networkDetails.nativeAssetSymbol}, tokens or collectibles (NFTs) to this address:`} value={selectedAcc} copy/>\n                    <img id=\"qr-code\" alt=\"QR Code\" src={qrCodeUrl}></img>\n                </div>\n                <div id=\"networks\">\n                    Following networks supported on this address:\n                    <div className=\"list\">\n                        {\n                            networks.map(({ id, icon, name }) => (\n                                <div className=\"network\" key={id}>\n                                    <div className=\"icon\" style={{backgroundImage: `url(${icon})`}}></div>\n                                    <div className=\"name\">{ name }</div>\n                                </div>\n                            ))\n                        }\n                    </div>\n                </div>\n            </div>\n            <div className=\"panel\">\n                <div className=\"heading\">\n                    <div className=\"title\">\n                        <MdAccountBalance size={35}/>\n                        Fiat Currency\n                    </div>\n                    <div className=\"subtitle\">\n                        Credit Card & Bank Transfer\n                    </div>\n                </div>\n                <div className=\"description\">\n                    Deposit with credit card to your account directly using one of our partners\n                </div>\n                <Providers walletAddress={selectedAcc} networkDetails={networkDetails}/>\n            </div>\n        </section>\n    )\n}","import './GnosisSafeApps.scss'\n\nimport { useEffect, useRef, useState } from 'react'\nimport {\n    Skeleton,\n    AmbireLoading\n} from '../../common'\n\nexport default function GnosisSafeAppIframe({\n    selectedApp = {},\n    title = 'Ambire Plugin',\n    network,\n    selectedAcc,\n    gnosisConnect,\n    gnosisDisconnect\n}) {\n\n    const { chainId } = network || {}\n    const { url } = selectedApp || {}\n    const [loading, setLoading] = useState(true)\n    const [hash, setHash] = useState('')\n    const iframeRef = useRef(null);\n\n\n    useEffect(() => {\n        const newHash = url + chainId + selectedAcc\n        setHash(newHash)\n    }, [chainId, selectedAcc, url])\n\n    useEffect(() => {\n        setLoading(true)\n    }, [hash])\n\n    useEffect(() => {\n        gnosisConnect({\n            selectedAcc,\n            iframeRef,\n            app: selectedApp\n        });\n\n        return () => {\n            gnosisDisconnect()\n        }\n\n    }, [selectedApp, network, selectedAcc, iframeRef, gnosisConnect, gnosisDisconnect])\n\n    return (\n        <div id=\"plugin-gnosis-container\">\n            {\n                loading &&\n                <div className='iframe-placeholder'>\n                    <Skeleton >\n                        <AmbireLoading />\n                    </Skeleton>\n                </div>\n            }\n\n            {\n                url &&\n                <iframe\n                    id={hash}\n                    key={hash}\n                    ref={iframeRef}\n                    title={title}\n                    src={url}\n                    onLoad={() => setLoading(false)}\n                    style={loading ? { display: 'none' } : {}}\n                />\n            }\n        </div>)\n}\n","import { SUSHI_SWAP_FRAME } from '../../../config'\nimport GnosisSafeAppIframe from '../../Plugins/GnosisSafeApps/GnosisSafeAppIframe'\n\nconst ambireSushi = {\n    name: \"Ambire swap\",\n    url: SUSHI_SWAP_FRAME,\n    logo: 'https://www.ambire.com/ambire-logo.png',\n    desc: 'Ambire swap'\n}\n\nexport default function SushiSwap({ network, selectedAcc, gnosisConnect, gnosisDisconnect }) {\n    return (\n        <GnosisSafeAppIframe\n            network={network}\n            selectedAcc={selectedAcc}\n            gnosisConnect={gnosisConnect}\n            gnosisDisconnect={gnosisDisconnect}\n            selectedApp={ambireSushi}\n            title={'Ambire swap'}\n        />\n    )\n}","import './Swap.scss';\n\nimport React from 'react';\nimport SwapComponent from './SushiIframe'\n\nexport default function Swap(props) {\n    return (\n        <section id=\"swap\">     \n            <SwapComponent {...props} />  \n        </section>\n    )\n}","import { parseUnits } from 'ethers/lib/utils'\nimport { isValidAddress, isKnownTokenOrContract } from \"../../helpers/address\"\n\nconst validateAddress = address => {\n    if (!(address && address.length)) {\n        return {\n            success: false,\n            message: ''\n        }\n    }\n\n    if (!(address && isValidAddress(address))) {\n        return {\n            success: false,\n            message: 'Invalid address.'\n        }\n    }\n\n    return { success: true }\n}\n\nconst validateAddAuthSignerAddress = (address, selectedAcc) => {\n    const isValidAddr = validateAddress(address)\n    if (!isValidAddr.success) return isValidAddr\n\n    if (address && selectedAcc && (address === selectedAcc)) {\n        return {\n            success: false,\n            message: 'The entered address should be different than the your own account address.'\n        }\n    }\n    \n    return { success: true }\n}\n\nconst validateSendTransferAddress = (address, selectedAcc, addressConfirmed, isKnownAddress) => {\n    const isValidAddr = validateAddress(address)\n    if (!isValidAddr.success) return isValidAddr\n\n    if (address && selectedAcc && (address === selectedAcc)) {\n        return {\n            success: false,\n            message: 'The entered address should be different than the your own account address.'\n        }\n    }\n    \n    if (address && isKnownTokenOrContract(address)) {\n        return {\n            success: false,\n            message: 'You are trying to send tokens to a smart contract. Doing so would burn them.'\n        }\n    }\n\n    if (address && (!isKnownAddress(address) && !addressConfirmed)) {\n        return {\n            success: false,\n            message: `You're trying to send to an unknown address. If you're really sure, confirm using the checkbox below.`\n        }\n    }\n\n    return { success: true }\n}\n\nconst validateSendTransferAmount = (amount, selectedAsset) => {\n    if (!(amount && amount.length)) {\n        return {\n            success: false,\n            message: ''\n        }\n    }\n    \n    if (!(amount && (amount > 0))) {\n        return {\n            success: false,\n            message: 'The amount must be greater than 0.'\n        }\n    }\n\n    try {\n        if (amount && selectedAsset && selectedAsset.decimals) {\n            const parsedAmount = amount.slice(0, amount.indexOf('.') + selectedAsset.decimals + 1); // Fixed decimals in case amount is bigger than selectedAsset.decimals, otherwise would cause overflow error\n            const bigNumberAmount = parseUnits(parsedAmount, selectedAsset.decimals)\n            if (bigNumberAmount && selectedAsset.balanceRaw && bigNumberAmount.gt(selectedAsset.balanceRaw)) {\n                return {\n                    success: false,\n                    message: `The amount is greater than the asset's balance: ${selectedAsset?.balance} ${selectedAsset?.symbol}.`\n                }\n            }\n        }\n    } catch(e) {\n        console.error(e);\n    }\n\n    return { success: true }\n}\n\nconst validateSendNftAddress = (address, selectedAcc, addressConfirmed, isKnownAddress, metadata, selectedNetwork, network) => {\n    const isValidAddr = validateSendTransferAddress(address, selectedAcc, addressConfirmed, isKnownAddress)\n    if (!isValidAddr.success) return isValidAddr\n\n    if (metadata && selectedAcc && (metadata.owner?.address !== selectedAcc)) {\n        return {\n            success: false,\n            message: `The NFT you're trying to send is not owned by you!`\n        }\n    }\n\n    if (selectedNetwork && network && (selectedNetwork.id !== network)) {\n        return {\n            success: false,\n            message: 'The selected network is not the correct one.'\n        }\n    }\n\n    return { success: true }\n}\n\nexport {\n    validateAddAuthSignerAddress,\n    validateSendNftAddress,\n    validateSendTransferAddress,\n    validateSendTransferAmount\n}\n","import './Addresses.scss'\n\nimport { MdOutlineAdd } from 'react-icons/md'\nimport AddressList from '../../../common/AddressBook/AddressList/AddressList'\nimport { Button } from '../../../common'\nimport { isValidAddress } from '../../../../helpers/address'\nimport { InputModal } from '../../../Modals'\nimport { useModals } from '../../../../hooks'\n\nconst Addresses = ({ addresses, addAddress, removeAddress, onSelectAddress }) => {\n    const { showModal } = useModals()\n\n    const modalInputs = [\n        { label: 'Name', placeholder: 'My Address' },\n        { label: 'Address', placeholder: '0x', validate: value => isValidAddress(value) }\n    ]\n\n    const inputModal = <InputModal title=\"Add New Address\" inputs={modalInputs} onClose={([name, address]) => addAddress(name, address)}></InputModal>\n    const showInputModal = () => showModal(inputModal)\n\n    return (\n        <div id=\"addresses\" className='panel'>\n            <div className='title'>Address Book</div>\n            <div className=\"content\">\n                <AddressList\n                    noAccounts={true}\n                    addresses={addresses}\n                    removeAddress={removeAddress}\n                    onSelectAddress={onSelectAddress}\n                />\n            </div>\n            <div className=\"separator\"></div>\n            <Button icon={<MdOutlineAdd/>} onClick={showInputModal}>Add Address</Button>\n        </div>\n    )\n}\n\nexport default Addresses","import './Transfer.scss'\n\nimport { BsXLg } from 'react-icons/bs'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { useParams, withRouter } from 'react-router'\nimport { useEffect, useMemo, useState } from 'react'\nimport { ethers } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useToasts } from '../../../hooks/toasts'\nimport { TextInput, NumberInput, Button, Select, Loading, AddressBook, AddressWarning, NoFundsPlaceholder } from '../../common'\nimport { validateSendTransferAddress, validateSendTransferAmount } from '../../../lib/validations/formValidations'\nimport { isValidAddress } from '../../../helpers/address'\nimport Addresses from './Addresses/Addresses'\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\n\nconst Transfer = ({ history, portfolio, selectedAcc, selectedNetwork, addRequest, addressBook }) => {\n    const { addresses, addAddress, removeAddress, isKnownAddress } = addressBook\n\n    const { tokenAddressOrSymbol } = useParams()\n    const { addToast } = useToasts()\n\n    const tokenAddress = isValidAddress(tokenAddressOrSymbol) ? tokenAddressOrSymbol : portfolio.tokens.find(({ symbol }) => symbol === tokenAddressOrSymbol)?.address || null\n\n    const [asset, setAsset] = useState(tokenAddress)\n    const [amount, setAmount] = useState(0)\n    const [bigNumberHexAmount, setBigNumberHexAmount] = useState('')\n    const [address, setAddress] = useState('')\n    const [disabled, setDisabled] = useState(true)\n    const [addressConfirmed, setAddressConfirmed] = useState(false)\n    const [newAddress, setNewAddress] = useState('')\n    const [validationFormMgs, setValidationFormMgs] = useState({ \n        success: { \n            amount: false,\n            address: false\n        }, \n        messages: { \n            amount: '', \n            address: ''\n        }\n    })\n\n    const assetsItems = portfolio.tokens.map(({ label, symbol, address, img, tokenImageUrl }) => ({\n        label: label || symbol,\n        value: address,\n        icon: img || tokenImageUrl\n    }))\n\n    const selectedAsset = portfolio.tokens.find(({ address }) => address === asset)\n\n    const maxAmount = useMemo(() => {\n        if (!selectedAsset) return 0;\n        const { balanceRaw, decimals } = selectedAsset\n        return ethers.utils.formatUnits(balanceRaw, decimals)\n    }, [selectedAsset])\n\n    const setMaxAmount = () => onAmountChange(maxAmount)\n\n    const onAmountChange = value => {\n        if (value) {\n            const { decimals } = selectedAsset\n            const bigNumberAmount = ethers.utils.parseUnits(value, decimals).toHexString()\n            setBigNumberHexAmount(bigNumberAmount)\n        }\n\n        setAmount(value)\n    }\n\n    const sendTx = () => {\n        try {\n            const txn = {\n                to: selectedAsset.address,\n                value: '0',\n                data: ERC20.encodeFunctionData('transfer', [address, bigNumberHexAmount])\n            }\n\n            if (Number(selectedAsset.address) === 0) {\n                txn.to = address\n                txn.value = bigNumberHexAmount\n                txn.data = '0x'\n            }\n\n            addRequest({\n                id: `transfer_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn\n            })\n\n            setAmount(0)\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        setAmount(0)\n        setBigNumberHexAmount('')\n    }, [asset])\n\n    useEffect(() => {\n        if (!selectedAsset) return\n        history.replace({ pathname: `/wallet/transfer/${Number(asset) !== 0 ? asset : selectedAsset.symbol}` })\n    }, [asset, history, selectedAsset])\n\n    useEffect(() => {\n        const isValidRecipientAddress = validateSendTransferAddress(address, selectedAcc, addressConfirmed, isKnownAddress)\n        const isValidSendTransferAmount = validateSendTransferAmount(amount, selectedAsset) \n       \n        setValidationFormMgs({ \n            success: { \n                amount: isValidSendTransferAmount.success, \n                address: isValidRecipientAddress.success \n            }, \n            messages: { \n                amount: isValidSendTransferAmount.message ?  isValidSendTransferAmount.message : '',\n                address: isValidRecipientAddress.message ? isValidRecipientAddress.message : ''\n            }\n        })\n\n        setDisabled(!(isValidRecipientAddress.success && isValidSendTransferAmount.success))\n    }, [address, amount, selectedAcc, selectedAsset, addressConfirmed, isKnownAddress, addToast])\n\n    const amountLabel = <div className=\"amount-label\">Available Amount: <span>{ maxAmount } { selectedAsset?.symbol }</span></div>\n\n    return (\n        <div id=\"transfer\">\n           <div className=\"panel\">\n               <div className=\"title\">\n                   Send\n               </div>\n               {\n                    portfolio.isBalanceLoading ?\n                        <Loading/>\n                        :\n                        assetsItems.length ? \n                            <div className=\"form\">\n                                <Select searchable defaultValue={asset} items={assetsItems} onChange={(value) => setAsset(value)}/>\n                                <NumberInput\n                                    label={amountLabel}\n                                    value={amount}\n                                    precision={selectedAsset?.decimals}\n                                    onInput={onAmountChange}\n                                    button=\"MAX\"\n                                    onButtonClick={() => setMaxAmount()}\n                                />\n                                { validationFormMgs.messages.amount && \n                                    (<div className='validation-error'><BsXLg size={12}/>&nbsp;{validationFormMgs.messages.amount}</div>)}\n                                <div id=\"recipient-field\">\n                                    <TextInput\n                                        placeholder=\"Recipient\"\n                                        info=\"Please double-check the recipient address, blockchain transactions are not reversible.\"\n                                        value={address}\n                                        onInput={setAddress}\n                                    />\n                                    <AddressBook \n                                        addresses={addresses.filter(x => x.address !== selectedAcc)}\n                                        addAddress={addAddress}\n                                        removeAddress={removeAddress}\n                                        newAddress={newAddress}\n                                        onClose={() => setNewAddress(null)}\n                                        onSelectAddress={address => setAddress(address)}\n                                    />\n                                </div>\n                                { validationFormMgs.messages.address && \n                                    (<div className='validation-error'><BsXLg size={12}/>&nbsp;{validationFormMgs.messages.address}</div>)}\n                                <div className=\"separator\"/>\n                                <AddressWarning\n                                    address={address}\n                                    onAddNewAddress={() => setNewAddress(address)}\n                                    onChange={(value) => setAddressConfirmed(value)}\n                                    isKnownAddress={isKnownAddress}\n                                />\n                                <Button icon={<AiOutlineSend/>} disabled={disabled} onClick={sendTx}>Send</Button>\n                            </div>\n                            :\n                            <NoFundsPlaceholder/>\n               }\n           </div>\n           <Addresses\n                addresses={addresses}\n                addAddress={addAddress}\n                removeAddress={removeAddress}\n                onSelectAddress={address => setAddress(address)}\n            />\n        </div>\n    )\n}\n\nexport default withRouter(Transfer)\n","const AAVELendingPoolAbi = [\n    \"function getLendingPool() view returns (address address)\",\n    \"function getReservesList() view returns (address[] memory)\",\n    \"function getReserveData(address asset) view returns (tuple(uint256 availableLiquidity, uint256 totalStableDebt, uint256 totalVariableDebt, uint256 liquidityRate, uint256 variableBorrowRate, uint256 stableBorrowRate, uint256 averageStableBorrowRate, uint256 liquidityIndex, uint256 variableBorrowIndex, uint40 lastUpdateTimestamp) memory)\",\n    \"function deposit(address asset, uint256 amount, address onBehalfOf, uint16 referralCode)\",\n    \"function withdraw(address asset, uint256 amount, address to)\",\n]\n\nexport default AAVELendingPoolAbi","const AAVELendingPoolProviders = {\n    ethereum: '0xb53c1a33016b2dc2ff3653530bff1848a515c8c5',\n    polygon: '0xd05e3E715d945B59290df0ae8eF85c1BdB684744',\n    avalanche: '0xb6A86025F0FE1862B372cb0ca18CE3EDe02A318f'\n}\n\nexport default AAVELendingPoolProviders","export default __webpack_public_path__ + \"static/media/aave.58aec338.svg\";","import './Card.scss'\n\nimport { Select, Segments, NumberInput, Button, Loading } from '../../../../common'\nimport { useEffect, useState, useMemo, useCallback } from 'react'\nimport { BsArrowDownSquare, BsArrowUpSquare } from 'react-icons/bs'\nimport { ethers } from 'ethers'\n\nconst segments = [{ value: 'Deposit' }, { value: 'Withdraw' }]\n\nconst Card = ({ loading, unavailable, tokensItems, icon, details, onTokenSelect, onValidate }) => {    \n    const [segment, setSegment] = useState(segments[0].value)\n    const [tokens, setTokens] = useState([])\n    const [token, setToken] = useState()\n    const [amount, setAmount] = useState(0)\n    const [disabled, setDisabled] = useState(true)\n\n    const currentToken = tokens.find(({ value }) => value === token)\n\n    // Sort tokens items by balance\n    const getEquToken = useCallback(token => tokensItems.find((({ address, type }) => address === token.address && (token.type === 'deposit' ? type === 'withdraw' : type === 'deposit'))), [tokensItems])\n    const sortedTokenItems = useMemo(() => [...tokensItems].sort((a, b) => (b?.balance + getEquToken(b)?.balance) - (a?.balance + getEquToken(a)?.balance)), [tokensItems, getEquToken])\n\n    const getMaxAmount = () => {\n        if (!currentToken) return 0;\n        const { balanceRaw, decimals } = currentToken\n        return ethers.utils.formatUnits(balanceRaw, decimals)\n    }\n\n    const setMaxAmount = () => setAmount(getMaxAmount(amount))\n\n    useEffect(() => {\n        if (segment === segments[0].value) setTokens(sortedTokenItems.filter(({ type }) => type === 'deposit'))\n        if (segment === segments[1].value) setTokens(sortedTokenItems.filter(({ type }) => type === 'withdraw'))\n    }, [segment, sortedTokenItems])\n\n    useEffect(() => setAmount(0), [token, segment])\n\n    useEffect(() => {\n        onTokenSelect(token)\n        setDisabled(!token || !tokens.length)\n    }, [token, onTokenSelect, tokens.length])\n\n    const amountLabel = <div className=\"amount-label\">Available Amount: <span>{ !disabled ? `${getMaxAmount()} ${currentToken?.symbol}` : '0' }</span></div>\n\n    return (\n        <div className=\"card\">\n            <div className=\"title\">\n                <img src={icon} alt=\"Icon\" />\n            </div>\n            {\n                loading ?\n                    <Loading/>\n                    :\n                    unavailable ?\n                        <div className=\"unavailable\">\n                            Unavailable on this Network\n                        </div>\n                        :\n                        <div className=\"content\">\n                            <Select\n                                searchable\n                                disabled={disabled}\n                                label=\"Choose Token\"\n                                defaultValue={token}\n                                items={tokens}\n                                onChange={(value) => setToken(value)}\n                            />\n                            {\n                                !disabled ? \n                                    <ul className=\"details\">\n                                        {\n                                            details.map(([type, value]) => (\n                                                <li key={type}><b>{type}</b> {value}</li>\n                                            ))\n                                        }\n                                    </ul>\n                                    :\n                                    <div className=\"details-placeholder\">\n                                        <div/>\n                                        <div/>\n                                        <div/>\n                                    </div>\n                            }\n                            <Segments small defaultValue={segment} segments={segments} onChange={(value) => setSegment(value)}></Segments>\n                            <NumberInput\n                                disabled={!currentToken?.balance}\n                                min=\"0\"\n                                max={currentToken?.balance}\n                                value={amount}\n                                label={amountLabel}\n                                onInput={(value) => setAmount(value)}\n                                button=\"MAX\"\n                                onButtonClick={setMaxAmount}\n                            />\n                            <div className=\"separator\"></div>\n                            <Button \n                                disabled={disabled || amount <= 0 || amount > currentToken?.balance}\n                                icon={segment === segments[0].value ? <BsArrowDownSquare/> : <BsArrowUpSquare/>}\n                                onClick={() => onValidate(segment, token, amount)}>\n                                    { segment }\n                            </Button>\n                        </div>\n            }\n        </div>\n    )\n}\n\nexport default Card","let zapperStorage = 'https://storage.googleapis.com/zapper-fi-assets/tokens'\nlet tokens = {\n    ethereum: [\n        {\n            address: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n            symbol: 'WETH'\n        },\n        {\n            address: '0x2260fac5e5542a773aa44fbcfedf7c193bc2c599',\n            symbol: 'WBTC'\n        },\n        {\n            address: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',\n            symbol: 'USDC'\n        },\n        {\n            address: '0xdac17f958d2ee523a2206206994597c13d831ec7',\n            symbol: 'USDT'\n        },\n        {\n            address: '0x6b175474e89094c44da98b954eedeac495271d0f',\n            symbol: 'DAI'\n        },\n        {\n            address: '0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9',\n            symbol: 'AAVE'\n        },\n    ],\n    polygon: [\n        {\n            address: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\n            symbol: 'WETH'\n        },\n        {\n            address: '0x1bfd67037b42cf73acf2047067bd4f2c47d9bfd6',\n            symbol: 'WBTC'\n        },\n        {\n            address: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174',\n            symbol: 'USDC'\n        },\n        {\n            address: '0xc2132d05d31c914a87c6611c10748aeb04b58e8f',\n            symbol: 'USDT'\n        },\n        {\n            address: '0x8f3cf7ad23cd3cadbd9735aff958023239c6a063',\n            symbol: 'DAI'\n        },\n        {\n            address: '0xd6df932a45c0f255f85145f286ea0b292b21c90b',\n            symbol: 'AAVE'\n        },\n    ],\n    avalanche: [\n        {\n            address: '0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab',\n            symbol: 'WETH.e'\n        },\n        {\n            address: '0x50b7545627a5162f82a992c33b87adc75187b218',\n            symbol: 'WBTC.e'\n        },\n        {\n            address: '0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664',\n            symbol: 'USDC.e'\n        },\n        {\n            address: '0xc7198437980c041c805a1edcba50c1ce5db95118',\n            symbol: 'USDT.e'\n        },\n        {\n            address: '0xd586e7f844cea2f87f50152665bcbc2c279d8d70',\n            symbol: 'DAI.e'\n        },\n        {\n            address: '0x63a72806098bd3d9520cc43356dd78afe5d386d9',\n            symbol: 'AAVE.e'\n        },\n    ],\n    'binance-smart-chain': []\n}\n\nconst getDefaultTokensItems = network => {\n    const items = (tokens[network] || []).map(token => ({\n        ...token,\n        img: `${zapperStorage}/${network}/${token.address}.png`,\n        balance: 0,\n        balanceRaw: '0',\n    })) || []\n\n    return [\n        ...items.map(token => ({ ...token, type: 'deposit' })),\n        ...items.map(token => ({ ...token, type: 'withdraw', symbol: `a${token.symbol}` }))\n    ]\n}\n\nexport { getDefaultTokensItems }\n","import { ethers, getDefaultProvider } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { useToasts } from '../../../../../hooks/toasts'\nimport ERC20Abi from 'adex-protocol-eth/abi/ERC20.json'\nimport AAVELendingPoolAbi from '../../../../../consts/AAVELendingPoolAbi'\nimport AAVELendingPoolProviders from '../../../../../consts/AAVELendingPoolProviders'\nimport networks from '../../../../../consts/networks'\n\nimport AAVE_ICON from '../../../../../resources/aave.svg'\nimport Card from '../Card/Card'\nimport { getDefaultTokensItems } from './defaultTokens'\n\nconst ERC20Interface = new Interface(ERC20Abi)\nconst AAVELendingPool = new Interface(AAVELendingPoolAbi)\nconst RAY = 10**27\nlet lendingPoolAddress = null\n\nconst AAVECard = ({ networkId, tokens, protocols, account, addRequest }) => {\n    const { addToast } = useToasts()\n\n    const currentNetwork = useRef()\n    const [isLoading, setLoading] = useState(true)\n    const [unavailable, setUnavailable] = useState(false)\n    const [tokensItems, setTokensItems] = useState([])\n    const [details, setDetails] = useState([])\n\n    const onTokenSelect = useCallback(async (value) => {\n        const token = tokensItems.find(({ address }) => address === value)\n        if (token) {\n            setDetails([\n                ['Annual Percentage Rate (APR)', `${token.apr}%`],\n                ['Lock', 'No Lock'],\n                ['Type', 'Variable Rate'],\n            ])\n        }\n    }, [tokensItems])\n\n    const networkDetails = networks.find(({ id }) => id === networkId)\n    const defaultTokens = useMemo(() => getDefaultTokensItems(networkDetails.id), [networkDetails.id])\n    const getToken = (type, address) => tokensItems.filter(token => token.type === type).find(token => token.address === address)\n    const addRequestTxn = (id, txn, extraGas = 0) => addRequest({ id, type: 'eth_sendTransaction', chainId: networkDetails.chainId, account, txn, extraGas })\n\n    const approveToken = async (tokenAddress, bigNumberHexAmount) => {\n        try {\n            const ZERO = ethers.BigNumber.from(0)\n            const provider = getDefaultProvider(networkDetails.rpc)\n            const tokenContract = new ethers.Contract(tokenAddress, ERC20Interface, provider)\n            const allowance = await tokenContract.allowance(account, tokenAddress)\n\n            if (allowance.lt(bigNumberHexAmount)) {\n                if (allowance.gt(ZERO)) {\n                    addRequestTxn(`aave_pool_approve_${Date.now()}`, {\n                        to: lendingPoolAddress,\n                        value: bigNumberHexAmount,\n                        data: '0x'\n                    })\n                }\n                addRequestTxn(`aave_pool_approve_${Date.now()}`, {\n                    to: tokenAddress,\n                    value: '0x0',\n                    data: ERC20Interface.encodeFunctionData('approve', [lendingPoolAddress, bigNumberHexAmount])\n                })\n            }\n        } catch(e) {\n            console.error(e)\n            addToast(`Aave Approve Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    const onValidate = async (type, tokenAddress, amount) => {\n        if (type === 'Deposit') {\n            const token = getToken('deposit', tokenAddress)\n            const bigNumberHexAmount = ethers.utils.parseUnits(amount.toString(), token.decimals).toHexString()\n            await approveToken(tokenAddress, bigNumberHexAmount)\n\n            try {\n                addRequestTxn(`aave_pool_deposit_${Date.now()}`, {\n                    to: lendingPoolAddress,\n                    value: '0x0',\n                    data: AAVELendingPool.encodeFunctionData('deposit', [tokenAddress, bigNumberHexAmount, account, 0])\n                }, 60000)\n            } catch(e) {\n                console.error(e)\n                addToast(`Aave Deposit Error: ${e.message || e}`, { error: true })\n            }\n        }\n        else if (type === 'Withdraw') {\n            const token = getToken('withdraw', tokenAddress)\n            const bigNumberHexAmount = ethers.utils.parseUnits(amount.toString(), token.decimals).toHexString()\n            await approveToken(tokenAddress, bigNumberHexAmount)\n\n            try {\n                addRequestTxn(`aave_pool_withdraw_${Date.now()}`, {\n                    to: lendingPoolAddress,\n                    value: '0x0',\n                    data: AAVELendingPool.encodeFunctionData('withdraw', [tokenAddress, bigNumberHexAmount, account])\n                }, 60000)\n            } catch(e) {\n                console.error(e)\n                addToast(`Aave Withdraw Error: ${e.message || e}`, { error: true })\n            }\n        }\n    }\n\n    const loadPool = useCallback(async () => {\n        const providerAddress = AAVELendingPoolProviders[networkDetails.id]\n        if (!providerAddress) {\n            setLoading(false)\n            setUnavailable(true)\n            return\n        }\n\n        try {\n            const provider = getDefaultProvider(networkDetails.rpc)\n            const lendingPoolProviderContract = new ethers.Contract(providerAddress, AAVELendingPool, provider)\n            lendingPoolAddress = await lendingPoolProviderContract.getLendingPool()\n        \n            const lendingPoolContract = new ethers.Contract(lendingPoolAddress, AAVELendingPool, provider)\n            const reserves = await lendingPoolContract.getReservesList()\n            const reservesAddresses = reserves.map(reserve => reserve.toLowerCase())\n\n            const withdrawTokens = (protocols.find(({ label }) => label === 'Aave V2')?.assets || [])\n                .map(({ tokens }) => tokens && tokens.map(({ img, symbol, tokens }) => tokens && tokens.map(token => ({\n                    ...token,\n                    img,\n                    symbol,\n                    type: 'withdraw'\n                }))))\n                .flat(2)\n                .filter(token => token)\n\n            const depositTokens = tokens.filter(({ address }) => reservesAddresses.includes(address)).map(token => ({\n                ...token,\n                type: 'deposit'\n            })).filter(token => token)\n\n            const allTokens = (await Promise.all([\n                ...defaultTokens.filter(({ type, address }) => type === 'deposit' && !depositTokens.map(({ address }) => address).includes(address)),\n                ...defaultTokens.filter(({ type, address }) => type === 'withdraw' && !withdrawTokens.map(({ address }) => address).includes(address)),\n                ...withdrawTokens,\n                ...depositTokens\n            ]))\n            \n            const uniqueTokenAddresses = [...new Set(allTokens.map(({ address }) => address))]\n            const tokensAPR = Object.fromEntries(await Promise.all(uniqueTokenAddresses.map(async address => {\n                const data = await lendingPoolContract.getReserveData(address)\n                const { liquidityRate } = data\n                const apr = ((liquidityRate / RAY) * 100).toFixed(2)\n                return [address, apr]\n            })))\n\n            const tokensItems = allTokens.map(token => ({\n                ...token,\n                apr: tokensAPR[token.address],\n                icon: token.img || token.tokenImageUrl,\n                label: `${token.symbol} (${tokensAPR[token.address]}% APR)`,\n                value: token.address\n            }))\n\n            // Prevent race conditions\n            if (currentNetwork.current !== networkDetails.id) return\n\n            setTokensItems(tokensItems)\n            setLoading(false)\n            setUnavailable(false)\n        } catch(e) {\n            console.error(e);\n            addToast(`Aave load pool error: ${e.message || e}`, { error: true })\n        }\n    }, [addToast, protocols, tokens, defaultTokens, networkDetails])\n\n    useEffect(() => loadPool(), [loadPool])\n    useEffect(() => {\n        currentNetwork.current = networkId\n        setLoading(true)\n    }, [networkId])\n\n    return (\n        <Card loading={isLoading} unavailable={unavailable} icon={AAVE_ICON} details={details} tokensItems={tokensItems} onTokenSelect={onTokenSelect} onValidate={onValidate}/>\n    )\n}\n\nexport default AAVECard\n","const YearnVaultABI = [\n    \"function pricePerShare() view returns (uint256)\",\n    \"function deposit(uint256 _amount, address recipient)\",\n    \"function withdraw(uint256 maxShares, address recipient)\",\n]\n\nexport default YearnVaultABI","export default __webpack_public_path__ + \"static/media/yearn.ac5ab573.svg\";","import Card from '../Card/Card'\n\nimport { useCallback, useEffect, useState, useMemo, useRef } from 'react'\nimport { ethers } from 'ethers'\nimport { parseUnits } from '@ethersproject/units'\nimport { Contract } from '@ethersproject/contracts'\nimport { getDefaultProvider } from '@ethersproject/providers'\nimport { Interface } from '@ethersproject/abi'\nimport ERC20ABI from 'adex-protocol-eth/abi/ERC20.json'\nimport { Yearn } from '@yfi/sdk'\nimport YEARN_VAULT_ABI from '../../../../../consts/YearnVaultABI'\nimport networks from '../../../../../consts/networks'\nimport { useToasts } from '../../../../../hooks/toasts'\nimport YEARN_ICON from '../../../../../resources/yearn.svg'\n\nconst v2VaultsAddresses = [\n    '0xdA816459F1AB5631232FE5e97a05BBBb94970c95',\n    '0xa354F35829Ae975e850e23e9615b11Da1B3dC4DE',\n    '0xdb25cA703181E7484a155DD612b06f57E12Be5F0',\n    '0xA696a63cc78DfFa1a63E9E50587C197387FF6C7E',\n    '0x7Da96a3891Add058AdA2E826306D812C638D87a7',\n    '0xB8C3B7A2A618C552C23B1E4701109a9E756Bab67',\n    '0xe11ba472F74869176652C35D30dB89854b5ae84D',\n    '0xa258C4606Ca8206D8aA700cE2143D7db854D168c',\n    '0xFBEB78a723b8087fD2ea7Ef1afEc93d35E8Bed42',\n    '0x6d765CbE5bC922694afE112C140b8878b9FB0390',\n    '0xFD0877d9095789cAF24c98F7CCe092fa8E120775',\n    '0xd9788f3931Ede4D5018184E198699dC6d66C1915',\n]\n\nconst customVaultMetadata = {\n    '0xa258C4606Ca8206D8aA700cE2143D7db854D168c': {\n        displayName: 'WETH',\n        displayIcon: 'https://etherscan.io/token/images/weth_28.png'\n    }\n}\n\nconst ERC20Interface = new Interface(ERC20ABI)\nconst YearnVaultInterface = new Interface(YEARN_VAULT_ABI)\n\nconst YearnCard = ({ networkId, accountId, tokens, addRequest }) => {\n    const { addToast } = useToasts()\n\n    const currentNetwork = useRef()\n    const [loading, setLoading] = useState([])\n    const [tokensItems, setTokensItems] = useState([])\n    const [details, setDetails] = useState([])\n\n    const unavailable = networkId !== 'ethereum'\n    const networkDetails = networks.find(({ id }) => id === networkId)\n    const getTokenFromPortfolio = useCallback(tokenAddress => tokens.find(({ address }) => address.toLowerCase() === tokenAddress.toLowerCase()) || {}, [tokens])\n    const addRequestTxn = (id, txn, extraGas = 0) => addRequest({ id, type: 'eth_sendTransaction', chainId: networkDetails.chainId, account: accountId, txn, extraGas })\n    const provider = useMemo(() => getDefaultProvider(networkDetails.rpc), [networkDetails.rpc])\n\n    const loadVaults = useCallback(async () => {\n        if (unavailable) return\n    \n        const yearn = new Yearn(networkDetails.chainId, { provider })\n\n        const v2Vaults = await yearn.vaults.get(v2VaultsAddresses)\n        const vaults = v2Vaults.map(({ address, metadata, symbol, token, decimals }) => {\n            const { apy, displayName, displayIcon} = {\n                ...metadata,\n                ...customVaultMetadata[address] || {}\n            }\n            const formattedAPY = (apy?.net_apy * 100).toFixed(2) || 0\n\n            return {\n                vaultAddress: address,\n                apy: formattedAPY,\n                icon: displayIcon,\n                value: address,\n                token: {\n                    address: token,\n                    symbol: displayName,\n                    decimals\n                },\n                yToken: {\n                    address,\n                    symbol,\n                    decimals\n                }\n            }\n        })\n\n        const depositTokens = vaults.map(vault => {\n            const { apy, token } = vault\n            const { address, symbol, decimals } = token\n            const { balance, balanceRaw } = getTokenFromPortfolio(address)\n            return {\n                ...vault,\n                type: 'deposit',\n                label: `${symbol} (${apy}% APY)`,\n                symbol,\n                decimals,\n                tokenAddress: token.address,\n                balance: balance || 0,\n                balanceRaw: balanceRaw || '0',\n            }\n        })\n\n        const withdrawTokens = vaults.map(vault => {\n            const { apy, yToken } = vault\n            const { address, symbol, decimals } = yToken\n            const { balance, balanceRaw } = getTokenFromPortfolio(address)\n            return {\n                ...vault,\n                type: 'withdraw',\n                label: `${symbol} (${apy}% APY)`,\n                symbol,\n                decimals,\n                tokenAddress: yToken.address,\n                balance: balance || 0,\n                balanceRaw: balanceRaw || '0',\n            }\n        })\n\n        // Prevent race conditions\n        if (currentNetwork.current !== networkDetails.id) return\n\n        setTokensItems([\n            ...depositTokens,\n            ...withdrawTokens\n        ])\n    }, [getTokenFromPortfolio, provider, networkDetails, unavailable])\n\n    const onTokenSelect = useCallback(address => {\n        const selectedToken = tokensItems.find(t => t.tokenAddress === address)\n        if (selectedToken) setDetails([\n            ['Annual Percentage Yield (APY)', `${selectedToken.apy}%`],\n            ['Lock', 'No Lock'],\n            ['Type', 'Variable Rate'],\n        ])\n    }, [tokensItems])\n\n    const approveToken = async (vaultAddress, tokenAddress, bigNumberHexAmount) => {\n        try {\n            const tokenContract = new Contract(tokenAddress, ERC20Interface, provider)\n            const allowance = await tokenContract.allowance(accountId, vaultAddress)\n\n            if (allowance.lt(bigNumberHexAmount)) {\n                addRequestTxn(`yearn_vault_approve_${Date.now()}`, {\n                    to: tokenAddress,\n                    value: '0x0',\n                    data: ERC20Interface.encodeFunctionData('approve', [vaultAddress, bigNumberHexAmount])\n                })\n            }\n        } catch(e) {\n            console.error(e)\n            addToast(`Yearn Approve Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    const onValidate = async (type, value, amount) => {\n        const item = tokensItems.find(t => t.type === type.toLowerCase() && t.value === value)\n        if (!item) return\n\n        const { vaultAddress, decimals } = item\n        const parsedAmount = amount.slice(0, amount.indexOf('.') + Number(decimals) + 1);\n        const bigNumberAmount = parseUnits(parsedAmount, decimals)\n\n        if (type === 'Deposit') {\n            await approveToken(vaultAddress, item.tokenAddress, ethers.constants.MaxUint256)\n\n            try {\n                addRequestTxn(`yearn_vault_deposit_${Date.now()}`, {\n                    to: vaultAddress,\n                    value: '0x0',\n                    data: YearnVaultInterface.encodeFunctionData('deposit', [bigNumberAmount.toHexString(), accountId])\n                })\n            } catch(e) {\n                console.error(e)\n                addToast(`Yearn Deposit Error: ${e.message || e}`, { error: true })\n            }\n        } else if (type === 'Withdraw') {\n            try {\n                addRequestTxn(`yearn_vault_withdraw_${Date.now()}`, {\n                    to: vaultAddress,\n                    value: '0x0',\n                    data: YearnVaultInterface.encodeFunctionData('withdraw', [bigNumberAmount.toHexString(), accountId])\n                })\n            } catch(e) {\n                console.error(e)\n                addToast(`Yearn Withdraw Error: ${e.message || e}`, { error: true })\n            }\n        }\n    }\n\n    useEffect(() => {\n        async function load() {\n            await loadVaults()\n            setLoading(false)\n        }\n        load()\n    }, [loadVaults])\n\n    useEffect(() => {\n        currentNetwork.current = networkId\n        setLoading(true)\n    }, [networkId])\n\n    return (\n        <Card\n            loading={loading}\n            icon={YEARN_ICON}\n            unavailable={unavailable}\n            tokensItems={tokensItems}\n            details={details}\n            onTokenSelect={onTokenSelect}\n            onValidate={onValidate}\n        />\n    )\n}\n\nexport default YearnCard","import './Earn.scss'\nimport AAVECard from './Cards/AAVECard/AAVECard'\nimport YearnCard from './Cards/YearnCard/YearnCard'\nimport { Loading } from '../../common'\n\nconst Earn = ({ portfolio, selectedNetwork, selectedAcc, addRequest }) => {\n    return (\n        <div id=\"earn\">\n            {\n                portfolio.isBalanceLoading ?\n                    <Loading/>\n                    :\n                    <div className=\"cards\">\n                        <AAVECard networkId={selectedNetwork.id} tokens={portfolio.tokens} protocols={portfolio.protocols} account={selectedAcc} addRequest={addRequest}/>\n                        <YearnCard\n                            networkId={selectedNetwork.id}\n                            accountId={selectedAcc}\n                            tokens={portfolio.tokens}\n                            addRequest={addRequest}\n                        />\n                    </div>\n            }\n        </div>\n    )\n}\n\nexport default Earn","import './AddAuthSigner.scss'\nimport { useState, useEffect, useCallback } from 'react'\n\nimport { TextInput, Button, DropDown } from '../../../common'\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport TrezorConnect from 'trezor-connect'\nimport { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { SelectSignerAccountModal } from '../../../Modals'\nimport { useModals } from '../../../../hooks'\nimport { isFirefox } from '../../../../lib/isFirefox'\nimport { ledgerGetAddresses, PARENT_HD_PATH } from \"../../../../lib/ledgerWebHID\"\nimport { validateAddAuthSignerAddress } from '../../../../lib/validations/formValidations'\nimport { BsXLg } from 'react-icons/bs'\nimport { MdOutlineAdd } from 'react-icons/md'\n\nconst AddAuthSigner = props => {\n  const [signerAddress, setSignerAddress] = useState({\n    address: '',\n    index: 0,\n  })\n  const [addAccErr, setAddAccErr] = useState('')\n  const [disabled, setDisabled] = useState(true)\n  const [modalToggle, setModalToggle] = useState(true)\n  const [signersToChoose, setChooseSigners] = useState(null)\n  const [textInputInfo, setTextInputInfo] = useState('')\n  const { showModal } = useModals()\n  const [validationFormMgs, setValidationFormMgs] = useState({ \n    success: false, \n    message: ''\n  })\n\n\n  async function connectLedgerAndGetAccounts() {\n    if (isFirefox()) {\n      await connectLedgerAndGetAccountsU2F()\n    } else {\n      await connectLedgerAndGetAccountsWebHID()\n    }\n  }\n\n  async function connectLedgerAndGetAccountsU2F() {\n    const provider = new LedgerSubprovider({\n      networkId: 0, // @TODO: is this needed?\n      ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n      baseDerivationPath: PARENT_HD_PATH\n    })\n    // NOTE: do not attempt to do both of these together (await Promise.all)\n    // there is a bug in the ledger subprovider (race condition), so it will think we're trying to make two connections simultaniously\n    // cause one call won't be aware of the other's attempt to connect\n      const addresses = await provider.getAccountsAsync(100)\n      setChooseSigners({ addresses, signerName: 'Ledger' })\n      setModalToggle(true)\n  }\n\n  async function connectLedgerAndGetAccountsWebHID() {\n    let error = null\n    try {\n      const addrData = await ledgerGetAddresses()\n      if (!addrData.error) {\n        if (addrData.addresses.length === 1) {\n          return onSignerAddressClicked({\n            address: addrData.addresses[0],\n            index: 0,\n          })\n        } else {\n          setChooseSigners({ address: addrData.addresses, signerName: 'Ledger' })\n          setModalToggle(true)\n        }\n      } else {\n        error = addrData.error\n      }\n    } catch (e) {\n      console.log(e)\n      if (e.statusCode && e.id === 'InvalidChannel') {\n        error = \"Invalid channel\"\n      } else if (e.statusCode && e.statusCode === 25873) {\n        error = \"Please make sure your ledger is connected and the ethereum app is open\"\n      } else {\n        error = e.message\n      }\n    }\n\n    if (error) {\n      setAddAccErr(`Ledger error: ${error.message || error}`)\n    }\n  }\n\n  async function connectTrezorAndGetAccounts() {\n    /*\n      const engine = new Web3ProviderEngine({ pollingInterval: this.pollingInterval })\n      engine.addProvider(new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect, ...this.config }))\n      engine.addProvider(new CacheSubprovider())\n      engine.addProvider(new RPCSubprovider(this.url, this.requestTimeoutMs))\n      */\n    const provider = new TrezorSubprovider({\n      trezorConnectClientApi: TrezorConnect,\n    })\n    const addresses = await provider.getAccountsAsync(100)\n    setChooseSigners({ addresses, signerName: 'Trezor' })\n    setModalToggle(true)\n  }\n\n  async function connectWeb3AndGetAccounts() {\n    // @TODO: pending state; should bein the LoginORSignup (AddAccount) component\n    if (typeof window.ethereum === 'undefined') {\n      // @TODO catch this\n      throw new Error('MetaMask not available')\n    }\n    const ethereum = window.ethereum\n    const web3Accs = await ethereum.request({ method: 'eth_requestAccounts' })\n    if (!web3Accs.length) throw new Error('No accounts connected')\n    if (web3Accs.length === 1)\n      return onSignerAddressClicked({\n        address: web3Accs[0],\n        index: 0,\n      })\n\n    setChooseSigners({ addresses: web3Accs, signerName: 'Web3' })\n    setModalToggle(true)\n  }\n\n  const modalHandler = () => {\n    setModalToggle(prevState => !prevState)\n  }\n\n  const wrapErr = async fn => {\n    setAddAccErr('')\n    try {\n      await fn()\n    } catch (e) {\n      console.error(e)\n      setAddAccErr(`Unexpected error: ${e.message || e}`)\n    }\n  }\n\n  const onSignerAddressClicked = useCallback(value => {\n    setSignerAddress(value)\n    modalHandler()\n    if (signersToChoose) setTextInputInfo(`${signersToChoose.signerName} address # ${value.index + 1}`)\n  }, [signersToChoose])\n\n  useEffect(() => {\n    if (modalToggle && signersToChoose)\n      showModal(\n        <SelectSignerAccountModal\n          signersToChoose={signersToChoose.addresses}\n          selectedNetwork={props.selectedNetwork}\n          onSignerAddressClicked={onSignerAddressClicked}\n          description={`You will authorize the selected ${signersToChoose.signerName} address to sign transactions for your account.`}\n        />\n      )\n  }, [modalToggle, onSignerAddressClicked, props.selectedNetwork, showModal, signersToChoose])\n\n  const addFromSignerButtons = (\n    <div className=\"wallet-btns-wrapper\">\n      <Button\n        onClick={() => wrapErr(connectTrezorAndGetAccounts)}\n      >\n        <div\n          className=\"icon\"\n          style={{ backgroundImage: 'url(./resources/trezor.png)' }}\n        />\n        Trezor\n      </Button>\n      <Button\n        onClick={() => wrapErr(connectLedgerAndGetAccounts)}\n      >\n        <div\n          className=\"icon\"\n          style={{ backgroundImage: 'url(./resources/ledger.png)' }}\n        />\n        Ledger\n      </Button>\n      <Button\n        onClick={() => wrapErr(connectWeb3AndGetAccounts)}\n      >\n        <div\n          className=\"icon\"\n          style={{ backgroundImage: 'url(./resources/metamask.png)' }}\n        />\n        Metamask / Browser\n      </Button>\n    </div>\n  )\n\n  const onTextInput = value => {\n    if (textInputInfo.length) setTextInputInfo('')\n    setSignerAddress({ ...signerAddress, address: value })\n  }\n\n  useEffect(() => {\n    const isAddressValid = validateAddAuthSignerAddress(signerAddress.address, props.selectedAcc)\n    \n    setDisabled(!isAddressValid.success)\n\n    setValidationFormMgs({ \n      success: isAddressValid.success, \n      message: isAddressValid.message ? isAddressValid.message : ''\n    })\n\n  }, [props.selectedAcc, signerAddress.address])\n\n  return (\n    <div className=\"content\">\n      <div className=\"signer\">\n        <div className=\"signer-address-input\">\n          <TextInput\n            placeholder=\"Enter signer address\"\n            className=\"depositAddress\"\n            value={signerAddress.address}\n            info={textInputInfo}\n            onInput={onTextInput}\n          />\n          <DropDown\n            style={{ height: '60px' }}\n            title=\"Connect signer\"\n            closeOnClick\n          >\n            {addFromSignerButtons}\n          </DropDown>\n        </div>\n        <div className=\"btns-wrapper\">\n          <Button\n            disabled={disabled}\n            icon={<MdOutlineAdd/>}\n            onClick={() => props.onAddBtnClicked(signerAddress)}\n            small\n          >\n            Add\n          </Button>\n        </div>\n      </div>\n      { validationFormMgs.message && \n        (<div className='validation-error'><BsXLg size={12}/>&nbsp;{validationFormMgs.message}</div>) \n      }\n      {addAccErr ? <h3 className=\"error\">{addAccErr}</h3> : <></>}\n    </div>\n  )\n}\n\nexport default AddAuthSigner\n","import './OtpTwoFAModal.scss'\n\nimport { Modal, Button, TextInput, Loading } from '../../common'\nimport { authenticator } from '@otplib/preset-default'\nimport QRCode from 'qrcode'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport { useToasts } from '../../../hooks/toasts'\nimport { Wallet } from 'ethers'\nimport { fetchPost } from '../../../lib/fetch'\nimport { useModals } from '../../../hooks'\n\nconst OtpTwoFAModal = ({ relayerURL, selectedAcc, setCacheBreak }) => {\n    const { hideModal } = useModals()\n    const { addToast } = useToasts()\n\n    const secret = useMemo(() => authenticator.generateSecret(20), []) \n    \n    const [isLoading, setLoading] = useState(false)\n    const [imageURL, setImageURL] = useState(null)\n    const [receivedOtp, setReceivedOTP] = useState('')\n    const [showSecret, setShowSecret] = useState(false)\n    const [currentPassword, setCurrentPassword] = useState('')\n\n    const generateQR = useCallback(() => {\n        const otpAuth = authenticator.keyuri(\n            selectedAcc.email,\n            'Ambire Wallet',\n            secret\n        )\n\n        const qrCodeOptions = {\n            quality: 1,\n            margin: 1,\n        }\n        \n        QRCode.toDataURL(otpAuth, qrCodeOptions, (error, url) => {\n            if (error) {\n                console.log(error)\n                addToast(error.message, { error: true })\n            } else {\n                setImageURL(url)\n            }\n        })\n    }, [addToast, secret, selectedAcc.email])\n\n    useEffect(generateQR, [generateQR])\n\n    const handleSubmit = e => {\n        e.preventDefault()\n        setLoading(true)\n        verifyOTP()\n    }\n\n    const verifyOTP = async () => {\n        const isValid = authenticator.verify({ token: receivedOtp, secret })\n        const otp = secret\n\n        if (!isValid) {\n            addToast('Invalid or outdated OTP code entered. If you keep seeing this, please ensure your system clock is synced correctly.', { error: true })\n            setLoading(false)\n            return\n        }\n\n        try {\n            const wallet = await Wallet.fromEncryptedJson(\n                JSON.parse(selectedAcc.primaryKeyBackup),\n                currentPassword\n            )\n            const sig = await wallet.signMessage(JSON.stringify({ otp }))\n            const resp = await fetchPost(`${relayerURL}/identity/${selectedAcc.id}/modify`, { otp, sig })\n\n            if (resp.success) {\n                addToast(`You have successfully enabled two-factor authentication.`)\n                setCacheBreak()\n                resetForm()\n                hideModal()\n            } else {\n                throw new Error(`${resp.message || 'unknown error'}`)\n            }\n        } catch (e) {\n            console.error(e)\n            addToast('OTP: ' + e.message || e, { error: true })\n        }\n\n        setLoading(false)\n    }\n\n    const resetForm = () => {\n        setCurrentPassword('')\n        setReceivedOTP('')\n    }\n\n    return (\n        <Modal title=\"Two Factor Authentication\">\n            <div id=\"otp-auth\">\n                <div className=\"img-wrapper\">\n                    <img alt=\"qr-code\" src={imageURL}></img>\n                </div>\n                <div className=\"img-msg\" style={{ marginBottom: showSecret ? '0px' : '22px'}}>\n                    {!showSecret && \n                    (<span className=\"click-here\" onClick={() => { setShowSecret(prevState => !prevState) }}>\n                        Unable to scan code? Click here.\n                    </span>)}\n                    {showSecret && (<><span>Enter this OTP in your app:</span><div>{secret}</div></>)}\n                </div>\n                <form onSubmit={handleSubmit}>\n                    <div>\n                        <h4>Account password</h4>\n                        <TextInput\n                            password\n                            required\n                            pattern=\".{8,}\"\n                            autocomplete=\"current-password\"\n                            placeholder=\"Enter the account password\"\n                            onInput={value => setCurrentPassword(value)}\n                        />\n                        <h4>Authenticator app code</h4>\n                        <TextInput\n                            placeholder=\"Enter the code from authenticator app\"\n                            onInput={setReceivedOTP}\n                            value={receivedOtp}\n                            pattern=\"[0-9]{6}\"\n                            required\n                        />\n                    </div>\n                    <div className=\"buttons\">\n                        {!isLoading ? (<Button type=\"submit\">Enable 2FA</Button>) : (<Button disabled><Loading /></Button>)}\n                    </div>\n                </form>\n            </div>\n        </Modal>\n    )\n}\n\nexport default OtpTwoFAModal\n","import './OtpTwoFADisableModal.scss'\nimport { useModals } from '../../../hooks'\nimport { fetchPost } from '../../../lib/fetch'\nimport { Modal, Button, TextInput, Loading } from '../../common'\nimport { useState } from 'react'\nimport { Wallet } from '@ethersproject/wallet'\nimport { useToasts } from '../../../hooks/toasts'\n\nconst OtpTwoFADisableModal = ({ relayerURL, selectedAcc, setCacheBreak }) => {\n    const { hideModal } = useModals()\n    const { addToast } = useToasts()\n    const [isLoading, setLoading] = useState(false)\n\n    const otp = null\n    const [currentPassword, setCurrentPassword] = useState('')\n\n    const handleSubmit = e => {\n      e.preventDefault()\n      setLoading(true)\n      disableOTP()\n    }\n\n    const disableOTP = async() => {\n      try {\n          const wallet = await Wallet.fromEncryptedJson(\n              JSON.parse(selectedAcc.primaryKeyBackup),\n              currentPassword\n          )\n          \n          const sig = await wallet.signMessage(JSON.stringify({ otp }))\n          const resp = await fetchPost(`${relayerURL}/identity/${selectedAcc.id}/modify`, { otp, sig })\n\n          if (resp.success) {\n              addToast(`You have successfully disabled two-factor authentication.`)\n              setCacheBreak() \n              resetForm()\n              hideModal()\n          } else {\n              throw new Error(`${resp.message || 'unknown error'}`)\n          }\n      } catch (e) {\n          console.error(e)\n          addToast('OTP: ' + e.message || e, { error: true })\n      }\n\n      setLoading(false)\n    }\n\n    const resetForm = () => {\n      setCurrentPassword('')\n    }\n\n    return (\n        <Modal id='disable-otp-modal' title=\"Disable Two Factor Authentication\">\n          <form onSubmit={handleSubmit}>\n            <div>\n                <h4>Enter your account password</h4>\n                <TextInput\n                    password\n                    required\n                    pattern=\".{8,}\"\n                    autocomplete=\"current-password\"\n                    placeholder=\"Account Password\"\n                    onInput={value => setCurrentPassword(value)}\n                />\n            </div>\n            <div className=\"buttons\">\n              {!isLoading ? (<Button type=\"submit\">Disable 2FA</Button>) : (<Button disabled><Loading /></Button>)}\n            </div>\n          </form>\n        </Modal>\n    )\n}\n\nexport default OtpTwoFADisableModal\n","import './Backup.scss'\n\nimport { BiExport, BiImport } from \"react-icons/bi\"\nimport { Button } from \"../../../common\"\n\nconst Backup = ({ selectedAccount, onOpen }) => {\n    return (\n        <div id=\"backup\">\n            <div className=\"panel\">\n                <div className=\"panel-title\">Backup current account</div>\n                <div className=\"content\" id=\"export\">\n                    <a\n                        type=\"button\"\n                        href={`data:text/json;charset=utf-8,${encodeURIComponent(\n                            JSON.stringify(selectedAccount)\n                        )}`}\n                        download={`${selectedAccount.id}.json`}\n                    >\n                        <Button icon={<BiExport/>}>Export</Button>\n                    </a>\n                    <div style={{ fontSize: '0.9em' }}>\n                        Downloads a backup of your current account ({selectedAccount.id.slice(0, 5)}...{selectedAccount.id.slice(-3)}) encrypted with\n                        your password. It's safe to store in iCloud/Google Drive, but you cannot use it to restore your account if you forget the password.\n                        <b> You can only import this in Ambire</b>, it's not importable in other wallets.\n                    </div>\n                </div>\n            </div>\n            <div className=\"panel\">\n                <div className=\"panel-title\">Import an account from backup</div>\n                <div className=\"content\" id=\"import\">\n                    <Button icon={<BiImport/>} onClick={onOpen}>Import</Button>\n                    <p>...or you can drop an account backup JSON file on this page</p>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Backup","import { MdOutlineWarningAmber } from \"react-icons/md\"\nimport buildRecoveryBundle from '../../../../helpers/recoveryBundle'\n\nconst PendingRecoveryNotice = ({ recoveryLock, showSendTxns, selectedAccount, selectedNetwork }) => {\n    const isAlreadyInitiated = recoveryLock && recoveryLock.status !== 'requestedButNotInitiated'\n    const createRecoveryRequest = async () => {\n        if (isAlreadyInitiated) return\n        const bundle = buildRecoveryBundle(\n            selectedAccount.id,\n            selectedNetwork.id,\n            selectedAccount.signer.preRecovery,\n            { signer: selectedAccount.signer, primaryKeyBackup: selectedAccount.primaryKeyBackup }\n        )\n        showSendTxns(bundle)\n    }\n    const recoveryLockStatus = recoveryLock ? recoveryLock.status : 'requestedButNotInitiated'\n    const remainingTime = seconds => {\n        if (seconds > 86400) return `${Math.ceil(seconds / 86400)} days`\n        else return `${Math.ceil(seconds/1440)} hours`\n    }\n    const style = isAlreadyInitiated\n        ? (recoveryLockStatus === 'ready' ? { 'background-color': '#6bad6b' } : {})\n        : { cursor: 'pointer' }\n    return (\n        <div className=\"notice\" style={style} onClick={() => createRecoveryRequest()}>\n            <MdOutlineWarningAmber/>\n            {\n                recoveryLockStatus === 'requestedButNotInitiated' ?\n                    <>Password reset requested but not initiated for {selectedNetwork.name}. Click here to initiate it.</> :\n                recoveryLockStatus === 'initiationTxnPending' ?\n                    <>Initiation transaction is currently pending. Once mined, you will need to wait {remainingTime(recoveryLock.timelock)} for the reset to be done on {selectedNetwork.name}.</> :\n                recoveryLockStatus === 'waitingTimelock' ?\n                    <>Password reset on {selectedNetwork.name} is currently pending. {remainingTime(recoveryLock.remaining)} remaining.</> :\n                recoveryLockStatus === 'ready' ?\n                    <>Password reset on {selectedNetwork.name} is now complete! You can start signing transactions with your new password!</> :\n                recoveryLockStatus === 'failed' ?\n                    <>Something went wrong while resetting your password. Please contact support at help.ambire.com</> : null\n            }\n        </div>\n    )\n}\n\nexport default PendingRecoveryNotice","import './Security.scss'\n\nimport { MdOutlineRemove } from 'react-icons/md'\nimport { RiDragDropLine } from 'react-icons/ri'\nimport { useState, useEffect, useCallback } from 'react'\nimport { Loading, TextInput, Button } from '../../common'\nimport { Interface, AbiCoder, keccak256 } from 'ethers/lib/utils'\nimport accountPresets from '../../../consts/accountPresets'\nimport privilegesOptions from '../../../consts/privilegesOptions'\nimport { useRelayerData, useModals } from '../../../hooks'\nimport { ResetPasswordModal } from '../../Modals'\nimport AddAuthSigner from './AddAuthSigner/AddAuthSigner'\nimport { useToasts } from '../../../hooks/toasts'\nimport { useHistory } from 'react-router-dom'\nimport { useDropzone } from 'react-dropzone'\nimport { MdInfoOutline } from 'react-icons/md'\nimport { validateImportedAccountProps, fileSizeValidator } from '../../../lib/validations/importedAccountValidations'\nimport OtpTwoFAModal from '../../Modals/OtpTwoFAModal/OtpTwoFAModal'\nimport OtpTwoFADisableModal from '../../Modals/OtpTwoFADisableModal/OtpTwoFADisableModal'\nimport Backup from './Backup/Backup'\nimport PendingRecoveryNotice from './PendingRecoveryNotice/PendingRecoveryNotice'\nimport { getName } from '../../../lib/humanReadableTransactions'\n\nconst IDENTITY_INTERFACE = new Interface(\n  require('adex-protocol-eth/abi/Identity5.2')\n)\n\nconst REFRESH_INTVL = 40000\n\nconst Security = ({\n  relayerURL,\n  selectedAcc,\n  selectedNetwork,\n  accounts,\n  addRequest,\n  showSendTxns,\n  onAddAccount\n}) => {\n  const { showModal } = useModals()\n  const [ cacheBreak, setCacheBreak ] = useState(() => Date.now())\n  \n  useEffect(() => {\n    if (Date.now() - cacheBreak > 30000) setCacheBreak(Date.now())\n    const intvl = setTimeout(() => setCacheBreak(Date.now()), REFRESH_INTVL)\n    return () => clearTimeout(intvl)\n  }, [cacheBreak])\n\n  const url = relayerURL\n    ? `${relayerURL}/identity/${selectedAcc}/${selectedNetwork.id}/privileges?cacheBreak=${cacheBreak}`\n    : null\n  const { data, errMsg, isLoading } = useRelayerData(url)\n  const privileges = data ? data.privileges : {}\n  const otpEnabled = data ? data.otpEnabled : null\n  const recoveryLock = data && data.recoveryLock\n  const { addToast } = useToasts()\n  const history = useHistory()\n  const selectedAccount = accounts.find(x => x.id === selectedAcc)\n\n  const craftTransaction = (address, privLevel) => {\n    return {\n      to: selectedAcc,\n      data: IDENTITY_INTERFACE.encodeFunctionData('setAddrPrivilege', [\n        address,\n        privLevel,\n      ]),\n      value: '0x00',\n    }\n  }\n\n  const addTransactionToAddRequest = txn => {\n    try {\n      addRequest({\n        id: `setPriv_${txn.data}`,\n        type: 'eth_sendTransaction',\n        txn: txn,\n        chainId: selectedNetwork.chainId,\n        account: selectedAcc,\n      })\n    } catch (err) {\n      console.error(err)\n      addToast(`Error: ${err.message || err}`, { error: true })\n    }\n  }\n\n  const onRemoveBtnClicked = key => {\n    const txn = craftTransaction(key, privilegesOptions.false)\n    addTransactionToAddRequest(txn)\n  }\n\n  const onAddBtnClickedHandler = newSignerAddress => {\n    const txn = craftTransaction(\n      newSignerAddress.address,\n      privilegesOptions.true\n    )\n    addTransactionToAddRequest(txn)\n  }\n\n  const onMakeDefaultBtnClicked = async (account, address, isQuickAccount) => {\n    if (isQuickAccount) {\n      return addToast((<span>To make this signer default, please <a href='#/email-login'>please login with the email</a></span>), {url: '/#/email-login', error: true})\n    } else {\n      onAddAccount({ ...account, signer: { address: address }, signerExtra: null })\n      addToast(\n        'This signer is now the default. If it is a hardware wallet, you will have to re-add the account manually to connect it directly, otherwise you will have to add this signer address to your web3 wallet.',\n        { timeout: 30000 }\n      )\n    }\n\n    history.push('/wallet/security')\n  }\n\n  const showResetPasswordModal = () => {\n    if (!relayerURL) {\n      addToast('Unsupported without a connection to the relayer', { error: true })\n      return\n    }\n    showModal(<ResetPasswordModal\n      account={selectedAccount}\n      selectedNetwork={selectedNetwork}\n      relayerURL={relayerURL}\n      onAddAccount={onAddAccount}\n      showSendTxns={showSendTxns}\n    />)\n  }\n\n  const handleEnableOtp = () => {\n    if (!relayerURL) {\n      return addToast('Unsupported without a connection to the relayer', { error: true })\n    }\n\n    showModal(<OtpTwoFAModal \n      relayerURL={relayerURL} \n      selectedAcc={selectedAccount} \n      setCacheBreak={() => { setCacheBreak(Date.now()) }} \n      />)\n  }\n\n  const handleDisableOtp = async() => {\n    if (!relayerURL) {\n      return addToast('Unsupported without a connection to the relayer', { error: true })\n    }\n    \n    showModal(<OtpTwoFADisableModal \n      relayerURL={relayerURL} \n      selectedAcc={selectedAccount} \n      setCacheBreak={() => { setCacheBreak(Date.now()) }} \n      />)\n  }\n  \n  // JSON import\n  const onDrop = useCallback((acceptedFiles, rejectedFiles) => {\n    const reader = new FileReader()\n    \n    if (rejectedFiles.length) {\n      addToast(`${rejectedFiles[0].file.path} - ${(rejectedFiles[0].file.size / 1024).toFixed(2)} KB. ${rejectedFiles[0].errors[0].message}`, { error: true })\n    }\n\n    if (acceptedFiles.length){\n      const file = acceptedFiles[0]\n\n      reader.readAsText(file,'UTF-8')\n      reader.onload = readerEvent => {\n        const content = readerEvent.target.result\n        const fileContent = JSON.parse(content)\n        const validatedFile = validateImportedAccountProps(fileContent)\n        \n        if (validatedFile.success) onAddAccount(fileContent, { select: true })\n        else addToast(validatedFile.message, { error: true})\n      }\n    }\n  }, [addToast, onAddAccount])\n  const { getRootProps, getInputProps, open, isDragActive, isDragAccept, isDragReject } = useDropzone({\n    onDrop,\n    noClick: true,\n    noKeyboard: true,\n    accept: 'application/json',\n    maxFiles: 1,\n    validator: fileSizeValidator\n  })\n\n  // @TODO relayerless mode: it's not that hard to implement in a primitive form, we need everything as-is\n  // but rendering the initial privileges instead; or maybe using the relayerless transactions hook/service\n  // and aggregate from that\n  const accHash = signer => {\n      const abiCoder = new AbiCoder()\n      const { timelock, one, two } = signer\n      return keccak256(abiCoder.encode(['tuple(uint, address, address)'], [[timelock, one, two]]))\n  }\n  const hasPendingReset = privileges[selectedAccount.signer.quickAccManager] && (\n    (recoveryLock && recoveryLock.status && !isLoading)\n      || (\n          privileges && selectedAccount.signer.quickAccManager\n          // is or has been in recovery state\n          && selectedAccount.signer.preRecovery\n          // but that's not finalized yet\n          && accHash(selectedAccount.signer) !== privileges[selectedAccount.signer.quickAccManager]\n      )\n    )\n\n  const privList = Object.entries(privileges)\n    .map(([addr, privValue]) => {\n      if (!privValue) return null\n  \n      const addressName = getName(addr) || null\n      const isQuickAcc = addr === accountPresets.quickAccManager\n      const privText = isQuickAcc\n        ? `Email/password signer (${selectedAccount.email || 'unknown email'})`\n        : `${addr} ${addressName && addressName !== addr ? `(${addressName})` : ''}`\n      const signerAddress = isQuickAcc\n        ? selectedAccount.signer.quickAccManager\n        : selectedAccount.signer.address\n      const isSelected = signerAddress === addr\n      const canChangePassword = isQuickAcc && !hasPendingReset\n\n      return (\n        <li key={addr}>\n          <TextInput className=\"depositAddress\" value={privText} disabled />\n          <div className=\"btns-wrapper\">\n            {isQuickAcc && (otpEnabled !== null) && (otpEnabled ? \n              (<Button red onClick={handleDisableOtp} small>Disable 2FA</Button>) : \n              (<Button onClick={handleEnableOtp} small>Enable 2FA</Button>)\n            )}\n            {isQuickAcc && (<Button\n              disabled={!canChangePassword}\n              title={hasPendingReset ? 'Account recovery already in progress' : ''}\n              onClick={showResetPasswordModal} small>Change password</Button>\n            )}\n            <Button\n              disabled={isSelected}\n              title={isSelected ? 'Signer is already default' : ''}\n              onClick={() =>\n                onMakeDefaultBtnClicked(selectedAccount, addr, isQuickAcc)\n              }\n              small\n            >\n              Make default\n            </Button>\n            <Button\n              onClick={() => onRemoveBtnClicked(addr)}\n              small\n              red\n              icon={<MdOutlineRemove/>}\n              title={\n                isSelected ? 'Cannot remove the currently used signer' : ''\n              }\n              disabled={isSelected}\n            >\n              Remove\n            </Button>\n          </div>\n        </li>\n      )\n    })\n    .filter(x => x)\n\n  const showLoading = isLoading && !data\n  const signersFragment = relayerURL ? (<>\n    <div className=\"panel\" id=\"signers\">\n      {hasPendingReset && !showLoading && (<PendingRecoveryNotice\n        recoveryLock={recoveryLock}\n        showSendTxns={showSendTxns}\n        selectedAccount={selectedAccount}\n        selectedNetwork={selectedNetwork}\n      />)}\n      <div className='network-warning'>\n        <MdInfoOutline size={36}></MdInfoOutline>\n        <div>\n          Please note: signer settings are network-specific. You are currently looking at and modifying the signers on {selectedNetwork.name}.\n          &nbsp;<a href='https://help.ambire.com/hc/en-us/articles/4410885684242-Signers' target='_blank' rel='noreferrer'>Need help? Click here.</a>\n        </div>\n      </div>\n      <div className=\"panel-title\">Authorized signers</div>\n      {errMsg && (\n        <h3 className=\"error\">Error getting authorized signers: {errMsg}</h3>\n      )}\n      {showLoading && <Loading />}\n      <ul className=\"content\">{!showLoading && privList}</ul>\n    </div>\n    <div className=\"panel\">\n      <div className=\"panel-title\">Add new signer</div>\n      <AddAuthSigner\n        onAddBtnClicked={onAddBtnClickedHandler}\n        selectedNetwork={selectedNetwork}\n        selectedAcc={selectedAcc}\n      />\n    </div>\n  </>) : (\n    <div className=\"panel\">\n      <div className=\"panel-title\">Authorized signers</div>\n      <h3 className=\"error\">\n        Unsupported: not connected to a relayer.\n      </h3>\n    </div>\n  )\n  return (\n    <section id=\"security\" className={(isDragActive ? 'activeStyle ' : '') + (isDragAccept ? 'acceptStyle ' : '') + (isDragReject ? 'rejectStyle ' : '')} {...getRootProps()}>\n      {\n        (isDragAccept || isDragReject)\n        && (<div className={isDragAccept ? 'acceptStyleIcon' : 'rejectStyleIcon'}><RiDragDropLine size={100}/></div>)\n      }\n      \n      <input {...getInputProps()} />\n      {signersFragment}\n\n      <Backup selectedAccount={selectedAccount} onOpen={open}/>\n    </section>\n  )\n}\n\nexport default Security\n","import './TxnPreview.scss'\n\nimport { useState } from 'react'\nimport { FaTimes, FaChevronDown, FaChevronUp } from 'react-icons/fa'\n\nimport { getName, getTransactionSummary, isKnown } from '../../../lib/humanReadableTransactions'\nimport networks from '../../../consts/networks'\nimport { formatUnits } from 'ethers/lib/utils'\n\nfunction getNetworkSymbol(networkId) {\n  const network = networks.find(x => x.id === networkId)\n  return network ? network.nativeAssetSymbol : 'UNKNW'\n}\nexport default function TxnPreview ({ txn, onDismiss, network, account, isFirstFailing, mined, disableExpand }) {\n  const [isExpanded, setExpanded] = useState(false)\n  const contractName = getName(txn[0], network)\n  return (\n    <div className={isFirstFailing ? 'txnPreview firstFailing' : 'txnPreview'}>\n        <div className=\"heading\">\n          <div className=\"info\" onClick={() => !disableExpand && setExpanded(e => !e)}>\n            <div className=\"summary-container\">\n              {!disableExpand && (<div className='expandTxn'>\n                {isExpanded ? (<FaChevronDown/>) : (<FaChevronUp/>)}\n              </div>)}\n              <div className=\"summary\">{getTransactionSummary(txn, network, account, { mined })}</div>\n            </div>\n            {isFirstFailing && (<div className='firstFailingLabel'>This is the first failing transaction.</div>)}\n            {!isFirstFailing && !mined && !isKnown(txn, account) && (<div className='unknownWarning'>Warning: interacting with an unknown contract or address.</div>)}\n          </div>\n          <div className='actionIcons'>\n              {onDismiss ? (<span className='dismissTxn' onClick={e => { e.stopPropagation(); onDismiss.apply(this, e) }}><FaTimes/></span>) : (<></>)}\n            </div>\n        </div>\n        {\n          isExpanded ? (<div className='advanced'>\n            <div><b>Interacting with (<i>to</i>):</b> {txn[0]}{contractName ? ` (${contractName})` : ''}</div>\n            <div><b>{getNetworkSymbol(network)} to be sent (<i>value</i>):</b> {formatUnits(txn[1] || '0x0', 18)}</div>\n            <div><b>Data:</b> {txn[2]}</div>\n          </div>) : (<></>)\n        }\n    </div>\n  )\n}\n","import { Interface } from 'ethers/lib/utils'\nimport accountPresets from '../consts/accountPresets'\n\nconst IdentityFactory = new Interface(require('adex-protocol-eth/abi/IdentityFactory'))\n\nexport function toBundleTxn({ to, value, data }, from) {\n  // Transactions with no `to` are interpreted by the Ethereum network as CREATE (contract deployment) if they come from an EOA\n  // however, our accounts are not EOAs, so we will just call the factory with a user-specific nonce, that's also identifiable (0x6942)\n  if (to === '0x' || !to) {\n    const salt = `0x69420000000000${Date.now().toString(16).slice(1,9)}00${from.slice(2)}`\n    return [accountPresets.identityFactoryAddr, value, IdentityFactory.encodeFunctionData('deploy', [data, salt])]\n  }\n  return [to, value || '0x0', data || '0x']\n}","import './Transactions.scss'\nimport { FaSignature } from 'react-icons/fa'\nimport { BsCoin, BsCalendarWeek, BsGlobe2, BsCheck2All } from 'react-icons/bs'\nimport { MdOutlinePendingActions } from 'react-icons/md'\nimport { useRelayerData } from '../../../hooks'\nimport TxnPreview from '../../common/TxnPreview/TxnPreview'\nimport { Loading, Button } from '../../common'\nimport accountPresets from '../../../consts/accountPresets'\nimport networks from '../../../consts/networks'\nimport { getTransactionSummary } from '../../../lib/humanReadableTransactions'\nimport { Bundle } from 'adex-protocol-eth'\nimport { useEffect, useState } from 'react'\nimport fetch from 'node-fetch'\nimport { useToasts } from '../../../hooks/toasts'\nimport { toBundleTxn } from '../../../lib/requestToBundleTxn'\n\n// 10% in geth and most EVM chain RPCs\nconst RBF_THRESHOLD = 1.1\n\nfunction Transactions ({ relayerURL, selectedAcc, selectedNetwork, showSendTxns, eligibleRequests }) {\n  const { addToast } = useToasts()\n  const [cacheBreak, setCacheBreak] = useState(() => Date.now())\n  // @TODO refresh this after we submit a bundle; perhaps with the upcoming transactions service\n  // We want this pretty much on every rerender with a 5 sec debounce\n  useEffect(() => {\n    if ((Date.now() - cacheBreak) > 5000) setCacheBreak(Date.now())\n    const intvl = setTimeout(() => setCacheBreak(Date.now()), 10000)\n    return () => clearTimeout(intvl)\n  }, [cacheBreak])\n  const url = relayerURL\n    ? `${relayerURL}/identity/${selectedAcc}/${selectedNetwork.id}/transactions?cacheBreak=${cacheBreak}`\n    : null\n  const { data, errMsg, isLoading } = useRelayerData(url)\n\n  // @TODO implement a service that stores sent transactions locally that will be used in relayerless mode\n  if (!relayerURL) return (<section id='transactions'>\n    <h3 className='validation-error'>Unsupported: not currently connected to a relayer.</h3>\n  </section>)\n\n  // @TODO: visualize other pending bundles\n  const firstPending = data && data.txns.find(x => !x.executed && !x.replaced)\n\n  const mapToBundle = (relayerBundle, extra = {}) => (new Bundle({\n    ...relayerBundle,\n    nonce: relayerBundle.nonce.num,\n    gasLimit: null,\n    // Instruct the relayer to abide by this minimum fee in USD per gas, to ensure we are truly replacing the txn\n    minFeeInUSDPerGas: relayerBundle.feeInUSDPerGas * RBF_THRESHOLD,\n    ...extra\n  }))\n  const cancelByReplacing = relayerBundle => showSendTxns(mapToBundle(relayerBundle, {\n    txns: [[selectedAcc, '0x0', '0x']],\n  }))\n  const cancel = relayerBundle => {\n    // @TODO relayerless\n    mapToBundle(relayerBundle).cancel({ relayerURL, fetch })\n      .then(({ success }) => {\n        if (!success) {\n          addToast('Transaction already picked up by the network, you will need to pay a fee to replace it with a cancellation transaction.')\n          cancelByReplacing(relayerBundle)\n        } else {\n          addToast('Transaction cancelled successfully')\n        }\n      })\n      .catch(e => {\n        console.error(e)\n        cancelByReplacing(relayerBundle)\n      })\n  }\n\n  // @TODO: we are currently assuming the last txn is a fee; change that (detect it)\n  const speedup = relayerBundle => showSendTxns(mapToBundle(relayerBundle, { txns: relayerBundle.txns.slice(0, -1) }))\n\n  return (\n    <section id='transactions'>\n      {!!eligibleRequests.length && (<div className='panel'>\n        <div className='title'><FaSignature size={25}/>Waiting to be signed (current batch)</div>\n        <div className=\"content\">\n          <div className=\"bundle\">\n            <div onClick={() => showSendTxns(null)}>\n              {eligibleRequests.map(req => (\n                <TxnPreview\n                    key={req.id}\n                    network={selectedNetwork.id}\n                    account={selectedAcc}\n                    disableExpand={true}\n                    txn={toBundleTxn(req.txn)}/>\n              ))}\n            </div>\n              <div className='actions'>\n                {/*\n                <Button small className='cancel' onClick={\n                  () => resolveMany(eligibleRequests.map(x => x.id), { message: 'Ambire user rejected all requests' })\n                }>Reject all</Button>*/}\n                <Button small onClick={() => showSendTxns(null)}>Sign or reject</Button>\n              </div>\n          </div>\n        </div>\n      </div>)}\n      { !!firstPending && (<div className='panel' id=\"pending\">\n        <div className='title'><MdOutlinePendingActions/>Pending transaction bundle</div>\n        <div className=\"content\">\n          <div className=\"bundle\">\n            <BundlePreview bundle={firstPending}></BundlePreview>\n            <div className='actions'>\n              <Button small className='cancel' onClick={() => cancel(firstPending)}>Cancel</Button>\n              <Button small onClick={() => speedup(firstPending)}>Speed up</Button>\n            </div>\n          </div>\n        </div>\n      </div>) }\n\n      <div id=\"confirmed\" className=\"panel\">\n        <div className=\"title\">\n          <BsCheck2All/>\n          {(data && data.txns.length === 0) ? 'No transactions yet.' : 'Confirmed transactions'}\n        </div>\n        <div className=\"content\">\n          {!relayerURL && (<h3 className='validation-error'>Unsupported: not currently connected to a relayer.</h3>)}\n          {errMsg && (<h3 className='validation-error'>Error getting list of transactions: {errMsg}</h3>)}\n          {(isLoading && !data) && <Loading />}\n          {\n              // @TODO respect the limit and implement pagination\n              data && data.txns.filter(x => x.executed).map(bundle => BundlePreview({ bundle, mined: true }))\n          }\n        </div>\n      </div>\n    </section>\n  )\n}\n\nfunction BundlePreview({ bundle, mined = false }) {\n  const network = networks.find(x => x.id === bundle.network)\n  if (!Array.isArray(bundle.txns)) return (<h3 className='error'>Bundle has no transactions (should never happen)</h3>)\n  const lastTxn = bundle.txns[bundle.txns.length - 1]\n  // terribly hacky; @TODO fix\n  // all of the values are prob checksummed so we may not need toLowerCase\n  const lastTxnSummary = getTransactionSummary(lastTxn, bundle.network, bundle.identity)\n  const hasFeeMatch = lastTxnSummary.match(new RegExp(`to ${accountPresets.feeCollector}`, 'i'))\n  const txns = hasFeeMatch ? bundle.txns.slice(0, -1) : bundle.txns\n  const toLocaleDateTime = date => `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`\n\n  return (<div className='bundlePreview bundle' key={bundle._id}>\n    {txns.map((txn, i) => (<TxnPreview\n      key={i} // safe to do this, individual TxnPreviews won't change within a specific bundle\n      txn={txn} network={bundle.network} account={bundle.identity} mined={mined} />\n    ))}\n    <ul className=\"details\">\n      {\n        hasFeeMatch ?\n          <li>\n            <label><BsCoin/>Fee</label>\n            <p>{lastTxnSummary.slice(5, -hasFeeMatch[0].length)}</p>\n          </li>\n          :\n          null\n      }\n      {\n        bundle.executed && !bundle.executed.success && (\n          <li>\n            <label>Error</label>\n            <p>{bundle.executed.errorMsg || 'unknown error'}</p>\n          </li>\n        )\n      }\n      <li>\n        <label><BsCalendarWeek/>Submitted on</label>\n        <p>{bundle.submittedAt && (toLocaleDateTime(new Date(bundle.submittedAt))).toString()}</p>\n      </li>\n      {\n        bundle.replacesTxId ?\n          <li>\n            <label>Replaces transaction</label>\n            <p>{bundle.replacesTxId}</p>\n          </li>\n          :\n          null\n      }\n      {\n        bundle.txId ?\n          <li>\n            <label><BsGlobe2/>Block Explorer</label>\n            <p><a href={network.explorerUrl+'/tx/'+bundle.txId} target='_blank' rel='noreferrer'>{network.explorerUrl.split('/')[2]}</a></p>\n          </li>\n          :\n          null\n      }\n    </ul>\n  </div>)\n}\n\nexport default Transactions\n","import './GnosisSafeApps.scss'\nimport GnosisSafeAppIframe from './GnosisSafeAppIframe'\n\nimport { useState } from 'react'\n\nconst dapps = [{\n  name: 'LocalTest',\n  url: 'http://localhost:3002',\n  logo: 'http://localhost:3002/logo-test.png',\n  desc: 'Local dapp test with some lorem ipsum stuff'\n},\n{\n  name: 'ParaSwap',\n  url: 'https://paraswap.io',\n  logo: 'https://paraswap.io/paraswap.svg',\n  desc: 'ParaSwap allows dApps and traders to get the best DEX liquidity by aggregating multiple markets and offering the best rates'\n},\n{\n  name: '0xPlasma Finance',\n  url: 'https://apy.plasma.finance',\n  logo: 'https://apy.plasma.finance/logo.svg',\n  desc: 'Cross-chain DeFi & DEX aggregator, farming, asset management, fiat on-ramp'\n},\n{\n  name: 'MEW',\n  url: 'https://www.myetherwallet.com/wallet/sign',\n  logo: 'https://www.myetherwallet.com/wallet/sign/logo.svg',\n  desc: 'MEW as dapp'\n},\n]\n\nexport default function GnosisSafeApps({\n  network,\n  selectedAcc,\n  gnosisConnect,\n  gnosisDisconnect\n}) {\n\n  const [selectedApp, setSelectedApp] = useState(null)\n\n  return (\n    <div id=\"plugin-gnosis-container\">\n      <ul id=\"dapps-container\" className={selectedApp ? 'small-thumbs' : ''}>\n        {dapps.map((dapp, index) => (\n          <li\n            key={index}\n            onClick={() => setSelectedApp(dapp)}\n            className={(selectedApp && dapp.url === selectedApp.url) ? 'selected' : ''}\n          >\n            <div className=\"logo-container\" style={{ backgroundImage: `url(${dapp.logo})` }}></div>\n            <div className=\"dapp-name\">{dapp.name}</div>\n            <div className=\"dapp-desc\">{dapp.desc}</div>\n          </li>\n        ))}\n      </ul>\n      {selectedApp &&\n        <GnosisSafeAppIframe\n          network={network}\n          selectedApp={selectedApp}\n          selectedAcc={selectedAcc}\n          gnosisConnect={gnosisConnect}\n          gnosisDisconnect={gnosisDisconnect}\n\n        />\n      }\n    </div>)\n}\n","const ERC721Abi = [\n    \"function name() view returns (string memory)\",\n    \"function tokenURI(uint256 _tokenId) view returns (string memory)\",\n    \"function uri(uint256 _tokenId) view returns (string memory)\",\n    \"function ownerOf(uint256 tokenId) view returns (address)\",\n    \"function transferFrom(address from, address to, uint256 tokenId)\"\n]\n\nexport default ERC721Abi\n","import './Collectible.scss'\n\nimport { useParams } from 'react-router-dom'\nimport { ethers, getDefaultProvider } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useCallback, useEffect, useState } from 'react'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { BsFillImageFill } from 'react-icons/bs'\nimport * as blockies from 'blockies-ts';\nimport { useToasts } from '../../../hooks/toasts'\nimport { TextInput, Button, Loading, AddressBook, AddressWarning } from '../../common'\nimport ERC721Abi from '../../../consts/ERC721Abi'\nimport networks from '../../../consts/networks'\nimport { validateSendNftAddress } from '../../../lib/validations/formValidations'\nimport { BsXLg } from 'react-icons/bs'\n\nconst ERC721 = new Interface(ERC721Abi)\n\nconst handleUri = uri => {\n    uri = uri.startsWith('data:application/json') ? uri.replace('data:application/json;utf8,', '') : uri\n    return uri.startsWith('ipfs://') ? uri.replace(/ipfs:\\/\\/ipfs\\/|ipfs:\\/\\//g, 'https://ipfs.io/ipfs/') : uri\n}\n\nconst Collectible = ({ selectedAcc, selectedNetwork, addRequest, addressBook }) => {\n    const { addresses, addAddress, removeAddress, isKnownAddress } = addressBook\n\n    const { addToast } = useToasts()\n    const { network, collectionAddr, tokenId } = useParams()\n    const [isLoading, setLoading] = useState(true)\n    const [metadata, setMetadata] = useState({\n        owner: {\n            address: '',\n            icon: ''\n        },\n        name: '',\n        description: '',\n        image: '',\n        collection: '',\n        explorerUrl: ''\n    })\n    const [recipientAddress, setRecipientAddress] = useState('')\n    const [isTransferDisabled, setTransferDisabled] = useState(true)\n    const [addressConfirmed, setAddressConfirmed] = useState(false)\n    const [newAddress, setNewAddress] = useState(null)\n    const [validationFormMgs, setValidationFormMgs] = useState({ \n        success: false, \n        message: ''\n    })\n\n    const sendTransferTx = () => {\n        try {\n            addRequest({\n                id: `transfer_nft_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn: {\n                    to: collectionAddr,\n                    value: '0',\n                    data: ERC721.encodeFunctionData('transferFrom', [metadata.owner.address, recipientAddress, tokenId])\n                }\n            })\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        const isAddressValid = validateSendNftAddress(recipientAddress, selectedAcc, addressConfirmed, isKnownAddress, metadata, selectedNetwork, network)\n        \n        setTransferDisabled(!isAddressValid.success)\n        setValidationFormMgs({ \n            success: isAddressValid.success, \n            message: isAddressValid.message ? isAddressValid.message : ''\n        })\n\n    }, [recipientAddress, metadata, selectedNetwork, selectedAcc, network, addressConfirmed, isKnownAddress])\n\n    const fetchMetadata = useCallback(async () => {\n        setLoading(true)\n        setMetadata({})\n    \n        try {\n            const networkDetails = networks.find(({ id }) => id === network)\n            if (!networkDetails) throw new Error('This network is not supported')\n\n            const { rpc, explorerUrl } = networkDetails\n            const provider = getDefaultProvider(rpc)\n            const contract = new ethers.Contract(collectionAddr, ERC721Abi, provider)\n\n            const [collection, address, maybeUri1, maybeUri2] = await Promise.all([\n                contract.name(),\n                contract.ownerOf(tokenId),\n                contract.tokenURI(tokenId).then(uri => ({ uri })).catch(err => ({ err })),\n                contract.uri(tokenId).then(uri => ({ uri })).catch(err => ({ err }))\n            ])\n            const uri = maybeUri1.uri || maybeUri2.uri\n            if (!uri) throw maybeUri1.err || maybeUri2.err\n\n            let json = {}\n\n            if (uri.startsWith('data:application/json')) {\n                json = JSON.parse(uri.replace('data:application/json;utf8,', ''))\n            } else {\n                const jsonUrl = handleUri(uri)\n                const response = await fetch(jsonUrl)\n                json = await response.json()\n            }\n\n            const image = json ? handleUri(json.image) : null\n            setMetadata(metadata => ({\n                ...metadata,\n                ...json,\n                image\n            }))\n\n            setMetadata(metadata => ({\n                ...metadata,\n                collection,\n                owner: {\n                    address,\n                    icon: blockies.create({ seed: address }).toDataURL()\n                },\n                explorerUrl\n            }))\n\n            setLoading(false)\n        } catch(e) {\n            console.error(e)\n            addToast(`Collectible error: ${e.message || e}`, { error: true })\n        }\n    }, [addToast, tokenId, collectionAddr, network])\n\n    useEffect(() => fetchMetadata(), [fetchMetadata])\n\n    return (\n        <div id=\"collectible\">\n            <div className=\"panel\">\n                <div className=\"heading\">\n                    <div className=\"title\">{ metadata.collection } #{ tokenId }</div>\n                    <div className=\"contract\">\n                        Contract address: <a className=\"address\" href={`${metadata.explorerUrl}/address/${collectionAddr}`} target=\"_blank\" rel=\"noreferrer\">{ collectionAddr }</a>\n                    </div>\n                </div>\n                {\n                    isLoading ?\n                        <Loading/>\n                        :\n                        <div className=\"metadata\">\n                            <div className=\"image\" style={{backgroundImage: `url(${metadata.image})`}}>\n                                { !metadata.image ? <BsFillImageFill/> : null }\n                            </div>\n                            <div className=\"info\">\n                                <div className=\"name\">\n                                    { metadata.name }\n                                </div>\n                                <div className=\"description\">\n                                    { metadata.description }\n                                </div>\n                            </div>\n                            <div className=\"owner\">\n                                Owner:\n                                <a className=\"address\" href={`${metadata.explorerUrl}/address/${metadata.owner.address}`} target=\"_blank\" rel=\"noreferrer\">\n                                    <div className=\"icon\" style={{backgroundImage: `url(${metadata.owner.icon})`}}></div>\n                                    { \n                                        metadata.owner.address === selectedAcc ? \n                                            <span>You ({ metadata.owner.address })</span>\n                                            :\n                                            metadata.owner.address\n                                    }\n                                    \n                                </a>\n                            </div>\n                        </div>\n                }\n            </div>\n            <div className=\"panel\">\n                <div className=\"title\">Transfer</div>\n                <div className=\"content\">\n                    <div id=\"recipient-address\">\n                        <TextInput placeholder=\"Recipient Address\" value={recipientAddress} onInput={(value) => setRecipientAddress(value)}/>\n                        <AddressBook \n                            addresses={addresses.filter(x => x.address !== selectedAcc)}\n                            addAddress={addAddress}\n                            removeAddress={removeAddress}\n                            newAddress={newAddress}\n                            onClose={() => setNewAddress(null)}\n                            onSelectAddress={address => setRecipientAddress(address)}\n                        />\n                    </div>\n                    { validationFormMgs.message && \n                        (<div className='validation-error'><BsXLg size={12}/>&nbsp;{validationFormMgs.message}</div>) \n                    }\n                    <div className=\"separator\"></div>\n                    <AddressWarning\n                        address={recipientAddress}\n                        onAddNewAddress={() => setNewAddress(recipientAddress)}\n                        onChange={(value) => setAddressConfirmed(value)}\n                        isKnownAddress={isKnownAddress}\n                    />\n                    <Button icon={<AiOutlineSend/>} disabled={isTransferDisabled} onClick={sendTransferTx}>Send</Button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Collectible\n","import { fetchGet } from \"../lib/fetch\";\n\nconst baseURL = 'https://backend.movr.network/v1'\n\nconst fetchChains = async () => {\n    const response = await fetchGet(`${baseURL}/supported/chains`)\n    if (!response) return null\n    return response.result\n}\n\nconst fetchFromTokens = async (from, to) => {\n    const response = await fetchGet(`${baseURL}/supported/from-token-list?fromChainId=${from}&toChainId=${to}`)\n    if (!response) return null\n    return response.result.map(({ token }) => token)\n}\n\nconst fetchToTokens = async (from, to) => {\n    const response = await fetchGet(`${baseURL}/supported/to-token-list?fromChainId=${from}&toChainId=${to}`)\n    if (!response) return null\n    return response.result.map(({ token }) => token)\n}\n\nconst fetchQuotes = async (fromAsset, fromChainId, toAsset, toChainId, amount, excludeBridges, sort = 'cheapestRoute') => {\n    const response = await fetchGet(`${baseURL}/quote?fromAsset=${fromAsset}&fromChainId=${fromChainId}&toAsset=${toAsset}&toChainId=${toChainId}&amount=${amount}&excludeBridges=${excludeBridges}&sort=${sort}`)\n    if (!response) return null\n    return response.result\n}\n\nconst checkApprovalAllowance = async (chainID, owner, allowanceTarget, tokenAddress) => {\n    const response = await fetchGet(`${baseURL}/approval/check-allowance?chainID=${chainID}&owner=${owner}&allowanceTarget=${allowanceTarget}&tokenAddress=${tokenAddress}`)\n    if (!response) return null\n    return response.result\n}\n\nconst approvalBuildTx = async (chainID, owner, allowanceTarget, tokenAddress, amount) => {\n    const response = await fetchGet(`${baseURL}/approval/build-tx?chainID=${chainID}&owner=${owner}&allowanceTarget=${allowanceTarget}&tokenAddress=${tokenAddress}&amount=${amount}`)\n    if (!response) return null\n    return response.result\n}\n\nconst sendBuildTx = async (recipient, fromAsset, fromChainId, toAsset, toChainId, amount, output, routePath) => {\n    const response = await fetchGet(`${baseURL}/send/build-tx?recipient=${recipient}&fromAsset=${fromAsset}&fromChainId=${fromChainId}&toAsset=${toAsset}&toChainId=${toChainId}&amount=${amount}&output=${output}&fromAddress=${recipient}&routePath=${routePath}`)\n    if (!response) return null\n    return response.result\n}\n\nexport {\n    fetchChains,\n    fetchToTokens,\n    fetchFromTokens,\n    fetchQuotes,\n    checkApprovalAllowance,\n    approvalBuildTx,\n    sendBuildTx\n}","import './Quotes.scss'\n\nimport { MdOutlineArrowBack, MdOutlineArrowForward, MdOutlineCheck, MdOutlineClose } from 'react-icons/md';\nimport { Button, Loading, Radios } from '../../../common';\nimport { useState } from 'react';\nimport networks from '../../../../consts/networks';\nimport { approvalBuildTx, sendBuildTx } from '../../../../services/movr';\nimport { useToasts } from '../../../../hooks/toasts';\n\n\nconst formatAmount = (amount, asset) => amount / Math.pow(10, asset.decimals)\nconst formatFeeAmount = (fee, route) => {\n    const asset = fee.address === route.toAsset.address ? route.toAsset : route.fromAsset\n    return formatAmount(fee.amount, asset)\n}\nconst getNetwork = id => networks.find(({ chainId }) => chainId === id)\n\nconst Quotes = ({ addRequest, selectedAccount, fromTokensItems, quotes, onCancel }) => {\n    const { addToast } = useToasts()\n\n    const { toAsset } = quotes;\n    const fromAsset = fromTokensItems.find(({ value }) => value === quotes.fromAsset.address)\n    const fromNetwork = getNetwork(quotes.fromAsset.chainId)\n    const toNetwork = getNetwork(toAsset.chainId)\n    const [selectedRoute, setSelectedRoute] = useState(null)\n    const [loading, setLoading] = useState(false)\n\n    const routes = quotes.routes.map(route => {\n        const { fees, middlewareRoute, bridgeRoute } = route\n        return {\n            ...route,\n            middlewareFee: middlewareRoute ? formatFeeAmount(fees.middlewareFee, middlewareRoute) : 0,\n            bridgeFee: bridgeRoute ? formatFeeAmount(fees.bridgeFee, bridgeRoute) : 0\n        }\n    })\n\n    const radios = routes.map(({ routePath, middlewareFee, bridgeFee, middlewareRoute, bridgeRoute }) => ({\n        label:\n            <div className=\"route\">\n                <div className=\"info\">\n                    {\n                        middlewareRoute ?\n                            <div className=\"middleware\">\n                                <div className=\"icon\" style={{backgroundImage: `url(${middlewareRoute.middlewareInfo.icon})`}}></div>\n                                <div className=\"name\">{ middlewareRoute.middlewareInfo.displayName }</div>\n                            </div>\n                            :\n                            null\n                    }\n                    <div className=\"bridge\">\n                        <div className=\"icon\" style={{backgroundImage: `url(${bridgeRoute.bridgeInfo.icon})`}}></div>\n                        <div className=\"name\">{ bridgeRoute.bridgeInfo.displayName }</div>\n                    </div>\n                </div>\n                <div className=\"summary\">\n                    <div className=\"amounts\">\n                        {\n                            middlewareRoute ?\n                                <div className=\"amount\">\n                                    { formatAmount(middlewareRoute.inputAmount, middlewareRoute.fromAsset) } { middlewareRoute.fromAsset.symbol }\n                                </div>\n                                :\n                                null\n                        }   \n                        <div className=\"amount\">\n                            { formatAmount(bridgeRoute.outputAmount, bridgeRoute.toAsset) } { bridgeRoute.toAsset.symbol }\n                        </div>\n                    </div>\n                    <div className=\"fees\">\n                        {\n                            middlewareRoute ?\n                                <div className=\"fee\">\n                                    { middlewareFee ? <>Fee: { middlewareFee } { middlewareRoute.fromAsset.symbol }</> : null }\n                                </div>\n                                :\n                                null\n                        }\n                        <div className=\"fee\">\n                            { bridgeFee ? <>Fee: { bridgeFee } { bridgeRoute.toAsset.symbol }</> : null }\n                        </div>\n                    </div>\n                </div>\n            </div>,\n        value: routePath\n    }))\n\n    const sendTx = (id, chainId, to, data, value = '0x00') => {\n        addRequest({\n            id,\n            chainId,\n            account: selectedAccount,\n            type: 'eth_sendTransaction',\n            txn: {\n                to,\n                data,\n                value\n            }\n        })\n    }\n\n    const onConfirm = async () => {\n        setLoading(true)\n\n        try {\n            const { allowanceTarget, isApprovalRequired, middlewareRoute, bridgeRoute, routePath } = routes.find(({ routePath }) => routePath === selectedRoute)\n\n            let fromAsset, inputAmount = null\n            if (middlewareRoute) {\n                fromAsset = middlewareRoute.fromAsset\n                inputAmount = middlewareRoute.inputAmount\n            } else {\n                fromAsset = bridgeRoute.fromAsset\n                inputAmount = bridgeRoute.inputAmount\n            }\n\n            const { toAsset, outputAmount } = bridgeRoute\n            \n            if (isApprovalRequired) {\n                const { to, data } = await approvalBuildTx(fromAsset.chainId, selectedAccount, allowanceTarget, fromAsset.address, inputAmount)\n                sendTx(`transfer_approval_crosschain_${Date.now()}`, fromAsset.chainId, to, data)\n            }\n\n            const { tx } = await sendBuildTx(selectedAccount, fromAsset.address, fromAsset.chainId, toAsset.address, toAsset.chainId, inputAmount, outputAmount, routePath)\n            sendTx(`transfer_send_crosschain_${Date.now()}`, fromAsset.chainId, tx.to, tx.data, tx.value.hex)\n\n            onCancel()\n        } catch(e) {\n            console.error(e);\n            addToast(e.message || e, { error: true })\n        }\n\n        setLoading(false)\n    }\n\n    return (\n        <div id=\"quotes\">\n            <div id=\"summary\">\n                <div className=\"path\">\n                    <div className=\"network\">\n                        <div className=\"icon\" style={{backgroundImage: `url(${fromNetwork.icon})`}}></div>\n                        <div className=\"name\">{ fromNetwork.name }</div>\n                    </div>\n                    <div className=\"token\">\n                        <div className=\"icon\" style={{backgroundImage: `url(${fromAsset.icon})`}}></div>\n                        <div className=\"name\">{ fromAsset.label }</div>\n                    </div>\n                </div>\n                <MdOutlineArrowForward/>\n                <div className=\"path\">\n                    <div className=\"network\">\n                        <div className=\"icon\" style={{backgroundImage: `url(${toNetwork.icon})`}}></div>\n                        <div className=\"name\">{ toNetwork.name }</div>\n                    </div>\n                    <div className=\"token\">\n                        <div className=\"icon\" style={{backgroundImage: `url(${toAsset.icon})`}}></div>\n                        <div className=\"name\">{ toAsset.name } ({ toAsset.symbol })</div>\n                    </div>\n                </div>\n            </div>\n\n            {\n                loading ?\n                    <Loading/>\n                    :\n                    <div id=\"routes\">\n                        <div className=\"title\">Routes</div>\n                        {\n                            !radios.length ?\n                                <div id=\"no-routes-placeholder\">\n                                    There is no routes available for this configuration at the moment.<br/>\n                                    Try increasing the amount or switching token.\n                                </div>\n                                :\n                                <Radios radios={radios} onChange={value => setSelectedRoute(value)}/>\n                        }\n                    </div>\n            }\n\n            <div className=\"separator\"></div>\n\n            <div id=\"buttons\">\n                <Button small clear icon={routes.length ? <MdOutlineClose/> : <MdOutlineArrowBack/>} disabled={loading} onClick={onCancel}>{ routes.length ? 'Cancel' : 'Go Back' }</Button>\n                { routes.length ? \n                    <Button small icon={<MdOutlineCheck/>} disabled={!selectedRoute || loading} onClick={onConfirm}>Confirm</Button>\n                : null }\n            </div>\n        </div>\n    )\n}\n\nexport default Quotes","import './CrossChain.scss'\n\nimport { BsArrowDown } from 'react-icons/bs'\n\nimport { useEffect, useState, useCallback, useMemo, useRef } from 'react'\nimport { ethers } from 'ethers'\nimport { parseUnits } from 'ethers/lib/utils'\nimport { NumberInput, Button, Select, Loading, NoFundsPlaceholder } from '../../common'\nimport { fetchChains, fetchFromTokens, fetchQuotes, fetchToTokens } from '../../../services/movr'\nimport networks from '../../../consts/networks'\nimport { useToasts } from '../../../hooks/toasts'\nimport Quotes from './Quotes/Quotes'\n\nconst CrossChain = ({ addRequest, selectedAccount, portfolio, network }) => {\n    const { addToast } = useToasts()\n\n    const [disabled, setDisabled] = useState(false)\n    const [loading, setLoading] = useState(true)\n    const [loadingFromTokens, setLoadingFromTokens] = useState(false)\n    const [loadingToTokens, setLoadingToTokens] = useState(false)\n    const [loadingQuotes, setLoadingQuotes] = useState(false)\n    \n    const [fromTokensItems, setFromTokenItems] = useState([])\n    const [fromToken, setFromToken] = useState(null)\n    const [amount, setAmount] = useState(0)\n    const [chainsItems, setChainsItems] = useState([])\n    const [toChain, setToChain] = useState(null)\n    const [toTokenItems, setToTokenItems] = useState([])\n    const [toToken, setToToken] = useState(null)\n    const [quotes, setQuotes] = useState(null)\n    const portfolioTokens = useRef([])\n    \n    const fromChain = useMemo(() => network.chainId, [network.chainId])\n    const formDisabled = !(fromToken && toToken && fromChain && toChain && amount > 0)\n    const hasNoFunds = !portfolio.balance.total.full\n    const getTokenFromPortofolio = useCallback(tokenAddress => portfolio.tokens\n        .map(token => ({\n            ...token,\n            address: Number(token.address) === 0 ? `0x${'e'.repeat(40)}` : token.address\n        }))\n        .find(({ address }) => address === tokenAddress), [portfolio.tokens])\n\n    const loadChains = useCallback(async () => {\n        try {\n            const chains = await fetchChains()\n            const isSupported = chains.find(({ chainId }) => chainId === fromChain)\n            setDisabled(!isSupported)\n            if (!isSupported) return \n\n            const chainsItems = chains\n                .filter(({ chainId }) => chainId !== fromChain && networks.map(({ chainId }) => chainId).includes(chainId))\n                .map(({ icon, chainId, name }) => ({\n                    icon,\n                    label: name,\n                    value: chainId\n                }))\n            setChainsItems(chainsItems)\n            setToChain(chainsItems[0].value)\n            return true\n        } catch(e) {\n            console.error(e);\n            addToast(`Error while loading chains: ${e.message || e}`, { error: true })\n            return false\n        }\n    }, [fromChain, addToast])\n\n    const loadFromTokens = useCallback(async () => {\n        if (!fromChain || !toChain) return\n\n        try {\n            const fromTokens = await fetchFromTokens(fromChain, toChain)\n            const filteredFromTokens = fromTokens.filter(({ name }) => name)\n            const uniqueFromTokenAddresses = [\n                ...new Set(fromTokens\n                    .filter(({ address }) => portfolioTokens.current\n                        .map(({ address }) => address)\n                        .map(address => Number(address) === 0 ? `0x${'e'.repeat(40)}` : address).includes(address))\n                    .map(({ address }) => address)\n                )\n            ]\n\n            const fromTokensItems = uniqueFromTokenAddresses\n                .map(address => filteredFromTokens.find(token => token.address === address))\n                .filter(token => token)\n                .map(({ icon, name, symbol, address }) => ({\n                    icon,\n                    label: `${name} (${symbol})`,\n                    value: address,\n                    symbol\n                }))\n            setFromTokenItems(fromTokensItems)\n            return true\n        } catch(e) {\n            console.error(e);\n            addToast(`Error while loading from tokens: ${e.message || e}`, { error: true })\n            return false\n        }\n    }, [fromChain, toChain, addToast])\n\n    const loadToTokens = useCallback(async () => {\n        if (!fromChain || !toChain) return\n\n        try {            \n            const toTokens = await fetchToTokens(fromChain, toChain)\n            const filteredToTokens = toTokens.filter(({ name }) => name)\n            const uniqueTokenAddresses = [...new Set(toTokens.map(({ address }) => address))]\n            const tokenItems = uniqueTokenAddresses\n                .map(address => filteredToTokens.find(token => token.address === address))\n                .filter(token => token)\n                .map(({ icon, name, symbol, address }) => ({\n                    icon,\n                    label: `${name} (${symbol})`,\n                    value: address,\n                    symbol\n                }))\n                .sort((a, b) => a.label.localeCompare(b.label))\n            setToTokenItems(tokenItems)\n            return true\n        } catch(e) {\n            console.error(e);\n            addToast(`Error while loading to tokens: ${e.message || e}`, { error: true })\n            return false\n        }\n    }, [fromChain, toChain, addToast])\n\n    const maxAmount = useMemo(() => {\n        try {\n            const portfolioToken = getTokenFromPortofolio(fromToken)\n            if (!portfolioToken) return 0\n            const { balanceRaw, decimals } = portfolioToken\n            return ethers.utils.formatUnits(balanceRaw, decimals)\n        } catch(e) {\n            console.error(e);\n            addToast(`Error while formating amount: ${e.message || e}`, { error: true })\n        }\n    }, [getTokenFromPortofolio, fromToken, addToast])\n\n    const getQuotes = async () => {\n        setLoadingQuotes(true)\n\n        try {\n            const portfolioToken = getTokenFromPortofolio(fromToken)\n            if (!portfolioToken) return\n            const { decimals } = portfolioToken\n            const flatAmount = parseUnits(amount, decimals).toString()\n            const quotes = await fetchQuotes(fromToken, fromChain, toToken, toChain, flatAmount, ['hyphen', 'anyswap-router-v4'])\n            setQuotes(quotes)\n        } catch(e) {\n            console.error(e);\n            addToast(`Error while loading quotes: ${e.message || e}`, { error: true })\n        }\n\n        setLoadingQuotes(false)\n    }\n\n    useEffect(() => setAmount(0), [fromToken])\n    useEffect(() => {\n        const fromTokenItem = fromTokensItems.find(({ value }) => value === fromToken)\n        if (!fromTokenItem) return\n        const equivalentToken = toTokenItems.find(({ symbol }) => symbol === fromTokenItem.symbol)\n        if (equivalentToken) setToToken(equivalentToken.value)\n    }, [fromTokensItems, toTokenItems, fromToken])\n\n    const asyncLoad = async (setStateLoading, loadCallback) => {\n        setStateLoading(true)\n        const loaded = await loadCallback()\n        setStateLoading(!loaded)\n    }\n\n    useEffect(() => {\n        if (!toChain) return\n        asyncLoad(setLoadingToTokens, loadToTokens)\n    }, [toChain, loadToTokens])\n\n    useEffect(() => {\n        if (!toChain) return\n        asyncLoad(setLoadingFromTokens, loadFromTokens)\n    }, [toChain, loadFromTokens])\n\n    useEffect(() => {\n        if (!fromChain || portfolio.isBalanceLoading) return\n        setQuotes(null)\n        asyncLoad(setLoading, loadChains)\n    }, [fromChain, portfolio.isBalanceLoading, loadChains])\n\n    useEffect(() => portfolioTokens.current = portfolio.tokens, [portfolio.tokens])\n\n    const amountLabel = <div className=\"amount-label\">Available Amount: <span>{ maxAmount }</span></div>\n\n    return (\n        <div id=\"cross-chain\">\n            <div className='panel'>\n                <div className=\"title\">\n                    Cross-chain transfers/swaps\n                    <div id=\"powered\">\n                        Powered by Movr\n                    </div>\n                </div>\n                {\n                    disabled ? \n                        <div className=\"placeholder\">Not supported on this Network</div>\n                        :\n                        loading || portfolio.isBalanceLoading ? \n                            <Loading/>\n                            :\n                            hasNoFunds ?\n                                <NoFundsPlaceholder/>\n                                :\n                                !loadingFromTokens && !loadingToTokens && !fromTokensItems.length ? \n                                    <div className=\"placeholder\">You don't have any available tokens to swap</div>\n                                    :\n                                    loadingQuotes ?\n                                            <Loading/>\n                                            :\n                                            quotes ?\n                                                <Quotes\n                                                    addRequest={addRequest}\n                                                    selectedAccount={selectedAccount}\n                                                    fromTokensItems={fromTokensItems}\n                                                    quotes={quotes}\n                                                    onCancel={() => setQuotes(null)}\n                                                />\n                                                :\n                                                <div className=\"form\">\n                                                    <label>From</label>\n                                                    <div className=\"inputs\">\n                                                        { loadingFromTokens ? <Loading/> : null }\n                                                        <Select searchable defaultValue={fromToken} items={fromTokensItems} onChange={value => setFromToken(value)}/>\n                                                        <NumberInput min=\"0\" label={amountLabel} value={amount} onInput={value => setAmount(value)} button=\"MAX\" onButtonClick={() => setAmount(maxAmount)}/>\n                                                    </div>\n                                                    <div className=\"separator\">\n                                                        <BsArrowDown/>\n                                                    </div>\n                                                    <label>To</label>\n                                                    <div className=\"inputs\">\n                                                        { loadingToTokens ? <Loading/> : null }\n                                                        <Select searchable defaultValue={toChain} items={chainsItems} onChange={value => setToChain(value)}/>\n                                                        <Select searchable defaultValue={toToken} items={toTokenItems} onChange={value => setToToken(value)}/>\n                                                    </div>\n                                                    <Button disabled={formDisabled} onClick={getQuotes}>Get Quotes</Button>\n                                                </div>\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default CrossChain\n","import \"./Wallet.scss\"\n\nimport { Switch, Route, Redirect, useLocation  } from \"react-router-dom\"\nimport Dashboard from \"./Dashboard/Dashboard\"\nimport TopBar from \"./TopBar/TopBar\"\nimport SideBar from \"./SideBar/SideBar\"\nimport Deposit from \"./Deposit/Deposit\"\nimport Swap from \"./Swap/Swap\"\nimport Transfer from \"./Transfer/Transfer\"\nimport Earn from \"./Earn/Earn\"\nimport Security from \"./Security/Security\"\nimport Transactions from './Transactions/Transactions'\nimport PluginGnosisSafeApps from '../Plugins/GnosisSafeApps/GnosisSafeApps'\nimport Collectible from \"./Collectible/Collectible\"\nimport { PermissionsModal } from '../Modals'\nimport { useModals, usePermissions } from '../../hooks'\nimport { useCallback, useEffect, useMemo, useRef } from 'react'\nimport { isFirefox } from '../../lib/isFirefox'\nimport CrossChain from \"./CrossChain/CrossChain\"\n\nexport default function Wallet(props) {\n  const { showModal } = useModals()\n  const { isClipboardGranted, isNoticationsGranted, arePermissionsLoaded, modalHidden } = usePermissions()\n  const { pathname } = useLocation()\n  const walletContainer = useRef()\n\n  const isLoggedIn = useMemo(() => props.accounts.length > 0, [props.accounts])\n\n  const routes = [\n    {\n      path: '/dashboard',\n      component: <Dashboard\n        portfolio={props.portfolio}\n        selectedNetwork={props.network}\n        selectedAccount={props.selectedAcc}\n        setNetwork={props.setNetwork}\n      />\n    },\n    {\n      path: '/deposit',\n      component: <Deposit selectedAcc={props.selectedAcc} selectedNetwork={props.network.id} />\n    },\n    {\n      path: '/transfer/:tokenAddressOrSymbol?',\n      component: <Transfer\n        portfolio={props.portfolio}\n        selectedAcc={props.selectedAcc}\n        selectedNetwork={{...props.network}}\n        addRequest={props.addRequest}\n        accounts={props.accounts}\n        addressBook={props.addressBook}\n      />\n    },\n    {\n      path: '/cross-chain',\n      component: <CrossChain\n        addRequest={props.addRequest}\n        selectedAccount={props.selectedAcc}\n        portfolio={props.portfolio}\n        network={props.network}\n      />\n    },\n    {\n      path: '/earn',\n      component: <Earn portfolio={props.portfolio} selectedNetwork={{ ...props.network }} selectedAcc={props.selectedAcc} addRequest={props.addRequest} />\n    },\n    {\n      path: '/security',\n      component: <Security\n        relayerURL={props.relayerURL}\n        selectedAcc={props.selectedAcc}\n        selectedNetwork={props.network}\n        accounts={props.accounts}\n        addRequest={props.addRequest}\n        showSendTxns={props.showSendTxns}\n        onAddAccount={props.onAddAccount}\n      />\n    },\n    {\n      path: '/transactions',\n      component: <Transactions relayerURL={props.relayerURL} selectedAcc={props.selectedAcc} selectedNetwork={props.network} addRequest={props.addRequest} eligibleRequests={props.eligibleRequests} showSendTxns={props.showSendTxns} />\n    },\n    {\n      path: '/swap',\n      component: <Swap\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    },\n    {\n      path: '/nft/:network/:collectionAddr/:tokenId',\n      component: <Collectible\n        selectedAcc={props.selectedAcc}\n        selectedNetwork={{...props.network}}\n        addRequest={props.addRequest}\n        accounts={props.accounts}\n        addressBook={props.addressBook}\n      />\n    },\n    {\n      path: '/gnosis/plugins',\n      component: <PluginGnosisSafeApps\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    }\n  ]\n\n  const LoggedInGuard = () => (\n    !isLoggedIn ? <Redirect to=\"/add-account\"/> : null\n  )\n\n  const handlePermissionsModal = useCallback(async () => {\n    const account = props.accounts.find(({ id }) => id === props.selectedAcc)\n    if (!account) return\n\n    const relayerIdentityURL = `${props.relayerURL}/identity/${account.id}`\n\n    const permissionsModal = <PermissionsModal relayerIdentityURL={relayerIdentityURL} account={account} onAddAccount={props.onAddAccount}/>\n    const areBlockedPermissions = arePermissionsLoaded\n      && ((!isFirefox() && !isClipboardGranted) || !isNoticationsGranted)\n    const showCauseOfPermissions = areBlockedPermissions && !modalHidden\n    const showCauseOfEmail = !!account.emailConfRequired\n    if (showCauseOfEmail || showCauseOfPermissions) showModal(permissionsModal, { disableClose: true })\n  }, [props.relayerURL, props.accounts, props.selectedAcc, props.onAddAccount, showModal, isClipboardGranted, isNoticationsGranted, arePermissionsLoaded, modalHidden])\n\n  useEffect(() => handlePermissionsModal(), [handlePermissionsModal])\n\n  useEffect(() => {\n    const scrollTimeout = setTimeout(() => walletContainer.current && walletContainer.current.scrollTo({ top: 0, behavior: 'smooth' }), 0)\n    return () => clearTimeout(scrollTimeout)\n  }, [pathname])\n\n  return (\n    <div id=\"wallet\">\n      <SideBar match={props.match} portfolio={props.portfolio} />\n      <TopBar {...props} />\n\n      <div id=\"wallet-container\" ref={walletContainer}>\n        <div id=\"wallet-container-inner\">\n          <Switch>\n            {\n              routes.map(({ path, component }) => (\n                <Route exact path={props.match.url + path} key={path}>\n                  <LoggedInGuard/>\n                  { component ? component : null }\n                </Route>\n              ))\n            }\n            <Route path={props.match.url + '/*'}>\n              <Redirect to={props.match.url + '/dashboard'} />\n            </Route>\n            <Route path={props.match.url}>\n              <LoggedInGuard/>\n            </Route>\n          </Switch>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport TrezorConnect from 'trezor-connect'\nimport { ethers } from 'ethers'\nimport HDNode from 'hdkey'\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerSignMessage, ledgerSignTransaction } from './ledgerWebHID'\n\nlet wallets = {}\n\n// opts\n// passphrase: string\n// noCache: boolean\nexport function getWallet({ signer, signerExtra, chainId }, opts = {}) {\n  const id = `${signer.address || signer.one}${chainId}`\n  if (wallets[id]) return wallets[id]\n  return wallets[id] = getWalletNew({ signer, signerExtra, chainId }, opts)\n}\n\nfunction getWalletNew({ chainId, signer, signerExtra }, opts) {\n  if (signerExtra && signerExtra.type === 'trezor') {\n    const providerTrezor = new TrezorSubprovider({\n      trezorConnectClientApi: TrezorConnect,\n      networkId: chainId\n    })\n    providerTrezor._initialDerivedKeyInfo = getInitialDerivedKeyInfo(signerExtra)\n    // for Trezor/ledger, alternatively we can shim using https://www.npmjs.com/package/web3-provider-engine and then wrap in Web3Provider\n    return {\n      signMessage: hash => providerTrezor.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n      signTransaction: params => providerTrezor.signTransactionAsync({ ...params, from: signer.address })\n    }\n  } else if (signerExtra && signerExtra.type === 'ledger') {\n    if (signerExtra.transportProtocol === 'webHID') {\n      return {\n        signMessage: hash => ledgerSignMessage(ethers.utils.hexlify(hash), signer.address),\n        signTransaction: params => ledgerSignTransaction(params, chainId)\n      }\n    } else {\n      const provider = new LedgerSubprovider({\n        networkId: chainId,\n        ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n        baseDerivationPath: signerExtra.info.baseDerivationPath\n      })\n      return {\n        signMessage: hash => provider.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n        signTransaction: params => provider.signTransactionAsync({ ...params, from: signer.address })\n      }\n    }\n  } else if (signer.address) {\n    if (!window.ethereum) throw new Error('No web3 support detected in your browser: if you created this account through MetaMask, please install it.')\n    // NOTE: for metamask, use `const provider = new ethers.providers.Web3Provider(window.ethereum)`\n    // 'any' is explained here: https://github.com/ethers-io/ethers.js/issues/1107\n    const provider = new ethers.providers.Web3Provider(window.ethereum, 'any')\n    return provider.getSigner(signer.address)\n  } else if (signer.one) {\n    throw new Error('getWallet not applicable for QuickAccounts: use primaryKeyBackup with the passphrase and /second-sig')\n  } else {\n    throw new Error('unknown signer type')\n  }\n}\n\nfunction getInitialDerivedKeyInfo(signerExtra) {\n  return {\n    hdKey: HDNode.fromExtendedKey(signerExtra.info.hdKey.xpub),\n    derivationPath: signerExtra.info.derivationPath,\n    baseDerivationPath: signerExtra.info.baseDerivationPath\n  }\n}\n","// It costs around 19k to send a token, if that token was interacted with before in the same transaction,\n// because of SLOAD costs - they depend on whether a slot has been read\n// however, it costs 30k if the token has not been interacted with\n// we may decrease it a bit and lean on the relayer failsafe values (cfg.gasAddedOnEstimate) later on\nconst ADDED_GAS_TOKEN = 30000\nconst ADDED_GAS_NATIVE = 12000\n\nexport function isTokenEligible (token, speed, estimation) {\n  if (!token) return false\n  const min = token.isStable ? estimation.feeInUSD[speed] : estimation.feeInNative[speed]\n  return parseInt(token.balance) / Math.pow(10, token.decimals) > min\n}\n\n// can't think of a less funny name for that\nexport function getFeePaymentConsequences (token, estimation) {\n  // Relayerless mode\n  if (!estimation.feeInUSD) return { multiplier: 1, addedGas: 0 }\n  // Relayer mode\n  const addedGas = !token.address || token.address === '0x0000000000000000000000000000000000000000'\n    ? ADDED_GAS_NATIVE\n    : ADDED_GAS_TOKEN\n  return {\n    // otherwise we get very long floating point numbers with trailing .999999\n    multiplier: parseFloat(((estimation.gasLimit + addedGas) / estimation.gasLimit).toFixed(4)),\n    addedGas\n  }\n}\n\nexport function mapTxnErrMsg(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Swap expired'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Swap will suffer slippage higher than your requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'Your signer address is not authorized.'\n  return msg\n}\n\nexport function getErrHint(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Try performing the swap again'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Try performing the swap again or increase your slippage requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'If you set a new signer for this account, try re-adding the account.'\n  return 'Sending this transaction batch will result in an error.'\n}\n","import { AiOutlineWarning } from 'react-icons/ai'\nimport { FiHelpCircle } from 'react-icons/fi'\nimport { Loading } from '../common'\nimport { isTokenEligible, getFeePaymentConsequences, mapTxnErrMsg, getErrHint } from './helpers'\n\nconst SPEEDS = ['slow', 'medium', 'fast', 'ape']\n\nexport function FeeSelector ({ disabled, signer, estimation, network, setEstimation, feeSpeed, setFeeSpeed }) {\n    if (!estimation) return (<Loading/>)\n  \n    // Only check for insufficient fee in relayer mode (.feeInUSD is available)\n    // Otherwise we don't care whether the user has enough for fees, their signer wallet will take care of it\n    const insufficientFee = estimation && estimation.feeInUSD\n      && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation)\n    if (estimation && !estimation.success) return (<FailingTxn\n      message={<>The current transaction batch cannot be sent because it will fail: {mapTxnErrMsg(estimation.message)}</>}\n      tooltip={getErrHint(estimation.message)}\n    />)\n  \n    if (!estimation.feeInNative) return (<></>)\n    if (estimation && !estimation.feeInUSD && estimation.gasLimit < 40000) {\n      return (<div>\n        <b>WARNING:</b> Fee estimation unavailable when you're doing your first account transaction and you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>, make sure you have {network.nativeAssetSymbol} there.\n      </div>)\n    }\n    if (estimation && estimation.feeInUSD && !estimation.remainingFeeTokenBalances) {\n      return (<h3 className='error'>Internal error: fee balances not available. This should never happen, please report this on help.ambire.com</h3>)\n    }\n  \n    const { nativeAssetSymbol } = network\n    const tokens = estimation.remainingFeeTokenBalances || [{ symbol: nativeAssetSymbol, decimals: 18 }]\n    const onFeeCurrencyChange = e => {\n      const token = tokens.find(({ symbol }) => symbol === e.target.value)\n      setEstimation({ ...estimation, selectedFeeToken: token })\n    }\n    const feeCurrencySelect = estimation.feeInUSD ? (<>\n      <span style={{ marginTop: '1em' }}>Fee currency</span>\n      <select disabled={disabled} value={estimation.selectedFeeToken.symbol} onChange={onFeeCurrencyChange}>\n        {tokens.map(token => \n          (<option\n            disabled={!isTokenEligible(token, feeSpeed, estimation)}\n            key={token.symbol}>\n              {token.symbol}\n            </option>\n          )\n        )}\n      </select>\n    </>) : (<></>)\n  \n    const areSelectorsDisabled = disabled || insufficientFee\n    const { isStable } = estimation.selectedFeeToken\n    const { multiplier } = getFeePaymentConsequences(estimation.selectedFeeToken, estimation)\n    const feeAmountSelectors = SPEEDS.map(speed => (\n      <div \n        key={speed}\n        className={`feeSquare${feeSpeed === speed ? ' selected' : ''}${areSelectorsDisabled ? ' disabled' : ''}`}\n        onClick={() => !areSelectorsDisabled && setFeeSpeed(speed)}\n      >\n        <div className='speed'>{speed}</div>\n        <div className='feeEstimation'>\n          {isStable\n            ? '$'+(estimation.feeInUSD[speed] * multiplier)\n            : (\n              nativeAssetSymbol === 'ETH' ?\n                'Ξ '+(estimation.feeInNative[speed] * multiplier)\n                : (estimation.feeInNative[speed] * multiplier)+' '+nativeAssetSymbol\n            )\n          }\n        </div>\n      </div>\n    ))\n  \n    return (<>\n      {insufficientFee ?\n        (<h3 className='error'>Insufficient balance for the fee. Accepted tokens: {(estimation.remainingFeeTokenBalances || []).map(x => x.symbol).join(', ')}</h3>)\n        : feeCurrencySelect\n      }\n      <div className='feeAmountSelectors'>\n        {feeAmountSelectors}\n      </div>\n      { // Visualize the fee once again with a USD estimation if in native currency\n      !isStable && (<div>\n        Fee: {(estimation.feeInNative[feeSpeed] * multiplier)+' '+nativeAssetSymbol}\n        &nbsp;(~ ${(estimation.feeInNative[feeSpeed] * multiplier * estimation.nativeAssetPriceInUSD).toFixed(2)})\n      </div>)}\n      {!estimation.feeInUSD ?\n        (<span><b>WARNING:</b> Paying fees in tokens other than {nativeAssetSymbol} is unavailable because you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>.</span>)\n        : (<></>)}\n    </>)\n}\n\nexport function FailingTxn ({ message, tooltip = '' }) {\n    return (<div className='failingTxn'>\n        <AiOutlineWarning></AiOutlineWarning>\n        <h3 className='error'>{message}</h3>\n        <FiHelpCircle title={tooltip}></FiHelpCircle>\n    </div>)\n}","import { useState, useRef, useEffect } from 'react'\nimport { Button, Loading, TextInput } from '../common'\nimport { isTokenEligible } from './helpers'\n\nexport default function Actions({ estimation, feeSpeed, approveTxn, rejectTxn, signingStatus }) {\n  const [quickAccCredentials, setQuickAccCredentials] = useState({ code: '', passphrase: '' })\n  // reset this every time the signing status changes\n  useEffect(() => !signingStatus && setQuickAccCredentials(prev => ({ ...prev, code: '' })), [signingStatus])\n\n  const form = useRef(null)\n\n  const rejectButton = rejectTxn && (\n    // WARNING: DO NOT remove type='button' here, it indicates that this button is not a submit button in the <form>\n    // if it is, pressing Enter will reject the transaction rather than submit it\n    <Button small danger type='button' className='rejectTxn' onClick={rejectTxn}>Reject</Button>\n  )\n  const insufficientFee = estimation && estimation.feeInUSD\n    && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation)\n  const willFail = (estimation && !estimation.success) || insufficientFee\n  if (willFail) {\n    return (<div className='buttons'>\n      {rejectButton}\n    </div>)\n  }\n\n  const signButtonLabel = signingStatus && signingStatus.inProgress ?\n    (<><Loading/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Signing...</>)\n    : (<>Sign and send</>)\n\n  const isRecoveryMode = signingStatus && signingStatus.finalBundle && signingStatus.finalBundle.recoveryMode\n  if (signingStatus && signingStatus.quickAcc) {\n    return (<>\n      <div>\n        {signingStatus.confCodeRequired === 'otp' ? (<b>Please enter your OTP code and your password.</b>) : (<></>)}\n        {signingStatus.confCodeRequired === 'email' ? (<b>A confirmation code was sent to your email, please enter it along with your password.</b>) : (<></>)}\n      </div>\n      {<TextInput\n        small\n        password\n        required\n        minLength={3}\n        placeholder='Password'\n        value={quickAccCredentials.passphrase}\n        style={isRecoveryMode ? { visibility: 'hidden' } : {} }\n        disabled={isRecoveryMode}\n        onChange={value => setQuickAccCredentials({ ...quickAccCredentials, passphrase: value })}\n      ></TextInput>}\n      <form ref={form} className='quickAccSigningForm' onSubmit={e => { e.preventDefault() }}>\n        {/* Changing the autoComplete prop to a random string seems to disable it in more cases */}\n        <TextInput\n          small\n          pattern='[0-9]+'\n          title='Confirmation code should be 6 digits'\n          autoComplete='nope'\n          required minLength={6} maxLength={6}\n          placeholder={signingStatus.confCodeRequired === 'otp' ? 'Authenticator code' : 'Confirmation code'}\n          value={quickAccCredentials.code}\n          onChange={value => setQuickAccCredentials({ ...quickAccCredentials, code: value })}\n        ></TextInput>\n        {rejectButton}\n        <Button small className='approveTxn'\n          onClick={() => {\n            if (!form.current.checkValidity()) return\n            approveTxn({ quickAccCredentials })\n          }}\n        >\n          {signButtonLabel}\n        </Button>\n      </form>\n    </>)\n  }\n\n  return (<div className='buttons'>\n      {rejectButton}\n      <Button small className='approveTxn' disabled={!estimation || signingStatus} onClick={approveTxn}>\n        {signButtonLabel}\n      </Button>\n  </div>)\n}\n","import { Interface, hexlify } from 'ethers/lib/utils'\nconst IdentityInterface = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\nconst FactoryInterface = new Interface(require('adex-protocol-eth/abi/IdentityFactory5.2'))\n\nexport async function sendNoRelayer ({ finalBundle, account, network, wallet, estimation, feeSpeed, provider }) {\n    const { signer } = finalBundle\n    // @TODO: in case we need deploying, run using deployAndCall pipeline with signed msgs\n    // @TODO: quickAccManager\n    if (signer.quickAccManager) throw new Error('quickAccManager not supported in relayerless mode yet')\n    // currently disabled quickAccManager cause 1) we don't have a means of getting the second sig 2) we still have to sign txes so it's inconvenient\n    // if (signer.quickAccManager) await finalBundle.sign(wallet)\n    //const [to, data] = signer.quickAccManager ? [signer.quickAccManager, QuickAccManagerInterface.encodeFunctionData('send', [finalBundle.identity, [signer.timelock, signer.one, signer.two], [false, finalBundle.signature, '0x']])] :\n\n    // NOTE: just adding values to gasLimit is bad because 1) they're hardcoded estimates\n    // and 2) the fee displayed in the UI does not reflect that\n    const isDeployed = await provider.getCode(finalBundle.identity).then(code => code !== '0x')\n    let gasLimit\n    let to, data\n    if (isDeployed) {\n      gasLimit = estimation.gasLimit + 20000\n      to = finalBundle.identity\n      data = IdentityInterface.encodeFunctionData('executeBySender', [finalBundle.txns])\n    } else {\n      await finalBundle.getNonce(provider)\n      // just some hardcoded value to make the signing pass\n      finalBundle.gasLimit = 400000\n      await finalBundle.sign(wallet)\n      to = account.identityFactoryAddr\n      data = FactoryInterface.encodeFunctionData('deployAndExecute', [account.bytecode, account.salt, finalBundle.txns, finalBundle.signature])\n      gasLimit = (await provider.estimateGas({ to, data, from: signer.address })).toNumber() + 20000\n    }\n\n    const txn = {\n      from: signer.address,\n      to, data,\n      gas: hexlify(gasLimit),\n      gasPrice: hexlify(Math.floor(estimation.feeInNative[feeSpeed] / estimation.gasLimit * 1e18)),\n      nonce: hexlify(await provider.getTransactionCount(signer.address))\n    }\n    try {\n      let txId\n      if (!wallet.sendTransaction) {\n        // HW wallets which only sign\n        const signed = await wallet.signTransaction(txn)\n        txId = (await provider.sendTransaction(signed)).hash\n      } else {\n        // web3 injectors which can't sign, but can sign+send\n        // they also don't like the gas arg they fully control the chain ID\n        const { chainId } = await wallet.provider.getNetwork()\n        if (network.chainId !== chainId) throw new Error(`Connected to the wrong network: please switch to ${network.name}`)\n        txId = (await wallet.sendTransaction({ from: txn.from, to: txn.to, data: txn.data, gasPrice: txn.gasPrice, nonce: txn.nonce })).hash\n      }\n      return { success: true, txId }\n    } catch(e) {\n      if (e.code === 'INSUFFICIENT_FUNDS') throw new Error(`Insufficient gas fees: you need to have ${network.nativeAssetSymbol} on ${signer.address}`)\n      throw e\n    }\n  }\n","//import { GrInspect } from 'react-icons/gr'\n// GiObservatory is also interesting\nimport { GiTakeMyMoney, GiSpectacles, GiGorilla } from 'react-icons/gi'\nimport { FaSignature, FaChevronLeft } from 'react-icons/fa'\nimport { MdOutlineAccountCircle } from 'react-icons/md'\nimport './SendTransaction.scss'\nimport { useEffect, useState, useMemo } from 'react'\nimport fetch from 'node-fetch'\nimport { Bundle } from 'adex-protocol-eth/js'\nimport { getDefaultProvider, Wallet } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport * as blockies from 'blockies-ts';\nimport { useToasts } from '../../hooks/toasts'\nimport { getWallet } from '../../lib/getWallet'\nimport accountPresets from '../../consts/accountPresets'\nimport { FeeSelector, FailingTxn } from './FeeSelector'\nimport Actions from './Actions'\nimport TxnPreview from '../common/TxnPreview/TxnPreview'\nimport { sendNoRelayer } from './noRelayer'\nimport { isTokenEligible, getFeePaymentConsequences } from './helpers'\nimport { fetchPost } from '../../lib/fetch'\nimport { toBundleTxn } from '../../lib/requestToBundleTxn'\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\n\nconst DEFAULT_SPEED = 'fast'\nconst REESTIMATE_INTERVAL = 15000\n\nconst REJECT_MSG = 'Ambire user rejected the request'\n\nfunction makeBundle(account, networkId, requests) {\n  const bundle = new Bundle({\n    network: networkId,\n    identity: account.id,\n    txns: requests.map(({ txn }) => toBundleTxn(txn, account.id)),\n    signer: account.signer\n  })\n  bundle.extraGas = requests.map(x => x.extraGas || 0).reduce((a, b) => a + b, 0)\n  bundle.requestIds = requests.map(x => x.id)\n  return bundle\n}\n\nexport default function SendTransaction({ relayerURL, accounts, network, selectedAcc, requests, resolveMany, replacementBundle, onBroadcastedTxn, onDismiss }) {\n  // NOTE: this can be refactored at a top level to only pass the selected account (full object)\n  // keeping it that way right now (selectedAcc, accounts) cause maybe we'll need the others at some point?\n  const account = accounts.find(x => x.id === selectedAcc)\n\n  // Also filtered in App.js, but better safe than sorry here\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account, txn }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n      && txn && (!txn.from || txn.from.toLowerCase() === selectedAcc.toLowerCase())\n    // we only need to update on change of IDs\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    ), [requests.map(x => x.id).join(','), network.chainId, selectedAcc])\n  const bundle = useMemo(\n    () => replacementBundle || makeBundle(account, network.id, eligibleRequests),\n    [replacementBundle, network.id, account, eligibleRequests]\n  )\n\n  if (!account || !bundle.txns.length) return (<div id='sendTransaction'>\n      <h3 className='error'>SendTransactions: No account or no requests: should never happen.</h3>\n  </div>)\n  return (<SendTransactionWithBundle\n      relayerURL={relayerURL}\n      bundle={bundle}\n      network={network}\n      account={account}\n      resolveMany={resolveMany}\n      onBroadcastedTxn={onBroadcastedTxn}\n      onDismiss={onDismiss}\n  />)\n}\n\nfunction SendTransactionWithBundle ({ bundle, network, account, resolveMany, relayerURL, onBroadcastedTxn, onDismiss }) {\n  const [estimation, setEstimation] = useState(null)\n  const [signingStatus, setSigningStatus] = useState(false)\n  const [feeSpeed, setFeeSpeed] = useState(DEFAULT_SPEED)\n  const { addToast } = useToasts()\n  useEffect(() => {\n    if (!bundle.txns.length) return\n    setEstimation(null)\n  }, [bundle, setEstimation])\n\n  // Estimate the bundle & reestimate periodically\n  useEffect(() => {    // eslint-disable-next-line react-hooks/exhaustive-deps\n    if (!bundle.txns.length) return\n\n    let unmounted = false\n\n    // get latest estimation\n    const reestimate = () => (relayerURL\n      ? bundle.estimate({ relayerURL, fetch, replacing: !!bundle.minFeeInUSDPerGas })\n      : bundle.estimateNoRelayer({ provider: getDefaultProvider(network.rpc) })\n    )\n      .then(estimation => {\n        if (unmounted) return\n        estimation.selectedFeeToken = { symbol: network.nativeAssetSymbol }\n        setEstimation(prevEstimation => {\n          if (estimation.remainingFeeTokenBalances) {\n            // If there's no eligible token, set it to the first one cause it looks more user friendly (it's the preferred one, usually a stablecoin)\n            estimation.selectedFeeToken = (\n                prevEstimation\n                && isTokenEligible(prevEstimation.selectedFeeToken, feeSpeed, estimation)\n                && prevEstimation.selectedFeeToken\n              ) || estimation.remainingFeeTokenBalances.find(token => isTokenEligible(token, feeSpeed, estimation))\n              || estimation.remainingFeeTokenBalances[0]\n          }\n          return estimation\n        })\n      })\n      .catch(e => {\n        if (unmounted) return\n        console.log('estimation error', e)\n        addToast(`Estimation error: ${e.message || e}`, { error: true })\n      })\n\n    reestimate()\n    const intvl = setInterval(reestimate, REESTIMATE_INTERVAL)\n\n    return () => {\n      unmounted = true\n      clearInterval(intvl)\n    }\n  }, [bundle, setEstimation, feeSpeed, addToast, network, relayerURL])\n\n  const getFinalBundle = () => {\n    if (!relayerURL) {\n      return new Bundle({\n        ...bundle,\n        gasLimit: estimation.gasLimit\n        // set nonce here when we implement \"replace current pending transaction\"\n      })\n    }\n\n    const feeToken = estimation.selectedFeeToken\n    const { addedGas, multiplier } = getFeePaymentConsequences(feeToken, estimation)\n    const toHexAmount = amnt => '0x'+Math.round(amnt).toString(16)\n    const feeTxn = feeToken.symbol === network.nativeAssetSymbol\n      ? [accountPresets.feeCollector, toHexAmount(estimation.feeInNative[feeSpeed]*multiplier*1e18), '0x']\n      : [feeToken.address, '0x0', ERC20.encodeFunctionData('transfer', [\n        accountPresets.feeCollector,\n        toHexAmount(\n          (feeToken.isStable ? estimation.feeInUSD[feeSpeed] : estimation.feeInNative[feeSpeed])\n          * multiplier\n          * Math.pow(10, feeToken.decimals)\n        )\n    ])]\n    return new Bundle({\n      ...bundle,\n      txns: [...bundle.txns, feeTxn],\n      gasLimit: estimation.gasLimit + addedGas + (bundle.extraGas || 0)\n    })\n  }\n\n  const approveTxnImpl = async () => {\n    if (!estimation) throw new Error('no estimation: should never happen')\n\n    const finalBundle = getFinalBundle()\n    const provider = getDefaultProvider(network.rpc)\n    const signer = finalBundle.signer\n\n    const wallet = getWallet({\n      signer,\n      signerExtra: account.signerExtra,\n      chainId: network.chainId\n    })\n\n    if (relayerURL) {\n      // Temporary way of debugging the fee cost\n      // const initialLimit = finalBundle.gasLimit - getFeePaymentConsequences(estimation.selectedFeeToken, estimation).addedGas\n      // finalBundle.estimate({ relayerURL, fetch }).then(estimation => console.log('fee costs: ', estimation.gasLimit - initialLimit), estimation.selectedFeeToken).catch(console.error)\n      if (typeof finalBundle.nonce !== 'number') await finalBundle.getNonce(provider)\n      await finalBundle.sign(wallet)\n      return await finalBundle.submit({ relayerURL, fetch })\n    } else {\n      return await sendNoRelayer({\n        finalBundle, account, network, wallet, estimation, feeSpeed, provider\n      })\n    }\n  }\n\n  const approveTxnImplQuickAcc = async ({ quickAccCredentials }) => {\n    if (!estimation) throw new Error('no estimation: should never happen')\n    if (!relayerURL) throw new Error('Email/Password account signing without the relayer is not supported yet')\n\n    const finalBundle = (signingStatus && signingStatus.finalBundle) || getFinalBundle()\n    const signer = finalBundle.signer\n\n    if (typeof finalBundle.nonce !== 'number') {\n      await finalBundle.getNonce(getDefaultProvider(network.rpc))\n    }\n\n    const { signature, success, message, confCodeRequired } = await fetchPost(\n      `${relayerURL}/second-key/${bundle.identity}/${network.id}/sign`, {\n        signer, txns: finalBundle.txns, nonce: finalBundle.nonce, gasLimit: finalBundle.gasLimit,\n        code: quickAccCredentials && quickAccCredentials.code,\n        // This can be a boolean but it can also contain the new signer/primaryKeyBackup, which instructs /second-key to update acc upon successful signature\n        recoveryMode: finalBundle.recoveryMode\n      }\n    )\n    if (!success) {\n      if (!message) throw new Error(`Secondary key: no success but no error message`)\n      if (message.includes('invalid confirmation code')) {\n        addToast('Unable to sign: wrong confirmation code', { error: true })\n        return\n      }\n      throw new Error(`Secondary key error: ${message}`)\n    }\n    if (confCodeRequired) {\n      setSigningStatus({ quickAcc: true, finalBundle, confCodeRequired })\n    } else {\n      if (!signature) throw new Error(`QuickAcc internal error: there should be a signature`)\n      if (!account.primaryKeyBackup) throw new Error(`No key backup found: you need to import the account from JSON or login again.`)\n      setSigningStatus({ quickAcc: true, inProgress: true })\n      if (!finalBundle.recoveryMode) {\n        // Make sure we let React re-render without blocking (decrypting and signing will block)\n        await new Promise(resolve => setTimeout(resolve, 0))\n        const pwd = quickAccCredentials.passphrase || alert('Enter password')\n        const wallet = await Wallet.fromEncryptedJson(JSON.parse(account.primaryKeyBackup), pwd)\n        await finalBundle.sign(wallet)\n      } else {\n        // set both .signature and .signatureTwo to the same value: the secondary signature\n        // this will trigger a timelocked txn\n        finalBundle.signature = signature\n      }\n      finalBundle.signatureTwo = signature\n      return await finalBundle.submit({ relayerURL, fetch })\n    }\n  }\n\n  const approveTxn = ({ quickAccCredentials }) => {\n    if (signingStatus && signingStatus.inProgress) return\n    setSigningStatus(signingStatus || { inProgress: true })\n\n    if (account.signerExtra && account.signerExtra.type === 'ledger') {\n      addToast('Please confirm this transaction on your Ledger device.', { timeout: 10000 })\n    }\n\n    const requestIds = bundle.requestIds\n    const approveTxnPromise = bundle.signer.quickAccManager ?\n      approveTxnImplQuickAcc({ quickAccCredentials })\n      : approveTxnImpl()\n    approveTxnPromise.then(bundleResult => {\n      // special case for approveTxnImplQuickAcc\n      if (!bundleResult) return\n\n      // be careful not to call this after onDimiss, cause it might cause state to be changed post-unmount\n      setSigningStatus(null)\n\n      // Inform everything that's waiting for the results (eg WalletConnect)\n      const skipResolve = !bundleResult.success && bundleResult.message && bundleResult.message.match(/underpriced/i)\n      if (!skipResolve && requestIds) resolveMany(requestIds, { success: bundleResult.success, result: bundleResult.txId, message: bundleResult.message })\n\n      if (bundleResult.success) {\n        onBroadcastedTxn(bundleResult.txId)\n        onDismiss()\n      } else addToast(`Transaction error: ${bundleResult.message || 'unspecified error'}`, { error: true })\n    })\n    .catch(e => {\n      setSigningStatus(null)\n      console.error(e)\n      if (e && e.message.includes('must provide an Ethereum address')) {\n        addToast(`Signing error: not connected with the correct address. Make sure you're connected with ${bundle.signer.address}.`, { error: true })\n      } else if (e && e.message.includes('0x6b0c')) {\n        // not sure if that's actually the case with this hellish error, but after unlocking the device it no longer appeared\n        // however, it stopped appearing after that even if the device is locked, so I'm not sure it's related...\n        addToast(`Ledger: unknown error (0x6b0c): is your Ledger unlocked and in the Ethereum application?`, { error: true })\n      } else {\n        console.log(e.message)\n        addToast(`Signing error: ${e.message || e}`, { error: true })\n      }\n    })\n  }\n\n  // Not applicable when .requestIds is not defined (replacement bundle)\n  const rejectTxn = bundle.requestIds && (() => {\n    onDismiss()\n    resolveMany(bundle.requestIds, { message: REJECT_MSG })\n  })\n\n  return (<div id='sendTransaction'>\n      <div id=\"titleBar\">\n        <div className='dismiss' onClick={onDismiss}>\n          <FaChevronLeft size={35}/><span>back</span>\n        </div>\n        <h2>Pending transactions: {bundle.txns.length}</h2>\n        <div className=\"separator\"></div>\n      </div>\n      <div className='container'>\n        <div id='topPanel' className='panel'>\n          <div className='title'>\n            <MdOutlineAccountCircle/>\n            Signing with account:\n          </div>\n          <div className=\"content\">\n            <div className='account'>\n              <img className='icon' src={blockies.create({ seed: account.id }).toDataURL()} alt='Account Icon'/>\n              { account.id }\n            </div>\n            on\n            <div className='network'>\n              <img className='icon' src={network.icon} alt='Network Icon'/>\n              { network.name }\n            </div>\n          </div>\n        </div>\n        <div id='panelHolder'>\n          <div className='panel'>\n              <div className='heading'>\n                      <div className='title'>\n                          <GiSpectacles size={35}/>\n                          Transaction summary\n                      </div>\n              </div>\n              <div className=\"content\">\n                <div className={`listOfTransactions${bundle.requestIds ? '' : ' frozen'}`}>\n                    {bundle.txns.map((txn, i) => {\n                      const isFirstFailing = estimation && !estimation.success && estimation.firstFailing === i\n                      // we need to re-render twice per minute cause of DEX deadlines\n                      const min = Math.floor(Date.now() / 30000)\n                      return (<TxnPreview\n                        key={[...txn, i].join(':')}\n                        // pasing an unused property to make it update\n                        minute={min}\n                        onDismiss={bundle.requestIds && (() => resolveMany([bundle.requestIds[i]], { message: REJECT_MSG }))}\n                        txn={txn} network={bundle.network} account={bundle.identity}\n                        isFirstFailing={isFirstFailing}/>\n                      )\n                    })}\n                </div>\n                <div className='transactionsNote'>\n                  {bundle.requestIds ? (<>\n                    <b><GiGorilla size={16}/> DEGEN TIP:</b> You can sign multiple transactions at once. Add more transactions to this batch by interacting with a connected dApp right now.\n                  </>) : (<><b>NOTE:</b> You are currently replacing a pending transaction.</>)}\n                </div>\n              </div>\n          </div>\n          <div className='secondaryPanel'>\n              <div className='panel feePanel'>\n                  <div className='heading'>\n                          <div className='title'>\n                              <GiTakeMyMoney size={35}/>\n                              Fee\n                          </div>\n                          <FeeSelector\n                            disabled={signingStatus && signingStatus.finalBundle && !(estimation && !estimation.success)}\n                            signer={bundle.signer}\n                            estimation={estimation}\n                            setEstimation={setEstimation}\n                            network={network}\n                            feeSpeed={feeSpeed}\n                            setFeeSpeed={setFeeSpeed}\n                          ></FeeSelector>\n                  </div>\n              </div>\n              <div className='panel actions'>\n                  <div className='heading'>\n                      <div className='title'>\n                          <FaSignature size={35}/>\n                          Sign\n                      </div>\n                  </div>\n                  {(bundle.signer.quickAccManager && !relayerURL) ? (\n                    <FailingTxn message='Signing transactions with an email/password account without being connected to the relayer is unsupported.'></FailingTxn>\n                  ) : (\n                      <Actions\n                        estimation={estimation}\n                        approveTxn={approveTxn}\n                        rejectTxn={rejectTxn}\n                        signingStatus={signingStatus}\n                        feeSpeed={feeSpeed}\n                      />\n                  )}\n              </div>\n          </div>\n        </div>\n      </div>\n  </div>)\n}\n","import './SignMessage.scss'\nimport { FaSignature } from 'react-icons/fa'\nimport { MdOutlineAccountCircle } from 'react-icons/md'\nimport { Wallet } from 'ethers'\nimport { toUtf8String, keccak256, arrayify, isHexString } from 'ethers/lib/utils'\nimport { signMsgHash } from 'adex-protocol-eth/js/Bundle'\nimport * as blockies from 'blockies-ts';\nimport { getWallet } from '../../lib/getWallet'\nimport { useToasts } from '../../hooks/toasts'\nimport { fetchPost } from '../../lib/fetch'\nimport { useState } from 'react'\nimport { Button, Loading, TextInput } from '../common'\n\nexport default function SignMessage ({ toSign, resolve, account, relayerURL, totalRequests }) {\n  const defaultState = () => ({ codeRequired: false, passphrase: '' })\n  const { addToast } = useToasts()\n  const [signingState, setSigningState] = useState(defaultState())\n  const [isLoading, setLoading] = useState(false)\n\n  if (!toSign || !account) return (<></>)\n  if (toSign && !isHexString(toSign.txn)) return (<div id='signMessage'>\n    <h3 className='error'>Invalid signing request: .txn has to be a hex string</h3>\n    <Button className='reject' onClick={() => resolve({ message: 'signature denied' })}>Reject</Button>\n  </div>)\n\n  const handleSigningErr = e => {\n    console.error('Signing error', e)\n    if (e && e.message.includes('must provide an Ethereum address')) {\n      addToast(`Signing error: not connected with the correct address. Make sure you're connected with ${account.signer.address}.`, { error: true })\n    } else {\n      addToast(`Signing error: ${e.message || e}`, { error: true })\n    }\n  }\n  const approveQuickAcc = async confirmationCode => {\n    if (!relayerURL) {\n      addToast('Email/pass accounts not supported without a relayer connection', { error: true })\n      return\n    }\n    if (!signingState.passphrase) {\n      addToast('Password required to unlock the account', { error: true })\n      return\n    }\n    setLoading(true)\n    try {\n      const hash = keccak256(arrayify(toSign.txn))\n\n      const { signature, success, message, confCodeRequired } = await fetchPost(\n        // network doesn't matter when signing\n        `${relayerURL}/second-key/${account.id}/ethereum/sign`, {\n          toSign: hash,\n          code: confirmationCode\n        }\n      )\n      if (!success) {\n        if (!message) throw new Error(`Secondary key: no success but no error message`)\n        if (message.includes('invalid confirmation code')) {\n          addToast('Unable to sign: wrong confirmation code', { error: true })\n        }\n        addToast(`Second signature error: ${message}`, { error: true })\n        return\n      }\n      if (confCodeRequired) {\n        const confCode = prompt('A confirmation code has been sent to your email, it is valid for 3 minutes. Please enter it here:')\n        if (!confCode) throw new Error('You must enter a confirmation code')\n        await approveQuickAcc(confCode)\n        return\n      }\n\n      if (!account.primaryKeyBackup) throw new Error(`No key backup found: you need to import the account from JSON or login again.`)\n      const wallet = await Wallet.fromEncryptedJson(JSON.parse(account.primaryKeyBackup), signingState.passphrase)\n      const sig = await signMsgHash(wallet, account.id, account.signer, arrayify(hash), signature)\n      resolve({ success: true, result: sig })\n      addToast(`Successfully signed!`)\n    } catch(e) { handleSigningErr(e) }\n    setLoading(false)\n  }\n\n  const approve = async () => {\n    if (account.signer.quickAccManager) {\n      await approveQuickAcc()\n      return\n    }\n\n    setLoading(true)\n    try {\n      // if quick account, wallet = await fromEncryptedBackup\n      // and just pass the signature as secondSig to signMsgHash\n      const wallet = getWallet({\n        signer: account.signer,\n        signerExtra: account.signerExtra,\n        chainId: 1 // does not matter\n      })\n      // It would be great if we could pass the full data cause then web3 wallets/hw wallets can display the full text\n      // Unfortunately that isn't possible, because isValidSignature only takes a bytes32 hash; so to sign this with\n      // a personal message, we need to be signing the hash itself as binary data such that we match 'Ethereum signed message:\\n32<hash binary data>' on the contract\n      const hash = keccak256(arrayify(toSign.txn)) // hacky equivalent is: id(toUtf8String(toSign.txn)) \n      const sig = await signMsgHash(wallet, account.id, account.signer, arrayify(hash))\n      resolve({ success: true, result: sig })\n      addToast(`Successfully signed!`)\n    } catch(e) { handleSigningErr(e) }\n    setLoading(false)\n  }\n\n  return (<div id='signMessage'>\n    <div id='signingAccount' className='panel'>\n      <div className='title'>\n        <MdOutlineAccountCircle/>\n        Signing with account\n      </div>\n      <div className=\"content\">\n        <img className='icon' src={blockies.create({ seed: account.id }).toDataURL()} alt='Account Icon'/>\n        { account.id }\n      </div>\n    </div>\n    <div className='panel'>\n        <div className='heading'>\n            <div className='title'>\n                <FaSignature size={35}/>\n                Sign message\n            </div>\n            <div style={{ marginTop: 20 }}>\n              <b>A dApp is requesting your signature.</b>{totalRequests > 1 ? ` You have ${totalRequests - 1} more pending requests.` : ''}\n            </div>\n        </div>\n\n        <textarea\n          className='message'\n          type='text'\n          value={getMessageAsText(toSign.txn)}\n          readOnly={true}\n        />\n\n        <div className='actions'>\n          <form onSubmit={e => { e.preventDefault() }}>\n            {account.signer.quickAccManager && (<>\n              <TextInput\n                password\n                required minLength={3}\n                placeholder='Account password'\n                value={signingState.passphrase}\n                onChange={value => setSigningState({ ...signingState, passphrase: value })}\n              ></TextInput>\n            </>)}\n\n            <div className=\"buttons\">\n              <Button className='reject' onClick={() => resolve({ message: 'signature denied' })}>Reject</Button>\n              <Button className='approve' onClick={approve} disabled={isLoading}>\n                  {isLoading ? (<><Loading/>&nbsp;&nbsp;&nbsp;&nbsp;Signing...</>)\n                  : (<>Sign</>)}\n              </Button>\n            </div>\n          </form>\n        </div>\n    </div>\n  </div>)\n}\n\nfunction getMessageAsText(msg) {\n  try { return toUtf8String(msg) }\n  catch(_) { return msg }\n}","import {\n  getSDKVersion,\n  MessageFormatter,\n  Methods\n} from '@gnosis.pm/safe-apps-sdk'\n\nfunction GnosisConnector(_iframeRef, _app) {\n  this.iframeRef = _iframeRef\n  this.app = _app\n  this.handlers = {}\n\n  this.on = (method, handler) => {\n    this.handlers[method] = handler\n  }\n\n  this.isValidMessage = (msg) => {\n    // @ts-expect-error .parent doesn't exist on some possible types\n    if (!msg?.source?.parent) {\n      return false\n    }\n    const sentFromIframe = msg.source.parent === window.parent\n    const knownMethod = Object.values(Methods).includes(msg.data.method)\n\n    return sentFromIframe && knownMethod\n  }\n\n  this.canHandleMessage = (msg) => {\n    return Boolean(this.handlers[msg.data.method])\n  }\n\n  this.send = (data, requestId, error) => {\n    const sdkVersion = getSDKVersion()\n    const msg = error\n      ? MessageFormatter.makeErrorResponse(requestId, error, sdkVersion)\n      : MessageFormatter.makeResponse(requestId, data, sdkVersion)\n\n    if (this.iframeRef) {\n      //console.log(\"Posting to child\")\n      //console.log(msg)\n      this.iframeRef.current?.contentWindow?.postMessage(msg, '*')\n    } else {\n      console.log('Iframe not referenced ')\n    }\n  }\n\n  this.handleIncomingMessage = async (msg) => {\n\n    const validMessage = this.isValidMessage(msg)\n    const hasHandler = this.canHandleMessage(msg)\n\n    if (validMessage && hasHandler) {\n      const handler = this.handlers[msg.data.method]\n      try {\n        // @ts-expect-error Handler existence is checked in this.canHandleMessage\n        const response = await handler(msg)\n\n        // If response is not returned, it means the response will be send somewhere else\n        if (typeof response !== 'undefined') {\n          this.send(response, msg.data.id)\n        }\n      } catch (err) {\n        console.error(\"GS : \" + err);\n        this.send(err.message, msg.data.id, true)\n        /*trackError(Errors._901, err.message, {\n          contexts: {\n            safeApp: this.app,\n            request: msg.data,\n          },\n        })*/\n      }\n    }\n  }\n\n  this.clear = () => {\n    //console.log('removeListener...')\n    window.removeEventListener('message', this.handleIncomingMessage)\n  }\n\n  console.log('new appCommunicator')\n  window.addEventListener('message', this.handleIncomingMessage)\n}\n\nexport {GnosisConnector}\n","export default __webpack_public_path__ + \"static/media/icon.946ee983.png\";","import { useCallback, useRef, useEffect } from 'react'\nimport { getTransactionSummary } from '../lib/humanReadableTransactions'\nimport { BigNumber, getDefaultProvider } from 'ethers'\nimport { formatUnits } from 'ethers/lib/utils'\nimport { useToasts } from './toasts'\nimport networks from '../consts/networks'\nimport AMBIRE_ICON from '../resources/icon.png'\n\nconst REQUEST_TITLE_PREFIX = 'Ambire Wallet: '\nconst SUPPORTED_TYPES =  ['eth_sendTransaction', 'personal_sign']\nconst BALANCE_TRESHOLD = 1.00002\nlet currentNotifs = []\nlet isLastTotalBalanceInit = false\nlet lastTokensBalanceRaw = []\n\nconst getAmountReceived = (lastToken, newBalanceRaw, decimals) => {\n    try {\n        const amountRecieved = lastToken\n            ? (BigNumber.from(newBalanceRaw.toString(10)).sub(BigNumber.from(lastToken.balanceRaw.toString(10))))\n            : newBalanceRaw\n        return formatUnits(amountRecieved, decimals)\n    } catch(e) {\n        console.error('Notifications: ' + e);\n    }\n}\n\nexport default function useNotifications (requests, onShow, portfolio, selectedAcc, network, sentTxn, confirmSentTx) {\n    const { addToast } = useToasts()\n    const onShowRef = useRef({})\n    onShowRef.current.onShow = onShow\n\n    useEffect(() => {\n        // hack because for whatever reason it doesn't work when we access the ref directly\n        window.onClickNotif = req => onShowRef.current.onShow(req)\n    }, [])\n    \n    const showNotification = useCallback(({ id, title, body, requireInteraction, request }) => {\n        const notification = new Notification(title, {\n            requireInteraction: requireInteraction || false,\n            body,\n            icon: AMBIRE_ICON,\n        })\n        //notification.onclose = \n        notification.onclick = () => {\n            if (request && request.type === 'eth_sendTransaction') window.onClickNotif(request)\n            window.focus()\n            notification.close()\n        }\n        currentNotifs.push({ id, notification })\n    }, [])\n\n    requests.forEach(request => {\n        // only requests we actually want a notification for\n        if (!request.notification) return\n        if (!SUPPORTED_TYPES.includes(request.type)) return\n        if (currentNotifs.find(n => n.id === request.id)) return\n        if (!request.txn) return\n        const isSign = request.type === 'personal_sign'\n        const network = networks.find(x => x.chainId === request.chainId)\n        const title = REQUEST_TITLE_PREFIX+(\n            isSign\n                ? 'you have a new message to sign'\n                : `new transaction request on ${network ? network.name : 'unknown network'}`\n        )\n        const body = isSign ? 'Click to preview' : getTransactionSummary([request.txn.to, request.txn.value, request.txn.data], request.chainId, request.account)\n        showNotification({\n            id: request.id,\n            title,\n            body,\n            request,\n            requireInteraction: true\n        })\n    })\n\n    useEffect(() => {\n        try {\n            if (!portfolio.isBalanceLoading && portfolio.balance) {\n                if (!isLastTotalBalanceInit) {\n                    isLastTotalBalanceInit = true\n                    lastTokensBalanceRaw = portfolio.tokens.map(({ address, balanceRaw }) => ({ address, balanceRaw }))\n                }\n\n                const changedAmounts = portfolio.tokens.filter(({ address, balanceRaw }) => {\n                    const lastToken = lastTokensBalanceRaw.find(token => token.address === address)\n                    const isSignificantChange = lastToken && ((balanceRaw / lastToken.balanceRaw) > BALANCE_TRESHOLD)\n                    return !lastToken || isSignificantChange\n                })\n\n                changedAmounts.forEach(({ address, symbol, decimals, balanceRaw }) => {\n                    const lastToken = lastTokensBalanceRaw.find(token => token.address === address)\n                    const amountRecieved = getAmountReceived(lastToken, balanceRaw, decimals)\n\n                    showNotification({\n                        id: `received_amount_${Date.now()}`,\n                        title: `${amountRecieved} ${symbol} Received.`,\n                        body: `Your ${symbol} balance increased by ${amountRecieved} ${symbol}`\n                    })\n\n                    lastToken ? lastTokensBalanceRaw = [\n                        ...lastTokensBalanceRaw.filter(token => token.address !== address),\n                        { address, balanceRaw }\n                    ] : lastTokensBalanceRaw.push({ address, balanceRaw })\n                })\n            }\n        } catch(e) {\n            console.error(e)\n            addToast(e.message | e, { error: true })\n        }\n    }, [portfolio, addToast, showNotification])\n\n    useEffect(() => {\n        const interval = network.id === 'ethereum' ? 30000 : 10000\n        const txStatusInterval = setInterval(() => {\n            sentTxn\n                .filter(({ confirmed }) => !confirmed)\n                .forEach(async ({ hash }) => {\n                    const provider = getDefaultProvider(network.rpc)\n                    try {\n                        const txReceipt = await provider.getTransactionReceipt(hash)\n                        if (!txReceipt) return\n\n                        confirmSentTx(hash)\n                        showNotification({\n                            id: `confirmed_tx_${Date.now()}`,\n                            title: `Ambire Transaction Confirmed`,\n                            body: `Your transaction was successfully confirmed!`\n                        })\n                    } catch(e) {\n                        console.error(e);\n                    }\n                })\n        }, interval)\n        return () => clearInterval(txStatusInterval)\n    }, [sentTxn, network, showNotification, confirmSentTx])\n\n    useEffect(() => {\n        isLastTotalBalanceInit = false\n        lastTokensBalanceRaw = []\n    }, [selectedAcc, network])\n\n    currentNotifs = currentNotifs.filter(({ id, notification }) => {\n        if (!requests.find(r => r.id === id)) {\n            notification.close()\n            return false\n        }\n        return true\n    })\n  }\n  \n","import { useEffect, useCallback, useMemo, useState } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport { useHistory } from 'react-router'\n\nexport const useOneTimeQueryParam = searchParam => {\n    const { search } = useLocation()\n    const history = useHistory()\n    const urlSearchParams = useMemo(() => new URLSearchParams(search), [search])\n    const [oneTimeQueryParam, setOneTimeQueryParam] = useState(urlSearchParams.get(searchParam))\n    const altParams = useMemo(() => new URLSearchParams(window.location.href.split('?').slice(1).join('?').split('#')[0]), [])\n\n    const deleteOneTimeQueryParam = useCallback(() => {\n        if (urlSearchParams.has(searchParam)) {\n            urlSearchParams.delete(searchParam)\n            history.replace({\n                search: urlSearchParams.toString(),\n            })\n        }\n    }, [history, urlSearchParams, searchParam])\n\n    useEffect(() => {\n        if (urlSearchParams && urlSearchParams.get(searchParam)) setOneTimeQueryParam(urlSearchParams.get(searchParam))\n        else if (altParams.get(searchParam)) setOneTimeQueryParam(altParams.get(searchParam))\n        deleteOneTimeQueryParam()\n    }, [deleteOneTimeQueryParam, urlSearchParams, altParams, searchParam])\n    \n    return oneTimeQueryParam\n}\n","import './App.scss'\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n  Prompt\n} from 'react-router-dom'\nimport { useState, useEffect, useMemo, useCallback } from 'react'\nimport EmailLogin from './components/EmailLogin/EmailLogin'\nimport AddAccount from './components/AddAccount/AddAccount'\nimport Wallet from './components/Wallet/Wallet'\nimport ToastProvider from './components/ToastProvider/ToastProvider'\nimport ModalProvider from './components/ModalProvider/ModalProvider'\nimport SendTransaction from './components/SendTransaction/SendTransaction'\nimport SignMessage from './components/SignMessage/SignMessage'\nimport useAccounts from './hooks/accounts'\nimport useNetwork from './hooks/network'\nimport useWalletConnect from './hooks/walletconnect'\nimport useGnosisSafe from './hooks/useGnosisSafe'\nimport useNotifications from './hooks/notifications'\nimport { useAttentionGrabber, usePortfolio, useAddressBook, useRelayerData } from './hooks'\nimport { useToasts } from './hooks/toasts'\nimport { useOneTimeQueryParam } from './hooks/oneTimeQueryParam'\n\nconst relayerURL = process.env.hasOwnProperty('REACT_APP_RELAYER_URL') ? process.env.REACT_APP_RELAYER_URL : 'http://localhost:1934'\n\nsetTimeout(() => {\n  //console.warn('☢️ If you do, malicious code could steal your funds! ☢️')\n  //console.error('Only use the console if you are an experienced developer who knows what he\\'s doing')\n  console.log(\" ✋ Hey...! Slow down you ambitious adventurer! You want to keep your funds safe! 🦄\")\n  console.error('       💀 DO NOT PASTE ANY CODE HERE ! 💀')\n  console.error(' _          ___   ___  _  _   ___  ___  ___         _')\n  console.error('| |        |   \\\\ /   \\\\| \\\\| | / __|| __|| _ \\\\       | |')\n  console.error('|_|        | |) || - || .  || (_ || _| |   /       |_|')\n  console.error('(_)        |___/ |_|_||_|\\\\_| \\\\___||___||_|_\\\\       (_)')\n  console.log('At Ambire, we care about our users 💜. Safety is our top priority! DO NOT PASTE ANYTHING HERE or it could result in the LOSS OF YOUR FUNDS!')\n}, 4000);\n\nfunction AppInner () {\n  // basic stuff: currently selected account, all accounts, currently selected network\n  const { accounts, selectedAcc, onSelectAcc, onAddAccount, onRemoveAccount } = useAccounts()\n  const addressBook = useAddressBook({ accounts })\n  const { network, setNetwork, allNetworks } = useNetwork()\n  const { addToast } = useToasts()\n  const wcUri = useOneTimeQueryParam('uri')\n  \n  // Signing requests: transactions/signed msgs: all requests are pushed into .requests\n  const { connections, connect, disconnect, requests: wcRequests, resolveMany: wcResolveMany } = useWalletConnect({\n    account: selectedAcc,\n    chainId: network.chainId,\n    initialUri: wcUri\n  })\n  \n  const { requests: gnosisRequests, resolveMany: gnosisResolveMany, connect: gnosisConnect, disconnect: gnosisDisconnect } = useGnosisSafe({\n\t  selectedAccount: selectedAcc,\n\t  network: network\n\t}, [selectedAcc, network])\n\n  // Internal requests: eg from the Transfer page, Security page, etc. - requests originating in the wallet UI itself\n  // unlike WalletConnect or SafeSDK requests, those do not need to be persisted\n  const [internalRequests, setInternalRequests] = useState([])\n  const addRequest = req => setInternalRequests(reqs => [...reqs, req])\n\n  // Merge all requests\n  const requests = useMemo(\n    () => [...internalRequests, ...wcRequests, ...gnosisRequests]\n      .filter(({ account }) => accounts.find(({ id }) => id === account)),\n    [wcRequests, internalRequests, gnosisRequests, accounts]\n  )\n  const resolveMany = (ids, resolution) => {\n    wcResolveMany(ids, resolution)\n    gnosisResolveMany(ids, resolution)\n    setInternalRequests(reqs => reqs.filter(x => !ids.includes(x.id)))\n  }\n\n  // Portfolio: this hook actively updates the balances/assets of the currently selected user\n  const portfolio = usePortfolio({\n    currentNetwork: network.id,\n    account: selectedAcc\n  })\n\n  // Show the send transaction full-screen modal if we have a new txn\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n    ), [requests, network.chainId, selectedAcc])\n  const [sendTxnState, setSendTxnState] = useState(() => ({ showing: !!eligibleRequests.length }))\n  useEffect(\n    () => setSendTxnState({ showing: !!eligibleRequests.length }),\n    [eligibleRequests.length]\n  )\n  const showSendTxns = bundle => setSendTxnState({ showing: true, replacementBundle: bundle })\n\n  // Network shouldn't matter here\n  const everythingToSign = useMemo(() => requests\n    .filter(({ type, account }) => (type === 'personal_sign' || type === 'eth_sign')\n      && account === selectedAcc\n    ), [requests, selectedAcc])\n\n  // When the user presses back, we first hide the SendTransactions dialog (keeping the queue)\n  // Then, signature requests will need to be dismissed one by one, starting with the oldest\n  const onPopHistory = () => {\n    if (sendTxnState.showing) {\n      setSendTxnState({ showing: false })\n      return false\n    }\n    if (everythingToSign.length) {\n      resolveMany([everythingToSign[0].id], { message: 'Ambire user rejected the signature request' })\n      return false\n    }\n    return true\n  }\n\n  // Keeping track of transactions\n  const [sentTxn, setSentTxn] = useState([])\n  const onBroadcastedTxn = hash => {\n    setSentTxn(sentTxn => [...sentTxn, { confirmed: false, hash }])\n    addToast((\n      <span>Transaction signed and sent successfully!\n        &nbsp;Click to view on block explorer.\n      </span>\n    ), { url: network.explorerUrl+'/tx/'+hash, timeout: 15000 })\n  }\n  const confirmSentTx = txHash => setSentTxn(sentTxn => {\n    const tx = sentTxn.find(tx => tx.hash === txHash)\n    tx.confirmed = true\n    return [\n      ...sentTxn.filter(tx => tx.hash !== txHash),\n      tx\n    ]\n  })\n\n  // Show notifications for all requests\n  useNotifications(requests, request => {\n    onSelectAcc(request.account)\n    setNetwork(request.chainId)\n    setSendTxnState(state => ({ ...state, showing: true }))\n  }, portfolio, selectedAcc, network, sentTxn, confirmSentTx)\n\n  useAttentionGrabber({\n    eligibleRequests,\n    isSendTxnShowing: sendTxnState.showing,\n    onSitckyClick: useCallback(() => setSendTxnState({ showing: true }), [])\n  })\n\n  const [cacheBreak, setCacheBreak] = useState(() => Date.now())\n  useEffect(() => {\n    if ((Date.now() - cacheBreak) > 5000) setCacheBreak(Date.now())\n    const intvl = setTimeout(() => setCacheBreak(Date.now()), 30000)\n    return () => clearTimeout(intvl)\n  }, [cacheBreak])\n  const rewardsUrl = (relayerURL && selectedAcc) ? `${relayerURL}/wallet-token/rewards/${selectedAcc}?cacheBreak=${cacheBreak}` : null\n  const rewardsData = useRelayerData(rewardsUrl)\n\n  return (<>\n    <Prompt\n      message={(location, action) => {\n        if (action === 'POP') return onPopHistory()\n        return true\n    }}/>\n\n    {!!everythingToSign.length && (<SignMessage\n      selectedAcc={selectedAcc}\n      account={accounts.find(x => x.id === selectedAcc)}\n      toSign={everythingToSign[0]}\n      totalRequests={everythingToSign.length}\n      relayerURL={relayerURL}\n      resolve={outcome => resolveMany([everythingToSign[0].id], outcome)}\n    ></SignMessage>)}\n\n    {sendTxnState.showing ? (\n      <SendTransaction\n          accounts={accounts}\n          selectedAcc={selectedAcc}\n          network={network}\n          requests={eligibleRequests}\n          resolveMany={resolveMany}\n          relayerURL={relayerURL}\n          onDismiss={() => setSendTxnState({ showing: false })}\n          replacementBundle={sendTxnState.replacementBundle}\n          onBroadcastedTxn={onBroadcastedTxn}\n      ></SendTransaction>\n      ) : (<></>)\n    }\n\n    <Switch>\n      <Route path=\"/add-account\">\n        <AddAccount relayerURL={relayerURL} onAddAccount={onAddAccount}></AddAccount>\n      </Route>\n\n      <Route path=\"/email-login\">\n        <EmailLogin relayerURL={relayerURL} onAddAccount={onAddAccount}></EmailLogin>\n      </Route>\n\n      <Route path=\"/wallet\">\n        <Wallet\n          match={{ url: \"/wallet\" }}\n          accounts={accounts}\n          selectedAcc={selectedAcc}\n          addressBook={addressBook}\n          portfolio={portfolio}\n          onSelectAcc={onSelectAcc}\n          onRemoveAccount={onRemoveAccount}\n          allNetworks={allNetworks}\n          network={network}\n          setNetwork={setNetwork}\n          addRequest={addRequest}\n          connections={connections}\n          // needed by the top bar to disconnect/connect dapps\n          connect={connect}\n          disconnect={disconnect}\n          // needed by the gnosis plugins\n          gnosisConnect={gnosisConnect}\n          gnosisDisconnect={gnosisDisconnect}\n          // required for the security and transactions pages\n          relayerURL={relayerURL}\n          // required by the transactions page\n          eligibleRequests={eligibleRequests}\n          showSendTxns={showSendTxns}\n          onAddAccount={onAddAccount}\n          rewardsData={rewardsData}\n        >\n        </Wallet>\n      </Route>\n\n      <Route path=\"/\">\n        <Redirect to={selectedAcc ? \"/wallet/dashboard\" : \"/add-account\" }/>\n      </Route>\n\n    </Switch>\n  </>)\n}\n\n// handles all the providers so that we can use provider hooks inside of AppInner\nexport default function App() {\n  return (\n    <ToastProvider>\n      <ModalProvider>\n        <Router>\n          <AppInner/>\n        </Router>\n      </ModalProvider>\n    </ToastProvider>\n  )\n}\n","import { useState, useCallback } from 'react'\nimport { useToasts } from '../hooks/toasts'\nimport { useHistory } from 'react-router-dom'\n\nexport default function useAccounts () {\n    const { addToast } = useToasts()\n    const history = useHistory()\n\n    const [accounts, setAccounts] = useState(() => {\n      try {\n        const accs = JSON.parse(localStorage.accounts || '[]')\n        if (!Array.isArray(accs)) throw new Error('accounts: incorrect format')\n        return accs\n      } catch (e) {\n        console.error('accounts parsing failure', e)\n        return []\n      }\n    })\n    const [selectedAcc, setSelectedAcc] = useState(() => {\n      const initialSelectedAcc = localStorage.selectedAcc\n      if (!initialSelectedAcc || !accounts.find(x => x.id === initialSelectedAcc)) {\n        return accounts[0] ? accounts[0].id : ''\n      }\n      return initialSelectedAcc\n    })\n  \n    const onSelectAcc = useCallback(selected => {\n      localStorage.selectedAcc = selected\n      setSelectedAcc(selected)\n    }, [setSelectedAcc])\n    const onAddAccount = useCallback((acc, opts = {}) => {\n      if (!(acc.id && acc.signer)) throw new Error('account: internal err: missing ID or signer')\n\n      const existing = accounts.find(x => x.id.toLowerCase() === acc.id.toLowerCase())\n      if (existing) {\n        addToast(JSON.stringify(existing) === JSON.stringify(acc) ? 'Account already added' : 'Account updated')\n      } else if (opts.isNew) {\n        // @TODO consider something more explanatory such as \"using Trezor as a signer\", or \"this is different from your signer address\"\n        addToast(`New Ambire account created: ${acc.id}${acc.signer.address ? '. This is a fresh smart wallet address.' : ''}`, { timeout: acc.signer.address ? 15000 : 10000 })\n      }\n\n      const existingIdx = accounts.indexOf(existing)\n        if (existingIdx === -1) accounts.push(acc)\n      else accounts[existingIdx] = acc\n  \n      // need to make a copy, otherwise no rerender\n      setAccounts([ ...accounts ])\n  \n      localStorage.accounts = JSON.stringify(accounts)\n  \n      if (opts.select) onSelectAcc(acc.id)\n      if (Object.keys(accounts).length) {\n        history.push('/wallet/dashboard')\n      }\n    }, [accounts, addToast, onSelectAcc, history])\n  \n    const onRemoveAccount = useCallback(id => {\n      if (!id) throw new Error('account: internal err: missing ID/Address')\n\n      const clearedAccounts = accounts.filter(account => account.id !== id)\n      setAccounts([...clearedAccounts])\n      localStorage.accounts = JSON.stringify(clearedAccounts)\n      \n      if (!clearedAccounts.length) history.push('/add-account')\n      else onSelectAcc(clearedAccounts[0].id)\n    }, [accounts, history, onSelectAcc])\n\n    return { accounts, selectedAcc, onSelectAcc, onAddAccount, onRemoveAccount }\n  }\n","import { useState, useCallback } from 'react'\nimport networks from '../consts/networks'\n\nexport default function useNetwork ({ defaultNetwork = 'ethereum' } = {}) {\n    const [networkId, setNetworkId] = useState(() =>\n        networks.find(n => n.id === localStorage.network) ? localStorage.network : defaultNetwork\n    )\n    const setNetwork = useCallback(networkIdentifier => {\n        const network = networks.find(n => n.id === networkIdentifier || n.name === networkIdentifier || n.chainId === networkIdentifier)\n        if (!network) throw new Error(`no network found: ${networkIdentifier}`)\n        localStorage.network = network.id\n        setNetworkId(network.id)\n    }, [setNetworkId])\n\n    return {\n        setNetwork,\n        network: networks.find(n => n.id === networkId),\n        allNetworks: networks\n    }\n}","import {useCallback, useEffect, useState, useRef, useMemo} from 'react'\nimport {useToasts} from '../hooks/toasts'\n\nimport {Methods} from '@gnosis.pm/safe-apps-sdk'\nimport {GnosisConnector} from '../lib/GnosisConnector'\nimport {getDefaultProvider} from 'ethers'\n\nconst STORAGE_KEY = 'gnosis_safe_state'\n\nexport default function useGnosisSafe({selectedAccount, network, verbose = 0}) {\n  // One connector at a time\n  const connector = useRef(null)\n\n  const uniqueId = useMemo(() => new Date().getTime() + ' ' + network.chainId + ' ' + selectedAccount, [selectedAccount, network])\n\n  const {addToast} = useToasts()\n\n  // This is needed cause of the Gnosis Safe event handlers (listeners)\n  const stateRef = useRef()\n  stateRef.current = {\n    selectedAccount,\n    network\n  }\n\n  const [requests, setRequests] = useState(() => {\n    const json = localStorage[STORAGE_KEY]\n    if (!json) return []\n    try {\n      const parsed = JSON.parse(json)\n      return Array.isArray(parsed) ? parsed : []\n    } catch (e) {\n      console.error(e)\n      return []\n    }\n  })\n\n  const connect = useCallback(connectorOpts => {\n    verbose > 1 && console.log(\"GS: creating connector\")\n\n    try {\n      connector.current = new GnosisConnector(\n        connectorOpts.iframeRef,\n        connectorOpts.app,\n        uniqueId\n      )\n    } catch (e) {\n      addToast(`Unable to connect to ${connectorOpts.app.url}: ${e.message}`)\n      return null\n    }\n\n    // reply back to iframe with safe data\n    connector.current.on(Methods.getSafeInfo, () => {\n      return {\n        safeAddress: stateRef.current.selectedAccount,\n        network: stateRef.current.network.id,\n        chainId: stateRef.current.network.chainId,\n        owners: [stateRef.current.selectedAccount],\n        threshold: 1, //Number of confirmations (not used in ambire)\n      }\n    })\n\n    //reply back to iframe with safe data\n\n    // connector.current.on(Methods.getSafeBalances, async (msg) => {\n    //   verbose>0 && console.log(\"DApp requested getSafeBalances\") && console.log(msg)\n\n    //TODO later\n    //await portfolio.updatePortfolio(\"polygon\", selectedAccount, true)//not this because it does NOT return the updated state anyway\n    //console.log(portfolio)\n\n    //struct template\n    /*connector.current.on(Methods.getSafeBalances, () => {\n      return {\n        \"fiatTotal\": \"0.18072\",\n          \"items\": [\n          {\n            \"tokenInfo\": {\n              \"type\": \"NATIVE_TOKEN\",\n              \"address\": \"0x0000000000000000000000000000000000000000\",\n              \"decimals\": 18,\n              \"symbol\": \"MATIC\",\n              \"name\": \"Matic\",\n              \"logoUri\": \"https://safe-transaction-assets.staging.gnosisdev.com/chains/137/currency_logo.png\"\n            },\n            \"balance\": \"100000000000000000\",\n            \"fiatBalance\": \"0.18072\",\n            \"fiatConversion\": \"1.8072\"\n          }\n        ]\n      }\n     })*/\n\n    connector.current.on(Methods.rpcCall, async (msg) => {\n      verbose > 0 && console.log(\"DApp requested rpcCall\", msg)\n\n      if (!msg?.data?.params) {\n        throw new Error(\"invalid call object\")\n      }\n      const method = msg.data.params.call//0 == tx, 1 == blockNum\n      const callTx = msg.data.params.params//0 == tx, 1 == blockNum\n\n      const provider = getDefaultProvider(stateRef.current.network.rpc)\n      let result\n      if (method === \"eth_call\") {\n        result = await provider.call(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getBalance\") {\n        result = await provider.getBalance(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_blockNumber\") {\n        result = await provider.getBlockNumber().catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getBlockByNumber\" || method === \"eth_getBlockByHash\") {\n        if (callTx[1]) {\n          result = await provider.getBlockWithTransactions(callTx[0]).catch(err => {\n            throw err\n          })\n        } else {\n          result = await provider.getBlock(callTx[0]).catch(err => {\n            throw err\n          })\n        }\n      } else if (method === \"eth_getTransactionByHash\") {\n        result = await provider.getTransaction(callTx[0]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getCode\") {\n        result = await provider.getCode(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getBlockByNumber\") {\n        result = await provider.getBlock(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getTransactionReceipt\") {\n        result = await provider.getTransactionReceipt(callTx[0]).catch(err => {\n          throw err\n        })\n      } else if (method === \"personal_sign\") {\n        result = await handlePersonalSign(msg).catch(err => {\n          throw err\n        })\n      } else {\n        throw new Error(\"method not supported \" + method)\n      }\n      return result\n    })\n\n    connector.current.on(Methods.sendTransactions, (msg) => {\n      verbose > 0 && console.log(\"DApp requested sendTx\") && console.log(msg)\n\n      const data = msg?.data\n      if (!data) {\n        console.error('GS: no data')\n        return\n      }\n\n      const id = 'gs_' + data.id\n      const txs = data?.params?.txs\n      if (txs?.length) {\n        for (let i in txs) {\n          if (!txs[i].from) txs[i].from = stateRef.current.selectedAccount\n        }\n      } else {\n        console.error('GS: no txs in received payload')\n        return\n      }\n\n      const request = {\n        id,\n        forwardId: msg.data.id,\n        type: 'eth_sendTransaction',\n        txn: txs[0], //if anyone finds a dapp that sends a bundle, please reach me out\n        chainId: stateRef.current.network.chainId,\n        account: stateRef.current.selectedAccount\n      }\n\n      setRequests(prevRequests => prevRequests.find(x => x.id === request.id) ? prevRequests : [...prevRequests, request])\n    })\n\n    const handlePersonalSign = (msg) => {\n      verbose > 0 && console.log(\"DApp requested signMessage\") && console.log(msg)\n\n      console.log(msg);\n\n      const data = msg?.data\n      if (!data) {\n        console.error('GS: no data')\n        return\n      }\n\n      const id = 'gs_' + data.id\n      const message = data?.params?.message\n      if (!message) {\n        console.error('GS: no message in received payload')\n        return\n      }\n\n      const request = {\n        id,\n        forwardId: msg.data.id,\n        type: 'personal_sign',\n        txn: message,\n        chainId: stateRef.current.network.chainId,\n        account: stateRef.current.selectedAccount\n      }\n\n      setRequests(prevRequests => prevRequests.find(x => x.id === request.id) ? prevRequests : [...prevRequests, request])\n    }\n\n    connector.current.on(Methods.signMessage, (msg) => {\n        return handlePersonalSign(msg)\n    })\n\n    connector.current.on(Methods.getTxBySafeTxHash, async (msg) => {\n      const {safeTxHash} = msg.data.params\n      const provider = getDefaultProvider(stateRef.current.network.rpc)\n      try {\n        const res = await provider.getTransaction(safeTxHash)\n\n        return res\n      } catch (e) {\n        console.error(\"GS: Err getting transaction \" + safeTxHash)\n        console.log(e)\n        return {}\n      }\n    })\n  }, [uniqueId, addToast, verbose])\n\n\n  const disconnect = useCallback(() => {\n    verbose > 1 && console.log(\"GS: disconnecting connector\")\n    connector.current?.clear()\n  }, [verbose])\n\n  const resolveMany = (ids, resolution) => {\n    for (let req of requests.filter(x => ids.includes(x.id))) {\n      const replyData = {\n        id: req.forwardId,\n        success: null,\n        txId: null,\n        error: null\n      }\n      if (!resolution) {\n        replyData.error = 'Nothing to resolve'\n        replyData.success = false\n      } else if (!resolution.success) {\n        replyData.error = resolution.message\n        replyData.success = false\n      } else { //onSuccess\n        replyData.success = true\n        replyData.txId = resolution.result\n        replyData.safeTxHash = resolution.result\n      }\n      if (!connector.current) {\n        //soft error handling: sendTransaction has issues\n        //throw new Error(\"gnosis safe connector not set\")\n        console.error('gnosis safe connector not set')\n      } else {\n        connector.current.send(replyData, req.forwardId, replyData.error)\n      }\n    }\n\n    setRequests(prevRequests => prevRequests.filter(x => !ids.includes(x.id)))\n  }\n\n  // Side effects that will run on every state change/rerender\n  useEffect(() => {\n    localStorage[STORAGE_KEY] = JSON.stringify(requests)\n  }, [requests, selectedAccount, network])\n\n  return {\n    requests,\n    resolveMany,\n    connect,\n    disconnect\n  }\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}